(function(){
shadow$provide[609]=function(qa,S,Ra,F){function p(r,B,A){var a,G={},t=null,k=null;void 0!==A&&(t=""+A);void 0!==B.key&&(t=""+B.key);void 0!==B.ref&&(k=B.ref);for(a in B)q.call(B,a)&&!c.hasOwnProperty(a)&&(G[a]=B[a]);if(r&&r.defaultProps)for(a in B=r.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:R,type:r,key:t,ref:k,props:G,_owner:z.current}}S(13);qa=S(16);var R=60103;F.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(S=Symbol.for,R=S("react.element"),F.Fragment=S("react.fragment"));
var z=qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};F.jsx=p;F.jsxs=p};
shadow$provide[611]=function(qa,S,Ra,F){Ra.exports=S(609)};
shadow$provide[612]=function(qa,S,Ra,F){function p(qc){for(var Fd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+qc,xd=1;xd<arguments.length;xd++)Fd+="\x26args[]\x3d"+encodeURIComponent(arguments[xd]);return"Minified React error #"+qc+"; visit "+Fd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(qc){if(null==qc)return null;if("function"===typeof qc)return qc.displayName||qc.name||null;if("string"===typeof qc)return qc;
switch(qc){case K:return"Fragment";case U:return"Portal";case D:return"Profiler";case O:return"StrictMode";case Z:return"Suspense";case I:return"SuspenseList"}if("object"===typeof qc)switch(qc.$$typeof){case P:return(qc.displayName||"Context")+".Consumer";case N:return(qc._context.displayName||"Context")+".Provider";case aa:var Fd=qc.render;Fd=Fd.displayName||Fd.name||"";return qc.displayName||(""!==Fd?"ForwardRef("+Fd+")":"ForwardRef");case ha:return R(qc.type);case ca:return R(qc._render);case M:Fd=
qc._payload;qc=qc._init;try{return R(qc(Fd))}catch(xd){}}return null}function z(qc,Fd){for(var xd=qc._threadCount|0;xd<=Fd;xd++)qc[xd]=qc._currentValue2,qc._threadCount=xd+1}function q(qc,Fd,xd,Zd){if(Zd&&(Zd=qc.contextType,"object"===typeof Zd&&null!==Zd))return z(Zd,xd),Zd[xd];if(qc=qc.contextTypes){xd={};for(var vd in qc)xd[vd]=Fd[vd];Fd=xd}else Fd=ya;return Fd}function c(qc){if(Ea.call(Xa,qc))return!0;if(Ea.call(Oa,qc))return!1;if(Ua.test(qc))return Xa[qc]=!0;Oa[qc]=!0;return!1}function r(qc,
Fd,xd,Zd){if(null!==xd&&0===xd.type)return!1;switch(typeof Fd){case "function":case "symbol":return!0;case "boolean":if(Zd)return!1;if(null!==xd)return!xd.acceptsBooleans;qc=qc.toLowerCase().slice(0,5);return"data-"!==qc&&"aria-"!==qc;default:return!1}}function B(qc,Fd,xd,Zd){if(null===Fd||"undefined"===typeof Fd||r(qc,Fd,xd,Zd))return!0;if(Zd)return!1;if(null!==xd)switch(xd.type){case 3:return!Fd;case 4:return!1===Fd;case 5:return isNaN(Fd);case 6:return isNaN(Fd)||1>Fd}return!1}function A(qc,Fd,
xd,Zd,vd,Ld,od){this.acceptsBooleans=2===Fd||3===Fd||4===Fd;this.attributeName=Zd;this.attributeNamespace=vd;this.mustUseProperty=xd;this.propertyName=qc;this.type=Fd;this.sanitizeURL=Ld;this.removeEmptyString=od}function a(qc){return qc[1].toUpperCase()}function G(qc){if("boolean"===typeof qc||"number"===typeof qc)return""+qc;qc=""+qc;var Fd=fb.exec(qc);if(Fd){var xd="",Zd,vd=0;for(Zd=Fd.index;Zd<qc.length;Zd++){switch(qc.charCodeAt(Zd)){case 34:Fd="\x26quot;";break;case 38:Fd="\x26amp;";break;case 39:Fd=
"\x26#x27;";break;case 60:Fd="\x26lt;";break;case 62:Fd="\x26gt;";break;default:continue}vd!==Zd&&(xd+=qc.substring(vd,Zd));vd=Zd+1;xd+=Fd}qc=vd!==Zd?xd+qc.substring(vd,Zd):xd}return qc}function t(qc,Fd){var xd=Ma.hasOwnProperty(qc)?Ma[qc]:null,Zd;if(Zd="style"!==qc)Zd=null!==xd?0===xd.type:!(2<qc.length)||"o"!==qc[0]&&"O"!==qc[0]||"n"!==qc[1]&&"N"!==qc[1]?!1:!0;if(Zd||B(qc,Fd,xd,!1))return"";if(null!==xd){qc=xd.attributeName;Zd=xd.type;if(3===Zd||4===Zd&&!0===Fd)return qc+'\x3d""';xd.sanitizeURL&&
(Fd=""+Fd);return qc+'\x3d"'+(G(Fd)+'"')}return c(qc)?qc+'\x3d"'+(G(Fd)+'"'):""}function k(qc,Fd){return qc===Fd&&(0!==qc||1/qc===1/Fd)||qc!==qc&&Fd!==Fd}function h(){if(null===oa)throw Error(p(321));return oa}function f(){if(0<Ab)throw Error(p(312));return{memoizedState:null,queue:null,next:null}}function u(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(qc,Fd,xd,Zd){for(;Ja;)Ja=!1,Ab+=1,sa=null,xd=qc(Fd,Zd);H();
return xd}function H(){oa=null;Ja=!1;Ca=null;Ab=0;sa=Ta=null}function y(qc,Fd){return"function"===typeof Fd?Fd(qc):Fd}function w(qc,Fd,xd){oa=h();sa=u();if(Aa){var Zd=sa.queue;Fd=Zd.dispatch;if(null!==Ta&&(xd=Ta.get(Zd),void 0!==xd)){Ta.delete(Zd);Zd=sa.memoizedState;do Zd=qc(Zd,xd.action),xd=xd.next;while(null!==xd);sa.memoizedState=Zd;return[Zd,Fd]}return[sa.memoizedState,Fd]}qc=qc===y?"function"===typeof Fd?Fd():Fd:void 0!==xd?xd(Fd):Fd;sa.memoizedState=qc;qc=sa.queue={last:null,dispatch:null};
qc=qc.dispatch=n.bind(null,oa,qc);return[sa.memoizedState,qc]}function v(qc,Fd){oa=h();sa=u();Fd=void 0===Fd?null:Fd;if(null!==sa){var xd=sa.memoizedState;if(null!==xd&&null!==Fd){var Zd=xd[1];a:if(null===Zd)Zd=!1;else{for(var vd=0;vd<Zd.length&&vd<Fd.length;vd++)if(!Na(Fd[vd],Zd[vd])){Zd=!1;break a}Zd=!0}if(Zd)return xd[0]}}qc=qc();sa.memoizedState=[qc,Fd];return qc}function n(qc,Fd,xd){if(!(25>Ab))throw Error(p(301));if(qc===oa)if(Ja=!0,qc={action:xd,next:null},null===Ta&&(Ta=new Map),xd=Ta.get(Fd),
void 0===xd)Ta.set(Fd,qc);else{for(Fd=xd;null!==Fd.next;)Fd=Fd.next;Fd.next=qc}}function T(){}function ja(qc){switch(qc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(qc){if(void 0===qc||null===qc)return qc;var Fd="";E.Children.forEach(qc,function(xd){null!=xd&&(Fd+=xd)});return Fd}function ma(qc,Fd){if(void 0===qc)throw Error(p(152,R(Fd)||"Component"));}function X(qc,Fd,xd){function Zd(od,
Xd){var Nb=Xd.prototype&&Xd.prototype.isReactComponent,ec=q(Xd,Fd,xd,Nb),Xb=[],pb=!1,lb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Xb)return null},enqueueReplaceState:function(te,td){pb=!0;Xb=[td]},enqueueSetState:function(te,td){if(null===Xb)return null;Xb.push(td)}};if(Nb){if(Nb=new Xd(od.props,ec,lb),"function"===typeof Xd.getDerivedStateFromProps){var ac=Xd.getDerivedStateFromProps.call(null,od.props,Nb.state);null!=ac&&(Nb.state=ba({},Nb.state,ac))}}else if(oa={},
Nb=Xd(od.props,ec,lb),Nb=x(Xd,od.props,Nb,ec),null==Nb||null==Nb.render){qc=Nb;ma(qc,Xd);return}Nb.props=od.props;Nb.context=ec;Nb.updater=lb;lb=Nb.state;void 0===lb&&(Nb.state=lb=null);if("function"===typeof Nb.UNSAFE_componentWillMount||"function"===typeof Nb.componentWillMount)if("function"===typeof Nb.componentWillMount&&"function"!==typeof Xd.getDerivedStateFromProps&&Nb.componentWillMount(),"function"===typeof Nb.UNSAFE_componentWillMount&&"function"!==typeof Xd.getDerivedStateFromProps&&Nb.UNSAFE_componentWillMount(),
Xb.length){lb=Xb;var uc=pb;Xb=null;pb=!1;if(uc&&1===lb.length)Nb.state=lb[0];else{ac=uc?lb[0]:Nb.state;var Vc=!0;for(uc=uc?1:0;uc<lb.length;uc++){var cd=lb[uc];cd="function"===typeof cd?cd.call(Nb,ac,od.props,ec):cd;null!=cd&&(Vc?(Vc=!1,ac=ba({},ac,cd)):ba(ac,cd))}Nb.state=ac}}else Xb=null;qc=Nb.render();ma(qc,Xd);if("function"===typeof Nb.getChildContext&&(od=Xd.childContextTypes,"object"===typeof od)){var Qd=Nb.getChildContext(),ce;for(ce in Qd)if(!(ce in od))throw Error(p(108,R(Xd)||"Unknown",
ce));}Qd&&(Fd=ba({},Fd,Qd))}for(;E.isValidElement(qc);){var vd=qc,Ld=vd.type;if("function"!==typeof Ld)break;Zd(vd,Ld)}return{child:qc,context:Fd}}var ba=S(13),E=S(16),U=60106,K=60107,O=60108,D=60114,N=60109,P=60110,aa=60112,Z=60113,I=60120,ha=60115,M=60116,ca=60121,fa=60117,da=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(qa=Symbol.for,U=qa("react.portal"),K=qa("react.fragment"),O=qa("react.strict_mode"),D=qa("react.profiler"),N=qa("react.provider"),P=qa("react.context"),aa=qa("react.forward_ref"),
Z=qa("react.suspense"),I=qa("react.suspense_list"),ha=qa("react.memo"),M=qa("react.lazy"),ca=qa("react.block"),fa=qa("react.fundamental"),da=qa("react.scope"),pa=qa("react.debug_trace_mode"),za=qa("react.legacy_hidden"));qa=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ha=new Uint16Array(16);for(S=0;15>S;S++)Ha[S]=S+1;Ha[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Xa={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(qc){Ma[qc]=new A(qc,0,!1,qc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(qc){var Fd=qc[0];Ma[Fd]=new A(Fd,1,!1,qc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(qc){Ma[qc]=
new A(qc,2,!1,qc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(qc){Ma[qc]=new A(qc,2,!1,qc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(qc){Ma[qc]=new A(qc,3,!1,qc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(qc){Ma[qc]=new A(qc,3,!0,qc,null,!1,!1)});["capture","download"].forEach(function(qc){Ma[qc]=new A(qc,4,!1,qc,null,!1,!1)});["cols","rows","size","span"].forEach(function(qc){Ma[qc]=new A(qc,6,!1,qc,null,!1,!1)});["rowSpan","start"].forEach(function(qc){Ma[qc]=new A(qc,5,!1,qc.toLowerCase(),null,!1,!1)});var gb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(qc){var Fd=
qc.replace(gb,a);Ma[Fd]=new A(Fd,1,!1,qc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(qc){var Fd=qc.replace(gb,a);Ma[Fd]=new A(Fd,1,!1,qc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(qc){var Fd=qc.replace(gb,a);Ma[Fd]=new A(Fd,1,!1,qc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(qc){Ma[qc]=new A(qc,1,!1,qc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(qc){Ma[qc]=new A(qc,1,!1,qc.toLowerCase(),null,!0,!0)});var fb=/["'&<>]/,Na="function"===typeof Object.is?Object.is:k,oa=null,Ca=null,sa=null,Aa=!1,Ja=!1,Ta=null,Ab=0,ib=null,Mb={readContext:function(qc){var Fd=ib.threadID;z(qc,Fd);return qc[Fd]},useContext:function(qc){h();var Fd=ib.threadID;z(qc,Fd);return qc[Fd]},useMemo:v,useReducer:w,useRef:function(qc){oa=
h();sa=u();var Fd=sa.memoizedState;return null===Fd?(qc={current:qc},sa.memoizedState=qc):Fd},useState:function(qc){return w(y,qc)},useLayoutEffect:function(){},useCallback:function(qc,Fd){return v(function(){return qc},Fd)},useImperativeHandle:T,useEffect:T,useDebugValue:T,useDeferredValue:function(qc){h();return qc},useTransition:function(){h();return[function(qc){qc()},!1]},useOpaqueIdentifier:function(){return(ib.identifierPrefix||"")+"R:"+(ib.uniqueID++).toString(36)},useMutableSource:function(qc,
Fd){h();return Fd(qc._source)}},Vb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},gc=ba({menuitem:!0},Vb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(qc){mb.forEach(function(Fd){Fd=Fd+qc.charAt(0).toUpperCase()+qc.substring(1);Pa[Fd]=Pa[qc]})});var nb=/([A-Z])/g,Yb=/^ms-/,Mc=E.Children.toArray,
ad=qa.ReactCurrentDispatcher,Rc={listing:!0,pre:!0,textarea:!0},Cb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xc={},Wc={},kd=Object.prototype.hasOwnProperty,Od={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Kd=function(){function qc(xd,Zd,vd){E.isValidElement(xd)?xd.type!==K?xd=[xd]:(xd=xd.props.children,xd=E.isValidElement(xd)?[xd]:Mc(xd)):xd=Mc(xd);xd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:xd,childIndex:0,context:ya,footer:""};
var Ld=Ha[0];if(0===Ld){var od=Ha;Ld=od.length;var Xd=2*Ld;if(!(65536>=Xd))throw Error(p(304));var Nb=new Uint16Array(Xd);Nb.set(od);Ha=Nb;Ha[0]=Ld+1;for(od=Ld;od<Xd-1;od++)Ha[od]=od+1;Ha[Xd-1]=0}else Ha[0]=Ha[Ld];this.threadID=Ld;this.stack=[xd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Zd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=vd&&vd.identifierPrefix||""}
var Fd=qc.prototype;Fd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var xd=this.threadID;Ha[xd]=Ha[0];Ha[0]=xd}};Fd.pushProvider=function(xd){var Zd=++this.contextIndex,vd=xd.type._context,Ld=this.threadID;z(vd,Ld);var od=vd[Ld];this.contextStack[Zd]=vd;this.contextValueStack[Zd]=od;vd[Ld]=xd.props.value};Fd.popProvider=function(){var xd=this.contextIndex,Zd=this.contextStack[xd],vd=this.contextValueStack[xd];this.contextStack[xd]=null;this.contextValueStack[xd]=
null;this.contextIndex--;Zd[this.threadID]=vd};Fd.clearProviders=function(){for(var xd=this.contextIndex;0<=xd;xd--)this.contextStack[xd][this.threadID]=this.contextValueStack[xd]};Fd.read=function(xd){if(this.exhausted)return null;var Zd=ib;ib=this;var vd=ad.current;ad.current=Mb;try{for(var Ld=[""],od=!1;Ld[0].length<xd;){if(0===this.stack.length){this.exhausted=!0;var Xd=this.threadID;Ha[Xd]=Ha[0];Ha[0]=Xd;break}var Nb=this.stack[this.stack.length-1];if(od||Nb.childIndex>=Nb.children.length){var ec=
Nb.footer;""!==ec&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Nb.type)this.currentSelectValue=null;else if(null!=Nb.type&&null!=Nb.type.type&&Nb.type.type.$$typeof===N)this.popProvider(Nb.type);else if(Nb.type===Z){this.suspenseDepth--;var Xb=Ld.pop();if(od){od=!1;var pb=Nb.fallbackFrame;if(!pb)throw Error(p(303));this.stack.push(pb);Ld[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Ld[this.suspenseDepth]+=Xb}Ld[this.suspenseDepth]+=ec}else{var lb=Nb.children[Nb.childIndex++],
ac="";try{ac+=this.render(lb,Nb.context,Nb.domNamespace)}catch(uc){if(null!=uc&&"function"===typeof uc.then)throw Error(p(294));throw uc;}finally{}Ld.length<=this.suspenseDepth&&Ld.push("");Ld[this.suspenseDepth]+=ac}}return Ld[0]}finally{ad.current=vd,ib=Zd,H()}};Fd.render=function(xd,Zd,vd){if("string"===typeof xd||"number"===typeof xd){vd=""+xd;if(""===vd)return"";if(this.makeStaticMarkup)return G(vd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(vd);this.previousWasTextNode=!0;return G(vd)}Zd=
X(xd,Zd,this.threadID);xd=Zd.child;Zd=Zd.context;if(null===xd||!1===xd)return"";if(!E.isValidElement(xd)){if(null!=xd&&null!=xd.$$typeof){vd=xd.$$typeof;if(vd===U)throw Error(p(257));throw Error(p(258,vd.toString()));}xd=Mc(xd);this.stack.push({type:null,domNamespace:vd,children:xd,childIndex:0,context:Zd,footer:""});return""}var Ld=xd.type;if("string"===typeof Ld)return this.renderDOM(xd,Zd,vd);switch(Ld){case za:case pa:case O:case D:case I:case K:return xd=Mc(xd.props.children),this.stack.push({type:null,
domNamespace:vd,children:xd,childIndex:0,context:Zd,footer:""}),"";case Z:throw Error(p(294));case da:throw Error(p(343));}if("object"===typeof Ld&&null!==Ld)switch(Ld.$$typeof){case aa:oa={};var od=Ld.render(xd.props,xd.ref);od=x(Ld.render,xd.props,od,xd.ref);od=Mc(od);this.stack.push({type:null,domNamespace:vd,children:od,childIndex:0,context:Zd,footer:""});return"";case ha:return xd=[E.createElement(Ld.type,ba({ref:xd.ref},xd.props))],this.stack.push({type:null,domNamespace:vd,children:xd,childIndex:0,
context:Zd,footer:""}),"";case N:return Ld=Mc(xd.props.children),vd={type:xd,domNamespace:vd,children:Ld,childIndex:0,context:Zd,footer:""},this.pushProvider(xd),this.stack.push(vd),"";case P:Ld=xd.type;od=xd.props;var Xd=this.threadID;z(Ld,Xd);Ld=Mc(od.children(Ld[Xd]));this.stack.push({type:xd,domNamespace:vd,children:Ld,childIndex:0,context:Zd,footer:""});return"";case fa:throw Error(p(338));case M:return Ld=xd.type,od=Ld._init,Ld=od(Ld._payload),xd=[E.createElement(Ld,ba({ref:xd.ref},xd.props))],
this.stack.push({type:null,domNamespace:vd,children:xd,childIndex:0,context:Zd,footer:""}),""}throw Error(p(130,null==Ld?Ld:typeof Ld,""));};Fd.renderDOM=function(xd,Zd,vd){var Ld=xd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===vd&&ja(Ld);if(!xc.hasOwnProperty(Ld)){if(!Cb.test(Ld))throw Error(p(65,Ld));xc[Ld]=!0}var od=xd.props;if("input"===Ld)od=ba({type:void 0},od,{defaultChecked:void 0,defaultValue:void 0,value:null!=od.value?od.value:od.defaultValue,checked:null!=od.checked?od.checked:
od.defaultChecked});else if("textarea"===Ld){var Xd=od.value;if(null==Xd){Xd=od.defaultValue;var Nb=od.children;if(null!=Nb){if(null!=Xd)throw Error(p(92));if(Array.isArray(Nb)){if(!(1>=Nb.length))throw Error(p(93));Nb=Nb[0]}Xd=""+Nb}null==Xd&&(Xd="")}od=ba({},od,{value:void 0,children:""+Xd})}else if("select"===Ld)this.currentSelectValue=null!=od.value?od.value:od.defaultValue,od=ba({},od,{value:void 0});else if("option"===Ld){Nb=this.currentSelectValue;var ec=L(od.children);if(null!=Nb){var Xb=
null!=od.value?od.value+"":ec;Xd=!1;if(Array.isArray(Nb))for(var pb=0;pb<Nb.length;pb++){if(""+Nb[pb]===Xb){Xd=!0;break}}else Xd=""+Nb===Xb;od=ba({selected:void 0,children:void 0},od,{selected:Xd,children:ec})}}if(Xd=od){if(gc[Ld]&&(null!=Xd.children||null!=Xd.dangerouslySetInnerHTML))throw Error(p(137,Ld));if(null!=Xd.dangerouslySetInnerHTML){if(null!=Xd.children)throw Error(p(60));if(!("object"===typeof Xd.dangerouslySetInnerHTML&&"__html"in Xd.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=
Xd.style&&"object"!==typeof Xd.style)throw Error(p(62));}Xd=od;Nb=this.makeStaticMarkup;ec=1===this.stack.length;Xb="\x3c"+xd.type;a:if(-1===Ld.indexOf("-"))pb="string"===typeof Xd.is;else switch(Ld){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":pb=!1;break a;default:pb=!0}for(td in Xd)if(kd.call(Xd,td)){var lb=Xd[td];if(null!=lb){if("style"===td){var ac=void 0,uc="",Vc="";for(ac in lb)if(lb.hasOwnProperty(ac)){var cd=
0===ac.indexOf("--"),Qd=lb[ac];if(null!=Qd){if(cd)var ce=ac;else if(ce=ac,Wc.hasOwnProperty(ce))ce=Wc[ce];else{var te=ce.replace(nb,"-$1").toLowerCase().replace(Yb,"-ms-");ce=Wc[ce]=te}uc+=Vc+ce+":";Vc=ac;cd=null==Qd||"boolean"===typeof Qd||""===Qd?"":cd||"number"!==typeof Qd||0===Qd||Pa.hasOwnProperty(Vc)&&Pa[Vc]?(""+Qd).trim():Qd+"px";uc+=cd;Vc=";"}}lb=uc||null}ac=null;pb?Od.hasOwnProperty(td)||(ac=td,ac=c(ac)&&null!=lb?ac+'\x3d"'+(G(lb)+'"'):""):ac=t(td,lb);ac&&(Xb+=" "+ac)}}Nb||ec&&(Xb+=' data-reactroot\x3d""');
var td=Xb;Xd="";Vb.hasOwnProperty(Ld)?td+="/\x3e":(td+="\x3e",Xd="\x3c/"+xd.type+"\x3e");a:{Nb=od.dangerouslySetInnerHTML;if(null!=Nb){if(null!=Nb.__html){Nb=Nb.__html;break a}}else if(Nb=od.children,"string"===typeof Nb||"number"===typeof Nb){Nb=G(Nb);break a}Nb=null}null!=Nb?(od=[],Rc.hasOwnProperty(Ld)&&"\n"===Nb.charAt(0)&&(td+="\n"),td+=Nb):od=Mc(od.children);xd=xd.type;vd=null==vd||"http://www.w3.org/1999/xhtml"===vd?ja(xd):"http://www.w3.org/2000/svg"===vd&&"foreignObject"===xd?"http://www.w3.org/1999/xhtml":
vd;this.stack.push({domNamespace:vd,type:Ld,children:od,childIndex:0,context:Zd,footer:Xd});this.previousWasTextNode=!1;return td};return qc}();F.renderToNodeStream=function(){throw Error(p(207));};F.renderToStaticMarkup=function(qc,Fd){qc=new Kd(qc,!0,Fd);try{return qc.read(Infinity)}finally{qc.destroy()}};F.renderToStaticNodeStream=function(){throw Error(p(208));};F.renderToString=function(qc,Fd){qc=new Kd(qc,!1,Fd);try{return qc.read(Infinity)}finally{qc.destroy()}};F.version="17.0.2"};
shadow$provide[614]=function(qa,S,Ra,F){Ra.exports=S(612)};
shadow$provide[615]=function(qa,S,Ra,F){function p(){if(!Bd&&(Bd="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!Bd))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bd(Wd)}function R(b){let g=0;var m=0;for(var J of b)g+=J.w*J.h,m=Math.max(m,J.w);b.sort((ta,Ka)=>
Ka.h-ta.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),m),h:Infinity}];let Y=J=0;for(const ta of b)for(b=m.length-1;0<=b;b--){var ia=m[b];if(!(ta.w>ia.w||ta.h>ia.h)){ta.x=ia.x;ta.y=ia.y;Y=Math.max(Y,ta.y+ta.h);J=Math.max(J,ta.x+ta.w);ta.w===ia.w&&ta.h===ia.h?(ia=m.pop(),b<m.length&&(m[b]=ia)):ta.h===ia.h?(ia.x+=ta.w,ia.w-=ta.w):(ta.w!==ia.w&&m.push({x:ia.x+ta.w,y:ia.y,w:ia.w-ta.w,h:ta.h}),ia.y+=ta.h,ia.h-=ta.h);break}}return{w:J,h:Y,fill:g/(J*Y)||0}}function z(b,...g){return{didIntersect:0<
g.length,message:b,points:g}}function q(b,g,m=0){const J=[b[0]+g[0]/2,b[1]+g[1]/2],Y=yd.rotWith(b,J,m),ia=yd.rotWith(yd.add(b,[g[0],0]),J,m),ta=yd.rotWith(yd.add(b,g),J,m);b=yd.rotWith(yd.add(b,[0,g[1]]),J,m);return[["top",[Y,ia]],["right",[ia,ta]],["bottom",[ta,b]],["left",[b,Y]]]}function c(b,g,m,J){const [Y,ia]=b,[ta,Ka]=g,[Za,db]=m,[sb,xb]=J;return Ka/ta!==(xb-db)/(sb-Za)&&(g=ta*(xb-db)-Ka*(sb-Za),0!==g&&(b=((ia-db)*(sb-Za)-(Y-Za)*(xb-db))/g,g=((ia-db)*ta-(Y-Za)*Ka)/g,0<=b&&0<=g&&1>=g))?z("intersection",
[Y+b*ta,ia+b*Ka]):z("no intersection")}function r(b,g,m,J,Y=0){return k(m,J,Y,b,g)}function B(b,g,m,J=0){const {minX:Y,minY:ia,width:ta,height:Ka}=m;return r(b,g,[Y,ia],[ta,Ka],J)}function A(b,g,m,J){var Y=yd.sub(b,m);m=yd.sub(J,m);g=yd.sub(g,b);J=m[0]*Y[1]-m[1]*Y[0];Y=g[0]*Y[1]-g[1]*Y[0];m=m[1]*g[0]-m[0]*g[1];return 0===J||0===Y?z("coincident"):0===m?z("parallel"):0!==m&&(J/=m,Y/=m,0<=J&&1>=J&&0<=Y&&1>=Y)?z("intersection",yd.add(b,yd.mul(g,J))):z("no intersection")}function a(b,g,m,J){var Y=(g[0]-
b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ia=2*((g[0]-b[0])*(b[0]-m[0])+(g[1]-b[1])*(b[1]-m[1]));m=ia*ia-4*Y*(m[0]*m[0]+m[1]*m[1]+b[0]*b[0]+b[1]*b[1]-2*(m[0]*b[0]+m[1]*b[1])-J*J);if(0>m)return z("outside");if(0===m)return z("tangent");J=Math.sqrt(m);m=(-ia+J)/(2*Y);Y=(-ia-J)/(2*Y);if((0>m||1<m)&&(0>Y||1<Y))return 0>m&&0>Y||1<m&&1<Y?z("outside"):z("inside");ia=[];0<=m&&1>=m&&ia.push(yd.lrp(b,g,m));0<=Y&&1>=Y&&ia.push(yd.lrp(b,g,Y));return z("intersection",...ia)}function G(b,g,m,J,Y,ia=0){if(0===J||
0===Y||yd.isEqual(b,g))return z("no intersection");J=0>J?J:-J;Y=0>Y?Y:-Y;b=yd.sub(yd.rotWith(b,m,-ia),m);g=yd.sub(yd.rotWith(g,m,-ia),m);var ta=yd.sub(g,b),Ka=ta[0]*ta[0]/J/J+ta[1]*ta[1]/Y/Y;ta=2*b[0]*ta[0]/J/J+2*b[1]*ta[1]/Y/Y;const Za=[];J=ta*ta-4*Ka*(b[0]*b[0]/J/J+b[1]*b[1]/Y/Y-1);0===J?Za.push(-ta/2/Ka):0<J&&(J=Math.sqrt(J),Za.push((-ta+J)/2/Ka),Za.push((-ta-J)/2/Ka));Ka=Za.filter(db=>0<=db&&1>=db).map(db=>yd.add(m,yd.add(b,yd.mul(yd.sub(g,b),db)))).map(db=>yd.rotWith(db,m,ia));return z("intersection",
...Ka)}function t(b,g,m){const J=[];for(let Y=1;Y<m.length;Y++){const ia=A(b,g,m[Y-1],m[Y]);ia&&J.push(...ia.points)}return 0===J.length?z("no intersection"):z("intersection",...m)}function k(b,g,m,J,Y){return q(b,g,m).reduce((ia,[ta,[Ka,Za]])=>{(Ka=c(J,Y,Ka,Za))&&ia.push(z(ta,...Ka.points));return ia},[]).filter(ia=>ia.didIntersect)}function h(b,g,m,J){return q(b,g).reduce((Y,[ia,[ta,Ka]])=>{(ta=A(m,J,ta,Ka))&&Y.push(z(ia,...ta.points));return Y},[]).filter(Y=>Y.didIntersect)}function f(b,g,m,J){return q(b,
g).reduce((Y,[ia,[ta,Ka]])=>{(ta=a(ta,Ka,m,J))&&Y.push(Ga(Qa({},ta),{message:ia}));return Y},[]).filter(Y=>Y.didIntersect)}function u(b,g,m,J,Y,ia=0){return q(b,g).reduce((ta,[Ka,[Za,db]])=>{(Za=G(Za,db,m,J,Y,ia))&&ta.push(Ga(Qa({},Za),{message:Ka}));return ta},[]).filter(ta=>ta.didIntersect)}function x(b,g,m){return q(b,g).reduce((J,[Y,[ia,ta]])=>{ia=t(ia,ta,m);ia.didIntersect&&J.push(z(Y,...ia.points));return J},[]).filter(J=>J.didIntersect)}function H(b,g,m){return q(b,g).reduce((J,[Y,[ia,ta]])=>
{{const Ka=[];for(let Za=1;Za<m.length+1;Za++){const db=A(ia,ta,m[Za-1],m[Za%m.length]);db&&Ka.push(...db.points)}ia=0===Ka.length?z("no intersection"):z("intersection",...m)}ia.didIntersect&&J.push(z(Y,...ia.points));return J},[]).filter(J=>J.didIntersect)}function y(b,g,m,J=0,Y,ia){return g===m?f(Y,ia,b,g):u(Y,ia,b,g,m,J)}function w(b,g,m){const {minX:J,minY:Y,width:ia,height:ta}=b;return h([J,Y],[ia,ta],g,m)}function v(b){for(var g=arguments.length,m=Array(1<g?g-1:0),J=1;J<g;J++)m[J-1]=arguments[J];
throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function n(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof qa?qa:"undefined"!==typeof self?self:ns}function T(){go||v("Proxy not available")}function ja(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}
function L(b){return"function"===typeof b}function ma(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function X(b){return null!==b&&"object"===typeof b}function ba(b){if(!X(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&b.toString()===Wo}function E(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}
function U(b,g,m){Nn(b,g,{enumerable:!1,writable:!0,configurable:!0,value:m})}function K(b,g,m){Nn(b,g,{enumerable:!1,writable:!1,configurable:!0,value:m})}function O(b,g){var m="isMobX"+b;g.prototype[m]=!0;return function(J){return X(J)&&!0===J[m]}}function D(b){return b instanceof Map}function N(b){return b instanceof Set}function P(b){var g=Object.keys(b);if(!Mp)return g;var m=Object.getOwnPropertySymbols(b);return m.length?[].concat(g,m.filter(function(J){return ag.propertyIsEnumerable.call(b,
J)})):g}function aa(b){return null===b?null:"object"===typeof b?""+b:b}function Z(b,g){return ag.hasOwnProperty.call(b,g)}function I(b,g){for(var m=0;m<g.length;m++){var J=g[m];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(b,J.key,J)}}function ha(b,g,m){g&&I(b.prototype,g);m&&I(b,m);Object.defineProperty(b,"prototype",{writable:!1});return b}function M(){M=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],J;for(J in m)Object.prototype.hasOwnProperty.call(m,
J)&&(b[J]=m[J])}return b};return M.apply(this,arguments)}function ca(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;fa(b,g)}function fa(b,g){fa=Object.setPrototypeOf||function(m,J){m.__proto__=J;return m};return fa(b,g)}function da(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function pa(b,g){if(b){if("string"===typeof b)return za(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&
(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return za(b,g)}}function za(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,J=Array(g);m<g;m++)J[m]=b[m];return J}function ya(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=pa(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var J=0;return function(){return J>=b.length?
{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ha(b){return Object.assign(function(g,m){Ua(g,m,b)},b)}function Ua(b,g,m){Z(b,Ll)||U(b,Ll,M({},b[Ll]));m.annotationType_!==ir&&(b[Ll][g]=m)}function Ea(b){Z(b,Ll)||U(b,Ll,M({},b[Ll]));return b[Ll]}function Oa(b,g,m){void 0===g&&(g=ho);void 0===m&&(m=ho);b=new hp(b);g!==ho&&vc(BC,b,g,void 0);m!==ho&&
td(b,m);return b}function Xa(b,g,m){return Oc(b)?b:Array.isArray(b)?tg.array(b,{name:m}):ba(b)?tg.object(b,void 0,{name:m}):D(b)?tg.map(b,{name:m}):N(b)?tg.set(b,{name:m}):"function"!==typeof b||Vc(b)||Rb(b)?b:E(b)?Cs(b):ss(m,b)}function Ma(b){return b}function gb(b,g){return{annotationType_:b,options_:g,make_:fb,extend_:Na}}function fb(b,g,m,J){var Y;if(null!=(Y=this.options_)&&Y.bound)return null===this.extend_(b,g,m,!1)?0:1;if(J===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(Vc(m.value))return 1;
b=oa(b,this,g,m,!1);Nn(J,g,b);return 2}function Na(b,g,m,J){m=oa(b,this,g,m);return b.defineProperty_(g,m,J)}function oa(b,g,m,J,Y){var ia,ta,Ka,Za,db,sb,xb;void 0===Y&&(Y=Ud.safeDescriptors);J=J.value;if(null!=(ia=g.options_)&&ia.bound){var Wb;J=J.bind(null!=(Wb=b.proxy_)?Wb:b.target_)}return{value:ad(null!=(ta=null==(Ka=g.options_)?void 0:Ka.name)?ta:m.toString(),J,null!=(Za=null==(db=g.options_)?void 0:db.autoAction)?Za:!1,null!=(sb=g.options_)&&sb.bound?null!=(xb=b.proxy_)?xb:b.target_:void 0),
configurable:Y?b.isPlainObject_:!0,enumerable:!1,writable:Y?!1:!0}}function Ca(b,g){return{annotationType_:b,options_:g,make_:sa,extend_:Aa}}function sa(b,g,m,J){var Y;if(J===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(null!=(Y=this.options_)&&Y.bound&&(!Z(b.target_,g)||!Rb(b.target_[g]))&&null===this.extend_(b,g,m,!1))return 0;if(Rb(m.value))return 1;b=Ja(b,this,g,m,!1,!1);Nn(J,g,b);return 2}function Aa(b,g,m,J){var Y;m=Ja(b,this,g,m,null==(Y=this.options_)?void 0:Y.bound);return b.defineProperty_(g,
m,J)}function Ja(b,g,m,J,Y,ia){void 0===ia&&(ia=Ud.safeDescriptors);g=J.value;Rb(g)||(g=Cs(g));if(Y){var ta;g=g.bind(null!=(ta=b.proxy_)?ta:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ia?b.isPlainObject_:!0,enumerable:!1,writable:ia?!1:!0}}function Ta(b,g){return{annotationType_:b,options_:g,make_:Ab,extend_:ib}}function Ab(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function ib(b,g,m,J){return b.defineComputedProperty_(g,M({},this.options_,{get:m.get,set:m.set}),J)}function Mb(b,g){return{annotationType_:b,
options_:g,make_:Vb,extend_:gc}}function Vb(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function gc(b,g,m,J){var Y,ia;return b.defineObservableProperty_(g,m.value,null!=(Y=null==(ia=this.options_)?void 0:ia.enhancer)?Y:Xa,J)}function Pa(b){return{annotationType_:"true",options_:b,make_:mb,extend_:nb}}function mb(b,g,m,J){var Y,ia;if(m.get)return V.make_(b,g,m,J);if(m.set){m=ad(g.toString(),m.set);if(J===b.target_)return null===b.defineProperty_(g,{configurable:Ud.safeDescriptors?b.isPlainObject_:
!0,set:m})?0:2;Nn(J,g,{configurable:!0,set:m});return 2}if(J!==b.target_&&"function"===typeof m.value){var ta;if(E(m.value)){var Ka;return(null!=(Ka=this.options_)&&Ka.autoBind?Cs.bound:Cs).make_(b,g,m,J)}return(null!=(ta=this.options_)&&ta.autoBind?ss.bound:ss).make_(b,g,m,J)}ta=!1===(null==(Y=this.options_)?void 0:Y.deep)?tg.ref:tg;if("function"===typeof m.value&&null!=(ia=this.options_)&&ia.autoBind){var Za;m.value=m.value.bind(null!=(Za=b.proxy_)?Za:b.target_)}return ta.make_(b,g,m,J)}function nb(b,
g,m,J){var Y,ia;if(m.get)return V.extend_(b,g,m,J);if(m.set)return b.defineProperty_(g,{configurable:Ud.safeDescriptors?b.isPlainObject_:!0,set:ad(g.toString(),m.set)},J);if("function"===typeof m.value&&null!=(Y=this.options_)&&Y.autoBind){var ta;m.value=m.value.bind(null!=(ta=b.proxy_)?ta:b.target_)}return(!1===(null==(ia=this.options_)?void 0:ia.deep)?tg.ref:tg).extend_(b,g,m,J)}function Yb(b){if(!0===b.deep)var g=Xa;else{if(!1===b.deep)b=Ma;else{b=b.defaultDecorator;var m;b=b?null!=(g=null==(m=
b.options_)?void 0:m.enhancer)?g:Xa:Xa}g=b}return g}function Mc(b,g,m){if(ma(g))Ua(b,g,At);else return Oc(b)?b:ba(b)?tg.object(b,g,m):Array.isArray(b)?tg.array(b,g):D(b)?tg.map(b,g):N(b)?tg.set(b,g):"object"===typeof b&&null!==b?b:tg.box(b,g)}function ad(b,g,m,J){function Y(){a:{var ia=J||this,ta=arguments,Ka=Ud.trackingDerivation,Za=!m||!Ka;Ld();var db=Ud.allowStateChanges;Za&&(Kd(),db=Cb(!0));var sb=qc(!0),xb=Ib++,Wb=hb;hb=xb;try{var kc=g.apply(ia,ta);break a}catch(sc){var Ob=sc;throw sc;}finally{hb!==
xb&&v(30),hb=Wb,void 0!==Ob&&(Ud.suppressReactionErrors=!0),Ud.allowStateChanges=db,Ud.allowStateReads=sb,od(),Za&&(Ud.trackingDerivation=Ka),Ud.suppressReactionErrors=!1}kc=void 0}return kc}void 0===m&&(m=!1);Y.isMobxAction=!0;pc&&(Lc.value=b,Object.defineProperty(Y,"name",Lc));return Y}function Rc(b,g){b=Cb(b);try{return g()}finally{Ud.allowStateChanges=b}}function Cb(b){var g=Ud.allowStateChanges;Ud.allowStateChanges=b;return g}function xc(b){switch(b.dependenciesState_){case Df.UP_TO_DATE_:return!1;
case Df.NOT_TRACKING_:case Df.STALE_:return!0;case Df.POSSIBLY_STALE_:for(var g=qc(!0),m=Kd(),J=b.observing_,Y=J.length,ia=0;ia<Y;ia++){var ta=J[ia];if(hf(ta)){if(Ud.disableErrorBoundaries)ta.get();else try{ta.get()}catch(Ka){return Ud.trackingDerivation=m,Ud.allowStateReads=g,!0}if(b.dependenciesState_===Df.STALE_)return Ud.trackingDerivation=m,Ud.allowStateReads=g,!0}}Fd(b);Ud.trackingDerivation=m;Ud.allowStateReads=g;return!1}}function Wc(b,g,m){var J=qc(!0);Fd(b);b.newObserving_=Array(b.observing_.length+
100);b.unboundDepsCount_=0;b.runId_=++Ud.runId;var Y=Ud.trackingDerivation;Ud.trackingDerivation=b;Ud.inBatch++;if(!0===Ud.disableErrorBoundaries)var ia=g.call(m);else try{ia=g.call(m)}catch(sb){ia=new Qg(sb)}Ud.inBatch--;Ud.trackingDerivation=Y;var ta=b.observing_;g=b.observing_=b.newObserving_;m=Df.UP_TO_DATE_;Y=0;for(var Ka=b.unboundDepsCount_,Za=0;Za<Ka;Za++){var db=g[Za];0===db.diffValue_&&(db.diffValue_=1,Y!==Za&&(g[Y]=db),Y++);db.dependenciesState_>m&&(m=db.dependenciesState_)}g.length=Y;b.newObserving_=
null;for(Ka=ta.length;Ka--;)Za=ta[Ka],0===Za.diffValue_&&Zd(Za,b),Za.diffValue_=0;for(;Y--;)ta=g[Y],1===ta.diffValue_&&(ta.diffValue_=0,Ka=b,ta.observers_.add(Ka),ta.lowestObserverState_>Ka.dependenciesState_&&(ta.lowestObserverState_=Ka.dependenciesState_));m!==Df.UP_TO_DATE_&&(b.dependenciesState_=m,b.onBecomeStale_());Ud.allowStateReads=J;return ia}function kd(b){var g=b.observing_;b.observing_=[];for(var m=g.length;m--;)Zd(g[m],b);b.dependenciesState_=Df.NOT_TRACKING_}function Od(b){var g=Kd();
try{return b()}finally{Ud.trackingDerivation=g}}function Kd(){var b=Ud.trackingDerivation;Ud.trackingDerivation=null;return b}function qc(b){var g=Ud.allowStateReads;Ud.allowStateReads=b;return g}function Fd(b){if(b.dependenciesState_!==Df.UP_TO_DATE_){b.dependenciesState_=Df.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=Df.UP_TO_DATE_}}function xd(){(Ud.pendingReactions.length||Ud.inBatch||Ud.isRunningReactions)&&v(36);ke=!0;if(Yd){var b=n();0===--b.__mobxInstanceCount&&
(b.__mobxGlobals=void 0);Ud=new oe}}function Zd(b,g){b.observers_["delete"](g);0===b.observers_.size&&vd(b)}function vd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,Ud.pendingUnobservations.push(b))}function Ld(){Ud.inBatch++}function od(){if(0===--Ud.inBatch){0<Ud.inBatch||Ud.isRunningReactions||sg(pb);for(var b=Ud.pendingUnobservations,g=0;g<b.length;g++){var m=b[g];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof
jh&&m.suspend_())}Ud.pendingUnobservations=[]}}function Xd(b){var g=Ud.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&Ud.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),!0;0===b.observers_.size&&0<Ud.inBatch&&vd(b);return!1}function Nb(b){b.lowestObserverState_!==Df.STALE_&&(b.lowestObserverState_=Df.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Df.UP_TO_DATE_)g.onBecomeStale_();
g.dependenciesState_=Df.STALE_}))}function ec(b){b.lowestObserverState_!==Df.STALE_&&(b.lowestObserverState_=Df.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Df.POSSIBLY_STALE_?g.dependenciesState_=Df.STALE_:g.dependenciesState_===Df.UP_TO_DATE_&&(b.lowestObserverState_=Df.UP_TO_DATE_)}))}function Xb(b){b.lowestObserverState_===Df.UP_TO_DATE_&&(b.lowestObserverState_=Df.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Df.UP_TO_DATE_&&(g.dependenciesState_=Df.POSSIBLY_STALE_,
g.onBecomeStale_())}))}function pb(){Ud.isRunningReactions=!0;for(var b=Ud.pendingReactions,g=0;0<b.length;){++g===Hh&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var m=b.splice(0),J=0,Y=m.length;J<Y;J++)m[J].runReaction_()}Ud.isRunningReactions=!1}function lb(b){var g=sg;sg=function(m){return b(function(){return g(m)})}}function ac(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function uc(b){return function(g,m){if(L(g))return ad(g.name||
"\x3cunnamed action\x3e",g,b);if(L(m))return ad(g,m,b);if(ma(m))return Ua(g,m,b?zt:Ih);if(ma(g))return Ha(gb(b?"autoAction":gi,{name:g,autoAction:b}))}}function Vc(b){return L(b)&&!0===b.isMobxAction}function cd(b,g){function m(){b(Za)}var J,Y;void 0===g&&(g=yq);var ia=null!=(J=null==(Y=g)?void 0:Y.name)?J:"Autorun";if(g.scheduler||g.delay){var ta=Qd(g),Ka=!1;var Za=new bf(ia,function(){Ka||(Ka=!0,ta(function(){Ka=!1;Za.isDisposed_||Za.track(m)}))},g.onError,g.requiresObservable)}else Za=new bf(ia,
function(){this.track(m)},g.onError,g.requiresObservable);Za.schedule_();return Za.getDisposer_()}function Qd(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:AC}function ce(b,g,m){function J(){sb=!1;if(!Ob.isDisposed_){var sc=!1;Ob.track(function(){var lc=Rc(!1,function(){return b(Ob)});sc=db||!kc(xb,lc);Wb=xb;xb=lc});db&&m.fireImmediately?ta(xb,Wb,Ob):!db&&sc&&ta(xb,Wb,Ob);db=!1}}var Y;void 0===m&&(m=yq);var ia=null!=(Y=m.name)?Y:"Reaction",ta=rg(ia,m.onError?
te(m.onError,g):g),Ka=!m.scheduler&&!m.delay,Za=Qd(m),db=!0,sb=!1,xb,Wb,kc=m.compareStructural?Um.structural:m.equals||Um["default"],Ob=new bf(ia,function(){db||Ka?J():sb||(sb=!0,Za(J))},m.onError,m.requiresObservable);Ob.schedule_();return Ob.getDisposer_()}function te(b,g){return function(){try{return g.apply(this,arguments)}catch(m){b.call(this,m)}}}function td(b,g,m){return vc(yC,b,g,m)}function vc(b,g,m,J){var Y="function"===typeof J?se(g,m):se(g),ia=L(J)?J:m,ta=b+"L";Y[ta]?Y[ta].add(ia):Y[ta]=
new Set([ia]);return function(){var Ka=Y[ta];Ka&&(Ka["delete"](ia),0===Ka.size&&delete Y[ta])}}function Pc(b){!0===b.isolateGlobalState&&xd();var g=b.useProxies,m=b.enforceActions;void 0!==g&&(Ud.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(Ud.verifyProxies=!0);void 0!==m&&(g="always"===m?"always":"observed"===m,Ud.enforceActions=g,Ud.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction",
"disableErrorBoundaries","safeDescriptors"].forEach(function(J){J in b&&(Ud[J]=!!b[J])});Ud.allowStateReads=!Ud.observableRequiresReaction;b.reactionScheduler&&lb(b.reactionScheduler)}function Ne(b,g,m,J){var Y=os(g),ia=jb(b,J)[Xg];Ld();try{Np(Y).forEach(function(ta){ia.extend_(ta,Y[ta],m?ta in m?m[ta]:!0:!0)})}finally{od()}return b}function nc(b){var g={name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(nc));return g}function Me(){this.message=
"FLOW_CANCELLED"}function Rb(b){return!0===(null==b?void 0:b.isMobXFlow)}function Oc(b,g){return b?void 0!==g?Dd(b)?b[Xg].values_.has(g):!1:Dd(b)||!!b[Xg]||Lp(b)||th(b)||hf(b):!1}function Ub(b){if(Dd(b))return b[Xg].ownKeys_();v(38)}function ed(b,g,m){b.set(g,m);return m}function me(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Oc(b))return b;if(Je(b)||hf(b))return me(b.get(),g);if(g.has(b))return g.get(b);if(Db(b)){var m=ed(g,b,Array(b.length));b.forEach(function(ta,Ka){m[Ka]=me(ta,g)});
return m}if(Aq(b)){var J=ed(g,b,new Set);b.forEach(function(ta){J.add(me(ta,g))});return J}if(Zp(b)){var Y=ed(g,b,new Map);b.forEach(function(ta,Ka){Y.set(Ka,me(ta,g))});return Y}var ia=ed(g,b,{});Ub(b).forEach(function(ta){ag.propertyIsEnumerable.call(b,ta)&&(ia[ta]=me(b[ta],g))});return ia}function ne(){v("trace() is not available in production builds");for(var b=!1,g=arguments.length,m=Array(g),J=0;J<g;J++)m[J]=arguments[J];"boolean"===typeof m[m.length-1]&&(b=m.pop());a:{switch(m.length){case 0:g=
Ud.trackingDerivation;break a;case 1:g=se(m[0]);break a;case 2:g=se(m[0],m[1]);break a}g=void 0}if(!g)return v("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===dh.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?dh.BREAK:dh.LOG}function Dc(b,g){void 0===g&&(g=void 0);Ld();try{return b.apply(g)}finally{od()}}function zb(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}
function Td(b,g){var m=b.interceptors_||(b.interceptors_=[]);m.push(g);return ja(function(){var J=m.indexOf(g);-1!==J&&m.splice(J,1)})}function de(b,g){var m=Kd();try{var J=[].concat(b.interceptors_||[]);b=0;for(var Y=J.length;b<Y&&((g=J[b](g))&&!g.type&&v(14),g);b++);return g}finally{Ud.trackingDerivation=m}}function pd(b){return void 0!==b.changeListeners_&&0<b.changeListeners_.length}function oc(b,g){var m=b.changeListeners_||(b.changeListeners_=[]);m.push(g);return ja(function(){var J=m.indexOf(g);
-1!==J&&m.splice(J,1)})}function Oe(b,g){var m=Kd();if(b=b.changeListeners_){b=b.slice();for(var J=0,Y=b.length;J<Y;J++)b[J](g);Ud.trackingDerivation=m}}function vf(b,g,m){var J=jb(b,m)[Xg];Ld();try{var Y;null!=(Y=g)?Y:g=Ea(b);Np(g).forEach(function(ia){return J.make_(ia,g[ia])})}finally{od()}return b}function pf(b,g,m,J){void 0===m&&(m="ObservableArray");void 0===J&&(J=!1);T();g=new vv(m,g,J,!1);K(g.values_,Xg,g);m=new Proxy(g.values_,FC);g.proxy_=m;b&&b.length&&(J=Cb(!0),g.spliceWithArray_(0,0,
b),Ud.allowStateChanges=J);return m}function vg(b,g){"function"===typeof Array.prototype[b]&&(Jt[b]=g(b))}function $a(b){return function(){var g=this[Xg];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Bb(b){return function(g,m){var J=this,Y=this[Xg];Y.atom_.reportObserved();return Y.dehanceValues_(Y.values_)[b](function(ia,ta){return g.call(m,ia,ta,J)})}}function eb(b){return function(){var g=this,m=this[Xg];m.atom_.reportObserved();m=m.dehanceValues_(m.values_);
var J=arguments[0];arguments[0]=function(Y,ia,ta){return J(Y,ia,ta,g)};return m[b].apply(m,arguments)}}function Db(b){return X(b)&&GC(b[Xg])}function fc(b){if(D(b)||Zp(b))return b;if(Array.isArray(b))return new Map(b);if(ba(b)){var g=new Map,m;for(m in b)g.set(m,b[m]);return g}return v(21,b)}function jb(b,g){var m;if(Z(b,Xg))return b;var J=null!=(m=null==g?void 0:g.name)?m:"ObservableObject";m=sy;var Y=new Map;J=String(J);var ia;var ta=g?null!=(ia=g.defaultDecorator)?ia:Pa(g):void 0;g=new m(b,Y,J,
ta);U(b,Xg,g);return b}function jd(b){return ry[b]||(ry[b]={get:function(){return this[Xg].getObservablePropValue_(b)},set:function(g){return this[Xg].setObservablePropValue_(b,g)}})}function Dd(b){return X(b)?wC(b[Xg]):!1}function je(b){return{enumerable:!1,configurable:!0,get:function(){return this[Xg].get_(b)},set:function(g){this[Xg].set_(b,g)}}}function be(b){if(b>tv){for(var g=tv;g<b+100;g++)Nn(sv.prototype,""+g,je(g));tv=b}}function Ze(b,g,m){return new sv(b,g,m)}function se(b,g){if("object"===
typeof b&&null!==b){if(Db(b))return void 0!==g&&v(23),b[Xg].atom_;if(Aq(b))return b[Xg];if(Zp(b)){if(void 0===g)return b.keysAtom_;var m=b.data_.get(g)||b.hasMap_.get(g);m||v(25,g,Eg(b));return m}if(Dd(b)){if(!g)return v(26);(m=b[Xg].values_.get(g))||v(27,g,Eg(b));return m}if(Lp(b)||hf(b)||th(b))return b}else if(L(b)&&th(b[Xg]))return b[Xg];v(28)}function df(b,g){b||v(29);if(void 0!==g)return df(se(b,g));if(Lp(b)||hf(b)||th(b)||Zp(b)||Aq(b))return b;if(b[Xg])return b[Xg];v(24,b)}function Eg(b,g){if(void 0!==
g)b=se(b,g);else{if(Vc(b))return b.name;b=Dd(b)||Zp(b)||Aq(b)?df(b):se(b)}return b.name_}function of(b,g,m){void 0===m&&(m=-1);return yb(b,g,m)}function yb(b,g,m,J,Y){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ia=typeof b;if("function"!==ia&&"object"!==ia&&"object"!=typeof g)return!1;ia=ty.call(b);if(ia!==ty.call(g))return!1;switch(ia){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/
+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=m&&m++}b=ua(b);g=ua(g);ia="[object Array]"===ia;if(!ia){if("object"!=typeof b||"object"!=typeof g)return!1;var ta=b.constructor,Ka=g.constructor;if(ta!==Ka&&!(L(ta)&&ta instanceof ta&&L(Ka)&&Ka instanceof Ka)&&"constructor"in b&&"constructor"in g)return!1}if(0===m)return!1;0>
m&&(m=-1);J=J||[];Y=Y||[];for(ta=J.length;ta--;)if(J[ta]===b)return Y[ta]===g;J.push(b);Y.push(g);if(ia){ta=b.length;if(ta!==g.length)return!1;for(;ta--;)if(!yb(b[ta],g[ta],m-1,J,Y))return!1}else{ia=Object.keys(b);ta=ia.length;if(Object.keys(g).length!==ta)return!1;for(;ta--;)if(Ka=ia[ta],!Z(g,Ka)||!yb(b[Ka],g[Ka],m-1,J,Y))return!1}J.pop();Y.pop();return!0}function ua(b){return Db(b)?b.slice():D(b)||Zp(b)||N(b)||Aq(b)?Array.from(b.entries()):b}function ra(b){b[Symbol.iterator]=Ia;return b}function Ia(){return this}
function cb(b,g){const m=new Set(g),J=Object.values(b),Y=new Set(J.filter(ia=>m.has(ia.toId)||m.has(ia.fromId)));b=Y.size;for(g=-1;0!==g;)Y.forEach(ia=>{ia=ia.fromId;for(const ta of J)ta.fromId===ia&&Y.add(ta),ta.toId===ia&&Y.add(ta)}),g=Y.size-b,b=Y.size;return Array.from(Y.values())}function Gb(b,g,m,J,Y,ia,ta,Ka){if(Y=g.getBindingPoint(Y,ia,ta,Ka))return{id:J,type:"line",fromId:b.id,toId:g.id,handleId:m,point:pe.toFixed(Y.point),distance:Y.distance}}function jc(b,g){const m=b.getCenter(),J=g.getCenter();
var Y=Fg();Y=Ga(Qa({},rs.defaultProps),{id:Y,type:rs.id,parentId:b.props.parentId,point:m});b=Gb(Y,b,"start",Fg(),m,m,pe.uni(pe.sub(J,m)),!1);g=Gb(Y,g,"end",Fg(),J,J,pe.uni(pe.sub(m,J)),!1);return b&&g?(Y.handles.start.point=[0,0],Y.handles.end.point=pe.sub(J,m),Y.handles.start.bindingId=b.id,Y.handles.end.bindingId=g.id,[Y,[b,g]]):null}function Tc(b,g){return(0,ND.default)(b,g,{arrayMerge:(m,J,Y)=>J})}function nd(b,g,m,J=!1){const [Y,ia]=g,[ta,Ka]=m;b=ta+(b-Y)/(ia-Y)*(Ka-ta);return J?ta<Ka?Math.max(Math.min(b,
Ka),ta):Math.max(Math.min(b,ta),Ka):b}function xe(b,g){return new Promise((m,J)=>{if(g){const Y=document.createElement("video");Y.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);Y.src=b}else{const Y=new Image;Y.onload=()=>m([Y.width,Y.height]);Y.src=b;Y.onerror=ia=>J(ia)}})}function Ce(b,g){return Object.values(qd).includes(b)?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function If(){var b;null==(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();
b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none"});b.tabIndex=-1;document.body.appendChild(b);return b}function Tf(b,g,m=0){var J,Y,ia;if(!b)return[16,32];let ta;ta="string"===typeof g?g:`${null!=
(J=g.fontStyle)?J:"normal"} ${null!=(Y=g.fontVariant)?Y:"normal"} ${null!=(ia=g.fontWeight)?ia:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!xv.has(`${b}-${ta}-${m}`)){if(!rp)return[10,10];rp.parent||document.body.appendChild(rp);rp.innerHTML=`${b}&#8203;`;rp.style.font=ta;rp.style.padding=m+"px";xv.set(`${b}-${ta}-${m}`,[rp.offsetWidth||1,rp.offsetHeight||1])}return xv.get(`${b}-${ta}-${m}`)}function wf(b){try{if("string"!==typeof b||!ze.test(b))throw TypeError("Invalid UUID");
var g,m=new Uint8Array(16);m[0]=(g=parseInt(b.slice(0,8),16))>>>24;m[1]=g>>>16&255;m[2]=g>>>8&255;m[3]=g&255;m[4]=(g=parseInt(b.slice(9,13),16))>>>8;m[5]=g&255;m[6]=(g=parseInt(b.slice(14,18),16))>>>8;m[7]=g&255;m[8]=(g=parseInt(b.slice(19,23),16))>>>8;m[9]=g&255;m[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;m[11]=g/4294967296&255;m[12]=g>>>24&255;m[13]=g>>>16&255;m[14]=g>>>8&255;m[15]=g&255;return!0}catch(J){return!1}}function tf(b,g=0,m){let J;return function(...Y){null==m?void 0:m(...Y);
clearTimeout(J);J=setTimeout(()=>b.apply(Y),g)}}function Mf(b,g){return bb(b,["symbol"===typeof g?g:g+""])}function Lg(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Nh(b){return!!b}function lh(b=0){return new Promise(g=>setTimeout(g,b))}function hi(b="noid"){yv[b]||(yv[b]=zy.createContext({}));return yv[b]}function Sg(b="noid"){return zy.useContext(hi(b))}function mg(b){const {callbacks:g}=Sg(),m=yy.useRef(-1);return yy.useMemo(()=>{const J=Y=>{var ia,ta;const {order:Ka=
0}=Y;if(!Ka){var Za=Y.target;Za.removeEventListener("pointerup",J);Za.releasePointerCapture(Y.pointerId);null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"selection",handle:b,order:Ka},Y);ia=Date.now();Za=ia-m.current;300<Za?m.current=ia:300>=Za&&(null==(ta=g.onDoubleClick)?void 0:ta.call(g,{type:"selection",handle:b,order:Ka},Y),m.current=-1);Y.order=Ka+1}};return{onPointerDown:Y=>{var ia;const {order:ta=0}=Y;if(!ta){var Ka=Zh(Y.currentTarget);Ka.setPointerCapture(Y.pointerId);Ka.addEventListener("pointerup",
J);null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"selection",handle:b,order:ta},Y);Y.order=ta+1}},onPointerMove:Y=>{var ia;const {order:ta=0}=Y;ta||(null==(ia=g.onPointerMove)?void 0:ia.call(g,{type:"selection",handle:b,order:ta},Y),Y.order=ta+1)},onPointerEnter:Y=>{var ia;const {order:ta=0}=Y;ta||(null==(ia=g.onPointerEnter)?void 0:ia.call(g,{type:"selection",handle:b,order:ta},Y),Y.order=ta+1)},onPointerLeave:Y=>{var ia;const {order:ta=0}=Y;ta||(null==(ia=g.onPointerLeave)?void 0:ia.call(g,
{type:"selection",handle:b,order:ta},Y),Y.order=ta+1)},onKeyDown:Y=>{var ia;null==(ia=g.onKeyDown)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},Y)},onKeyUp:Y=>{var ia;null==(ia=g.onKeyUp)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},Y)}}},[g])}function Zh(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Zh(b.parentElement);throw Error("Could not find a parent element of an HTML type!");}return b}function ff(b,g,m){const J=Es.useRef(!1),Y=Es.useCallback(()=>
{var ia;if(J.current){const ta=null==(ia=b.current)?void 0:ia.getBoundingClientRect();ta&&(ia={minX:ta.left,maxX:ta.left+ta.width,minY:ta.top,maxY:ta.top+ta.height,width:ta.width,height:ta.height},g.updateBounds(ia),null==m?void 0:m(ia))}else J.current=!0},[b,m]);Es.useEffect(()=>{const ia=b.current?NC(b.current):document,ta=tf(Y,100);ia.addEventListener("scroll",ta);window.addEventListener("resize",ta);return()=>{ia.removeEventListener("scroll",ta);window.removeEventListener("resize",ta)}},[]);Es.useLayoutEffect(()=>
{const ia=new ResizeObserver(ta=>{ta[0].contentRect&&Y()});b.current&&ia.observe(b.current);return()=>{ia.disconnect()}},[b]);Es.useEffect(()=>{Y();setTimeout(()=>{var ia,ta;null==(ta=null==(ia=b.current)?void 0:ia.querySelector(".tl-canvas"))?void 0:ta.focus()})},[b])}function Uh(b,g){return Object.keys(g).reduce((m,J)=>{const Y=g[J];return Y?m+`${`--${b}-${J}`}: ${Y};
`:m},"")}function gj(b,g,m=".logseq-tldraw"){wv.useLayoutEffect(()=>{const J=document.createElement("style"),Y=Uh(b,g);J.setAttribute("id",`${b}-theme`);J.setAttribute("data-selector",m);J.innerHTML=`
        ${m} {
          ${Y}
        }
      `;document.head.appendChild(J);return()=>{J&&document.head.contains(J)&&document.head.removeChild(J)}},[b,g,m])}function Kl(b,g){wv.useLayoutEffect(()=>{if(Kv.get(b))return()=>{};const m=document.createElement("style");m.innerHTML=g;m.setAttribute("id",b);document.head.appendChild(m);Kv.set(b,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),Kv.delete(b))}},[b,g])}function Cj(b,g){const m=wv.useMemo(()=>Qa(Qa({},SC),b),[b]);gj("tl",m,g);Kl("tl-canvas",RC)}function ng(b=
"noid"){Lv[b]||(Lv[b]=$y.createContext({}));return Lv[b]}function xg(b="noid"){return $y.useContext(ng(b))}function Dk(){const b=xg(),{callbacks:g}=Sg(),m=By.useRef(-1);return By.useMemo(()=>({onPointerDown:J=>{var Y,ia,ta;const {order:Ka=0}=J;Ka||(null==(Y=J.currentTarget)?void 0:Y.setPointerCapture(J.pointerId));null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"canvas",order:Ka},J);Y=Date.now();ia=Y-m.current;300<ia?m.current=Y:300>=ia&&(null==(ta=g.onDoubleClick)?void 0:ta.call(g,{type:"canvas",
order:Ka},J),m.current=-1)},onPointerMove:J=>{var Y;const {order:ia=0}=J;null==(Y=g.onPointerMove)?void 0:Y.call(g,{type:"canvas",order:ia},J)},onPointerUp:J=>{var Y,ia;const {order:ta=0}=J;ta||(null==(Y=J.currentTarget)?void 0:Y.releasePointerCapture(J.pointerId));null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"canvas",order:ta},J)},onPointerEnter:J=>{var Y;const {order:ia=0}=J;null==(Y=g.onPointerEnter)?void 0:Y.call(g,{type:"canvas",order:ia},J)},onPointerLeave:J=>{var Y;const {order:ia=0}=J;
null==(Y=g.onPointerLeave)?void 0:Y.call(g,{type:"canvas",order:ia},J)},onDrop:J=>ue(this,null,function*(){J.preventDefault();b.drop(J.dataTransfer,[J.clientX,J.clientY])}),onDragOver:J=>{J.preventDefault()}}),[g])}function wi(b,g,m){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*m):b*g*m/(g+m*b)}function pl(b,g,m,J=.15){return 0===J?Math.max(g,Math.min(b,m)):b<g?-wi(g-b,m-g,J)+g:b>m?+wi(b-m,m-g,J)+m:b}function Xk(b,[g,m],[J,Y]){const [[ia,ta],[Ka,Za]]=b;return[pl(g,ia,ta,J),pl(m,Ka,Za,Y)]}function $h(b,
g,m){g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m;return b}function zh(b,g){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(b);g&&(J=J.filter(function(Y){return Object.getOwnPropertyDescriptor(b,Y).enumerable}));m.push.apply(m,J)}return m}function Ah(b){for(var g=1;g<arguments.length;g++){var m=null!=arguments[g]?arguments[g]:{};g%2?zh(Object(m),!0).forEach(function(J){$h(b,J,m[J])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):zh(Object(m)).forEach(function(J){Object.defineProperty(b,J,Object.getOwnPropertyDescriptor(m,J))})}return b}function Hj(b){return b?b[0].toUpperCase()+b.slice(1):""}function vm(b=!1,g){return b&&!XC.includes(g)}function ql(b,g="",m=!1){const J=Gy[b];g=J?J[g]||g:g;return"on"+Hj(b)+Hj(g)+(vm(m,g)?"Capture":"")}function nk(b){b=b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var m=WC.includes(b)?
"capturecapture":"capture";(m=!!~b.indexOf(m))&&(b=b.replace("capture",""));return{device:b,capture:m,passive:g}}function Tj(b,g=""){const m=Gy[b];return b+(m?m[g]||g:g)}function gl(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function hl(b){return Array.from(b.touches).filter(g=>{var m,J;return g.target===b.currentTarget||(null===(m=b.currentTarget)||void 0===m?void 0:null===(J=m.contains)||void 0===J?void 0:J.call(m,g.target))})}function rl(b){return"touches"in b?("touchend"===
b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function Jj(b,g){const m=g.clientX-b.clientX,J=g.clientY-b.clientY;return{angle:-(180*Math.atan2(m,J))/Math.PI,distance:Math.hypot(m,J),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Yj(b){return hl(b).map(g=>g.identifier)}function ok(b,g){const [m,J]=Array.from(b.touches).filter(Y=>g.includes(Y.identifier));return Jj(m,J)}function Zf(b){const g=rl(b);return"touches"in b?g.identifier:g.pointerId}function Xf(b){b=
rl(b);return[b.clientX,b.clientY]}function oj(b){let {deltaX:g,deltaY:m,deltaMode:J}=b;1===J?(g*=40,m*=40):2===J&&(g*=800,m*=800);return[g,m]}function vh(b,...g){return"function"===typeof b?b(...g):b}function Ai(){}function pk(...b){return 0===b.length?Ai:1===b.length?b[0]:function(){let g;for(const m of b)g=m.apply(this,arguments)||g;return g}}function ii([b,g],m){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>m)return"x";if(g>b&&g>m)return"y"}function Vh(b){Ev.set(b.key,b.engine);Dv.set(b.key,b.resolver)}
function Kj(b={},g){const m={};for(const [J,Y]of Object.entries(g))switch(typeof Y){case "function":m[J]=Y.call(m,b[J],J,b);break;case "object":m[J]=Kj(b[J],Y);break;case "boolean":Y&&(m[J]=b[J])}return m}function Ek(b,g,m={}){const {target:J,eventOptions:Y,window:ia,enabled:ta,transform:Ka}=b;var Za=fD;if(null==b)b={};else{if(null==b)var db={};else{db={};var sb=Object.keys(b),xb;for(xb=0;xb<sb.length;xb++){var Wb=sb[xb];0<=Za.indexOf(Wb)||(db[Wb]=b[Wb])}}if(Object.getOwnPropertySymbols)for(xb=Object.getOwnPropertySymbols(b),
Wb=0;Wb<xb.length;Wb++)sb=xb[Wb],0<=Za.indexOf(sb)||Object.prototype.propertyIsEnumerable.call(b,sb)&&(db[sb]=b[sb]);b=db}m.shared=Kj({target:J,eventOptions:Y,window:ia,enabled:ta,transform:Ka},iD);if(g){var kc=Dv.get(g);m[g]=Kj(Ah({shared:m.shared},b),kc)}else for(kc in b)(g=Dv.get(kc))&&(m[kc]=Kj(Ah({shared:m.shared},b[kc]),g));return m}function mh(b,g){b.gestures.add(g);b.gestureEventStores[g]=new Ny(b,g);b.gestureTimeoutStores[g]=new dD}function ji(b,g,m,J,Y,ia){if(b.has(m)&&Ev.has(J)){var ta=
m+"Start",Ka=m+"End";Y[J]=Za=>{let db=void 0;if(Za.first&&ta in g)g[ta](Za);m in g&&(db=g[m](Za));if(Za.last&&Ka in g)g[Ka](Za);return db};ia[J]=ia[J]||{}}}function Ph(b,g={},m,J){const Y=Cv.default.useMemo(()=>new eD(b),[]);Y.applyHandlers(b,J);Y.applyConfig(g,m);Cv.default.useEffect(Y.effect.bind(Y));Cv.default.useEffect(()=>Y.clean.bind(Y),[]);if(void 0===g.target)return Y.bind.bind(Y)}function il(b){b.forEach(Vh);return function(g,m){m=m||{};const J={},Y={},ia=new Set;for(let Wb in g)bD.test(Wb)?
(ia.add(RegExp.lastMatch),Y[Wb]=g[Wb]):J[Wb]=g[Wb];const [ta,Ka,Za]=[Y,J,ia];g={};ji(Za,ta,"onDrag","drag",g,m);ji(Za,ta,"onWheel","wheel",g,m);ji(Za,ta,"onScroll","scroll",g,m);ji(Za,ta,"onPinch","pinch",g,m);ji(Za,ta,"onMove","move",g,m);ji(Za,ta,"onHover","hover",g,m);const {handlers:db,nativeHandlers:sb,config:xb}={handlers:g,config:m,nativeHandlers:Ka};return Ph(db,xb,void 0,sb)}}function rk(b,g){return il([mD,kD,lD,hD,oD,zD])(b,g||{})}function Uj(b){const {viewport:g,inputs:m,callbacks:J}=Sg(),
Y=cD.useMemo(()=>({onWheel:ia=>{var ta;const {event:Ka,delta:Za}=ia;Ka.preventDefault();"pinching"===m.state||pe.isEqual(Za,[0,0])||(null==(ta=J.onWheel)?void 0:ta.call(J,{type:"canvas",order:0,delta:ia.delta,point:m.currentPoint},Ka))},onPinchStart:ia=>{var ta;const Ka=b.current,{event:Za}=ia;(Za.target===Ka||null!=Ka&&Ka.contains(Za.target))&&["idle","panning"].includes(m.state)&&(null==(ta=J.onPinchStart)?void 0:ta.call(J,{type:"canvas",order:0,delta:ia.delta,offset:ia.offset,point:pe.sub(ia.origin,
m.containerOffset)},Za))},onPinchEnd:ia=>{var ta;const Ka=b.current,{event:Za}=ia;(Za.target===Ka||null!=Ka&&Ka.contains(Za.target))&&"pinching"===m.state&&(null==(ta=J.onPinchEnd)?void 0:ta.call(J,{type:"canvas",order:0,delta:ia.delta,offset:ia.offset,point:pe.sub(ia.origin,m.containerOffset)},Za))},onPinch:ia=>{var ta;const Ka=b.current,{event:Za}=ia;(Za.target===Ka||null!=Ka&&Ka.contains(Za.target))&&"pinching"===m.state&&(null==(ta=J.onPinch)?void 0:ta.call(J,{type:"canvas",order:0,delta:ia.delta,
offset:ia.offset,point:pe.sub(ia.origin,m.containerOffset)},Za))}}),[J]);rk(Y,{target:b,eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:Xo.maxZoom,min:Xo.minZoom})}})}function sl(b,g,m,J){Av.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,m,g.rotation]);Av.useLayoutEffect(()=>{const Y=b.current;Y.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;Y.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Av.useLayoutEffect(()=>{const Y=b.current;void 0!==J&&(Y.style.zIndex=J.toString())},[J])}function Tm(b,g){const {onPersist:m,onSave:J,onSaveAs:Y,onError:ia,onMount:ta,onCreateAssets:Ka,onCreateShapes:Za,onDeleteAssets:db,onDeleteShapes:sb,
onDrop:xb,onPaste:Wb,onCanvasDBClick:kc}=g;Ly.useLayoutEffect(()=>{const Ob=[];if(b)return b.history.reset(),window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,ta&&ta(b,null),()=>{Ob.forEach(sc=>sc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Ly.useLayoutEffect(()=>{const Ob=[];m&&Ob.push(b.subscribe("persist",m));J&&Ob.push(b.subscribe("save",J));Y&&Ob.push(b.subscribe("saveAs",Y));ia&&Ob.push(b.subscribe("error",ia));Za&&Ob.push(b.subscribe("create-shapes",Za));Ka&&Ob.push(b.subscribe("create-assets",
Ka));sb&&Ob.push(b.subscribe("delete-shapes",sb));db&&Ob.push(b.subscribe("delete-assets",db));xb&&Ob.push(b.subscribe("drop",xb));Wb&&Ob.push(b.subscribe("paste",Wb));kc&&Ob.push(b.subscribe("canvas-dbclick",kc));return()=>Ob.forEach(sc=>sc())},[b,m,J,Y,ia])}function sk(b){if("app"in b)return b.app;const [g]=Ky.useState(()=>new PC(b.model,b.Shapes,b.Tools));Ky.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Ii(b,g){$C.useEffect(()=>{"model"in g&&g.model&&
b.loadDocumentModel(g.model)},[g.model])}function Zj(b){const g=Sg(),{viewport:{bounds:m}}=g;aD.useEffect(()=>{const J=ta=>{ta.preventDefault()},Y=ta=>{const Ka=ta.touches[0].pageX,Za=ta.touches[0].radiusX||0;(10>Ka-Za||Ka+Za>m.width-10)&&ta.preventDefault()},ia=b.current;if(!ia)return()=>{};ia.addEventListener("touchstart",J,{passive:!0});ia.addEventListener("gestureend",J,{passive:!0});ia.addEventListener("gesturechange",J,{passive:!0});ia.addEventListener("gesturestart",J,{passive:!0});ia.addEventListener("touchstart",
Y,{passive:!0});return()=>{ia&&(ia.removeEventListener("touchstart",J),ia.removeEventListener("gestureend",J),ia.removeEventListener("gesturechange",J),ia.removeEventListener("gesturestart",J),ia.removeEventListener("touchstart",Y))}},[b,m.width])}function ai(b,g){const {inputs:m,callbacks:J}=Sg();return ZC.useMemo(()=>({onPointerDown:Y=>{var ia,ta;const {order:Ka=0}=Y;Ka||(null==(ia=Y.currentTarget)?void 0:ia.setPointerCapture(Y.pointerId));ia=b.props.handles[g];null==(ta=J.onPointerDown)?void 0:
ta.call(J,{type:"handle",shape:b,handle:ia,id:g,order:Ka},Y);Y.order=Ka+1},onPointerMove:Y=>{var ia;const {order:ta=0}=Y,Ka=b.props.handles[g];null==(ia=J.onPointerMove)?void 0:ia.call(J,{type:"handle",shape:b,handle:Ka,id:g,order:ta},Y);Y.order=ta+1},onPointerUp:Y=>{var ia,ta;const {order:Ka=0}=Y;Ka||(null==(ia=Y.currentTarget)?void 0:ia.releasePointerCapture(Y.pointerId));ia=b.props.handles[g];null==(ta=J.onPointerUp)?void 0:ta.call(J,{type:"handle",shape:b,handle:ia,id:g,order:Ka},Y);Y.order=Ka+
1},onPointerEnter:Y=>{var ia;const {order:ta=0}=Y,Ka=b.props.handles[g];null==(ia=J.onPointerEnter)?void 0:ia.call(J,{type:"handle",shape:b,handle:Ka,id:g,order:ta},Y);Y.order=ta+1},onPointerLeave:Y=>{var ia;const {order:ta=0}=Y,Ka=b.props.handles[g];null==(ia=J.onPointerLeave)?void 0:ia.call(J,{type:"handle",shape:b,handle:Ka,id:g,order:ta},Y);Y.order=ta+1},onKeyUp:Y=>{var ia;const ta=b.props.handles[g];null==(ia=J.onKeyUp)?void 0:ia.call(J,{type:"handle",shape:b,handle:ta,id:g,order:-1},Y)},onKeyDown:Y=>
{var ia;const ta=b.props.handles[g];null==(ia=J.onKeyDown)?void 0:ia.call(J,{type:"handle",shape:b,handle:ta,id:g,order:-1},Y)}}),[b.id,m,J])}function Jh(b,g,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${m?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Kh(b,g,m=0){sp.useEffect(()=>
{const J=b.current;J&&J.style.setProperty("--tl-cursor",Fo[g](al.radiansToDegrees(m)))},[g,m])}function hj(b){const {viewport:g}=Sg(),m=xg();jD.useLayoutEffect(()=>cd(()=>{var J;const Y=g.camera.zoom;"pinching"!==m.inputs.state&&(null==(J=b.current)?void 0:J.style.setProperty("--tl-zoom",Y.toString()))}),[])}function si(b,g=0){const [m,J]=(0,Jy.useState)(b);(0,Jy.useEffect)(()=>{let Y=!1;const ia=setTimeout(()=>{requestIdleCallback(()=>{Y||J(b)})},g);return()=>{Y=!0;clearTimeout(ia)}},[b,g]);return m}
function jl(){const b=xg();Iy.useEffect(()=>{ce(()=>Qa({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Iy.useEffect(()=>{var g;const m=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");m?b.viewport.update(m):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Yk(b){b()}function pj(b){return nc(se(b,void 0))}function Gg(b){return{reaction:b,
mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+Oy}}function wj(b){var g=new Map,m=1,J=new b(function(Y){var ia=g.get(Y);ia&&(ia.reaction.dispose(),g.delete(Y))});return{addReactionToTrack:function(Y,ia,ta){var Ka=m++;J.register(ta,Ka,Y);Y.current=Gg(ia);Y.current.finalizationRegistryCleanupToken=Ka;g.set(Ka,Y.current);return Y.current},recordReactionAsCommitted:function(Y){J.unregister(Y);Y.current&&Y.current.finalizationRegistryCleanupToken&&g.delete(Y.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function pi(){function b(){void 0===J&&(J=setTimeout(g,1E4))}function g(){J=void 0;var Y=Date.now();m.forEach(function(ia){var ta=ia.current;ta&&Y>=ta.cleanAt&&(ta.reaction.dispose(),ia.current=null,m.delete(ia))});0<m.size&&b()}var m=new Set,J;return{addReactionToTrack:function(Y,ia,ta){Y.current=Gg(ia);m.add(Y);b();return Y.current},recordReactionAsCommitted:function(Y){m.delete(Y)},forceCleanupTimerToRunNowForTests:function(){J&&
(clearTimeout(J),g())},resetCleanupScheduleForTests:function(){var Y;if(0<m.size){try{for(var ia=gD(m),ta=ia.next();!ta.done;ta=ia.next()){var Ka=ta.value,Za=Ka.current;Za&&(Za.reaction.dispose(),Ka.current=null)}}catch(sb){var db={error:sb}}finally{try{ta&&!ta.done&&(Y=ia.return)&&Y.call(ia)}finally{if(db)throw db.error;}}m.clear()}J&&(clearTimeout(J),J=void 0)}}}function Lj(){return new JD}function Dh(b,g){void 0===g&&(g="observed");var m=az(Hs.default.useState(Lj),1)[0],J=az(Hs.default.useState(),
2)[1],Y=Hs.default.useRef(null);if(!Y.current)var ia=new bf("observer".concat(g),function(){ta.mounted?J([]):ta.changedBeforeMount=!0}),ta=Mt(Y,ia,m);m=Y.current.reaction;Hs.default.useDebugValue(m,pj);Hs.default.useEffect(function(){BD(Y);Y.current?(Y.current.mounted=!0,Y.current.changedBeforeMount&&(Y.current.changedBeforeMount=!1,J([]))):(Y.current={reaction:new bf("observer".concat(g),function(){J([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},J([]));return function(){Y.current.reaction.dispose();
Y.current=null}},[]);var Ka,Za;m.track(function(){try{Ka=b()}catch(db){Za=db}});if(Za)throw Za;return Ka}function gf(b,g){var m;if(dz&&b.$$typeof===dz)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(m=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==m?m:!1;var J=b,Y=b.displayName||b.name;if(cz&&b.$$typeof===cz&&(g=!0,J=b.render,"function"!==
typeof J))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");m=function(ia,ta){return Dh(function(){return J(ia,ta)},Y)};""!==Y&&(m.displayName=Y);b.contextTypes&&(m.contextTypes=b.contextTypes);g&&(m=(0,Er.forwardRef)(m));m=(0,Er.memo)(m);Fk(b,m);return m}function Fk(b,g){Object.keys(b).forEach(function(m){QD[m]||Object.defineProperty(g,m,Object.getOwnPropertyDescriptor(b,m))})}function Wi(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Dh(b)}function yj(b){const g=
xg(),{callbacks:m}=Sg(),J=ez.useRef(!1);ez.useEffect(()=>{const Y=Za=>{var db,sb;if(null==(db=b.current)?0:db.contains(document.activeElement))null==(sb=m.onKeyDown)?void 0:sb.call(m,{type:"canvas",order:-1},Za),J.current=Za.shiftKey},ia=Za=>{var db,sb;if(null==(db=b.current)?0:db.contains(document.activeElement))null==(sb=m.onKeyUp)?void 0:sb.call(m,{type:"canvas",order:-1},Za),J.current=Za.shiftKey},ta=Za=>{var db,sb,xb;!g.editingShape&&(null==(db=b.current)?0:db.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(xb=null==(sb=document.activeElement)?void 0:sb.tagName)?xb:"")&&(Za.preventDefault(),g.paste(Za,J.current))},Ka=Za=>{var db,sb,xb;!g.editingShape&&0<g.selectedShapes.size&&(null==(db=b.current)?0:db.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(xb=null==(sb=document.activeElement)?void 0:sb.tagName)?xb:"")&&(Za.preventDefault(),g.copy())};window.addEventListener("keydown",Y);window.addEventListener("keyup",ia);document.addEventListener("paste",
ta);document.addEventListener("copy",Ka);return()=>{window.removeEventListener("keydown",Y);window.removeEventListener("keyup",ia);document.removeEventListener("paste",ta);document.removeEventListener("copy",Ka)}},[])}function hn(b){const {inputs:g,callbacks:m}=Sg(),J=Sy.useRef(-1);return Sy.useMemo(()=>({onPointerDown:Y=>{var ia,ta;const {order:Ka=0}=Y;Ka||(null==(ia=Y.currentTarget)?void 0:ia.setPointerCapture(Y.pointerId));null==(ta=m.onPointerDown)?void 0:ta.call(m,{type:"shape",shape:b,order:Ka},
Y);Y.order=Ka+1},onPointerMove:Y=>{var ia;const {order:ta=0}=Y;null==(ia=m.onPointerMove)?void 0:ia.call(m,{type:"shape",shape:b,order:ta},Y);Y.order=ta+1},onPointerUp:Y=>{var ia,ta,Ka;const {order:Za=0}=Y;Za||(null==(ia=Y.currentTarget)?void 0:ia.releasePointerCapture(Y.pointerId));null==(ta=m.onPointerUp)?void 0:ta.call(m,{type:"shape",shape:b,order:Za},Y);ia=Date.now();ta=ia-J.current;300<ta?J.current=ia:300>=ta&&(null==(Ka=m.onDoubleClick)?void 0:Ka.call(m,{type:"shape",shape:b,order:Za},Y),J.current=
-1);Y.order=Za+1},onPointerEnter:Y=>{var ia;const {order:ta=0}=Y;null==(ia=m.onPointerEnter)?void 0:ia.call(m,{type:"shape",shape:b,order:ta},Y);Y.order=ta+1},onPointerLeave:Y=>{var ia;const {order:ta=0}=Y;null==(ia=m.onPointerLeave)?void 0:ia.call(m,{type:"shape",shape:b,order:ta},Y);Y.order=ta+1},onKeyUp:Y=>{var ia;null==(ia=m.onKeyUp)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},Y)},onKeyDown:Y=>{var ia;null==(ia=m.onKeyDown)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},Y)}}),[b.id,g,m])}
function Gk(b){var {viewport:g,inputs:m,callbacks:J,components:Y}=b;b=bb(b,["viewport","inputs","callbacks","components"]);return(0,Kb.jsx)(WD,{id:b.id,viewport:g,inputs:m,callbacks:J,components:Y,meta:b.meta,children:(0,Kb.jsx)(UD,Qa({},b))})}function tl(){return(0,Kb.jsx)("img",{className:"logseq-img-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAIAAACxN37FAAAcXElEQVR4nOyde2xb13nAzzmXXkk6D1GiFNN6xFQt6+HYnZTVSqWgduR4qZ1C7qoAzRYPLdJ0W4egWIdh6ApsK9YAHfLH9kdTLN6S9LV0eVhe4yaxk0ZK4lhqrdhSmtikFDmmHo6ViJTIthFJz9I9wznnXpKOX5RM3nN57veroMoOxftZ+vHjd77zuC60cQsCAFUgsgMAgEICQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNK4ZIdAHABbq/H7fHm/k1ibk5eOKUHCC2TQG1NoK56TW21z1+xtq7a7fG4vZ6LH5ZOpmam308lU5HR8cjYqZnpMzKCLQ0w3OvbYtxeT1tHe7Cpob5x/SX1vSrx2HxkbHx4YCgyNl6EAEsbENoi3F7PrZ3tza2bg43rC/Wc8dh8/4GDwwNHC/WECgBCFx2319O5Y1vHndtWlo+vSjw23/vEk5CtBSUgdFlFRX3T+jW11R6v1+cvz/x9KpmKx+YSsfmZ6fft+et0e72dO7YWT+Vc+g8c6nvuxWJfxf7YV2iR2No628sqyvN5fGTs1PEjRyNj44m5+eJHd3U6d9zR1f05C1TOEBp5u/eJJ9PJlGVXtCF2FDpQW333n/asuNYcHjja99xBiVr7/OU99+8pYK2cP8MDR3ufeNL669oHDVVVy44hi9vrueue7p779+SWFsslUFfTuWObz1/+wfRZ69NVS9vmr/zN1ysDN1l8XUGgriadTJ2JTEq5uh2wkdBr62oe+PtvNNzSXJBnC9TVdOzY5lntnT49sXh+sSDPeVW27965+8+/5Fq1yprLXZINm5qPHzmaTjm08LCL0M2tm/c8+MB1N95Q2KetrV+3ecutkbFTH/3ud4V95ovZvntnV/fOYl8lP+j4iVHZMchBvtAY47bO2+79yy8XKbF5vJ4t2zoxxkXthNjJZlQVWDP02pHFRYvel2yF/MVJa2rW3n3vnxT7Kl3dn7v73i8W6clv7Wy3j81iKLK2tgZRKjsQCcgUGmPs85fvefBr1vS2OnZsu+/BBwp+LZ+/YlfRXiorJlBXjWXHIAWZQlNKt3fvLLuGhsZyaeGVungtFeo5t1vbbM4Tt8fjxPwsV+jm1k2tne0WXzTY2NBz/320EG/HGOP6xvXW/xPyg2LkRKXlCU3p5+/tkXLlts727bt3XnuSprresWNbgYIqMGcnp9mL1nlltCShKa1varCy2PgYXd0712345LU8A0ao3F/R3Lq5cEEVkpnJaRGk05CWoaXnNjYY9bhX/O2U0ptq1xY0ooIRj8bEPhfH5WdZQnu8Hum5ze313PPVPdeSw9bW1RQwngLSt/8XwmWMHZekZQhN6ToZC3cuZsXL7TH/8OW3DNBi4tHYxOi7LD5eQDstScvJ0BvbPiXluhfT1b1zuSMnrop9x1v9+w8kYvO8B0PsGmMRsVxoSjGia2ptsYAEIRRsaqhvalje9/D+CEU0tZAsVlgr5XRodPiNQcreQTB1WrXBkZChKaXXsjq04Cw3SVMOonRmarqYcS2beDTWu/cJ/oLDRllUuPmjUkGC0B6v1+31Wn/dy7HiJB06/laxYlo+6WTy8YceZsUGJtSRKgusF5peS7OsSDS3blpuTUy5Q5HwWNGCWgbC5ji3mbc2CE/TTnTaWqHtOpZq67xtRb983Lv3h4WPZpnEo7FH/uE7ZyemmcqEIEIwYTbb8QddfKwT2kwY2IZOu72eYON6PmDNCyx6vAjFY3Mv/OSpYod3BSKh0Ue+9Z1EbA4TYiZmXnI4FeuENtYDsc+2E1qst8y/a2s8jNsz+NIrI4cHixrbJUknky/+5GePfffhdCpFMaaYYI2lZ8rqZ4emZxk7VqiOEf7s5++y9KJ5cP78+XeGjudZd7KHZZWh4WPDbq+3tuGaFocsi0ho9Ef/+m/jb580KmaiITNDGx9OxdLDGjFCFONUciGdTNqq0SE21RozJnnYQA2pCWWZkdAl+sJPn4pHY9vv2V3sf1ckNNrX+1wkNIpFgUE0VmAIm4lDW3W5WCc0znlDn5k6E2zaYNml88Hnr8jTZiEzpdSYv+Dv8YjSwUO/DB8b7urZ3bb19mJEaKrM+yqYUGYzoZm2BiFOrjQyWCd0zs8az0xO201ofuZYeWI+kc8jDfUp4iYZf4kpjcfm9u99or/3ue09X2jd2lmQqCKh0dCx4eHXB9LJJDYrCuauqJsJN5v7DTZbm6H5hDHV2deR8HjHXdstu3S+sDdvJmmeZoiMKAoP9qZPKdaZ6/Ho3L5HH+vb9/NgS1Pb1s7Aurrl1iGJaOx0aPSDyanjpse8yMmWyNSoN/jf5B2wE7AwQ/P3ZvGefjpsx1MjfJXlifl4/iWo0Ii/9WuIEqovsWxNKaI6ojgxNzd8eGDk8ABFtL6lac3NtWV+v6/K7/F6yyr9uRdJJZOJaCy1kJyZnIpHYzMTU4lY5tR+zGf+kOmxkYxZYuaXhqL5Y1g6KGRO84FhOpmKhMeCzY1WXj0f8h8Xmt+AzX8VYlojQpeWkNFtp2LdB0I4Eh47HRoVelLxQqAX7CcRX1JjoCGmRXImR4zuMuJdOW42ynYzREFf6J9EqWLtTCH/DfFfMRp541eWXjoPEtEV3c1E2G8UtRhpGtJcRh+NEPZHw0KSOy9tdtmMD5qZryYaMotjJD6zp9Ko+VRmQ4NkXnVgcy7Wr+XgmygwPnlsJJ201/LLVDJJMx25ZSGSJSHYEFFMQWs4ozX/AhtfE2Etfxg2S2FCiTlxbbwGCNUIJRp/hWhCa/ZIlE3MxfpBlDJWC41FKkI4nUoNHnrF4qtfgXQyyYZf4g8rynmi85Cd5iCEChF5wsaaRkWiJYQKxTVmPP97gjUXJiKvm9+iideDlvs6yV1GB4n5klgqdLba46OZgUOv2CdJz0xOI2qO81b0DDSz5SlbYBAjMXPLeeo1NMXccpaGTWszRQU1Xg9apvBA0JLLG0uF5sMnLNaCIcyGhgMH7ZKkI6PvmsmvMPIYPWOExUyeaBtnKgdWYGBipmFi/CdWTJNsXWF6DDbnj9UlhxgUUjNJDx56ZYVDsUJzOjQmBneFOs0i06AwPwg2W2/862z2RcbcNb7gA1gRMjbJYnMkRMi5VGrf3sclxHAhfKf0eFbB4kBzvsisOaQXXRGK42tBgtBixxtv3rF0FQm/O3jol9aHkUskPGamRrmBANeKnE2yKPtezN5q+3oPyC08+vb/wsiKkBxLHElHgV1QL5JzqfRjDz0sq+MxfHiA7y2F4lUFpJ7gj43JMIpwIjb3+HclOB2Pxvp6D2BiegxClzjShM6shKRIrOvFZ6emrXe6r/e5RGxexGDP/Y7AspB/06CccRj9feK34785sbljizV3Rhs4+PIbz7+ERWM4M2sNlDKyhTZX9mBzQ8tHicSJwaGWP2p1ry7uXqaZiekn//0HfO1E1mZYIFHqyBZawBdKixWVGOPUwkL42IjH6w2sqyvSBWcmph576OHFxSUxP8dn77CTd/8rg3yhWWqkH5+eSycXQnw5XtXaQMFT9fDrR57+/t50Om2uxtQgPSuDfKFRtreAMWF5GptMj783WtBUnU4mX/qfZ19+undxaZGv4eRrNcVqT0AJMNq4RXYMxio8zE/tQJRSfQnpFOk6QrpY+eGrrLj23dSnQ6O9jz6ebTnzdck0s1EPUAJbCJ1FHH5nbMvTka4Ly6nOBozllf6unu5gS1NZpT//p0wnk5GTowMHX46E3xWT29xjbCxzQ849Bk5JbCS0sVpadIKZypTqOj//Qs+KzlshweamYEtjsKVp7eU3VCeisfdCoxOhsfCx4VQyhXIn24mx+99c7CaNsooKj9fj9nrEgdluj+fie3gm5ub5IXrGZ3E3IOBy2EhogbEkmR/0T3VTZVZ+0Byts6suPF6vr9L/CaY1Fa2/RGwu9dFCOpUSz8dncMT+U3OVZs6pWZbtMGXWVlQE6qrX1Fb7/BVr66rLVnqLlnQyNTP9fjqZOjt1Zmb6/URsfmb6TKHjLVVsJ7R5cpzYL00xRTkZWiTsHKdpbn/k4o3URpM7uyJZ1BgEW1NplFVU1DetDzY21DetX7G++SAUPzt1Jjzyzsz0mbR4R3IkdhRaYMy0iDIjW1tTUZcYohtQJE4yMs8zMrbiGkJnkjHhh3fxhkbRKg231xOorWlp3dTStrmoEl+ByNip06PjkbFTkbFxKQFIxL5CZ8k5h5efanFBPZ3zXwVikgZnDmdBhtM5p1sUAeFxx45t9Y3r7XMv+3hsPjI2Pjww5ByzS0FoQUZZfiAv01qnRiLmdYiYFsn6ijHK1BXmBHsxjmUJNja0tG1q62i3j8cXw80+1X/gYDym+JiyZITOisg/m9tZqXncEM3Z4GpuDkQ4ewJdEQZ/t97e3trRvrJbd8oiMnbq+JGjI4NHZQdSLEpG6Fw+LjfGmS3l2e0w4o9FuLrb6+nccUfHnVvtnJKvTDw233/g4PCAglqXpNAXYzRGinzQm9vr7dyxtePObaWrci7x2Hzfcwff+tWQSttyFRHaAm69vX3Xl76ohsq5iGw9MqiI1iD0VcAYBxvXd3XvLK1aebnEY/NP/uCxmamSn6ABoS8Lxtjt9XR17+y4c6vsWCxieGCo1Dsh9lg+akvqmxq+8s2vN9zSLDsQ6wjUVTe3bk6n0qU7lw5CX5rtu3f23H+fehXzVfF4PS2tm3z+8sjYqcXzi7LDWTYg9Mfx+cv3PPi1ts522YHIJFBXs3nLreG33jmXSsuOZXmA0Bewtq7mK9/8eqAWfiYsVbd1ti+eXzwTmZQdyzIAobM0t27e8+AD1914g+xA7IJr1So+hMAT756SHUu+gNAGnTu29dx/nzXngZQWwcb1ZRXl4ZF3ZAeSFyA0Ihh37d75xz3dsgOxL4G6mpa2TW8PDdt/mAhCo67dO7u6d8qOwu5cf+MNGza1vPPmyOL587JjuRLOFVosaWrr3HL3vT2yYykNrr/xhoZbmm2epx19HsXa2uqe+/fIjqKUCNRW73nwAdlRXAknZmhxio2vwvflb/61A6dOrhGfv6LcXxEaeVt2IJfGiUKLveJ/9e2/LfPL2fNX6gTqqjGikTE79vIcV3KI9NzVfRfYfC107d5Vb8vlh44TGiHa2vHpjh13yA6j5Lnvwa+VlfvsdsKlg4QWP/qyct/27l2yY1EBt9dzz1f3IHN7sk1wkNCUUsKKjV1QbBSKYFPDZ2y2WNwpQossclN1oO12Ry+jKzjbd++yVeHhFKFZekZozzf+QnYgquH2enruv88+hYcjhBZn87d2tss6m0ttgk0NwQ2flB2FgSOEFuc7woKN4tG1exfVl+yQpNUXWqTnYON6GAsWj2BTQ31jA8oenykN9YVGPEV/BhrPRaZr9y473IlXcaExxlTXy/0VLW2bZceiOLySXi99dKi40OJeRE1/eIvsQBxB1xd2GSMWeagstDjwDlG99fbbZMfiCIKNDZ9wfwIhmUlaZaHFebo+f0WgrkZ2IE6hrfM2BBm6eFCqq30mnd1oaduML7ihgtUoLbQooFs/JTsOBxFs2uD2uEHowsMPitYRpb7KCtmxOIt1G9ZTeb0OZYWmVMcUuT0eKKAtJtjUIG5xLeXqagpt3G0T0UCdEzeYyWVtXS2W17xTU+hMN9Tnh3rDagI319DMTfcsR1mhmdG6fiMsr7Mct9fr81fgC27rax1qCm3cVpnv7pYdixPx+cuRnr1BmZWoKTRv2GFKdc9qOHZDAmUV5ZTqVMbiOwWFzmQFgokad3YqOdxej7i9uvU/fwWFzr0Dp+zFjA7Fs9qLKKK6hGyioNDmaTKI6jokaDlQvomTSMgnagrN72avSxmUABw2IocMXRhyJKap5ILcYJyJqPcogkFhIRBbYhFiZXR8NiY7HCeSXkjyrRVQchQIah7KeC6Zkh2LE4nHYnxzhYT5QjWFNsGR0KjsGJxIeiElaziuptCZtt18NJZOJmWH4zg+mJxCmWaTtagpNAcjvuQuHoUy2lLSC8nUgpFErC+jFRZaHBKBIyfDsuNwFjOTUzw3E4yQbvlKf3WF5j9HjHH4zWHZoTiLmQlRbyCEifWz32oKbfwI+XqCs5PTUEZbSSQ0auyvkIGaQgv4j5WcS6VmIlOyY3EQkfAYwtK2yaorNE/P4quBFw/JjsYpRE6GU8kFygsOBKvtCgir3vgSUopxJDQKVYc1DL/+BkYEEwIlR6HhLQ7K80Q6lRp8HpK0FURCo+Inj0RCsRxlhWZvdhhjQjDRECIjrx+RHZH6DL96OB6d4++KCGM5aikrtAnfOKFp8djcyKuHZQejOKzeIIRLJc0rpYUW40JMxBd9z+yXHZDKzEQmJ0JjmGhUTKoQyNDFALMhCqs6CIEkXVQGXziEMKFYVM8SVnEIVBZalNH8QAOWp4mmvfCjn0K7oxjEZ6Mjh4+wrMzHLQhjXZdzvxWVhRaw9IwJJUTHOJ1K9z/dKzsiBdn/g/9kpR1TWSRpaZEoLjRP0ny9PyGIFR7a4IsvzUxMyo5LKYZfff10KIwIV5mwCk9Wi0N9ocXZ2/xNkJXRIoX0PvJoegEKj8IQn432P7Mf8fYo1jRDa3moLzTiQ0OKkRgaUow/mJzufwYKj8Lw6rP7E3PzCLOKjld3WO59g5wiNHsT5CUH0njh8cKh8JvHZIdV8gy/enj4tTcQJlhzYaLpCEnsbwicITT7hxJ+kpKGiUZ5l7T3+48mZqOywypheLHRy1KyplHCht18VkXybd00VOWUI8H5ciVe4OkUUbp0/nx46Fhb11bXqlWyQys90gvJvd/+50Rsjmou/r7nwppL4ox3BsdkaLPwwJqGXS5ReMSjscf/6V+gM70Cnn/ix4nYHK/iWL0hpmOxDU7HdFaGFv9v/tBZnv59PLEQjze3f1pycCVF31P7fn3wZV5paNi1ihUbmia3uZHBQUJnwcbIhc8A4JmJycSHs+B0nvQ/va//2f2swCAEsfc6VnIQTZN/33qO44TG2UUzlP8GKKX0g4mpxOxs8xZw+ipwm/8XEYI0grVV2MVKZ0TkLH2+JI4T2txryP5HjT8yqWciE6NDxzbf3uH6AxgjXpr+p/b1PduLRdGsGbkZYYIlLay7JA4Vmm+vz2RrKu5w81Ei8fYbR1raP+1evVp2jLaD2fxML+YdOjaqJprx2U42O1RoA56oMeGTAQTz0zJROpkM/frN4KaN15eVyY7PLqQXkj/f+1+/evElrGlI07C2CokviMuGd0hwrtBYlBpiNTo1eyCU/f6GDv3Sc93q2g0NsmOUT3w2uvdb/zgRGuPzJqKt4UIuF7OZEBueJ+9coZFZfFDzcEdRVYtf0qm3fhP/cHZtcJ2Ty4/w0WM/fuh7H/3uI9GYQ5oLr1pFNT7bKnsC5XI4W2iBSDPkgkUIGKEPJiZDR98MBNf5qiplhieD9ELy5f/+2Qs//Mni0hLCRMxDYdcqXjTzTVYgtJ0xutIEI3NtjRg1/l8qdbzvtd9GowEnperIidCPv/u98d+8LZYcid4cNlvOfLOg7SqNDCC0QbbvITYR8ZYeq0MImZmYCA+96fZ6A8F1ssMsLiIxH9j7eDqdpnyZAOX9ZsSnA0WHzj4t50uC0cYtsmOwC8YwcWmJDRL1RbS4hKlOlxaRrlNdR5SWV1X+2bf+LhC8WXakRWHwFy/2P7MvtZDky0E1UWlQohGXi8nNKw3pSzWuCgh9AcJp9qEv8Q8mNGZCL2KKqK5jRNvu2Nr1pXvKFCqsIydCvY/8R3w2isUaI03TsTEKpHynIG8222g68AqA0B9HFNGUZ2VMl1jC5lojqmORv9l/VkTryIlQ/9P7Tp8IITF+MBeLY82oMZDYhGK/9tzlAKEvgZGnEeVOU1F1YKojXTfSNvuaPaB+08a2bVtbu7bKDnl5pBeSw/2vDT5/MD47y4Z9GPN+PNF5PiauVeZ+KkKNWdWSyM4IhL4sZmeaSc2+0lmeNoSmOlpaMioTvgbVV1nZ2rW17Y7PllVVyQ78KkROnAwPHT/e/+q5ZCr3WCkxBDR2qfGdlyxby452BYDQV4EXGKwEMQtrYTMz28jfui6KEEpRcGNzW9fW+ls22q0UESk5PHQscjLEV2MhVmPknKTBF80RY/DH1ySWos0g9DLAvALhSZp5jER5jVhVzcprZIwmxX1sg5tabr1jW/CWZrk5OzEbDR19Mzx07PSJk1ic0EX4phJhsxBa7DohGtKIOLCV5twXr+QAoZcFFaWzGB3ytK0bpYi4XT6rUijP6FTcR7Xipqp1Lc3rbmkJBNdZ08ZOzEbfO3Fy4kQocjKciEbFySTmuZXY6LIT7q7YAy8MFn06ebeSKBQg9DLIFNZCX5an2fhw0SiykfgjK68JeySvUvhd3MU3uld716y7uX7jxkDw5rKqykL5nZidfe9E6MPI1PzshxMnw6mFBXOyk1CjOSGqZFFjsPICaxpFOHPyjnGYRkGikQ0IvVLMESGrQNgfdWqMFEVBYiZsnqqNhXwok7lFIwXdWOn3Vfk9q68vq/J7rlt9Y6Xfu3q1+7rVmTu/+6oq52dnxeuB39By4dzCQmoh+dvZaDwWS8xG47NRkVOFw8aWBZJZZcWTrnAXm0WzKDCIqEC0Ei0tLgcIvXKMQpPqBBOdz7wwrYXfog5BOl3Subu6eKTYH8NfCLwhZhxiYSjFD+JD/KwFcSAfMj6LHb1IJHtjZzXh1tLMrpvMxgVxUhQ/pVKcK0Cz3YxclcWuBsnHaBQcl+wAShgj14q2gOYSpTPCS/yESII1Xk9rvLzmRTbBSOe6s89CZjE+o0byFtMX2FhDwl4tRMM6r9pF+UtEzSPOc+ExZJKxCEWcHczKZEJ0hIhmtCx41WF26MwlsoqpLAChr5VsCZHZR46MTp+uU+ziqVVfYjU1c5HZjEim/NAxwvyzkbMpzayKMvYfIN5VE7dIyxwVQLM7bjAW90ZC/Nm5zOIVINpwvNzBuSu/M2WPkoDQhSFHEfF2L2aSjUEhEkv5MF8NIuYrWN7VibA5I3H2bu86Qpmqw/BYWCkOCEbmsxudOPMuo/w/sWfl65Wx0VHOeakorLIAhC4KpjfG9nKsmUcKMed4DW3YiHJ7fLnfLr5T3MrLrED0zN2zxfp6w3PxLExcZLquIWy0zh3icQYQuuhkbjxOzfsYZWoMMyVTIxHnFjDCf2QU5MgcIpqDQHPDSCZniweJK5rtQhn/XMmA0FZjaoyNSpgQMUY0ZmSQ0bAzHmduC6P877OVQ+5knrojvBUAQssh45+4uU5uCY7MVgY2H5ljO734GYBcQGjbcXHVC+7mj0337gLAygChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGl+P8AAAD//zOPeTSLsacXAAAAAElFTkSuQmCC",
alt:"logseq"})}function Ji(b){return(0,Kb.jsx)("button",Qa({className:"tl-button"},b))}function ef(){ef=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],J;for(J in m)Object.prototype.hasOwnProperty.call(m,J)&&(b[J]=m[J])}return b};return ef.apply(this,arguments)}function eg(b,g,{checkForDefaultPrevented:m=!0}={}){return function(J){null===b||void 0===b||b(J);if(!1===m||!J.defaultPrevented)return null===g||void 0===g?void 0:g(J)}}function uk(...b){return g=>
b.forEach(m=>{"function"===typeof m?m(g):null!==m&&void 0!==m&&(m.current=g)})}function Hg(...b){return(0,KD.useCallback)(uk(...b),b)}function ti(b,g=[]){let m=[];const J=()=>{const Y=m.map(ia=>(0,Go.createContext)(ia));return function(ia){const ta=(null===ia||void 0===ia?void 0:ia[b])||Y;return(0,Go.useMemo)(()=>({[`__scope${b}`]:Ga(Qa({},ia),{[b]:ta})}),[ia,ta])}};J.scopeName=b;return[function(Y,ia){function ta(db){const {scope:sb,children:xb}=db,Wb=bb(db,["scope","children"]);db=(null===sb||void 0===
sb?void 0:sb[b][Za])||Ka;const kc=(0,Go.useMemo)(()=>Wb,Object.values(Wb));return(0,Go.createElement)(db.Provider,{value:kc},xb)}const Ka=(0,Go.createContext)(ia),Za=m.length;m=[...m,ia];ta.displayName=Y+"Provider";return[ta,function(db,sb){if(sb=(0,Go.useContext)((null===sb||void 0===sb?void 0:sb[b][Za])||Ka))return sb;if(void 0!==ia)return ia;throw Error(`\`${db}\` must be used within \`${Y}\``);}]},Zl(J,...g)]}function Zl(...b){const g=b[0];if(1===b.length)return g;const m=()=>{const J=b.map(Y=>
({useScope:Y(),scopeName:Y.scopeName}));return function(Y){const ia=J.reduce((ta,{useScope:Ka,scopeName:Za})=>{Ka=Ka(Y)[`__scope${Za}`];return Qa(Qa({},ta),Ka)},{});return(0,Go.useMemo)(()=>({[`__scope${g.scopeName}`]:ia}),[ia])}};m.scopeName=g.scopeName;return m}function ki(b){const g=(0,Jv.useRef)(b);(0,Jv.useEffect)(()=>{g.current=b});return(0,Jv.useMemo)(()=>(...m)=>{var J;return null===(J=g.current)||void 0===J?void 0:J.call(g,...m)},[])}function Vf({prop:b,defaultProp:g,onChange:m=()=>{}}){const [J,
Y]=hm({defaultProp:g,onChange:m}),ia=void 0!==b;g=ia?b:J;const ta=ki(m);m=(0,Ot.useCallback)(Ka=>{ia?(Ka="function"===typeof Ka?Ka(b):Ka,Ka!==b&&ta(Ka)):Y(Ka)},[ia,b,Y,ta]);return[g,m]}function hm({defaultProp:b,onChange:g}){b=(0,Ot.useState)(b);const [m]=b,J=(0,Ot.useRef)(m),Y=ki(g);(0,Ot.useEffect)(()=>{J.current!==m&&(Y(m),J.current=m)},[m,J,Y]);return b}function nh(b){return(0,Km.isValidElement)(b)&&b.type===MD}function Xi(b,g){const m=Qa({},g);for(const J in g){const Y=b[J],ia=g[J];/^on[A-Z]/.test(J)?
m[J]=(...ta)=>{null===ia||void 0===ia||ia(...ta);null===Y||void 0===Y||Y(...ta)}:"style"===J?m[J]=Qa(Qa({},Y),ia):"className"===J&&(m[J]=[Y,ia].filter(Boolean).join(" "))}return Qa(Qa({},b),m)}function Hk(b,g){b&&(0,LD.flushSync)(()=>b.dispatchEvent(g))}function qj(b){var g=b+"CollectionProvider";const [m,J]=ti(g),[Y,ia]=m(g,{collectionRef:{current:null},itemMap:new Map}),ta=sb=>{const {scope:xb,children:Wb}=sb;sb=bp.default.useRef(null);const kc=bp.default.useRef(new Map).current;return bp.default.createElement(Y,
{scope:xb,itemMap:kc,collectionRef:sb},Wb)};Object.assign(ta,{displayName:g});const Ka=b+"CollectionSlot";g=bp.default.forwardRef((sb,xb)=>{const {scope:Wb,children:kc}=sb;sb=ia(Ka,Wb);xb=Hg(xb,sb.collectionRef);return bp.default.createElement(Dr,{ref:xb},kc)});Object.assign(g,{displayName:Ka});const Za=b+"CollectionItemSlot",db=bp.default.forwardRef((sb,xb)=>{const {scope:Wb,children:kc}=sb,Ob=bb(sb,["scope","children"]),sc=bp.default.useRef(null);sb=Hg(xb,sc);const lc=ia(Za,Wb);bp.default.useEffect(()=>
{lc.itemMap.set(sc,Qa({ref:sc},Ob));return()=>void lc.itemMap.delete(sc)});return bp.default.createElement(Dr,{["data-radix-collection-item"]:"",ref:sb},kc)});Object.assign(db,{displayName:Za});return[{Provider:ta,Slot:g,ItemSlot:db},function(sb){const xb=ia(b+"CollectionConsumer",sb);return bp.default.useCallback(()=>{const Wb=xb.collectionRef.current;if(!Wb)return[];const kc=Array.from(Wb.querySelectorAll("[data-radix-collection-item]"));return Array.from(xb.itemMap.values()).sort((Ob,sc)=>kc.indexOf(Ob.ref.current)-
kc.indexOf(sc.ref.current))},[xb.collectionRef,xb.itemMap])},J]}function Bi(b){const g=(0,Zy.useContext)(ZD);return b||g||"ltr"}function Ik(b){const g=ki(b);(0,$D.useEffect)(()=>{const m=J=>{"Escape"===J.key&&g(J)};document.addEventListener("keydown",m);return()=>document.removeEventListener("keydown",m)},[g])}function vk(b){const g=ki(b),m=(0,An.useRef)(!1),J=(0,An.useRef)(()=>{});(0,An.useEffect)(()=>{const Y=ta=>{if(ta.target&&!m.current){let Ka=function(){jm("dismissableLayer.pointerDownOutside",
g,Za,{discrete:!0})};const Za={originalEvent:ta};"touch"===ta.pointerType?(document.removeEventListener("click",J.current),J.current=Ka,document.addEventListener("click",J.current,{once:!0})):Ka()}m.current=!1},ia=window.setTimeout(()=>{document.addEventListener("pointerdown",Y)},0);return()=>{window.clearTimeout(ia);document.removeEventListener("pointerdown",Y);document.removeEventListener("click",J.current)}},[g]);return{onPointerDownCapture:()=>m.current=!0}}function im(b){const g=ki(b),m=(0,An.useRef)(!1);
(0,An.useEffect)(()=>{const J=Y=>{Y.target&&!m.current&&jm("dismissableLayer.focusOutside",g,{originalEvent:Y},{discrete:!1})};document.addEventListener("focusin",J);return()=>document.removeEventListener("focusin",J)},[g]);return{onFocusCapture:()=>m.current=!0,onBlurCapture:()=>m.current=!1}}function fg(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function jm(b,g,m,{discrete:J}){const Y=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});
g&&Y.addEventListener(b,g,{once:!0});J?Hk(Y,m):Y.dispatchEvent(m)}function ij(){(0,bE.useEffect)(()=>{var b,g;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=m[0])&&void 0!==b?b:Mk());document.body.insertAdjacentElement("beforeend",null!==(g=m[1])&&void 0!==g?g:Mk());Mv++;return()=>{1===Mv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(J=>J.remove());Mv--}},[])}function Mk(){const b=document.createElement("span");
b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function Ig(b,{select:g=!1}={}){const m=document.activeElement;for(const J of b)if(ui(J,{select:g}),document.activeElement!==m)break}function am(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const J="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||J?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:
NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Nk(b,g){for(const m of b)if(!jg(m,{upTo:g}))return m}function jg(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function ui(b,{select:g=!1}={}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function kl(b,
g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Cf(b){return b.filter(g=>"A"!==g.tagName)}function zj(b){const [g,m]=qz.useState(dE());$m(()=>{b||m(J=>null!==J&&void 0!==J?J:String(eE++))},[b]);return b||(g?`radix-${g}`:"")}function Vi(b){return b.split("-")[0]}function qk(b){return["top","bottom"].includes(Vi(b))?"x":"y"}function tk(b){return"y"===b?"height":"width"}function Gm(b,g,m){let {reference:J,floating:Y}=b;var ia=J.x+J.width/2-Y.width/2;const ta=J.y+J.height/2-Y.height/
2;b=qk(g);var Ka=tk(b);Ka=J[Ka]/2-Y[Ka]/2;const Za="x"===b;switch(Vi(g)){case "top":ia={x:ia,y:J.y-Y.height};break;case "bottom":ia={x:ia,y:J.y+J.height};break;case "right":ia={x:J.x+J.width,y:ta};break;case "left":ia={x:J.x-Y.width,y:ta};break;default:ia={x:J.x,y:J.y}}switch(g.split("-")[1]){case "start":ia[b]-=Ka*(m&&Za?-1:1);break;case "end":ia[b]+=Ka*(m&&Za?-1:1)}return ia}function Zi(b){return"number"!=typeof b?Qa({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function rj(b){return Ga(Qa({},
b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function Zk(b,g){return ue(this,null,function*(){var m;void 0===g&&(g={});const {x:J,y:Y,platform:ia,rects:ta,elements:Ka,strategy:Za}=b,{boundary:db="clippingAncestors",rootBoundary:sb="viewport",elementContext:xb="floating",altBoundary:Wb=!1,padding:kc=0}=g,Ob=Zi(kc),sc=Ka[Wb?"floating"===xb?"reference":"floating":xb],lc=rj(yield ia.getClippingRect({element:null==(m=yield null==ia.isElement?void 0:ia.isElement(sc))||m?sc:sc.contextElement||
(yield null==ia.getDocumentElement?void 0:ia.getDocumentElement(Ka.floating)),boundary:db,rootBoundary:sb,strategy:Za}));m=rj(ia.convertOffsetParentRelativeRectToViewportRelativeRect?yield ia.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===xb?Ga(Qa({},ta.floating),{x:J,y:Y}):ta.reference,offsetParent:yield null==ia.getOffsetParent?void 0:ia.getOffsetParent(Ka.floating),strategy:Za}):ta[xb]);return{top:lc.top-m.top+Ob.top,bottom:m.bottom-lc.bottom+Ob.bottom,left:lc.left-m.left+
Ob.left,right:m.right-lc.right+Ob.right}})}function Vj(b){return b.replace(/left|right|bottom|top/g,g=>gE[g])}function yl(b,g,m){void 0===m&&(m=!1);const J=b.split("-")[1],Y=qk(b);b=tk(Y);m="x"===Y?J===(m?"end":"start")?"right":"left":"start"===J?"bottom":"top";return g.reference[b]>g.floating[b]&&(m=Vj(m)),{main:m,cross:Vj(m)}}function Vm(b){return b.replace(/start|end/g,g=>hE[g])}function kn(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function Yl(b){return sz.some(g=>
0<=b[g])}function $k(b){return null==b?window:b&&b.document&&b.location&&b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function ck(b){return $k(b).getComputedStyle(b)}function Ki(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Ok(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Qi(b){return b instanceof $k(b).HTMLElement}function dk(b){return b instanceof
$k(b).Element}function ml(b){return"undefined"==typeof ShadowRoot?!1:b instanceof $k(b).ShadowRoot||b instanceof ShadowRoot}function xk(b){const {overflow:g,overflowX:m,overflowY:J}=ck(b);return/auto|scroll|overlay|hidden/.test(g+J+m)}function Ml(b){const g=/firefox/i.test(Ok());b=ck(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function zl(){return!/^((?!chrome|android).)*safari/i.test(Ok())}
function sj(b,g,m){var J,Y,ia,ta;void 0===g&&(g=!1);void 0===m&&(m=!1);var Ka=b.getBoundingClientRect();let Za=1,db=1;g&&Qi(b)&&(Za=0<b.offsetWidth&&Ut(Ka.width)/b.offsetWidth||1,db=0<b.offsetHeight&&Ut(Ka.height)/b.offsetHeight||1);b=dk(b)?$k(b):window;g=!zl()&&m;m=(Ka.left+(g&&null!=(J=null==(Y=b.visualViewport)?void 0:Y.offsetLeft)?J:0))/Za;J=(Ka.top+(g&&null!=(ia=null==(ta=b.visualViewport)?void 0:ta.offsetTop)?ia:0))/db;ia=Ka.width/Za;Ka=Ka.height/db;return{width:ia,height:Ka,top:J,right:m+ia,
bottom:J+Ka,left:m,x:m,y:J}}function Yi(b){return(g=b,(g instanceof $k(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function $l(b){return dk(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function bm(b){return sj(Yi(b)).left+$l(b).scrollLeft}function bl(b){return"html"===Ki(b)?b:b.assignedSlot||b.parentNode||(ml(b)?b.host:null)||Yi(b)}function Jk(b){return Qi(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:
null}function xm(b){for(var g=$k(b),m=Jk(b);m&&["table","td","th"].includes(Ki(m))&&"static"===getComputedStyle(m).position;)m=Jk(m);if(!m||"html"!==Ki(m)&&("body"!==Ki(m)||"static"!==getComputedStyle(m).position||Ml(m))){if(!m)a:{b=bl(b);for(ml(b)&&(b=b.host);Qi(b)&&!["html","body"].includes(Ki(b));){if(Ml(b)){m=b;break a}b=b.parentNode}m=null}g=m||g}return g}function wk(b){if(Qi(b))return{width:b.offsetWidth,height:b.offsetHeight};b=sj(b);return{width:b.width,height:b.height}}function fk(b){const g=
bl(b);return["html","body","#document"].includes(Ki(g))?b.ownerDocument.body:Qi(g)&&xk(g)?g:fk(g)}function Ch(b,g){var m;void 0===g&&(g=[]);var J=fk(b);b=J===(null==(m=b.ownerDocument)?void 0:m.body);m=$k(J);J=b?[m].concat(m.visualViewport||[],xk(J)?J:[]):J;g=g.concat(J);return b?g:g.concat(Ch(J))}function xj(b,g,m){return"viewport"===g?rj(function(J,Y){var ia=$k(J),ta=Yi(J);ia=ia.visualViewport;J=ta.clientWidth;ta=ta.clientHeight;let Ka=0,Za=0;if(ia){J=ia.width;ta=ia.height;const db=zl();(db||!db&&
"fixed"===Y)&&(Ka=ia.offsetLeft,Za=ia.offsetTop)}return{width:J,height:ta,x:Ka,y:Za}}(b,m)):dk(g)?function(J,Y){var ia=sj(J,!1,"fixed"===Y);Y=ia.top+J.clientTop;ia=ia.left+J.clientLeft;return{top:Y,left:ia,x:ia,y:Y,right:ia+J.clientWidth,bottom:Y+J.clientHeight,width:J.clientWidth,height:J.clientHeight}}(g,m):rj(function(J){var Y;const ia=Yi(J);var ta=$l(J);const Ka=null==(Y=J.ownerDocument)?void 0:Y.body;Y=Js(ia.scrollWidth,ia.clientWidth,Ka?Ka.scrollWidth:0,Ka?Ka.clientWidth:0);const Za=Js(ia.scrollHeight,
ia.clientHeight,Ka?Ka.scrollHeight:0,Ka?Ka.clientHeight:0);J=-ta.scrollLeft+bm(J);ta=-ta.scrollTop;return"rtl"===ck(Ka||ia).direction&&(J+=Js(ia.clientWidth,Ka?Ka.clientWidth:0)-Y),{width:Y,height:Za,x:J,y:ta}}(Yi(b)))}function Pk(b){const g=Ch(b),m=["absolute","fixed"].includes(ck(b).position)&&Qi(b)?xm(b):b;return dk(m)?g.filter(J=>{var Y;if(Y=dk(J))a:if(Y=null==m.getRootNode?void 0:m.getRootNode(),J.contains(m))Y=!0;else{if(Y&&ml(Y)){Y=m;do{if(Y&&J===Y){Y=!0;break a}Y=Y.parentNode||Y.host}while(Y)}Y=
!1}return Y&&"body"!==Ki(J)}):[]}function mk(b,g,m,J){void 0===J&&(J={});const {ancestorScroll:Y=!0,ancestorResize:ia=!0,elementResize:ta=!0,animationFrame:Ka=!1}=J,Za=Y&&!Ka,db=ia&&!Ka,sb=Za||db?[...(dk(b)?Ch(b):[]),...Ch(g)]:[];sb.forEach(Ob=>{Za&&Ob.addEventListener("scroll",m,{passive:!0});db&&Ob.addEventListener("resize",m)});let xb,Wb=null;if(ta){let Ob=!0;Wb=new ResizeObserver(()=>{Ob||m();Ob=!1});dk(b)&&!Ka&&Wb.observe(b);Wb.observe(g)}let kc=Ka?sj(b):null;return Ka&&function sc(){const lc=
sj(b);!kc||lc.x===kc.x&&lc.y===kc.y&&lc.width===kc.width&&lc.height===kc.height||m();kc=lc;xb=requestAnimationFrame(sc)}(),m(),()=>{var sc;sb.forEach(lc=>{Za&&lc.removeEventListener("scroll",m);db&&lc.removeEventListener("resize",m)});null==(sc=Wb)||sc.disconnect();Wb=null;Ka&&cancelAnimationFrame(xb)}}function uh(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let m,J;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var Y=b.length;
if(Y!=g.length)return!1;for(m=Y;0!==m--;)if(!uh(b[m],g[m]))return!1;return!0}J=Object.keys(b);Y=J.length;if(Y!==Object.keys(g).length)return!1;for(m=Y;0!==m--;)if(!Object.prototype.hasOwnProperty.call(g,J[m]))return!1;for(m=Y;0!==m--;)if(Y=J[m],!("_owner"===Y&&b.$$typeof||uh(b[Y],g[Y])))return!1;return!0}return b!==b&&g!==g}function gh(b){const g=Tn.useRef(b);Pv(()=>{g.current=b});return g}function Ag(b){let {middleware:g,placement:m="bottom",strategy:J="absolute",whileElementsMounted:Y}=void 0===
b?{}:b;const ia=Tn.useRef(null),ta=Tn.useRef(null),Ka=gh(Y),Za=Tn.useRef(null),[db,sb]=Tn.useState({x:null,y:null,strategy:J,placement:m,middlewareData:{}}),[xb,Wb]=Tn.useState(g);uh(null==xb?void 0:xb.map(Kc=>{({options:Kc}=Kc);return Kc}),null==g?void 0:g.map(Kc=>{({options:Kc}=Kc);return Kc}))||Wb(g);const kc=Tn.useCallback(()=>{ia.current&&ta.current&&jE(ia.current,ta.current,{middleware:xb,placement:m,strategy:J}).then(Kc=>{Ob.current&&kE.flushSync(()=>{sb(Kc)})})},[xb,m,J]);Pv(()=>{Ob.current&&
kc()},[kc]);const Ob=Tn.useRef(!1);Pv(()=>{Ob.current=!0;return()=>{Ob.current=!1}},[]);const sc=Tn.useCallback(()=>{"function"===typeof Za.current&&(Za.current(),Za.current=null);if(ia.current&&ta.current)if(Ka.current){const Kc=Ka.current(ia.current,ta.current,kc);Za.current=Kc}else kc()},[kc,Ka]),lc=Tn.useCallback(Kc=>{ia.current=Kc;sc()},[sc]),Sb=Tn.useCallback(Kc=>{ta.current=Kc;sc()},[sc]),rc=Tn.useMemo(()=>({reference:ia,floating:ta}),[]);return Tn.useMemo(()=>Ga(Qa({},db),{update:kc,refs:rc,
reference:lc,floating:Sb}),[db,kc,rc,lc,Sb])}function Ij(b){const [g,m]=(0,lE.useState)(void 0);$m(()=>{if(b){m({width:b.offsetWidth,height:b.offsetHeight});const J=new ResizeObserver(Y=>{if(Array.isArray(Y)&&Y.length){Y=Y[0];if("borderBoxSize"in Y){Y=Y.borderBoxSize;var ia=Array.isArray(Y)?Y[0]:Y;Y=ia.inlineSize;ia=ia.blockSize}else Y=b.offsetWidth,ia=b.offsetHeight;m({width:Y,height:ia})}});J.observe(b,{box:"border-box"});return()=>J.unobserve(b)}m(void 0)},[b]);return g}function Oh(b){return void 0!==
b}function jj(b){return null!==b}function qg(b){const [g,m="center"]=b.split("-");return[g,m]}function aj(b,g){return(0,up.useReducer)((m,J)=>{J=g[m][J];return null!==J&&void 0!==J?J:m},b)}function Of(b){const [g,m]=(0,up.useState)(),J=(0,up.useRef)({}),Y=(0,up.useRef)(b),ia=(0,up.useRef)("none"),[ta,Ka]=aj(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,up.useEffect)(()=>
{const Za=yg(J.current);ia.current="mounted"===ta?Za:"none"},[ta]);$m(()=>{const Za=J.current,db=Y.current;if(db!==b){const sb=ia.current,xb=yg(Za);b?Ka("MOUNT"):"none"===xb||"none"===(null===Za||void 0===Za?void 0:Za.display)?Ka("UNMOUNT"):db&&sb!==xb?Ka("ANIMATION_OUT"):Ka("UNMOUNT");Y.current=b}},[b,Ka]);$m(()=>{if(g){const Za=sb=>{const xb=yg(J.current).includes(sb.animationName);sb.target===g&&xb&&(0,wE.flushSync)(()=>Ka("ANIMATION_END"))},db=sb=>{sb.target===g&&(ia.current=yg(J.current))};g.addEventListener("animationstart",
db);g.addEventListener("animationcancel",Za);g.addEventListener("animationend",Za);return()=>{g.removeEventListener("animationstart",db);g.removeEventListener("animationcancel",Za);g.removeEventListener("animationend",Za)}}Ka("ANIMATION_END")},[g,Ka]);return{isPresent:["mounted","unmountSuspended"].includes(ta),ref:(0,up.useCallback)(Za=>{Za&&(J.current=getComputedStyle(Za));m(Za)},[])}}function yg(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Aj(b,g,m){b=b.key;m="rtl"!==
m?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(m))return CE[m]}function mi(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function kh(b,g){return b.map((m,J)=>b[(g+J)%b.length])}function og(b,g){var m=(0,FE.useState)(function(){return{value:b,callback:g,facade:{get current(){return m.value},set current(J){var Y=
m.value;Y!==J&&(m.value=J,m.callback(J,Y))}}}})[0];m.callback=g;return m.facade}function oh(b,g){return og(g||null,function(m){return b.forEach(function(J){"function"===typeof J?J(m):J&&(J.current=m);return J})})}function Nl(b){return b}function Ci(b,g){void 0===g&&(g=Nl);var m=[],J=!1;return{read:function(){if(J)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:b},useMedium:function(Y){var ia=g(Y,J);m.push(ia);
return function(){m=m.filter(function(ta){return ta!==ia})}},assignSyncMedium:function(Y){for(J=!0;m.length;){var ia=m;m=[];ia.forEach(Y)}m={push:function(ta){return Y(ta)},filter:function(){return m}}},assignMedium:function(Y){J=!0;var ia=[];if(m.length){var ta=m;m=[];ta.forEach(Y);ia=m}var Ka=function(){var Za=ia;ia=[];Za.forEach(Y)};Promise.resolve().then(Ka);m={push:function(Za){ia.push(Za);Promise.resolve().then(Ka)},filter:function(Za){ia=ia.filter(Za);return m}}}}}function Oi(b){void 0===b&&
(b={});var g=Ci(null);g.options=Bn({async:!0,ssr:!1},b);return g}function Qb(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function dc(b,g){return b.map((m,J)=>b[(g+J)%b.length])}function cc(b,g,m){const J=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,Y=m?b.indexOf(m):-1;b=dc(b,Math.max(Y,0));1===J.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.toLowerCase().startsWith(J.toLowerCase()));return b!==m?b:void 0}function ka(b){return g=>
"mouse"===g.pointerType?b(g):void 0}function Eb(b){return(0,Nm.isValidElement)(b)&&b.type===nF}function Tb(b,g){const m=Qa({},g);for(const J in g){const Y=b[J],ia=g[J];/^on[A-Z]/.test(J)?Y&&ia?m[J]=(...ta)=>{ia(...ta);Y(...ta)}:Y&&(m[J]=Y):"style"===J?m[J]=Qa(Qa({},Y),ia):"className"===J&&(m[J]=[Y,ia].filter(Boolean).join(" "))}return Qa(Qa({},b),m)}function tb(b,g){b&&(0,mF.flushSync)(()=>b.dispatchEvent(g))}function wb(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=
ki(b);(0,oF.useEffect)(()=>{const J=Y=>{"Escape"===Y.key&&m(Y)};g.addEventListener("keydown",J);return()=>g.removeEventListener("keydown",J)},[m,g])}function Pb(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ki(b),J=(0,Cn.useRef)(!1),Y=(0,Cn.useRef)(()=>{});(0,Cn.useEffect)(()=>{const ia=Ka=>{if(Ka.target&&!J.current){let Za=function(){$b("dismissableLayer.pointerDownOutside",m,db,{discrete:!0})};const db={originalEvent:Ka};"touch"===Ka.pointerType?(g.removeEventListener("click",
Y.current),Y.current=Za,g.addEventListener("click",Y.current,{once:!0})):Za()}J.current=!1},ta=window.setTimeout(()=>{g.addEventListener("pointerdown",ia)},0);return()=>{window.clearTimeout(ta);g.removeEventListener("pointerdown",ia);g.removeEventListener("click",Y.current)}},[g,m]);return{onPointerDownCapture:()=>J.current=!0}}function qb(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ki(b),J=(0,Cn.useRef)(!1);(0,Cn.useEffect)(()=>{const Y=ia=>{ia.target&&!J.current&&
$b("dismissableLayer.focusOutside",m,{originalEvent:ia},{discrete:!1})};g.addEventListener("focusin",Y);return()=>g.removeEventListener("focusin",Y)},[g,m]);return{onFocusCapture:()=>J.current=!0,onBlurCapture:()=>J.current=!1}}function Lb(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function $b(b,g,m,{discrete:J}){const Y=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});g&&Y.addEventListener(b,g,{once:!0});J?tb(Y,m):Y.dispatchEvent(m)}
function Bc(b,{select:g=!1}={}){const m=document.activeElement;for(const J of b)if(Rd(J,{select:g}),document.activeElement!==m)break}function Qc(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const J="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||J?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Uc(b,g){for(const m of b)if(!wd(m,{upTo:g}))return m}
function wd(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Rd(b,{select:g=!1}={}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Hd(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Ed(b){return b.filter(g=>"A"!==g.tagName)}function Md(b){return(0,Om.isValidElement)(b)&&
b.type===sF}function Ae(b,g){const m=Qa({},g);for(const J in g){const Y=b[J],ia=g[J];/^on[A-Z]/.test(J)?Y&&ia?m[J]=(...ta)=>{ia(...ta);Y(...ta)}:Y&&(m[J]=Y):"style"===J?m[J]=Qa(Qa({},Y),ia):"className"===J&&(m[J]=[Y,ia].filter(Boolean).join(" "))}return Qa(Qa({},b),m)}function Qf(b){return(0,Pm.isValidElement)(b)&&b.type===vF}function ve(b,g){const m=Qa({},g);for(const J in g){const Y=b[J],ia=g[J];/^on[A-Z]/.test(J)?Y&&ia?m[J]=(...ta)=>{ia(...ta);Y(...ta)}:Y&&(m[J]=Y):"style"===J?m[J]=Qa(Qa({},Y),
ia):"className"===J&&(m[J]=[Y,ia].filter(Boolean).join(" "))}return Qa(Qa({},b),m)}function $e(b){return void 0!==b}function Pe(b){return null!==b}function Te(b){const [g,m="center"]=b.split("-");return[g,m]}function kg(b,[g,m]){return Math.min(m,Math.max(g,b))}function Nf(b){const g=(0,tA.useRef)({value:b,previous:b});return(0,tA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function $i(b){return(0,Qm.isValidElement)(b)&&
b.type===UF}function Lf(b,g){const m=Qa({},g);for(const J in g){const Y=b[J],ia=g[J];/^on[A-Z]/.test(J)?Y&&ia?m[J]=(...ta)=>{ia(...ta);Y(...ta)}:Y&&(m[J]=Y):"style"===J?m[J]=Qa(Qa({},Y),ia):"className"===J&&(m[J]=[Y,ia].filter(Boolean).join(" "))}return Qa(Qa({},b),m)}function dg(b=[],g,m){b=[...b];b[m]=g;return b.sort((J,Y)=>J-Y)}function eh(b,g,m){return 100/(m-g)*(b-g)}function Ng(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function Og(b,g){if(1===b.length)return 0;
b=b.map(J=>Math.abs(J-g));const m=Math.min(...b);return b.indexOf(m)}function hh(b,g,m){b/=2;const J=Yf([0,50],[0,b]);return(b-J(g)*m)*m}function ug(b){return b.slice(0,-1).map((g,m)=>b[m+1]-g)}function Yf(b,g){return m=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(m-b[0])}function $g(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function Jf(b){function g(Ka){return Ka?(0,Kb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Ka},children:(0,Kb.jsx)("div",{className:`w-full h-full bg-${Ka}-500`})}):
(0,Kb.jsx)("div",{className:"tl-color-bg",children:(0,Kb.jsx)(Fi,{name:"color-swatch"})})}var {color:m,opacity:J,collisionRef:Y,setColor:ia,setOpacity:ta}=b;bb(b,["color","opacity","collisionRef","setColor","setOpacity"]);lF.useRef(null);return(0,Kb.jsxs)(QF,{children:[(0,Kb.jsx)(RF,{children:(0,Kb.jsx)("button",{className:"tl-color-drip mx-1",children:g(m)})}),(0,Kb.jsxs)(SF,{className:"tl-popover-content",side:"top",sideOffset:15,collisionBoundary:Y,children:[(0,Kb.jsx)("div",{className:"tl-color-palette",
children:Object.values(qd).map(Ka=>(0,Kb.jsx)("button",{className:`tl-color-drip m-1${Ka===m?" active":""}`,onClick:()=>ia(Ka),children:g(Ka)}))}),(0,Kb.jsx)("div",{className:"mx-1 my-2",children:(0,Kb.jsxs)(fG,{defaultValue:[J],onValueCommit:Ka=>ta(Ka[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,Kb.jsx)(gG,{className:"tl-slider-track",children:(0,Kb.jsx)(hG,{className:"tl-slider-range"})}),(0,Kb.jsx)(iG,{className:"tl-slider-thumb"})]})}),(0,Kb.jsx)(TF,{className:"tl-popover-arrow"})]})]})}
function Pi(b){const g=ki(b),m=(0,yf.useRef)(""),J=(0,yf.useRef)(0);b=(0,yf.useCallback)(ia=>{ia=m.current+ia;g(ia);(function Za(Ka){m.current=Ka;window.clearTimeout(J.current);""!==Ka&&(J.current=window.setTimeout(()=>Za(""),1E3))})(ia)},[g]);const Y=(0,yf.useCallback)(()=>{m.current="";window.clearTimeout(J.current)},[]);(0,yf.useEffect)(()=>()=>window.clearTimeout(J.current),[]);return[m,b,Y]}function qh(b,g,m){const J=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,Y=m?b.indexOf(m):-1;b=
oi(b,Math.max(Y,0));1===J.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.textValue.toLowerCase().startsWith(J.toLowerCase()));return b!==m?b:void 0}function oi(b,g){return b.map((m,J)=>b[(g+J)%b.length])}function Wj(b){var {options:g,value:m,onValueChange:J}=b;b=bb(b,["options","value","onValueChange"]);const [Y,ia]=jG.useState(!1);return(0,Kb.jsx)("div",Ga(Qa({},b),{className:"tl-select-input",children:(0,Kb.jsxs)(GG,{open:Y,onOpenChange:ia,value:m,onValueChange:J,children:[(0,Kb.jsxs)(HG,{className:"tl-select-input-trigger",
children:[(0,Kb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Kb.jsx)(IG,{})}),(0,Kb.jsx)(JG,{style:{lineHeight:1},children:(0,Kb.jsx)(Fi,{name:Y?"chevron-up":"chevron-down"})})]}),(0,Kb.jsx)(KG,{className:"tl-select-input-portal",children:(0,Kb.jsxs)(LG,{className:"tl-select-input-content",children:[(0,Kb.jsx)(PG,{}),(0,Kb.jsx)(MG,{className:"tl-select-input-viewport",children:g.map(ta=>(0,Kb.jsx)(NG,{className:"tl-select-input-select-item",value:ta.value,children:(0,Kb.jsx)(OG,
{children:ta.label})},ta.value))}),(0,Kb.jsx)(QG,{})]})})]})}))}function vi({options:b,value:g,onValueChange:m}){return(0,Kb.jsx)(NA,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:m,children:b.map(J=>(0,Kb.jsx)(OA,{className:"tl-toggle-group-input-button",value:J.value,disabled:J.value===g,children:(0,Kb.jsx)(Fi,{name:J.icon})},J.value))})}function Bk({options:b,value:g,onValueChange:m}){return(0,Kb.jsx)(NA,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:m,
children:b.map(J=>(0,Kb.jsx)(OA,{className:"tl-toggle-group-input-button",value:J.value,children:(0,Kb.jsx)(Fi,{name:J.icon})},J.value))})}function Uk(b){var {toggle:g=!0,pressed:m,onPressedChange:J,className:Y}=b;b=bb(b,["toggle","pressed","onPressedChange","className"]);return(0,Kb.jsx)(SG,Ga(Qa({},b),{"data-toggle":g,className:"tl-toggle-input"+(Y?" "+Y:""),pressed:m,onPressedChange:J}))}function qi(b,g){return b.filter(m=>{var J;return null==(J=ww[m.props.type])?void 0:J.includes(g)})}function Gl(b){return g=>
"mouse"!==g.pointerType?b(g):void 0}function Xj(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));return g}function gg({strokeWidth:b,size:g,mode:m}){return"svg"===m?(0,Kb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,Kb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,
boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function sm(){const b=xg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}function Rm({left:b,middle:g,right:m,stroke:J,strokeWidth:Y}){return(0,Kb.jsxs)("g",{children:[(0,Kb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${m}`}),(0,Kb.jsx)("path",{d:`M ${b} L ${g} ${m}`,fill:"none",stroke:J,strokeWidth:Y,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Hl(b,g,m){g=a(b,g,b,m).points;
if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(m=g[0])?pe.rotWith(m,b,Math.PI/6):b;b=m?pe.rotWith(m,b,-Math.PI/6):b;return{left:g,right:b}}function Tk(b,g,m){const {left:J,right:Y}=Hl(b,g,m);return`M ${J} L ${b} ${Y}`}function Rj(b,g,m,J,Y){b=b.strokeWidth;var ia=pe.dist(g,m);b=Math.min(ia/3,16*b);ia=[];ia.push(`M ${g} L ${m}`);J&&ia.push(Tk(g,m,b));Y&&ia.push(Tk(m,g,b));return ia.join(" ")}function vj({id:b,bounds:g,labelSize:m,offset:J,scale:Y=
1}){return(0,Kb.jsx)("defs",{children:(0,Kb.jsxs)("mask",{id:b+"_clip",children:[(0,Kb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,fill:"white"}),(0,Kb.jsx)("rect",{x:g.width/2-m[0]/2*Y+((null==J?void 0:J[0])||0),y:g.height/2-m[1]/2*Y+((null==J?void 0:J[1])||0),width:m[0]*Y,height:m[1]*Y,rx:4*Y,ry:4*Y,fill:"black"})]})})}function yh(b,g){return function(m){return b(g(m))}}function Hi(b,g){return g(b)}function Tl(b,g){return function(m){return b(g,m)}}function fm(b,g){return function(){return b(g)}}
function yi(b,g){g(b);return b}function Lh(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return g}function He(b){b()}function Bf(b){return function(){return b}}function Qe(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(){g.map(He)}}function af(){}function Wg(b,g){return b(1,g)}function Zg(b,g){b(0,g)}function nj(b){b(2)}function Eh(b){return b(4)}function lg(b,g){return Wg(b,Tl(g,0))}function Fe(b,g){var m=b(1,function(J){m();g(J)});return m}
function le(){var b=[];return function(g,m){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(m),function(){var J=b.indexOf(m);-1<J&&b.splice(J,1)};case 0:b.slice().forEach(function(J){J(m)});break;default:throw Error("unrecognized action "+g);}}}function mf(b){var g=b,m=le();return function(J,Y){switch(J){case 1:Y(g);break;case 0:g=Y;break;case 4:return g}return m(J,Y)}}function Ee(b){var g,m;return function(J,Y){switch(J){case 1:if(Y){if(m===Y)break;g&&g();m=Y;return g=b(1,Y)}g&&
g();return af;case 2:g&&g();m=null;break;default:throw Error("unrecognized action "+J);}}}function fj(b){return yi(le(),function(g){return lg(b,g)})}function Ui(b,g){return yi(mf(g),function(m){return lg(b,m)})}function Il(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(J){return g.reduceRight(Hi,J)}}function We(b){for(var g=arguments.length,m=Array(1<g?g-1:0),J=1;J<g;J++)m[J-1]=arguments[J];var Y=Il.apply(void 0,m);return function(ia,ta){switch(ia){case 1:return Wg(b,
Y(ta));case 2:b(2);break;default:throw Error("unrecognized action "+ia);}}}function rh(b,g){return b===g}function cf(b){void 0===b&&(b=rh);var g;return function(m){return function(J){b(g,J)||(g=J,m(J))}}}function Ef(b){return function(g){return function(m){b(m)&&g(m)}}}function Pf(b){return function(g){return yh(g,b)}}function kk(b){return function(g){return function(){return g(b)}}}function Ff(b,g){return function(m){return function(J){return m(g=b(g,J))}}}function um(b){return function(g){return function(m){0<
b?b--:g(m)}}}function gk(b){var g,m;return function(J){return function(Y){g=Y;m||=setTimeout(function(){m=void 0;J(g)},b)}}}function Gf(b){var g,m;return function(J){return function(Y){g=Y;m&&clearTimeout(m);m=setTimeout(function(){J(g)},b)}}}function ah(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];var J=Array(g.length),Y=0,ia=null,ta=Math.pow(2,g.length)-1;g.forEach(function(Ka,Za){var db=Math.pow(2,Za);Wg(Ka,function(sb){var xb=Y;Y|=db;J[Za]=sb;xb!==ta&&Y===ta&&ia&&(ia(),
ia=null)})});return function(Ka){return function(Za){var db=function(){return Ka([Za].concat(J))};Y===ta?db():ia=db}}}function Fh(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(J,Y){switch(J){case 1:return Qe.apply(void 0,g.map(function(ia){return ia(1,Y)}));case 2:break;default:throw Error("unrecognized action "+J);}}}function hg(b,g){void 0===g&&(g=rh);return We(b,cf(g))}function Dj(){for(var b=le(),g=arguments.length,m=Array(g),J=0;J<g;J++)m[J]=arguments[J];
var Y=Array(m.length),ia=0,ta=Math.pow(2,m.length)-1;m.forEach(function(Ka,Za){var db=Math.pow(2,Za);Wg(Ka,function(sb){Y[Za]=sb;ia|=db;ia===ta&&b(0,Y)})});return function(Ka,Za){switch(Ka){case 1:return ia===ta&&Za(Y),b(1,Za);case 2:b(2);break;default:throw Error("unrecognized action "+Ka);}}}function sh(b,g,m){void 0===g&&(g=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:m}}function Bl(b){var g=new Map;return function Y(J){var ia=J.id,ta=
J.constructor,Ka=J.dependencies;if((J=J.singleton)&&g.has(ia))return g.get(ia);ta=ta(Ka.map(function(Za){return Y(Za)}));J&&g.set(ia,ta);return ta}(b)}function Vl(b,g){if(null==b)return{};var m={},J=Object.keys(b),Y;for(Y=0;Y<J.length;Y++){var ia=J[Y];0<=g.indexOf(ia)||(m[ia]=b[ia])}return m}function km(b,g){if(b){if("string"===typeof b)return Bj(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);
if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Bj(b,g)}}function Bj(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,J=Array(g);m<g;m++)J[m]=b[m];return J}function vn(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=km(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var J=0;return function(){return J>=b.length?{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Wl(b,g){for(var m={},J={},Y=0,ia=b.length;Y<ia;)J[b[Y]]=1,Y+=1;for(var ta in g)J.hasOwnProperty(ta)||(m[ta]=g[ta]);return m}function Qh(b,g,m){function J(xb,Wb){xb.propsReady&&(0,xb.propsReady)(0,!1);for(var kc=vn(ta),Ob;!(Ob=kc()).done;)Ob=Ob.value,(0,xb[g.required[Ob]])(0,Wb[Ob]);for(kc=vn(Ka);!(Ob=kc()).done;)if(Ob=Ob.value,Ob in Wb)(0,xb[g.optional[Ob]])(0,Wb[Ob]);xb.propsReady&&(0,xb.propsReady)(0,!0)}function Y(xb){return Za.reduce(function(Wb,kc){Wb[kc]=function(Ob){(0,xb[g.methods[kc]])(0,
Ob)};return Wb},{})}function ia(xb){return db.reduce(function(Wb,kc){Wb[kc]=Ee(xb[g.events[kc]]);return Wb},{})}var ta=Object.keys(g.required||{}),Ka=Object.keys(g.optional||{}),Za=Object.keys(g.methods||{}),db=Object.keys(g.events||{}),sb=(0,Dn.createContext)({});return{Component:(0,Dn.forwardRef)(function(xb,Wb){var kc=xb.children,Ob=Vl(xb,yH),sc=(0,Dn.useState)(function(){return yi(Bl(b),function(Sb){return J(Sb,Ob)})})[0],lc=(0,Dn.useState)(fm(ia,sc))[0];su(function(){for(var Sb=vn(db),rc;!(rc=
Sb()).done;)if(rc=rc.value,rc in Ob)(0,lc[rc])(1,Ob[rc]);return function(){Object.values(lc).map(nj)}},[Ob,lc,sc]);su(function(){J(sc,Ob)});(0,Dn.useImperativeHandle)(Wb,Bf(Y(sc)));return(0,Dn.createElement)(sb.Provider,{value:sc},m?(0,Dn.createElement)(m,Wl([].concat(ta,Ka,db),Ob),kc):kc)}),usePublisher:function(xb){return(0,Dn.useCallback)(Tl(Zg,(0,Dn.useContext)(sb)[xb]),[xb])},useEmitterValue:function(xb){var Wb=(0,Dn.useContext)(sb)[xb];xb=(0,Dn.useState)(fm(Eh,Wb));var kc=xb[0],Ob=xb[1];su(function(){return Wg(Wb,
function(sc){sc!==kc&&Ob(Bf(sc))})},[Wb,kc]);return kc},useEmitter:function(xb,Wb){var kc=(0,Dn.useContext)(sb)[xb];su(function(){return kc(1,Wb)},[Wb,kc])}}}function Rg(){return Rg=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],J;for(J in m)Object.prototype.hasOwnProperty.call(m,J)&&(b[J]=m[J])}return b},Rg.apply(this,arguments)}function Di(b,g){if(null==b)return{};var m,J,Y={},ia=Object.keys(b);for(J=0;J<ia.length;J++)0<=g.indexOf(m=ia[J])||(Y[m]=b[m]);return Y}
function Ri(b,g){(null==g||g>b.length)&&(g=b.length);for(var m=0,J=Array(g);m<g;m++)J[m]=b[m];return J}function Ul(b,g){var m="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=function(Y,ia){if(Y){if("string"==typeof Y)return Ri(Y,ia);var ta=Object.prototype.toString.call(Y).slice(8,-1);return"Object"===ta&&Y.constructor&&(ta=Y.constructor.name),"Map"===ta||"Set"===ta?Array.from(Y):"Arguments"===ta||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ta)?
Ri(Y,ia):void 0}}(b))||g&&b&&"number"==typeof b.length){m&&(b=m);var J=0;return function(){return J>=b.length?{done:!0}:{done:!1,value:b[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Hm(b,g){void 0===g&&(g=!0);var m=(0,di.useRef)(null),J=function(ia){};if("undefined"!=typeof ResizeObserver){var Y=new ResizeObserver(function(ia){ia=ia[0].target;null!==ia.offsetParent&&b(ia)});
J=function(ia){ia&&g?(Y.observe(ia),m.current=ia):(m.current&&Y.unobserve(m.current),m.current=null)}}return{ref:m,callbackRef:J}}function zi(b,g){return void 0===g&&(g=!0),Hm(b,g).callbackRef}function bg(b,g,m,J,Y,ia,ta){return Hm(function(Ka){for(var Za=function(xb,Wb,kc,Ob){kc=xb.length;if(0===kc)return null;for(var sc=[],lc=0;lc<kc;lc++){var Sb=xb.item(lc);if(Sb&&void 0!==Sb.dataset.index){var rc=parseInt(Sb.dataset.index),Kc=parseFloat(Sb.dataset.knownSize),Gc=Wb(Sb,"offsetHeight");if(0===Gc&&
Ob("Zero-sized element, this should not happen",{child:Sb},pm.ERROR),Gc!==Kc)Sb=sc[sc.length-1],0===sc.length||Sb.size!==Gc||Sb.endIndex!==rc-1?sc.push({startIndex:rc,endIndex:rc,size:Gc}):sc[sc.length-1].endIndex++}}return sc}(Ka.children,g,0,Y),db=Ka.parentElement;!db.dataset.virtuosoScroller;)db=db.parentElement;var sb="window"===db.firstElementChild.dataset.viewportType;J({scrollTop:Math.max(ta?ta.scrollTop:sb?window.pageYOffset||document.documentElement.scrollTop:db.scrollTop,0),scrollHeight:ta?
ta.scrollHeight:sb?document.documentElement.scrollHeight:db.scrollHeight,viewportHeight:ta?ta.offsetHeight:sb?window.innerHeight:db.offsetHeight});null==ia||ia(function(xb,Wb,kc){return"normal"===Wb||null!=Wb&&Wb.endsWith("px")||kc("row-gap was not resolved to pixel value correctly",Wb,pm.WARN),"normal"===Wb?0:parseInt(null!=Wb?Wb:"0",10)}(0,getComputedStyle(Ka).rowGap,Y));null!==Za&&b(Za)},m)}function Mh(b,g){return Math.round(b.getBoundingClientRect()[g])}function ln(b,g,m,J,Y){void 0===J&&(J=af);
var ia=(0,di.useRef)(null),ta=(0,di.useRef)(null),Ka=(0,di.useRef)(null),Za=(0,di.useRef)(!1),db=(0,di.useCallback)(function(sb){sb=sb.target;var xb=sb===window||sb===document,Wb=xb?window.pageYOffset||document.documentElement.scrollTop:sb.scrollTop,kc=xb?document.documentElement.scrollHeight:sb.scrollHeight,Ob=xb?window.innerHeight:sb.offsetHeight;sb=function(){b({scrollTop:Math.max(Wb,0),scrollHeight:kc,viewportHeight:Ob})};Za.current?(0,zH.flushSync)(sb):sb();Za.current=!1;null!==ta.current&&(Wb===
ta.current||0>=Wb||Wb===kc-Ob)&&(ta.current=null,g(!0),Ka.current&&(clearTimeout(Ka.current),Ka.current=null))},[b,g]);return(0,di.useEffect)(function(){var sb=Y||ia.current;return J(Y||ia.current),db({target:sb}),sb.addEventListener("scroll",db,{passive:!0}),function(){J(null);sb.removeEventListener("scroll",db)}},[ia,db,m,J,Y]),{scrollerRef:ia,scrollByCallback:function(sb){Za.current=!0;ia.current.scrollBy(sb)},scrollToCallback:function(sb){var xb=ia.current;if(xb&&!("offsetHeight"in xb&&0===xb.offsetHeight)){var Wb,
kc,Ob,sc="smooth"===sb.behavior;if(xb===window?(kc=Math.max(Mh(document.documentElement,"height"),document.documentElement.scrollHeight),Wb=window.innerHeight,Ob=document.documentElement.scrollTop):(kc=xb.scrollHeight,Wb=Mh(xb,"height"),Ob=xb.scrollTop),sb.top=Math.ceil(Math.max(Math.min(kc-Wb,sb.top),0)),1.01>Math.abs(Wb-kc)||sb.top===Ob)return b({scrollTop:Ob,scrollHeight:kc,viewportHeight:Wb}),void(sc&&g(!0));sc?(ta.current=sb.top,Ka.current&&clearTimeout(Ka.current),Ka.current=setTimeout(function(){Ka.current=
null;ta.current=null;g(!0)},1E3)):ta.current=null;xb.scrollTo(sb)}}}}function tm(b,g,m,J,Y){return void 0===J&&(J=Mi),void 0===Y&&(Y=Mi),{k:b,v:g,lvl:m,l:J,r:Y}}function C(b,g){if(b===Mi)return Mi;var m=b.k,J=b.l,Y=b.r;if(g===m){if(J===Mi)return Y;if(Y===Mi)return J;g=ab(J);return Ac(rb(b,{k:g[0],v:g[1],l:ob(J)}))}return Ac(rb(b,g<m?{l:C(J,g)}:{r:C(Y,g)}))}function W(b,g,m){return(void 0===m&&(m="k"),b===Mi)?[-Infinity,void 0]:b[m]===g?[b.k,b.v]:b[m]<g?(g=W(b.r,g,m),-Infinity===g[0]?[b.k,b.v]:g):
W(b.l,g,m)}function wa(b,g,m){return b===Mi?tm(g,m,1):g===b.k?rb(b,{k:g,v:m}):Pd(sd(rb(b,g<b.k?{l:wa(b.l,g,m)}:{r:wa(b.r,g,m)})))}function va(b,g,m){if(b===Mi)return[];var J=b.k,Y=b.v,ia=b.r,ta=[];return J>g&&(ta=ta.concat(va(b.l,g,m))),J>=g&&J<=m&&ta.push({k:J,v:Y}),J<=m&&(ta=ta.concat(va(ia,g,m))),ta}function Fa(b){return b===Mi?[]:[].concat(Fa(b.l),[{k:b.k,v:b.v}],Fa(b.r))}function ab(b){return b.r===Mi?[b.k,b.v]:ab(b.r)}function ob(b){return b.r===Mi?b.l:Ac(rb(b,{r:ob(b.r)}))}function rb(b,g){return tm(void 0!==
g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Zb(b){return b===Mi||b.lvl>b.r.lvl}function Ac(b){var g=b.l,m=b.r,J=b.lvl;if(m.lvl>=J-1&&g.lvl>=J-1)return b;if(J>m.lvl+1){if(Zb(g))return sd(rb(b,{lvl:J-1}));if(g===Mi||g.r===Mi)throw Error("Unexpected empty nodes");return rb(g.r,{l:rb(g,{r:g.r.l}),r:rb(b,{l:g.r.r,lvl:J-1}),lvl:J})}if(Zb(b))return Pd(rb(b,{lvl:J-1}));if(m===Mi||m.l===Mi)throw Error("Unexpected empty nodes");g=m.l;var Y=
Zb(g)?m.lvl-1:m.lvl;return rb(g,{l:rb(b,{r:g.l,lvl:J-1}),r:Pd(rb(m,{l:g.r,lvl:Y})),lvl:g.lvl+1})}function Fc(b,g,m){return b===Mi?[]:Nd(va(b,W(b,g)[0],m),function(J){return{index:J.k,value:J.v}})}function Nd(b,g){var m=b.length;if(0===m)return[];var J=g(b[0]),Y=J.index;J=J.value;for(var ia=[],ta=1;ta<m;ta++){var Ka=g(b[ta]),Za=Ka.index;Ka=Ka.value;ia.push({start:Y,end:Za-1,value:J});Y=Za;J=Ka}return ia.push({start:Y,end:Infinity,value:J}),ia}function Pd(b){var g=b.r,m=b.lvl;return g===Mi||g.r===Mi||
g.lvl!==m||g.r.lvl!==m?b:rb(g,{l:rb(b,{r:g.l}),lvl:m+1})}function sd(b){var g=b.l;return g===Mi||g.lvl!==b.lvl?b:rb(g,{r:rb(b,{l:g.r})})}function Be(b,g,m,J){void 0===J&&(J=0);for(var Y=b.length-1;J<=Y;){var ia=Math.floor((J+Y)/2),ta=m(b[ia],g);if(0===ta)return ia;if(-1===ta){if(2>Y-J)return ia-1;Y=ia-1}else{if(Y===J)return ia;J=ia+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Af(b){var g=b.size,m=b.startIndex,J=b.endIndex;return function(Y){return Y.start===
m&&(Y.end===J||Infinity===Y.end)&&Y.value===g}}function Bg(b,g){b=b.index;return g===b?0:g<b?-1:1}function Ej(b,g){b=b.offset;return g===b?0:g<b?-1:1}function pg(b){return{index:b.index,value:b}}function fh(b,g,m,J){var Y=0,ia=0,ta=0,Ka;0!==g?(ta=b[Ka=Be(b,g-1,Bg)].offset,ia=W(m,g-1),Y=ia[0],ia=ia[1],b.length&&b[Ka].size===W(m,g)[1]&&--Ka,b=b.slice(0,Ka+1)):b=[];for(g=Ul(Fc(m,g,Infinity));!(m=g()).done;)Ka=m.value,m=Ka.start,Ka=Ka.value,Y=m-Y,ta=Y*ia+ta+Y*J,b.push({offset:ta,size:Ka,index:m}),Y=m,
ia=Ka;return{offsetTree:b,lastIndex:Y,lastOffset:ta,lastSize:ia}}function fi(b,g){var m=g[0],J=g[1],Y=g[3];0<m.length&&(0,g[2])("received item sizes",m,pm.DEBUG);var ia=b.sizeTree;g=ia;var ta=0;if(0<J.length&&ia===Mi&&2===m.length){var Ka=m[0].size,Za=m[1].size;g=J.reduce(function(sb,xb){return wa(wa(sb,xb,Ka),xb+1,Za)},g)}else m=function(sb,xb){var Wb,kc=sb===Mi?0:Infinity;for(xb=Ul(xb);!(Wb=xb()).done;){var Ob=Wb.value;Wb=Ob.size;var sc=Ob.startIndex,lc=Ob.endIndex;if(kc=Math.min(kc,sc),sb===Mi)sb=
wa(sb,0,Wb);else{var Sb=Fc(sb,sc-1,lc+1);if(!Sb.some(Af(Ob))){var rc,Kc=Ob=!1;for(Sb=Ul(Sb);!(rc=Sb()).done;){var Gc=rc.value;rc=Gc.start;var Xc=Gc.end;Gc=Gc.value;Ob?(lc>=rc||Wb===Gc)&&(sb=C(sb,rc)):(Kc=Gc!==Wb,Ob=!0);Xc>lc&&lc>=rc&&Gc!==Wb&&(sb=wa(sb,lc+1,Gc))}Kc&&(sb=wa(sb,sc,Wb))}}}return[sb,kc]}(g,m),g=m[0],ta=m[1];if(g===ia)return b;b=fh(b.offsetTree,ta,g,Y);var db=b.offsetTree;return{sizeTree:g,offsetTree:db,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:J.reduce(function(sb,
xb){return wa(sb,xb,Yh(xb,db,Y))},Mi),groupIndices:J}}function Yh(b,g,m){if(0===g.length)return 0;g=g[Be(g,b,Bg)];b-=g.index;b=g.size*b+(b-1)*m+g.offset;return 0<b?b+m:b}function Th(b,g,m){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=Wf("LAST"===b.index?m:b.index,g);return Math.max(0,b,Math.min(m,b))}function Wf(b,g){if(g.groupOffsetTree===Mi)return b;for(var m=0;g.groupIndices[m]<=b+m;)m++;return b+m}function Kf(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&DH||(b.behavior="auto"),b.offset||(b.offset=0),b}function Bh(b){return!!b&&("smooth"===b?"smooth":"auto")}function ih(b){return b.reduce(function(g,m){return g.groupIndices.push(g.totalCount),g.totalCount+=m+1,g},{totalCount:0,groupIndices:[]})}function Si(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function xi(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Sj(b,g,m){return"number"==typeof b?"up"===m&&"top"===g||"down"===m&&"bottom"===g?b:0:"up"===m?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Jl(b,g,m){if(0===b.length)return[];if(g.groupOffsetTree===Mi)return b.map(function(Za){return Rg({},Za,{index:Za.index+m,originalIndex:Za.index})});var J,Y=[],ia=Fc(g.groupOffsetTree,b[0].index,b[b.length-1].index),ta=void 0,Ka=0;for(b=Ul(b);!(J=b()).done;)J=J.value,(!ta||ta.end<J.index)&&(ta=ia.shift(),Ka=g.groupIndices.indexOf(ta.start)),Y.push(Rg({},J.index===ta.start?{type:"group",index:Ka}:{index:J.index-(Ka+1)+m,groupIndex:Ka},{size:J.size,
offset:J.offset,originalIndex:J.index,data:J.data}));return Y}function ek(b,g,m,J,Y,ia){var ta=0,Ka=0;0<b.length&&(ta=b[0].offset,Ka=b[b.length-1],Ka=Ka.offset+Ka.size);var Za=m-Y.lastIndex,db=ta;J=Y.lastOffset+Za*Y.lastSize+(Za-1)*J-Ka;return{items:Jl(b,Y,ia),topItems:Jl(g,Y,ia),topListHeight:g.reduce(function(sb,xb){return xb.size+sb},0),offsetTop:ta,offsetBottom:J,top:db,bottom:Ka,totalCount:m,firstItemIndex:ia}}function ym(b){var g,m=!1;return function(){return m||(m=!0,g=b()),g}}function yo(b,
g){var m=(0,di.useRef)(null),J=(0,di.useCallback)(function(Za){if(null!==Za&&Za.offsetParent){var db=Za.getBoundingClientRect();Za=db.width;if(g){var sb=g.getBoundingClientRect();db=db.top-sb.top;sb=sb.height-Math.max(0,db);db+=g.scrollTop}else sb=window.innerHeight-Math.max(0,db.top),db=db.top+window.pageYOffset;m.current={offsetTop:db,visibleHeight:sb,visibleWidth:Za};b(m.current)}},[b,g]),Y=Hm(J),ia=Y.callbackRef,ta=Y.ref,Ka=(0,di.useCallback)(function(){J(ta.current)},[J,ta]);return(0,di.useEffect)(function(){if(g){g.addEventListener("scroll",
Ka);var Za=new ResizeObserver(Ka);return Za.observe(g),function(){g.removeEventListener("scroll",Ka);Za.unobserve(g)}}return window.addEventListener("scroll",Ka),window.addEventListener("resize",Ka),function(){window.removeEventListener("scroll",Ka);window.removeEventListener("resize",Ka)}},[Ka,g]),ia}function Wm(b){return b}function Pg(b,g){var m=le();return Wg(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
lg(m,b),m}function bj(b,g){if("string"!=typeof b)return{context:g}}function Vk(b){var g=b.usePublisher,m=b.useEmitter,J=b.useEmitterValue;return ch.memo(function(Y){var ia=Y.style,ta=Y.children;Y=Di(Y,RH);var Ka=g("scrollContainerState"),Za=J("ScrollerComponent"),db=g("smoothScrollTargetReached"),sb=J("scrollerRef"),xb=J("context");Ka=ln(Ka,db,Za,sb);db=Ka.scrollerRef;sb=Ka.scrollByCallback;return m("scrollTo",Ka.scrollToCallback),m("scrollBy",sb),(0,di.createElement)(Za,Rg({ref:db,style:Rg({},YH,
ia),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},Y,bj(Za,xb)),ta)})}function In(b){var g=b.usePublisher,m=b.useEmitter,J=b.useEmitterValue;return ch.memo(function(Y){var ia=Y.style,ta=Y.children;Y=Di(Y,SH);var Ka=g("windowScrollContainerState"),Za=J("ScrollerComponent"),db=g("smoothScrollTargetReached"),sb=J("totalListHeight"),xb=J("deviation"),Wb=J("customScrollParent"),kc=J("context");db=ln(Ka,db,Za,af,Wb);var Ob=db.scrollerRef;Ka=db.scrollByCallback;db=db.scrollToCallback;
return AH(function(){return Ob.current=Wb||window,function(){Ob.current=null}},[Ob,Wb]),m("windowScrollTo",db),m("scrollBy",Ka),(0,di.createElement)(Za,Rg({style:Rg({position:"relative"},ia,0!==sb?{height:sb+xb}:{}),"data-virtuoso-scroller":!0},Y,bj(Za,kc)),ta)})}function gn(b,g,m){return Array.from({length:g-b+1}).map(function(J,Y){return{index:Y+b,data:null==m?void 0:m[Y+b]}})}function so(b,g){return b&&b.column===g.column&&b.row===g.row}function co(b,g,m,J){var Y=m.height;return void 0===Y||0===
J.length?{top:0,bottom:0}:{top:Xl(b,g,m,J[0].index),bottom:Xl(b,g,m,J[J.length-1].index)+Y}}function Xl(b,g,m,J){var Y=g.column;b=Or(1,vu((b.width+Y)/(m.width+Y)));J=vu(J/b);m=J*m.height+Or(0,J-1)*g.row;return 0<m?m+g.row:m}function Sm(b,g,m){return"normal"===g||null!=g&&g.endsWith("px")||m(b+" was not resolved to pixel value correctly",g,pm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function Wk(b,g,m,J=Y=>Y){return b*J(.5-g*(.5-m))}function ol(b){return[-b[0],-b[1]]}function Ck(b,g){return[b[0]+
g[0],b[1]+g[1]]}function Lk(b,g){return[b[0]-g[0],b[1]-g[1]]}function Kk(b,g){return[b[0]*g,b[1]*g]}function Kn(b){return[b[1],-b[0]]}function to(b,g){return b[0]===g[0]&&b[1]===g[1]}function uo(b){return b[0]*b[0]+b[1]*b[1]}function xl(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function jp(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function wn(b,g,m){let J=Math.sin(m);m=Math.cos(m);let Y=b[0]-g[0];b=b[1]-g[1];return[Y*m-b*J+g[0],Y*J+b*m+g[1]]}function Dm(b,g,m){return Ck(b,Kk(Lk(g,b),
m))}function Jn(b,g,m){return Ck(b,Kk(g,m))}function sn(b,g={}){let {size:m=16,smoothing:J=.5,thinning:Y=.5,simulatePressure:ia=!0,easing:ta=ud=>ud,start:Ka={},end:Za={},last:db=!1}=g,{cap:sb=!0,easing:xb=ud=>ud*(2-ud)}=Ka,{cap:Wb=!0,easing:kc=ud=>--ud*ud*ud+1}=Za;if(0===b.length||0>=m)return[];var Ob=b[b.length-1].runningLength;let sc=!1===Ka.taper?0:!0===Ka.taper?Math.max(m,Ob):Ka.taper,lc=!1===Za.taper?0:!0===Za.taper?Math.max(m,Ob):Za.taper;var Sb=Math.pow(m*J,2);g=[];let rc=[];var Kc=b.slice(0,
10).reduce((ud,zd)=>{var Id=zd.pressure;ia&&(zd=Pr(1,zd.distance/m),Id=Pr(1,1-zd),Id=Pr(1,ud+.275*(Id-ud)*zd));return(ud+Id)/2},b[0].pressure),Gc=Wk(m,Y,b[b.length-1].pressure,ta),Xc;let $d=b[0].vector;var Jd=b[0].point;let qe=Jd;var Ye=Jd;let Ge=qe;var Ve=!1;for(var ee=0;ee<b.length;ee++){var {pressure:Gd}=b[ee];let {point:ud,vector:zd,distance:Id,runningLength:we}=b[ee];if(ee<b.length-1&&3>Ob-we)continue;Y?(ia&&(Gc=Pr(1,Id/m),Gd=Pr(1,1-Gc),Gd=Pr(1,Kc+.275*(Gd-Kc)*Gc)),Gc=Wk(m,Y,Gd,ta)):Gc=m/2;void 0===
Xc&&(Xc=Gc);var gd=we<sc?xb(we/sc):1,bd=Ob-we<lc?kc((Ob-we)/lc):1;Gc=Math.max(.01,Gc*Math.min(gd,bd));bd=(ee<b.length-1?b[ee+1]:b[ee]).vector;let ye=ee<b.length-1?zd[0]*bd[0]+zd[1]*bd[1]:1;gd=null!==ye&&0>ye;if(0>zd[0]*$d[0]+zd[1]*$d[1]&&!Ve||gd){Jd=Kk(Kn($d),Gc);for(let Ie=1/13,uf=0;1>=uf;uf+=Ie)Ye=wn(Lk(ud,Jd),ud,Ws*uf),g.push(Ye),Ge=wn(Ck(ud,Jd),ud,Ws*-uf),rc.push(Ge);Jd=Ye;qe=Ge;gd&&(Ve=!0)}else(Ve=!1,ee===b.length-1)?(Gd=Kk(Kn(zd),Gc),g.push(Lk(ud,Gd)),rc.push(Ck(ud,Gd))):(Kc=Kk(Kn(Dm(bd,zd,
ye)),Gc),Ye=Lk(ud,Kc),(1>=ee||uo(Lk(Jd,Ye))>Sb)&&(g.push(Ye),Jd=Ye),Ge=Ck(ud,Kc),(1>=ee||uo(Lk(qe,Ge))>Sb)&&(rc.push(Ge),qe=Ge),Kc=Gd,$d=zd)}Ob=b[0].point.slice(0,2);Sb=1<b.length?b[b.length-1].point.slice(0,2):Ck(b[0].point,[1,1]);Ye=[];Ve=[];if(1===b.length){if(!sc&&!lc||db){b=Jn(Ob,xl(Kn(Lk(Ob,Sb))),-(Xc||Gc));g=[];for(let ud=1/13,zd=ud;1>=zd;zd+=ud)g.push(wn(b,Ob,2*Ws*zd));return g}}else{if(!(sc||lc&&1===b.length))if(sb)for(let ud=1/13,zd=ud;1>=zd;zd+=ud)Xc=wn(rc[0],Ob,Ws*zd),Ye.push(Xc);else ee=
Lk(g[0],rc[0]),Xc=Kk(ee,.5),ee=Kk(ee,.51),Ye.push(Lk(Ob,Xc),Lk(Ob,ee),Ck(Ob,ee),Ck(Ob,Xc));Xc=Kn(ol(b[b.length-1].vector));if(lc||sc&&1===b.length)Ve.push(Sb);else if(Wb){b=Jn(Sb,Xc,Gc);for(let ud=1/29,zd=ud;1>zd;zd+=ud)Ve.push(wn(b,Sb,3*Ws*zd))}else Ve.push(Ck(Sb,Kk(Xc,Gc)),Ck(Sb,Kk(Xc,.99*Gc)),Lk(Sb,Kk(Xc,.99*Gc)),Lk(Sb,Kk(Xc,Gc)))}return g.concat(Ve,rc.reverse(),Ye)}function Po(b,g={}){var m;let {streamline:J=.5,size:Y=16,last:ia=!1}=g;if(0===b.length)return[];g=.15+.85*(1-J);b=Array.isArray(b[0])?
b:b.map(({x:xb,y:Wb,pressure:kc=.5})=>[xb,Wb,kc]);if(2===b.length){var ta=b[1];b=b.slice(0,-1);for(var Ka=1;5>Ka;Ka++)b.push(Dm(b[0],ta,Ka/4))}1===b.length&&(b=[...b,[...Ck(b[0],[1,1]),...b[0].slice(2)]]);ta=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ka=!1;let Za=0,db=ta[0],sb=b.length-1;for(let xb=1;xb<b.length;xb++){let Wb=ia&&xb===sb?b[xb].slice(0,2):Dm(db.point,b[xb],g);if(to(db.point,Wb))continue;let kc=jp(Wb,db.point);if(Za+=kc,xb<sb&&
!Ka){if(Za<Y)continue;Ka=!0}db={point:Wb,pressure:0<=b[xb][2]?b[xb][2]:.5,vector:xl(Lk(db.point,Wb)),distance:kc,runningLength:Za};ta.push(db)}return ta[0].vector=(null==(m=ta[1])?void 0:m.vector)||[0,0],ta}function Qo(b){return(new Qw(b)).exportAsSVG()}function Ro(b){return(new Qw(b)).generatePreviewJsx()}function xo(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return LI.includes(b)?"image":MI.includes(b)?"video":"unknown"}function Al(...b){return(...g)=>ue(this,null,
function*(){for(const m of b){const J=yield m(...g);if(J&&0<J.length)return J}return null})}function Em(b,g){return ue(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function eo(){const {handlers:b}=TA.useContext(xp);return TA.useCallback((g,m)=>ue(this,[g,m],function*(J,{point:Y,shiftKey:ia,dataTransfer:ta,fromDrop:Ka}){function Za(ee,Gd){return ue(this,null,function*(){const gd=Object.values(J.assets).find(bd=>bd.src===
ee);return gd?gd:{id:Fg(),type:Gd?"video":"image",src:ee,size:yield xe(b.makeAssetUrl(ee),Gd)}})}function db(ee){return ue(this,null,function*(){const Gd=ee.filter(gd=>"unknown"!==xo(gd.name)).map(gd=>ue(this,null,function*(){try{const bd=yield b.saveAsset(gd);return yield Za(bd,"video"===xo(gd.name))}catch(bd){console.error(bd)}return null}));return(yield Promise.all(Gd)).filter(Nh)})}function sb(ee){return[Ga(Qa({},bq.defaultProps),{html:ee,point:[Y[0],Y[1]]})]}function xb(ee){return ue(this,null,
function*(){return Al(kc,Ob,lc,sc)(ee)})}function Wb(){return ue(this,null,function*(){const ee=yield navigator.clipboard.read(),Gd=Al(Ob,lc);return(yield Promise.all(ee.map(gd=>Gd(gd)))).flat().filter(Nh)})}function kc(ee){return ue(this,null,function*(){var Gd=Array.from(ee.files);return 0<Gd.length?(Jd=Gd=yield db(Gd),Gd.map((gd,bd)=>{const ud=Ga(Qa({},"video"===gd.type?pu.defaultProps:ou.defaultProps),{assetId:gd.id,opacity:1});gd.size&&Object.assign(ud,{point:[Y[0]-gd.size[0]/4+16*bd,Y[1]-gd.size[1]/
4+16*bd],size:pe.div(gd.size,2)});return ud})):null})}function Ob(ee){return ue(this,null,function*(){if(ee.types.includes("text/plain")&&(ia||Ka))return null;const Gd=yield Em(ee,"text/html");return Gd?Al(Sb,sb)(Gd):null})}function sc(ee){return ue(this,null,function*(){var Gd,gd,bd,ud,zd,Id,we=ee.getData("block-uuid");if(we){we=we.trim();const ye=null==(bd=null==(gd=null==(Gd=window.logseq)?void 0:Gd.api)?void 0:gd.get_selected_blocks)?void 0:bd.call(gd);Gd=ye&&1<(null==ye?void 0:ye.length)?ye.map(Ie=>
Ie.uuid):[we];null==(Id=null==(zd=null==(ud=window.logseq)?void 0:ud.api)?void 0:zd.set_blocks_id)?void 0:Id.call(zd,Gd);ud=Gd.map(Ie=>Gc(`((${Ie}))`));return(yield Promise.all(ud)).flat().filter(Nh).map((Ie,uf)=>Ga(Qa({},Ie),{point:[Y[0]+(an.defaultProps.size[0]+16)*uf,Y[1]]}))}return null})}function lc(ee){return ue(this,null,function*(){var Gd=yield Em(ee,"text/plain");return Gd?(Gd=Gd.trim(),Al(rc,Kc,Gc)(Gd)):null})}function Sb(ee){ee=KI(ee);try{if(ee){const Gd=ee.shapes;qe=ee.assets;const gd=
rf.getCommonBounds(Gd.map(zd=>{var Id,we,ye,Ie,uf,nf,Vg,Kg,Wh,Gj,ej,em,Xn,sB,tB,uB;return{minX:null!=(we=null==(Id=zd.point)?void 0:Id[0])?we:Y[0],minY:null!=(Ie=null==(ye=zd.point)?void 0:ye[1])?Ie:Y[1],width:null!=(nf=null==(uf=zd.size)?void 0:uf[0])?nf:4,height:null!=(Kg=null==(Vg=zd.size)?void 0:Vg[1])?Kg:4,maxX:(null!=(Gj=null==(Wh=zd.point)?void 0:Wh[0])?Gj:Y[0])+(null!=(em=null==(ej=zd.size)?void 0:ej[0])?em:4),maxY:(null!=(sB=null==(Xn=zd.point)?void 0:Xn[1])?sB:Y[1])+(null!=(uB=null==(tB=
zd.size)?void 0:tB[1])?uB:4)}})),bd=ee.bindings,ud=Gd.map(zd=>Ga(Qa({},zd),{id:Fg(),point:[Y[0]+zd.point[0]-gd.minX,Y[1]+zd.point[1]-gd.minY]}));ud.flatMap(zd=>{var Id;return Object.values(null!=(Id=zd.handles)?Id:{})}).forEach(zd=>{if(zd.bindingId){var Id=bd[zd.bindingId];if(Id){var we=Gd.findIndex(Ie=>Ie.id===Id.fromId);const ye=Gd.findIndex(Ie=>Ie.id===Id.toId);Id&&-1!==we&&-1!==ye?(we=Ga(Qa({},Id),{id:Fg(),fromId:ud[we].id,toId:ud[ye].id}),Ye.push(we),zd.bindingId=we.id):zd.bindingId=void 0}else console.warn("binding not found",
zd.bindingId)}});return ud}}catch(Gd){console.error(Gd)}return null}function rc(ee){return ue(this,null,function*(){try{new URL(ee);var Gd=!0}catch(gd){Gd=!1}return!Gd||ia||Ka?null:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(ee)?[Ga(Qa({},$q.defaultProps),{url:ee,point:[Y[0],Y[1]]})]:[Ga(Qa({},Wq.defaultProps),{url:ee,point:[Y[0],Y[1]]})]})}function Kc(ee){return ee.startsWith("\x3ciframe")?[Ga(Qa({},bq.defaultProps),
{html:ee,point:[Y[0],Y[1]]})]:null}function Gc(ee){return ue(this,null,function*(){if(/^\(\(.*\)\)$/.test(ee)&&40===ee.length){var Gd=ee.slice(2,-2);if(wf(Gd))return[Ga(Qa({},an.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:Gd,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ee))return Gd=ee.slice(2,-2),[Ga(Qa({},an.defaultProps),{point:[Y[0],Y[1]],size:[400,0],pageId:Gd,blockType:"P"})];return(Gd=null==b?void 0:b.addNewBlock(ee))?[Ga(Qa({},an.defaultProps),{size:[400,0],point:[Y[0],Y[1]],pageId:Gd,
blockType:"B",compact:!0})]:null})}var Xc,$d;let Jd=[],qe=[];const Ye=[];J.cursors.setCursor("progress");let Ge=[];try{ta?Ge.push(...(null!=(Xc=yield xb(ta))?Xc:[])):Ge.push(...(null!=($d=yield Wb())?$d:[]))}catch(ee){console.error(ee)}const Ve=Ge.map(ee=>Ga(Qa({},ee),{parentId:J.currentPageId,id:wf(ee.id)?ee.id:Fg()}));J.wrapUpdate(()=>{var ee=[...Jd,...qe];0<ee.length&&J.createAssets(ee);0<Ve.length&&J.createShapes(Ve);if(1===J.selectedShapesArray.length&&1===Ve.length&&!Ka){ee=J.selectedShapesArray[0];
const Gd=J.getShapeById(Ve[0].id);J.createNewLineBinding(ee,Gd)}J.currentPage.updateBindings(Object.fromEntries(Ye.map(Gd=>[Gd.id,Gd])));J.setSelectedShapes(Ve.map(Gd=>Gd.id));J.selectedTool.transition("idle");J.cursors.setCursor("default")})}),[])}function So(){const b=eo();return tH.useCallback((g,m)=>ue(this,[g,m],function*(J,{dataTransfer:Y,point:ia}){b(J,{point:ia,shiftKey:!1,dataTransfer:Y,fromDrop:!0})}),[])}function zo(){return NI.default.useCallback(b=>ue(this,null,function*(){b.selectTool("logseq-portal").selectedTool.transition("creating")}),
[])}var vl=Object.create,jn=Object.defineProperty,vo=Object.defineProperties,Ln=Object.getOwnPropertyDescriptor,tn=Object.getOwnPropertyDescriptors,Mn=Object.getOwnPropertyNames,gm=Object.getOwnPropertySymbols,Ip=Object.getPrototypeOf,fo=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,La=(b,g,m)=>g in b?jn(b,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):b[g]=m,Qa=(b,g)=>{for(var m in g||={})fo.call(g,m)&&La(b,m,g[m]);if(gm)for(m of gm(g))wo.call(g,m)&&La(b,m,g[m]);
return b},Ga=(b,g)=>vo(b,tn(g)),bb=(b,g)=>{var m={},J;for(J in b)fo.call(b,J)&&0>g.indexOf(J)&&(m[J]=b[J]);if(null!=b&&gm)for(J of gm(b))0>g.indexOf(J)&&wo.call(b,J)&&(m[J]=b[J]);return m},Hb=(b,g)=>function(){return g||(0,b[Mn(b)[0]])((g={exports:{}}).exports,g),g.exports},tc=(b,g,m,J)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let Y of Mn(g))fo.call(b,Y)||Y===m||jn(b,Y,{get:()=>g[Y],enumerable:!(J=Ln(g,Y))||J.enumerable});return b},Cc=(b,g,m)=>(m=null!=b?vl(Ip(b)):{},tc(!g&&b&&b.__esModule?
m:jn(m,"default",{value:b,enumerable:!0}),b)),Ec=(b,g,m,J)=>{for(var Y=1<J?void 0:J?Ln(g,m):g,ia=b.length-1,ta;0<=ia;ia--)if(ta=b[ia])Y=(J?ta(g,m,Y):ta(Y))||Y;J&&Y&&jn(g,m,Y);return Y},Ya=(b,g,m)=>{La(b,"symbol"!==typeof g?g+"":g,m);return m},ue=(b,g,m)=>new Promise((J,Y)=>{var ia=Za=>{try{Ka(m.next(Za))}catch(db){Y(db)}},ta=Za=>{try{Ka(m.throw(Za))}catch(db){Y(db)}},Ka=Za=>Za.done?J(Za.value):Promise.resolve(Za.value).then(ia,ta);Ka((m=m.apply(b,g)).next())}),ea=Hb({["../../node_modules/mousetrap/mousetrap.js"](b,
g){(function(m,J,Y){function ia(lc,Sb,rc){lc.addEventListener?lc.addEventListener(Sb,rc,!1):lc.attachEvent("on"+Sb,rc)}function ta(lc){if("keypress"==lc.type){var Sb=String.fromCharCode(lc.which);lc.shiftKey||(Sb=Sb.toLowerCase());return Sb}return xb[lc.which]?xb[lc.which]:Wb[lc.which]?Wb[lc.which]:String.fromCharCode(lc.which).toLowerCase()}function Ka(lc){return"shift"==lc||"ctrl"==lc||"alt"==lc||"meta"==lc}function Za(lc,Sb){var rc,Kc=[];"+"===lc?lc=["+"]:(lc=lc.replace(/\+{2}/g,"+plus"),lc=lc.split("+"));
for(rc=0;rc<lc.length;++rc){var Gc=lc[rc];Ob[Gc]&&(Gc=Ob[Gc]);Sb&&"keypress"!=Sb&&kc[Gc]&&(Gc=kc[Gc],Kc.push("shift"));Ka(Gc)&&Kc.push(Gc)}lc=Gc;if(!Sb){if(!sc){sc={};for(var Xc in xb)95<Xc&&112>Xc||xb.hasOwnProperty(Xc)&&(sc[xb[Xc]]=Xc)}Sb=sc[lc]?"keydown":"keypress"}"keypress"==Sb&&Kc.length&&(Sb="keydown");return{key:Gc,modifiers:Kc,action:Sb}}function db(lc,Sb){return null===lc||lc===J?!1:lc===Sb?!0:db(lc.parentNode,Sb)}function sb(lc){function Sb(Gd){Gd=Gd||{};var gd=!1,bd;for(bd in qe)Gd[bd]?
gd=!0:qe[bd]=0;gd||(ee=!1)}function rc(Gd,gd,bd,ud,zd,Id){var we,ye=[],Ie=bd.type;if(!Jd._callbacks[Gd])return[];"keyup"==Ie&&Ka(Gd)&&(gd=[Gd]);for(we=0;we<Jd._callbacks[Gd].length;++we){var uf=Jd._callbacks[Gd][we];if((ud||!uf.seq||qe[uf.seq]==uf.level)&&Ie==uf.action){var nf;(nf="keypress"==Ie&&!bd.metaKey&&!bd.ctrlKey)||(nf=uf.modifiers,nf=gd.sort().join(",")===nf.sort().join(","));nf&&(nf=ud&&uf.seq==ud&&uf.level==Id,(!ud&&uf.combo==zd||nf)&&Jd._callbacks[Gd].splice(we,1),ye.push(uf))}}return ye}
function Kc(Gd,gd,bd,ud){Jd.stopCallback(gd,gd.target||gd.srcElement,bd,ud)||!1!==Gd(gd,bd)||(gd.preventDefault?gd.preventDefault():gd.returnValue=!1,gd.stopPropagation?gd.stopPropagation():gd.cancelBubble=!0)}function Gc(Gd){"number"!==typeof Gd.which&&(Gd.which=Gd.keyCode);var gd=ta(Gd);if(gd)if("keyup"==Gd.type&&Ge===gd)Ge=!1;else{var bd=Jd,ud=bd.handleKey,zd=[];Gd.shiftKey&&zd.push("shift");Gd.altKey&&zd.push("alt");Gd.ctrlKey&&zd.push("ctrl");Gd.metaKey&&zd.push("meta");ud.call(bd,gd,zd,Gd)}}
function Xc(Gd,gd,bd,ud){function zd(Ie){return function(){ee=Ie;++qe[Gd];clearTimeout(Ye);Ye=setTimeout(Sb,1E3)}}function Id(Ie){Kc(bd,Ie,Gd);"keyup"!==ud&&(Ge=ta(Ie));setTimeout(Sb,10)}for(var we=qe[Gd]=0;we<gd.length;++we){var ye=we+1===gd.length?Id:zd(ud||Za(gd[we+1]).action);$d(gd[we],ye,ud,Gd,we)}}function $d(Gd,gd,bd,ud,zd){Jd._directMap[Gd+":"+bd]=gd;Gd=Gd.replace(/\s+/g," ");var Id=Gd.split(" ");1<Id.length?Xc(Gd,Id,gd,bd):(bd=Za(Gd,bd),Jd._callbacks[bd.key]=Jd._callbacks[bd.key]||[],rc(bd.key,
bd.modifiers,{type:bd.action},ud,Gd,zd),Jd._callbacks[bd.key][ud?"unshift":"push"]({callback:gd,modifiers:bd.modifiers,action:bd.action,seq:ud,level:zd,combo:Gd}))}var Jd=this;lc=lc||J;if(!(Jd instanceof sb))return new sb(lc);Jd.target=lc;Jd._callbacks={};Jd._directMap={};var qe={},Ye,Ge=!1,Ve=!1,ee=!1;Jd._handleKey=function(Gd,gd,bd){var ud=rc(Gd,gd,bd),zd;gd={};var Id=0,we=!1;for(zd=0;zd<ud.length;++zd)ud[zd].seq&&(Id=Math.max(Id,ud[zd].level));for(zd=0;zd<ud.length;++zd)ud[zd].seq?ud[zd].level==
Id&&(we=!0,gd[ud[zd].seq]=1,Kc(ud[zd].callback,bd,ud[zd].combo,ud[zd].seq)):we||Kc(ud[zd].callback,bd,ud[zd].combo);ud="keypress"==bd.type&&Ve;bd.type!=ee||Ka(Gd)||ud||Sb(gd);Ve=we&&"keydown"==bd.type};Jd._bindMultiple=function(Gd,gd,bd){for(var ud=0;ud<Gd.length;++ud)$d(Gd[ud],gd,bd)};ia(lc,"keypress",Gc);ia(lc,"keydown",Gc);ia(lc,"keyup",Gc)}if(m){var xb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",
37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Wb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Ob={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?
"meta":"ctrl"},sc;for(Y=1;20>Y;++Y)xb[111+Y]="f"+Y;for(Y=0;9>=Y;++Y)xb[Y+96]=Y.toString();sb.prototype.bind=function(lc,Sb,rc){lc=lc instanceof Array?lc:[lc];this._bindMultiple.call(this,lc,Sb,rc);return this};sb.prototype.unbind=function(lc,Sb){return this.bind.call(this,lc,function(){},Sb)};sb.prototype.trigger=function(lc,Sb){if(this._directMap[lc+":"+Sb])this._directMap[lc+":"+Sb]({},lc);return this};sb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};sb.prototype.stopCallback=
function(lc,Sb){if(-1<(" "+Sb.className+" ").indexOf(" mousetrap ")||db(Sb,this.target))return!1;if("composedPath"in lc&&"function"===typeof lc.composedPath){var rc=lc.composedPath()[0];rc!==lc.target&&(Sb=rc)}return"INPUT"==Sb.tagName||"SELECT"==Sb.tagName||"TEXTAREA"==Sb.tagName||Sb.isContentEditable};sb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};sb.addKeycodes=function(lc){for(var Sb in lc)lc.hasOwnProperty(Sb)&&(xb[Sb]=lc[Sb]);sc=null};sb.init=function(){var lc=
sb(J),Sb;for(Sb in lc)"_"!==Sb.charAt(0)&&(sb[Sb]=function(rc){return function(){return lc[rc].apply(lc,arguments)}}(Sb))};sb.init();m.Mousetrap=sb;"undefined"!==typeof g&&g.exports&&(g.exports=sb);"function"===typeof define&&define.amd&&define(function(){return sb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),xa=Hb({["../../node_modules/rbush/rbush.min.js"](b,g){!function(m,J){"object"==typeof b&&"undefined"!=typeof g?g.exports=J():"function"==typeof define&&
define.amd?define(J):(m=m||self).RBush=J()}(b,function(){function m(Sb,rc,Kc,Gc,Xc){!function ee(Jd,qe,Ye,Ge,Ve){for(;Ge>Ye;){if(600<Ge-Ye){var Gd=Ge-Ye+1,gd=qe-Ye+1,bd=Math.log(Gd),ud=.5*Math.exp(2*bd/3);bd=.5*Math.sqrt(bd*ud*(Gd-ud)/Gd)*(0>gd-Gd/2?-1:1);ee(Jd,qe,Math.max(Ye,Math.floor(qe-gd*ud/Gd+bd)),Math.min(Ge,Math.floor(qe+(Gd-gd)*ud/Gd+bd)),Ve)}Gd=Jd[qe];gd=Ye;ud=Ge;J(Jd,Ye,qe);for(0<Ve(Jd[Ge],Gd)&&J(Jd,Ye,Ge);gd<ud;){J(Jd,gd,ud);gd++;for(ud--;0>Ve(Jd[gd],Gd);)gd++;for(;0<Ve(Jd[ud],Gd);)ud--}0===
Ve(Jd[Ye],Gd)?J(Jd,Ye,ud):J(Jd,++ud,Ge);ud<=qe&&(Ye=ud+1);qe<=ud&&(Ge=ud-1)}}(Sb,rc,Kc||0,Gc||Sb.length-1,Xc||Y)}function J(Sb,rc,Kc){var Gc=Sb[rc];Sb[rc]=Sb[Kc];Sb[Kc]=Gc}function Y(Sb,rc){return Sb<rc?-1:Sb>rc?1:0}function ia(Sb,rc){ta(Sb,0,Sb.children.length,rc,Sb)}function ta(Sb,rc,Kc,Gc,Xc){Xc||=Ob(null);Xc.minX=1/0;Xc.minY=1/0;Xc.maxX=-1/0;for(Xc.maxY=-1/0;rc<Kc;rc++){var $d=Sb.children[rc];Ka(Xc,Sb.leaf?Gc($d):$d)}return Xc}function Ka(Sb,rc){return Sb.minX=Math.min(Sb.minX,rc.minX),Sb.minY=
Math.min(Sb.minY,rc.minY),Sb.maxX=Math.max(Sb.maxX,rc.maxX),Sb.maxY=Math.max(Sb.maxY,rc.maxY),Sb}function Za(Sb,rc){return Sb.minX-rc.minX}function db(Sb,rc){return Sb.minY-rc.minY}function sb(Sb){return(Sb.maxX-Sb.minX)*(Sb.maxY-Sb.minY)}function xb(Sb){return Sb.maxX-Sb.minX+(Sb.maxY-Sb.minY)}function Wb(Sb,rc){return Sb.minX<=rc.minX&&Sb.minY<=rc.minY&&rc.maxX<=Sb.maxX&&rc.maxY<=Sb.maxY}function kc(Sb,rc){return rc.minX<=Sb.maxX&&rc.minY<=Sb.maxY&&rc.maxX>=Sb.minX&&rc.maxY>=Sb.minY}function Ob(Sb){return{children:Sb,
height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sc(Sb,rc,Kc,Gc,Xc){for(var $d=[rc,Kc];$d.length;)if(!((Kc=$d.pop())-(rc=$d.pop())<=Gc)){var Jd=rc+Math.ceil((Kc-rc)/Gc/2)*Gc;m(Sb,Jd,rc,Kc,Xc);$d.push(rc,Jd,Jd,Kc)}}var lc=function(Sb){void 0===Sb&&(Sb=9);this._maxEntries=Math.max(4,Sb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return lc.prototype.all=function(){return this._all(this.data,[])},lc.prototype.search=function(Sb){var rc=this.data,Kc=[];if(!kc(Sb,
rc))return Kc;for(var Gc=this.toBBox,Xc=[];rc;){for(var $d=0;$d<rc.children.length;$d++){var Jd=rc.children[$d],qe=rc.leaf?Gc(Jd):Jd;kc(Sb,qe)&&(rc.leaf?Kc.push(Jd):Wb(Sb,qe)?this._all(Jd,Kc):Xc.push(Jd))}rc=Xc.pop()}return Kc},lc.prototype.collides=function(Sb){var rc=this.data;if(!kc(Sb,rc))return!1;for(var Kc=[];rc;){for(var Gc=0;Gc<rc.children.length;Gc++){var Xc=rc.children[Gc],$d=rc.leaf?this.toBBox(Xc):Xc;if(kc(Sb,$d)){if(rc.leaf||Wb(Sb,$d))return!0;Kc.push(Xc)}}rc=Kc.pop()}return!1},lc.prototype.load=
function(Sb){if(!Sb||!Sb.length)return this;if(Sb.length<this._minEntries){for(var rc=0;rc<Sb.length;rc++)this.insert(Sb[rc]);return this}Sb=this._build(Sb.slice(),0,Sb.length-1,0);this.data.children.length?this.data.height===Sb.height?this._splitRoot(this.data,Sb):(this.data.height<Sb.height&&(rc=this.data,this.data=Sb,Sb=rc),this._insert(Sb,this.data.height-Sb.height-1,!0)):this.data=Sb;return this},lc.prototype.insert=function(Sb){return Sb&&this._insert(Sb,this.data.height-1),this},lc.prototype.clear=
function(){return this.data=Ob([]),this},lc.prototype.remove=function(Sb,rc){if(!Sb)return this;for(var Kc,Gc,Xc,$d=this.data,Jd=this.toBBox(Sb),qe=[],Ye=[];$d||qe.length;){if($d||($d=qe.pop(),Gc=qe[qe.length-1],Kc=Ye.pop(),Xc=!0),$d.leaf){a:{var Ge=Sb;var Ve=$d.children,ee=rc;if(ee){for(var Gd=0;Gd<Ve.length;Gd++)if(ee(Ge,Ve[Gd])){Ge=Gd;break a}Ge=-1}else Ge=Ve.indexOf(Ge)}if(-1!==Ge)return $d.children.splice(Ge,1),qe.push($d),this._condense(qe),this}Xc||$d.leaf||!Wb($d,Jd)?Gc?(Kc++,$d=Gc.children[Kc],
Xc=!1):$d=null:(qe.push($d),Ye.push(Kc),Kc=0,Gc=$d,$d=$d.children[0])}return this},lc.prototype.toBBox=function(Sb){return Sb},lc.prototype.compareMinX=function(Sb,rc){return Sb.minX-rc.minX},lc.prototype.compareMinY=function(Sb,rc){return Sb.minY-rc.minY},lc.prototype.toJSON=function(){return this.data},lc.prototype.fromJSON=function(Sb){return this.data=Sb,this},lc.prototype._all=function(Sb,rc){for(var Kc=[];Sb;)Sb.leaf?rc.push.apply(rc,Sb.children):Kc.push.apply(Kc,Sb.children),Sb=Kc.pop();return rc},
lc.prototype._build=function(Sb,rc,Kc,Gc){var Xc,$d=Kc-rc+1,Jd=this._maxEntries;if($d<=Jd)return ia(Xc=Ob(Sb.slice(rc,Kc+1)),this.toBBox),Xc;Gc||(Gc=Math.ceil(Math.log($d)/Math.log(Jd)),Jd=Math.ceil($d/Math.pow(Jd,Gc-1)));(Xc=Ob([])).leaf=!1;Xc.height=Gc;$d=Math.ceil($d/Jd);Jd=$d*Math.ceil(Math.sqrt(Jd));for(sc(Sb,rc,Kc,Jd,this.compareMinX);rc<=Kc;rc+=Jd){var qe=Math.min(rc+Jd-1,Kc);sc(Sb,rc,qe,$d,this.compareMinY);for(var Ye=rc;Ye<=qe;Ye+=$d)Xc.children.push(this._build(Sb,Ye,Math.min(Ye+$d-1,qe),
Gc-1))}return ia(Xc,this.toBBox),Xc},lc.prototype._chooseSubtree=function(Sb,rc,Kc,Gc){for(;Gc.push(rc),!rc.leaf&&Gc.length-1!==Kc;){for(var Xc=1/0,$d=1/0,Jd=void 0,qe=0;qe<rc.children.length;qe++){var Ye=rc.children[qe],Ge=sb(Ye),Ve=(ee=Sb,Gd=Ye,(Math.max(Gd.maxX,ee.maxX)-Math.min(Gd.minX,ee.minX))*(Math.max(Gd.maxY,ee.maxY)-Math.min(Gd.minY,ee.minY))-Ge);Ve<$d?($d=Ve,Xc=Ge<Xc?Ge:Xc,Jd=Ye):Ve===$d&&Ge<Xc&&(Xc=Ge,Jd=Ye)}rc=Jd||rc.children[0]}var ee,Gd;return rc},lc.prototype._insert=function(Sb,rc,
Kc){Kc=Kc?Sb:this.toBBox(Sb);var Gc=[],Xc=this._chooseSubtree(Kc,this.data,rc,Gc);Xc.children.push(Sb);for(Ka(Xc,Kc);0<=rc&&Gc[rc].children.length>this._maxEntries;)this._split(Gc,rc),rc--;this._adjustParentBBoxes(Kc,Gc,rc)},lc.prototype._split=function(Sb,rc){var Kc=Sb[rc],Gc=Kc.children.length,Xc=this._minEntries;this._chooseSplitAxis(Kc,Xc,Gc);Gc=this._chooseSplitIndex(Kc,Xc,Gc);Gc=Ob(Kc.children.splice(Gc,Kc.children.length-Gc));Gc.height=Kc.height;Gc.leaf=Kc.leaf;ia(Kc,this.toBBox);ia(Gc,this.toBBox);
rc?Sb[rc-1].children.push(Gc):this._splitRoot(Kc,Gc)},lc.prototype._splitRoot=function(Sb,rc){this.data=Ob([Sb,rc]);this.data.height=Sb.height+1;this.data.leaf=!1;ia(this.data,this.toBBox)},lc.prototype._chooseSplitIndex=function(Sb,rc,Kc){for(var Gc,Xc,$d,Jd,qe,Ye,Ge,Ve=1/0,ee=1/0,Gd=rc;Gd<=Kc-rc;Gd++){var gd=ta(Sb,0,Gd,this.toBBox),bd=ta(Sb,Gd,Kc,this.toBBox),ud=(Xc=gd,$d=bd,Jd=void 0,qe=void 0,Ye=void 0,Ge=void 0,Jd=Math.max(Xc.minX,$d.minX),qe=Math.max(Xc.minY,$d.minY),Ye=Math.min(Xc.maxX,$d.maxX),
Ge=Math.min(Xc.maxY,$d.maxY),Math.max(0,Ye-Jd)*Math.max(0,Ge-qe));gd=sb(gd)+sb(bd);ud<Ve?(Ve=ud,Gc=Gd,ee=gd<ee?gd:ee):ud===Ve&&gd<ee&&(ee=gd,Gc=Gd)}return Gc||Kc-rc},lc.prototype._chooseSplitAxis=function(Sb,rc,Kc){var Gc=Sb.leaf?this.compareMinX:Za,Xc=Sb.leaf?this.compareMinY:db;this._allDistMargin(Sb,rc,Kc,Gc)<this._allDistMargin(Sb,rc,Kc,Xc)&&Sb.children.sort(Gc)},lc.prototype._allDistMargin=function(Sb,rc,Kc,Gc){Sb.children.sort(Gc);Gc=this.toBBox;for(var Xc=ta(Sb,0,rc,Gc),$d=ta(Sb,Kc-rc,Kc,Gc),
Jd=xb(Xc)+xb($d),qe=rc;qe<Kc-rc;qe++){var Ye=Sb.children[qe];Ka(Xc,Sb.leaf?Gc(Ye):Ye);Jd+=xb(Xc)}for(Kc=Kc-rc-1;Kc>=rc;Kc--)Xc=Sb.children[Kc],Ka($d,Sb.leaf?Gc(Xc):Xc),Jd+=xb($d);return Jd},lc.prototype._adjustParentBBoxes=function(Sb,rc,Kc){for(;0<=Kc;Kc--)Ka(rc[Kc],Sb)},lc.prototype._condense=function(Sb){for(var rc=Sb.length-1,Kc=void 0;0<=rc;rc--)0===Sb[rc].children.length?0<rc?(Kc=Sb[rc-1].children).splice(Kc.indexOf(Sb[rc]),1):this.clear():ia(Sb[rc],this.toBBox)},lc})}}),Wa=Hb({["../../node_modules/fast-copy/dist/fast-copy.js"](b,
g){(function(m,J){"object"===typeof b&&"undefined"!==typeof g?g.exports=J():"function"===typeof define&&define.amd?define(J):(m="undefined"!==typeof globalThis?globalThis:m||self,m["fast-copy"]=J())})(b,function(){function m(Jd,qe){var Ye=!(!qe||!qe.isStrict),Ge=qe&&qe.realm||$d,Ve=Ye?rc:Sb,ee=function(Gd,gd){if(!Gd||"object"!==typeof Gd)return Gd;if(gd.has(Gd))return gd.get(Gd);var bd=Gd.__proto__||Xc(Gd);bd=bd&&bd.constructor;if(!bd||bd===Ge.Object)return Ve(Gd,Ge,ee,gd);if(Gc(Gd)){if(Ye)return rc(Gd,
Ge,ee,gd);var ud=new bd;gd.set(Gd,ud);bd=0;for(var zd=Gd.length;bd<zd;++bd)ud[bd]=ee(Gd[bd],gd);return ud}if(Gd instanceof Ge.Date)return new bd(Gd.getTime());if(Gd instanceof Ge.RegExp)return ud=new bd(Gd.source,Gd.flags||Kc(Gd)),ud.lastIndex=Gd.lastIndex,ud;if(Ge.Map&&Gd instanceof Ge.Map)return ud=new bd,gd.set(Gd,ud),Gd.forEach(function(Id,we){ud.set(we,ee(Id,gd))}),ud;if(Ge.Set&&Gd instanceof Ge.Set)return ud=new bd,gd.set(Gd,ud),Gd.forEach(function(Id){ud.add(ee(Id,gd))}),ud;if(Ge.Blob&&Gd instanceof
Ge.Blob)return Gd.slice(0,Gd.size,Gd.type);if(Ge.Buffer&&Ge.Buffer.isBuffer(Gd))return ud=Ge.Buffer.allocUnsafe?Ge.Buffer.allocUnsafe(Gd.length):new bd(Gd.length),gd.set(Gd,ud),Gd.copy(ud),ud;if(Ge.ArrayBuffer){if(Ge.ArrayBuffer.isView(Gd))return ud=new bd(Gd.buffer.slice(0)),gd.set(Gd,ud),ud;if(Gd instanceof Ge.ArrayBuffer)return ud=Gd.slice(0),gd.set(Gd,ud),ud}return"function"===typeof Gd.then||Gd instanceof Error||Ge.WeakMap&&Gd instanceof Ge.WeakMap||Ge.WeakSet&&Gd instanceof Ge.WeakSet?Gd:Ve(Gd,
Ge,ee,gd)};return ee(Jd,sc())}var J=Function.prototype.toString,Y=Object.create,ia=Object.defineProperty,ta=Object.getOwnPropertyDescriptor,Ka=Object.getOwnPropertyNames,Za=Object.getOwnPropertySymbols,db=Object.getPrototypeOf,sb=Object.prototype,xb=sb.hasOwnProperty,Wb=sb.propertyIsEnumerable,kc="function"===typeof Za,Ob="function"===typeof WeakMap,sc=function(){if(Ob)return function(){return new WeakMap};var Jd=function(){function qe(){this._keys=[];this._values=[]}qe.prototype.has=function(Ye){return!!~this._keys.indexOf(Ye)};
qe.prototype.get=function(Ye){return this._values[this._keys.indexOf(Ye)]};qe.prototype.set=function(Ye,Ge){this._keys.push(Ye);this._values.push(Ge)};return qe}();return function(){return new Jd}}(),lc=function(Jd,qe){Jd=Jd.__proto__||db(Jd);if(!Jd)return Y(null);var Ye=Jd.constructor;if(Ye===qe.Object)return Jd===qe.Object.prototype?{}:Y(Jd);if(~J.call(Ye).indexOf("[native code]"))try{return new Ye}catch(Ge){}return Y(Jd)},Sb=function(Jd,qe,Ye,Ge){qe=lc(Jd,qe);Ge.set(Jd,qe);for(var Ve in Jd)xb.call(Jd,
Ve)&&(qe[Ve]=Ye(Jd[Ve],Ge));if(kc){Ve=Za(Jd);for(var ee=0,Gd=Ve.length,gd;ee<Gd;++ee)gd=Ve[ee],Wb.call(Jd,gd)&&(qe[gd]=Ye(Jd[gd],Ge))}return qe},rc=function(Jd,qe,Ye,Ge){qe=lc(Jd,qe);Ge.set(Jd,qe);for(var Ve=kc?Ka(Jd).concat(Za(Jd)):Ka(Jd),ee=0,Gd=Ve.length,gd,bd;ee<Gd;++ee)if(gd=Ve[ee],"callee"!==gd&&"caller"!==gd)if(bd=ta(Jd,gd)){bd.get||bd.set||(bd.value=Ye(Jd[gd],Ge));try{ia(qe,gd,bd)}catch(ud){qe[gd]=bd.value}}else qe[gd]=Ye(Jd[gd],Ge);return qe},Kc=function(Jd){var qe="";Jd.global&&(qe+="g");
Jd.ignoreCase&&(qe+="i");Jd.multiline&&(qe+="m");Jd.unicode&&(qe+="u");Jd.sticky&&(qe+="y");return qe},Gc=Array.isArray,Xc=Object.getPrototypeOf,$d=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof qa)return qa;console&&console.error&&console.error('Unable to locate global object, returning "this".');return this}();m.default=m;m.strict=function(Jd,qe){return m(Jd,{isStrict:!0,
realm:qe?qe.realm:void 0})};return m})}}),vb=Hb({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function ia(J,Y){if(J===Y)return!0;if(J&&Y&&"object"==typeof J&&"object"==typeof Y){if(J.constructor!==Y.constructor)return!1;var ta;if(Array.isArray(J)){var Ka=J.length;if(Ka!=Y.length)return!1;for(ta=Ka;0!==ta--;)if(!ia(J[ta],Y[ta]))return!1;return!0}if(J.constructor===RegExp)return J.source===Y.source&&J.flags===Y.flags;if(J.valueOf!==Object.prototype.valueOf)return J.valueOf()===Y.valueOf();
if(J.toString!==Object.prototype.toString)return J.toString()===Y.toString();var Za=Object.keys(J);Ka=Za.length;if(Ka!==Object.keys(Y).length)return!1;for(ta=Ka;0!==ta--;)if(!Object.prototype.hasOwnProperty.call(Y,Za[ta]))return!1;for(ta=Ka;0!==ta--;)if(Ka=Za[ta],!ia(J[Ka],Y[Ka]))return!1;return!0}return J!==J&&Y!==Y}}}),bc=Hb({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function m(xb,Wb){return!1!==Wb.clone&&Wb.isMergeableObject(xb)?Za(Array.isArray(xb)?[]:{},xb,Wb):xb}function J(xb,Wb,
kc){return xb.concat(Wb).map(function(Ob){return m(Ob,kc)})}function Y(xb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(xb).filter(function(Wb){return xb.propertyIsEnumerable(Wb)}):[]}function ia(xb){return Object.keys(xb).concat(Y(xb))}function ta(xb,Wb){try{return Wb in xb}catch(kc){return!1}}function Ka(xb,Wb,kc){var Ob={};kc.isMergeableObject(xb)&&ia(xb).forEach(function(sc){Ob[sc]=m(xb[sc],kc)});ia(Wb).forEach(function(sc){if(!ta(xb,sc)||Object.hasOwnProperty.call(xb,sc)&&
Object.propertyIsEnumerable.call(xb,sc))if(ta(xb,sc)&&kc.isMergeableObject(Wb[sc])){if(kc.customMerge){var lc=kc.customMerge(sc);lc="function"===typeof lc?lc:Za}else lc=Za;Ob[sc]=lc(xb[sc],Wb[sc],kc)}else Ob[sc]=m(Wb[sc],kc)});return Ob}function Za(xb,Wb,kc){kc=kc||{};kc.arrayMerge=kc.arrayMerge||J;kc.isMergeableObject=kc.isMergeableObject||db;kc.cloneUnlessOtherwiseSpecified=m;var Ob=Array.isArray(Wb),sc=Array.isArray(xb);return Ob!==sc?m(Wb,kc):Ob?kc.arrayMerge(xb,Wb,kc):Ka(xb,Wb,kc)}var db=function(xb){var Wb;
if(Wb=!!xb&&"object"===typeof xb)Wb=Object.prototype.toString.call(xb),Wb=!("[object RegExp]"===Wb||"[object Date]"===Wb||xb.$$typeof===sb);return Wb},sb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Za.all=function(xb,Wb){if(!Array.isArray(xb))throw Error("first argument should be an array");return xb.reduce(function(kc,Ob){return Za(kc,Ob,Wb)},{})};g.exports=Za}}),wc=Hb({["../../node_modules/tslib/tslib.js"](b,g){var m,J,Y,ia,ta,Ka,Za,db,sb,xb,Wb,kc,Ob,sc,lc,Sb,rc,Kc,
Gc,Xc,$d,Jd,qe,Ye,Ge;(function(Ve){function ee(gd,bd){gd!==Gd&&("function"===typeof Object.create?Object.defineProperty(gd,"__esModule",{value:!0}):gd.__esModule=!0);return function(ud,zd){return gd[ud]=bd?bd(ud,zd):zd}}var Gd="object"===typeof qa?qa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(gd){Ve(ee(Gd,ee(gd)))}):"object"===typeof g&&"object"===typeof g.exports?Ve(ee(Gd,ee(g.exports))):Ve(ee(Gd))})(function(Ve){var ee=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gd,bd){gd.__proto__=bd}||function(gd,bd){for(var ud in bd)Object.prototype.hasOwnProperty.call(bd,ud)&&(gd[ud]=bd[ud])};m=function(gd,bd){function ud(){this.constructor=gd}if("function"!==typeof bd&&null!==bd)throw new TypeError("Class extends value "+String(bd)+" is not a constructor or null");ee(gd,bd);gd.prototype=null===bd?Object.create(bd):(ud.prototype=bd.prototype,new ud)};J=Object.assign||function(gd){for(var bd,ud=1,zd=arguments.length;ud<
zd;ud++){bd=arguments[ud];for(var Id in bd)Object.prototype.hasOwnProperty.call(bd,Id)&&(gd[Id]=bd[Id])}return gd};Y=function(gd,bd){var ud={},zd;for(zd in gd)Object.prototype.hasOwnProperty.call(gd,zd)&&0>bd.indexOf(zd)&&(ud[zd]=gd[zd]);if(null!=gd&&"function"===typeof Object.getOwnPropertySymbols){var Id=0;for(zd=Object.getOwnPropertySymbols(gd);Id<zd.length;Id++)0>bd.indexOf(zd[Id])&&Object.prototype.propertyIsEnumerable.call(gd,zd[Id])&&(ud[zd[Id]]=gd[zd[Id]])}return ud};ia=function(gd,bd,ud,
zd){var Id=arguments.length,we=3>Id?bd:null===zd?zd=Object.getOwnPropertyDescriptor(bd,ud):zd,ye;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)we=Reflect.decorate(gd,bd,ud,zd);else for(var Ie=gd.length-1;0<=Ie;Ie--)if(ye=gd[Ie])we=(3>Id?ye(we):3<Id?ye(bd,ud,we):ye(bd,ud))||we;return 3<Id&&we&&Object.defineProperty(bd,ud,we),we};ta=function(gd,bd){return function(ud,zd){bd(ud,zd,gd)}};Ka=function(gd,bd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(gd,
bd)};Za=function(gd,bd,ud,zd){function Id(we){return we instanceof ud?we:new ud(function(ye){ye(we)})}return new (ud||=Promise)(function(we,ye){function Ie(Vg){try{nf(zd.next(Vg))}catch(Kg){ye(Kg)}}function uf(Vg){try{nf(zd["throw"](Vg))}catch(Kg){ye(Kg)}}function nf(Vg){Vg.done?we(Vg.value):Id(Vg.value).then(Ie,uf)}nf((zd=zd.apply(gd,bd||[])).next())})};db=function(gd,bd){function ud(nf){return function(Vg){return zd([nf,Vg])}}function zd(nf){if(we)throw new TypeError("Generator is already executing.");
for(;Id;)try{if(we=1,ye&&(Ie=nf[0]&2?ye["return"]:nf[0]?ye["throw"]||((Ie=ye["return"])&&Ie.call(ye),0):ye.next)&&!(Ie=Ie.call(ye,nf[1])).done)return Ie;if(ye=0,Ie)nf=[nf[0]&2,Ie.value];switch(nf[0]){case 0:case 1:Ie=nf;break;case 4:return Id.label++,{value:nf[1],done:!1};case 5:Id.label++;ye=nf[1];nf=[0];continue;case 7:nf=Id.ops.pop();Id.trys.pop();continue;default:if(!(Ie=Id.trys,Ie=0<Ie.length&&Ie[Ie.length-1])&&(6===nf[0]||2===nf[0])){Id=0;continue}if(3===nf[0]&&(!Ie||nf[1]>Ie[0]&&nf[1]<Ie[3]))Id.label=
nf[1];else if(6===nf[0]&&Id.label<Ie[1])Id.label=Ie[1],Ie=nf;else if(Ie&&Id.label<Ie[2])Id.label=Ie[2],Id.ops.push(nf);else{Ie[2]&&Id.ops.pop();Id.trys.pop();continue}}nf=bd.call(gd,Id)}catch(Vg){nf=[6,Vg],ye=0}finally{we=Ie=0}if(nf[0]&5)throw nf[1];return{value:nf[0]?nf[1]:void 0,done:!0}}var Id={label:0,sent:function(){if(Ie[0]&1)throw Ie[1];return Ie[1]},trys:[],ops:[]},we,ye,Ie,uf;return uf={next:ud(0),"throw":ud(1),"return":ud(2)},"function"===typeof Symbol&&(uf[Symbol.iterator]=function(){return this}),
uf};sb=function(gd,bd){for(var ud in gd)"default"===ud||Object.prototype.hasOwnProperty.call(bd,ud)||Ge(bd,gd,ud)};Ge=Object.create?function(gd,bd,ud,zd){void 0===zd&&(zd=ud);var Id=Object.getOwnPropertyDescriptor(bd,ud);if(!Id||("get"in Id?!bd.__esModule:Id.writable||Id.configurable))Id={enumerable:!0,get:function(){return bd[ud]}};Object.defineProperty(gd,zd,Id)}:function(gd,bd,ud,zd){void 0===zd&&(zd=ud);gd[zd]=bd[ud]};xb=function(gd){var bd="function"===typeof Symbol&&Symbol.iterator,ud=bd&&gd[bd],
zd=0;if(ud)return ud.call(gd);if(gd&&"number"===typeof gd.length)return{next:function(){gd&&zd>=gd.length&&(gd=void 0);return{value:gd&&gd[zd++],done:!gd}}};throw new TypeError(bd?"Object is not iterable.":"Symbol.iterator is not defined.");};Wb=function(gd,bd){var ud="function"===typeof Symbol&&gd[Symbol.iterator];if(!ud)return gd;gd=ud.call(gd);var zd,Id=[];try{for(;(void 0===bd||0<bd--)&&!(zd=gd.next()).done;)Id.push(zd.value)}catch(ye){var we={error:ye}}finally{try{zd&&!zd.done&&(ud=gd["return"])&&
ud.call(gd)}finally{if(we)throw we.error;}}return Id};kc=function(){for(var gd=[],bd=0;bd<arguments.length;bd++)gd=gd.concat(Wb(arguments[bd]));return gd};Ob=function(){for(var gd=0,bd=0,ud=arguments.length;bd<ud;bd++)gd+=arguments[bd].length;gd=Array(gd);var zd=0;for(bd=0;bd<ud;bd++)for(var Id=arguments[bd],we=0,ye=Id.length;we<ye;we++,zd++)gd[zd]=Id[we];return gd};sc=function(gd,bd,ud){if(ud||2===arguments.length)for(var zd=0,Id=bd.length,we;zd<Id;zd++)!we&&zd in bd||(we||=Array.prototype.slice.call(bd,
0,zd),we[zd]=bd[zd]);return gd.concat(we||Array.prototype.slice.call(bd))};lc=function(gd){return this instanceof lc?(this.v=gd,this):new lc(gd)};Sb=function(gd,bd,ud){function zd(Kg){uf[Kg]&&(nf[Kg]=function(Wh){return new Promise(function(Gj,ej){1<Vg.push([Kg,Wh,Gj,ej])||Id(Kg,Wh)})})}function Id(Kg,Wh){try{var Gj=uf[Kg](Wh);Gj.value instanceof lc?Promise.resolve(Gj.value.v).then(we,ye):Ie(Vg[0][2],Gj)}catch(ej){Ie(Vg[0][3],ej)}}function we(Kg){Id("next",Kg)}function ye(Kg){Id("throw",Kg)}function Ie(Kg,
Wh){(Kg(Wh),Vg.shift(),Vg.length)&&Id(Vg[0][0],Vg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var uf=ud.apply(gd,bd||[]),nf,Vg=[];return nf={},zd("next"),zd("throw"),zd("return"),nf[Symbol.asyncIterator]=function(){return this},nf};rc=function(gd){function bd(Id,we){ud[Id]=gd[Id]?function(ye){return(zd=!zd)?{value:lc(gd[Id](ye)),done:"return"===Id}:we?we(ye):ye}:we}var ud,zd;return ud={},bd("next"),bd("throw",function(Id){throw Id;}),bd("return"),ud[Symbol.iterator]=
function(){return this},ud};Kc=function(gd){function bd(we){Id[we]=gd[we]&&function(ye){return new Promise(function(Ie,uf){ye=gd[we](ye);ud(Ie,uf,ye.done,ye.value)})}}function ud(we,ye,Ie,uf){Promise.resolve(uf).then(function(nf){we({value:nf,done:Ie})},ye)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zd=gd[Symbol.asyncIterator],Id;return zd?zd.call(gd):(gd="function"===typeof xb?xb(gd):gd[Symbol.iterator](),Id={},bd("next"),bd("throw"),bd("return"),Id[Symbol.asyncIterator]=
function(){return this},Id)};Gc=function(gd,bd){Object.defineProperty?Object.defineProperty(gd,"raw",{value:bd}):gd.raw=bd;return gd};var Gd=Object.create?function(gd,bd){Object.defineProperty(gd,"default",{enumerable:!0,value:bd})}:function(gd,bd){gd["default"]=bd};Xc=function(gd){if(gd&&gd.__esModule)return gd;var bd={};if(null!=gd)for(var ud in gd)"default"!==ud&&Object.prototype.hasOwnProperty.call(gd,ud)&&Ge(bd,gd,ud);Gd(bd,gd);return bd};$d=function(gd){return gd&&gd.__esModule?gd:{"default":gd}};
Jd=function(gd,bd,ud,zd){if("a"===ud&&!zd)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof bd?gd!==bd||!zd:!bd.has(gd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===ud?zd:"a"===ud?zd.call(gd):zd?zd.value:bd.get(gd)};qe=function(gd,bd,ud,zd,Id){if("m"===zd)throw new TypeError("Private method is not writable");if("a"===zd&&!Id)throw new TypeError("Private accessor was defined without a setter");
if("function"===typeof bd?gd!==bd||!Id:!bd.has(gd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===zd?Id.call(gd,ud):Id?Id.value=ud:bd.set(gd,ud),ud};Ye=function(gd,bd){if(null===bd||"object"!==typeof bd&&"function"!==typeof bd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof gd?bd===gd:gd.has(bd)};Ve("__extends",m);Ve("__assign",J);Ve("__rest",Y);Ve("__decorate",ia);Ve("__param",ta);Ve("__metadata",
Ka);Ve("__awaiter",Za);Ve("__generator",db);Ve("__exportStar",sb);Ve("__createBinding",Ge);Ve("__values",xb);Ve("__read",Wb);Ve("__spread",kc);Ve("__spreadArrays",Ob);Ve("__spreadArray",sc);Ve("__await",lc);Ve("__asyncGenerator",Sb);Ve("__asyncDelegator",rc);Ve("__asyncValues",Kc);Ve("__makeTemplateObject",Gc);Ve("__importStar",Xc);Ve("__importDefault",$d);Ve("__classPrivateFieldGet",Jd);Ve("__classPrivateFieldSet",qe);Ve("__classPrivateFieldIn",Ye)})}}),Yc={};((b,g)=>{for(var m in g)jn(b,m,{get:g[m],
enumerable:!0})})(Yc,{App:()=>SI,PreviewManager:()=>Qw,generateJSXFromApp:()=>Ro,generateSVGFromApp:()=>Qo});Ra.exports=(b=>tc(jn({},"__esModule",{value:!0}),b))(Yc);var qd=(b=>{b.Gray="gray";b.Red="red";b.Yellow="yellow";b.Green="green";b.Blue="blue";b.Purple="purple";b.Pink="pink";b.Default="";return b})(qd||{}),Bd,Wd=new Uint8Array(16),ze=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ke=[];for(qf=0;256>qf;++qf)Ke.push((qf+
256).toString(16).substr(1));var qf,wg=function(b){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;g=(Ke[b[g+0]]+Ke[b[g+1]]+Ke[b[g+2]]+Ke[b[g+3]]+"-"+Ke[b[g+4]]+Ke[b[g+5]]+"-"+Ke[b[g+6]]+Ke[b[g+7]]+"-"+Ke[b[g+8]]+Ke[b[g+9]]+"-"+Ke[b[g+10]]+Ke[b[g+11]]+Ke[b[g+12]]+Ke[b[g+13]]+Ke[b[g+14]]+Ke[b[g+15]]).toLowerCase();if("string"!==typeof g||!ze.test(g))throw TypeError("Stringified UUID is invalid");return g},zg,li,bk=0,ak=0,Fg=function(b,g,m){m=g&&m||0;var J=g||Array(16);b=b||{};var Y=
b.node||zg,ia=void 0!==b.clockseq?b.clockseq:li;if(null==Y||null==ia){var ta=b.random||(b.rng||p)();null==Y&&(Y=zg=[ta[0]|1,ta[1],ta[2],ta[3],ta[4],ta[5]]);null==ia&&(ia=li=(ta[6]<<8|ta[7])&16383)}ta=void 0!==b.msecs?b.msecs:Date.now();var Ka=void 0!==b.nsecs?b.nsecs:ak+1,Za=ta-bk+(Ka-ak)/1E4;0>Za&&void 0===b.clockseq&&(ia=ia+1&16383);(0>Za||ta>bk)&&void 0===b.nsecs&&(Ka=0);if(1E4<=Ka)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");bk=ta;ak=Ka;li=ia;ta+=122192928E5;b=(1E4*(ta&268435455)+
Ka)%4294967296;J[m++]=b>>>24&255;J[m++]=b>>>16&255;J[m++]=b>>>8&255;J[m++]=b&255;b=ta/4294967296*1E4&268435455;J[m++]=b>>>8&255;J[m++]=b&255;J[m++]=b>>>24&15|16;J[m++]=b>>>16&255;J[m++]=ia>>>8|128;J[m++]=ia&255;for(ia=0;6>ia;++ia)J[m+ia]=Y[ia];return g||wg(J)},$f=class{static clamp(b,g,m){return Math.max(g,"undefined"!==typeof m?Math.min(b,m):b)}static clampV(b,g,m){return b.map(J=>m?$f.clamp(J,g,m):$f.clamp(J,g))}static cross(b,g,m){return(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1])}static snap(b,
g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},yd=$f;yd.neg=b=>[-b[0],-b[1]];yd.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];yd.addScalar=(b,g)=>[b[0]+g,b[1]+g];yd.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];yd.subScalar=(b,g)=>[b[0]-g,b[1]-g];yd.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];yd.mul=(b,g)=>[b[0]*g,b[1]*g];yd.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];yd.div=(b,g)=>[b[0]/g,b[1]/g];yd.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];yd.per=b=>[b[1],-b[0]];yd.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];yd.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];yd.len2=b=>
b[0]*b[0]+b[1]*b[1];yd.len=b=>Math.hypot(b[0],b[1]);yd.pry=(b,g)=>$f.dpr(b,g)/$f.len(g);yd.uni=b=>$f.div(b,$f.len(b));yd.normalize=b=>$f.uni(b);yd.tangent=(b,g)=>$f.uni($f.sub(b,g));yd.dist2=(b,g)=>$f.len2($f.sub(b,g));yd.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);yd.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let m=1/Math.max(g[0],g[1]);m*=1.29289-(g[0]+g[1])*m*.29289;return[b[0]*m,b[1]*m]};yd.ang=(b,g)=>Math.atan2($f.cpr(b,g),$f.dpr(b,g));yd.angle=(b,g)=>Math.atan2(g[1]-
b[1],g[0]-b[0]);yd.med=(b,g)=>$f.mul($f.add(b,g),.5);yd.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];yd.rotWith=(b,g,m=0)=>{if(0===m)return b;const J=Math.sin(m);m=Math.cos(m);const Y=b[0]-g[0];b=b[1]-g[1];return[Y*m-b*J+g[0],Y*J+b*m+g[1]]};yd.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];yd.lrp=(b,g,m)=>$f.add(b,$f.mul($f.sub(g,b),m));yd.int=(b,g,m,J,Y=1)=>{m=($f.clamp(m,J)-m)/(J-m);return $f.add($f.mul(b,1-m),$f.mul(g,Y))};yd.ang3=(b,g,m)=>{b=$f.vec(g,b);g=$f.vec(g,
m);return $f.ang(b,g)};yd.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];yd.rescale=(b,g)=>{const m=$f.len(b);return[g*b[0]/m,g*b[1]/m]};yd.isLeft=(b,g,m)=>(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1]);yd.clockwise=(b,g,m)=>0<$f.isLeft(b,g,m);yd.toFixed=b=>b.map(g=>Math.round(100*g)/100);yd.nearestPointOnLineThroughPoint=(b,g,m)=>$f.add(b,$f.mul(g,$f.pry($f.sub(m,b),g)));yd.distanceToLineThroughPoint=(b,g,m)=>$f.dist(m,$f.nearestPointOnLineThroughPoint(b,g,m));yd.nearestPointOnLineSegment=(b,g,m,J=!0)=>
{const Y=$f.uni($f.sub(g,b));m=$f.add(b,$f.mul(Y,$f.pry($f.sub(m,b),Y)));if(J){if(m[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(m[0]>Math.max(b[0],g[0]))return b[0]>g[0]?b:g;if(m[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(m[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return m};yd.distanceToLineSegment=(b,g,m,J=!0)=>$f.dist(m,$f.nearestPointOnLineSegment(b,g,m,J));yd.nudge=(b,g,m)=>$f.isEqual(b,g)?b:$f.add(b,$f.mul($f.uni($f.sub(g,b)),m));yd.nudgeAtAngle=(b,g,m)=>[Math.cos(g)*m+b[0],Math.sin(g)*
m+b[1]];yd.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];yd.pointsBetween=(b,g,m=6)=>Array.from(Array(m)).map((J,Y)=>{J=Y/(m-1);Y=Math.min(1,.5+Math.abs(.5-J));return[...$f.lrp(b,g,J),Y]});yd.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);yd.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};yd.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];yd.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var pe=yd,rf=class{static getRectangleSides(b,
g,m=0){const J=[b[0]+g[0]/2,b[1]+g[1]/2],Y=yd.rotWith(b,J,m),ia=yd.rotWith(yd.add(b,[g[0],0]),J,m),ta=yd.rotWith(yd.add(b,g),J,m);b=yd.rotWith(yd.add(b,[0,g[1]]),J,m);return[["top",[Y,ia]],["right",[ia,ta]],["bottom",[ta,b]],["left",[b,Y]]]}static getBoundsSides(b){return rf.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||
b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return rf.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let m=Infinity,J=Infinity,Y=-Infinity,ia=-Infinity;if(2>b.length)J=m=0,ia=Y=1;else for(const ta of b)m=Math.min(ta[0],m),J=Math.min(ta[1],J),Y=Math.max(ta[0],Y),ia=Math.max(ta[1],
ia);return 0!==g?rf.getBoundsFromPoints(b.map(ta=>yd.rotWith(ta,[(m+Y)/2,(J+ia)/2],g))):{minX:m,minY:J,maxX:Y,maxY:ia,width:Math.max(1,Y-m),height:Math.max(1,ia-J)}}static centerBounds(b,g){const m=rf.getBoundsCenter(b);return rf.translateBounds(b,[g[0]-m[0],g[1]-m[1]])}static snapBoundsToGrid(b,g){const m=Math.round(b.minX/g)*g,J=Math.round(b.minY/g)*g,Y=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:m,minY:J,maxX:Y,maxY:b,width:Math.max(1,Y-m),height:Math.max(1,b-J)}}static translateBounds(b,
g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const m=rf.getBoundsCenter(b);return rf.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[m[0]*g,m[1]*g])}static divideBounds(b,g){const m=rf.getBoundsCenter(b);return rf.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[m[0]/g,m[1]/g])}static getRotatedBounds(b,
g=0){b=rf.getRotatedCorners(b,g);let m=g=Infinity,J=-Infinity,Y=-Infinity;for(const ia of b)g=Math.min(ia[0],g),m=Math.min(ia[1],m),J=Math.max(ia[0],J),Y=Math.max(ia[1],Y);return{minX:g,minY:m,maxX:J,maxY:Y,width:Math.max(1,J-g),height:Math.max(1,Y-m),rotation:0}}static getRotatedEllipseBounds(b,g,m,J,Y=0){var ia=Math.cos(Y);const ta=Math.sin(Y);Y=Math.hypot(m*ia,J*ta);ia=Math.hypot(m*ta,J*ia);return{minX:b+m-Y,minY:g+J-ia,maxX:b+m+Y,maxY:g+J+ia,width:2*Y,height:2*ia}}static getExpandedBounds(b,g){const m=
Math.min(b.minX,g.minX),J=Math.min(b.minY,g.minY),Y=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:m,minY:J,maxX:Y,maxY:b,width:Math.abs(Y-m),height:Math.abs(b-J)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let m=1;m<b.length;m++)g=rf.getExpandedBounds(g,b[m]);return g}static getRotatedCorners(b,g=0){const m=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(J=>yd.rotWith(J,m,g)):b}static getTransformedBoundingBox(b,
g,m,J=0,Y=!1){const [ia,ta]=[b.minX,b.minY],[Ka,Za]=[b.maxX,b.maxY];let [db,sb]=[b.minX,b.minY],[xb,Wb]=[b.maxX,b.maxY];if("center"===g)return{minX:db+m[0],minY:sb+m[1],maxX:xb+m[0],maxY:Wb+m[1],width:xb-db,height:Wb-sb,scaleX:1,scaleY:1};const [kc,Ob]=yd.rot(m,-J);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":sb+=Ob;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Wb+=Ob}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":db+=
kc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":xb+=kc}var sc=Ka-ia;const lc=Za-ta;var Sb=(xb-db)/sc,rc=(Wb-sb)/lc;b=0>Sb;m=0>rc;var Kc=Math.abs(xb-db),Gc=Math.abs(Wb-sb);if(Y)switch(Y=sc/lc,sc=Y<Kc/Gc,rc=1/Y*(0>rc?1:-1)*Kc,Sb=Gc*(0>Sb?1:-1)*Y,g){case "top_left_corner":sc?sb=Wb+rc:db=xb+Sb;break;case "top_right_corner":sc?sb=Wb+rc:xb=db-Sb;break;case "bottom_right_corner":sc?Wb=sb-rc:xb=db-Sb;break;case "bottom_left_corner":sc?Wb=sb-rc:db=xb+Sb;break;case "bottom_edge":case "top_edge":Kc=
(db+xb)/2;Gc*=Y;db=Kc-Gc/2;xb=Kc+Gc/2;break;case "left_edge":case "right_edge":Gc=(sb+Wb)/2,Kc/=Y,sb=Gc-Kc/2,Wb=Gc+Kc/2}if(0!==J%(2*Math.PI)){Kc=[0,0];Gc=yd.med([ia,ta],[Ka,Za]);Sb=yd.med([db,sb],[xb,Wb]);switch(g){case "top_left_corner":Kc=yd.sub(yd.rotWith([xb,Wb],Sb,J),yd.rotWith([Ka,Za],Gc,J));break;case "top_right_corner":Kc=yd.sub(yd.rotWith([db,Wb],Sb,J),yd.rotWith([ia,Za],Gc,J));break;case "bottom_right_corner":Kc=yd.sub(yd.rotWith([db,sb],Sb,J),yd.rotWith([ia,ta],Gc,J));break;case "bottom_left_corner":Kc=
yd.sub(yd.rotWith([xb,sb],Sb,J),yd.rotWith([Ka,ta],Gc,J));break;case "top_edge":Kc=yd.sub(yd.rotWith(yd.med([db,Wb],[xb,Wb]),Sb,J),yd.rotWith(yd.med([ia,Za],[Ka,Za]),Gc,J));break;case "left_edge":Kc=yd.sub(yd.rotWith(yd.med([xb,sb],[xb,Wb]),Sb,J),yd.rotWith(yd.med([Ka,ta],[Ka,Za]),Gc,J));break;case "bottom_edge":Kc=yd.sub(yd.rotWith(yd.med([db,sb],[xb,sb]),Sb,J),yd.rotWith(yd.med([ia,ta],[Ka,ta]),Gc,J));break;case "right_edge":Kc=yd.sub(yd.rotWith(yd.med([db,sb],[db,Wb]),Sb,J),yd.rotWith(yd.med([ia,
ta],[ia,Za]),Gc,J))}[db,sb]=yd.sub([db,sb],Kc);[xb,Wb]=yd.sub([xb,Wb],Kc)}xb<db&&([xb,db]=[db,xb]);Wb<sb&&([Wb,sb]=[sb,Wb]);return{minX:db,minY:sb,maxX:xb,maxY:Wb,width:xb-db,height:Wb-sb,scaleX:(xb-db)/(Ka-ia||1)*(b?-1:1),scaleY:(Wb-sb)/(Za-ta||1)*(m?-1:1)}}static getTransformAnchor(b,g,m){let J=b;switch(b){case "top_left_corner":J=g&&m?"bottom_right_corner":g?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":J=g&&m?"bottom_left_corner":g?"top_left_corner":
m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":J=g&&m?"top_left_corner":g?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":J=g&&m?"top_right_corner":g?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return J}static getRelativeTransformedBoundingBox(b,g,m,J,Y){J=b.minX+(J?g.maxX-m.maxX:m.minX-g.minX)/g.width*b.width;Y=b.minY+(Y?g.maxY-m.maxY:m.minY-g.minY)/g.height*b.height;const ia=m.width/g.width*b.width;b=m.height/
g.height*b.height;return{minX:J,minY:Y,maxX:J+ia,maxY:Y+b,width:ia,height:b}}static getRotatedSize(b,g){const m=yd.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(J=>yd.rotWith(J,m,g));b=rf.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=rf.getBoundsCenter(b);return Ga(Qa({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(m=>{g[0]=Math.min(g[0],m[0]);g[1]=
Math.min(g[1],m[1])});return g}static getTLSnapPoints(b,g,m){const J=Qa({},b);b=[0,0];const Y=[],ia={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},ta=["midX","minX","maxX"],Ka=["midY","minY","maxY"];g=g.map(Wb=>{const kc=ta.flatMap((sc,lc)=>ta.map((Sb,rc)=>{const Kc=J[sc]-Wb[Sb];return{f:sc,t:Sb,gap:Kc,distance:Math.abs(Kc),isCareful:0===lc||3===lc+rc}})),Ob=Ka.flatMap((sc,
lc)=>Ka.map((Sb,rc)=>{const Kc=J[sc]-Wb[Sb];return{f:sc,t:Sb,gap:Kc,distance:Math.abs(Kc),isCareful:0===lc||3===lc+rc}}));return[Wb,kc,Ob]});let Za=Infinity,db=Infinity,sb=Infinity,xb=Infinity;g.forEach(([,Wb,kc])=>{Wb.forEach(Ob=>{Ob.distance<m&&Ob.distance<sb&&(sb=Ob.distance,Za=Ob.gap)});kc.forEach(Ob=>{Ob.distance<m&&Ob.distance<xb&&(xb=Ob.distance,db=Ob.gap)})});g.forEach(([Wb,kc,Ob])=>{Infinity!==Za&&kc.forEach(sc=>{2>Math.abs(sc.gap-Za)&&(ia[sc.f]=Ga(Qa({},ia[sc.f]),{isSnapped:!0,to:Wb[sc.t],
B:Wb,distance:sc.distance}))});Infinity!==db&&Ob.forEach(sc=>{2>Math.abs(sc.gap-db)&&(ia[sc.f]=Ga(Qa({},ia[sc.f]),{isSnapped:!0,to:Wb[sc.t],B:Wb,distance:sc.distance}))})});b[0]=Infinity===Za?0:Za;b[1]=Infinity===db?0:db;J.minX-=b[0];J.midX-=b[0];J.maxX-=b[0];J.minY-=b[1];J.midY-=b[1];J.maxY-=b[1];ta.forEach(Wb=>{Wb=ia[Wb];if(Wb.isSnapped){var {id:kc,B:Ob}=Wb;Wb=J[kc];Y.push("minX"===kc?[[Wb,J.midY],[Wb,Ob.minY],[Wb,Ob.maxY]]:[[Wb,J.minY],[Wb,J.maxY],[Wb,Ob.minY],[Wb,Ob.maxY]])}});Ka.forEach(Wb=>
{Wb=ia[Wb];if(Wb.isSnapped){var {id:kc,B:Ob}=Wb;Wb=J[kc];Y.push("midY"===kc?[[J.midX,Wb],[Ob.minX,Wb],[Ob.maxX,Wb]]:[[J.minX,Wb],[J.maxX,Wb],[Ob.minX,Wb],[Ob.maxX,Wb]])}});return{offset:b,snapLines:Y}}static ensureRatio(b,g){const {width:m,height:J}=b,Y=Qa({},b);m/J<g?(Y.width=J*g,Y.maxX+=m-b.width):(Y.height=m/g,Y.maxY+=J-b.height);return Y}static getDistributions(b,g){var m=b.map(ia=>{const ta=ia.getBounds();return{id:ia.id,point:[ta.minX,ta.minY],bounds:ta,center:ia.getCenter()}});b=m.length;var J=
rf.getCommonBounds(m.map(({bounds:ia})=>ia));const Y=[];switch(g){case "horizontal":g=m.reduce((ia,ta)=>ia+ta.bounds.width,0);if(g>J.width){const ia=m.sort((db,sb)=>db.bounds.minX-sb.bounds.minX)[0],ta=m.sort((db,sb)=>sb.bounds.maxX-db.bounds.maxX)[0];J=m.filter(db=>db!==ia&&db!==ta).sort((db,sb)=>db.center[0]-sb.center[0]);const Ka=(ta.center[0]-ia.center[0])/(b-1),Za=ia.center[0]+Ka;J.forEach(({id:db,point:sb,bounds:xb},Wb)=>{Y.push({id:db,prev:sb,next:[Za+Ka*Wb-xb.width/2,xb.minY]})})}else{m=m.sort((Ka,
Za)=>Ka.center[0]-Za.center[0]);let ia=J.minX;const ta=(J.width-g)/(b-1);m.forEach(({id:Ka,point:Za,bounds:db})=>{Y.push({id:Ka,prev:Za,next:[ia,db.minY]});ia+=db.width+ta})}break;case "vertical":if(g=m.reduce((ia,ta)=>ia+ta.bounds.height,0),g>J.height){const ia=m.sort((db,sb)=>db.bounds.minY-sb.bounds.minY)[0],ta=m.sort((db,sb)=>sb.bounds.maxY-db.bounds.maxY)[0];J=m.filter(db=>db!==ia&&db!==ta).sort((db,sb)=>db.center[1]-sb.center[1]);const Ka=(ta.center[1]-ia.center[1])/(b-1),Za=ia.center[1]+Ka;
J.forEach(({id:db,point:sb,bounds:xb},Wb)=>{Y.push({id:db,prev:sb,next:[xb.minX,Za+Ka*Wb-xb.height/2]})})}else{m=m.sort((Ka,Za)=>Ka.center[1]-Za.center[1]);let ia=J.minY;const ta=(J.height-g)/(b-1);m.forEach(({id:Ka,point:Za,bounds:db})=>{Y.push({id:Ka,prev:Za,next:[db.minX,ia]});ia+=db.height+ta})}}return Y}static getPackedDistributions(b){const g=rf.getCommonBounds(b.map(({bounds:Y})=>Y)),m=[g.minX,g.minY],J=Object.fromEntries(b.map(Y=>[Y.id,[Y.bounds.minX,Y.bounds.minY]]));b=b.filter(Y=>{var ia,
ta,Ka,Za;return!((null==(ta=null==(ia=Y.props.handles)?void 0:ia.start)?0:ta.bindingId)||(null==(Za=null==(Ka=Y.props.handles)?void 0:Ka.end)?0:Za.bindingId))}).map(Y=>{const ia=Y.getBounds();return{id:Y.id,w:ia.width+16,h:ia.height+16,x:ia.minX,y:ia.minY}});R(b);return b.map(({id:Y,x:ia,y:ta})=>({id:Y,prev:J[Y],next:[ia+m[0],ta+m[1]]}))}},un=class{static pointInCircle(b,g,m){return yd.dist(b,g)<=m}static pointInEllipse(b,g,m,J,Y=0){Y=Y||0;var ia=Math.cos(Y);Y=Math.sin(Y);g=yd.sub(b,g);b=ia*g[0]+
Y*g[1];ia=Y*g[0]-ia*g[1];return 1>=b*b/(m*m)+ia*ia/(J*J)}static pointInRect(b,g){return!(b[0]<g[0]||b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let m=0;g.forEach((J,Y)=>{Y=g[(Y+1)%g.length];J[1]<=b[1]?Y[1]>b[1]&&0<yd.cross(J,Y,b)&&(m+=1):Y[1]<=b[1]&&0>yd.cross(J,Y,b)&&--m});return 0!==m}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,m=3){for(let J=1;J<g.length;J++)if(yd.distanceToLineSegment(g[J-1],g[J],b)<
m)return!0;return!1}static _getSqSegDist(b,g,m){let J=g[0];g=g[1];let Y=m[0]-J,ia=m[1]-g;if(0!==Y||0!==ia){const ta=((b[0]-J)*Y+(b[1]-g)*ia)/(Y*Y+ia*ia);1<ta?(J=m[0],g=m[1]):0<ta&&(J+=Y*ta,g+=ia*ta)}Y=b[0]-J;ia=b[1]-g;return Y*Y+ia*ia}static _simplifyStep(b,g,m,J,Y){let ia=J,ta=-1;for(let Ka=g+1;Ka<m;Ka++){const Za=un._getSqSegDist(b[Ka],b[g],b[m]);Za>ia&&(ta=Ka,ia=Za)}-1<ta&&ia>J&&(1<ta-g&&un._simplifyStep(b,g,ta,J,Y),Y.push(b[ta]),1<m-ta&&un._simplifyStep(b,ta,m,J,Y))}static simplify2(b,g=1){if(2>=
b.length)return b;g*=g;var m=b[0],J=b[1];const Y=[m];for(let ia=1,ta=b.length;ia<ta;ia++)J=b[ia],(J[0]-m[0])*(J[0]-m[0])+(J[1]-m[1])*(J[1]-m[1])>g&&(Y.push(J),m=J);m!==J&&Y.push(J);m=Y.length-1;J=[Y[0]];un._simplifyStep(Y,0,m,g,J);J.push(Y[m],b[b.length-1]);return J}static pointNearToPolyline(b,g,m=8){const J=g.length;for(let Y=1;Y<J;Y++)if(yd.distanceToLineSegment(g[Y-1],g[Y],b)<m)return!0;return!1}},Nj=un;Ya(Nj,"simplify",(b,g=1)=>{var m=b.length;const J=b[0],Y=b[m-1],[ia,ta]=J,[Ka,Za]=Y;if(2<m){let db=
0,sb=0;const xb=yd.len2([Za-ta,Ka-ia]);for(let Wb=1;Wb<m-1;Wb++){const [kc,Ob]=b[Wb],sc=Math.pow(kc*(Za-ta)+ia*(Ob-Za)+Ka*(ta-Ob),2)/xb;db>sc||(db=sc,sb=Wb)}if(db>g)return m=un.simplify(b.slice(0,sb+1),g),b=un.simplify(b.slice(sb+1),g),m.concat(b.slice(1))}return[J,Y]});var wh=Cc(ea()),Fm=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},wl=class{static registerShortcut(b,g){wh.default.bind(b,(m,J)=>{var Y;m.preventDefault();Fm(m,["INPUT","TEXTAREA","SELECT"])||(null==(Y=m.target)?0:
Y.isContentEditable)||g(m,J)},"keydown");return()=>{wh.default.unbind(b,"keydown")}}},Mj=Math.PI,wm=Mj/2,ll=2*Mj,ul={},ip={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",
center:"grab",background:"grab"},al=class{static circleFromThreePoints(b,g,m){const [J,Y]=b,[ia,ta]=g,[Ka,Za]=m;g=J*(ta-Za)-Y*(ia-Ka)+ia*Za-Ka*ta;b=-((J*J+Y*Y)*(Za-ta)+(ia*ia+ta*ta)*(Y-Za)+(Ka*Ka+Za*Za)*(ta-Y))/(2*g);g=-((J*J+Y*Y)*(ia-Ka)+(ia*ia+ta*ta)*(Ka-J)+(Ka*Ka+Za*Za)*(J-ia))/(2*g);return[b,g,Math.hypot(b-J,g-Y)]}static perimeterOfEllipse(b,g){const m=Math.pow(b-g,2)/Math.pow(b+g,2);return Mj*(b+g)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(b,g){b=(g-b)%ll;return 2*b%ll-b}static longAngleDist(b,
g){return ll-al.shortAngleDist(b,g)}static lerpAngles(b,g,m){return b+al.shortAngleDist(b,g)*m}static angleDelta(b,g){return al.shortAngleDist(b,g)}static getSweep(b,g,m){return al.angleDelta(pe.angle(b,g),pe.angle(b,m))}static clampRadians(b){return(ll+b)%ll}static snapAngleToSegments(b,g){g=ll/g;b=Math.floor((al.clampRadians(b)+g/2)/g)*g%ll;b<Mj&&(b+=ll);b>Mj&&(b-=ll);return b}static isAngleBetween(b,g,m){if(m===b||m===g)return!0;g=(g-b+wm)%wm;return g<=Mj!==(m-b+wm)%wm>g}static degreesToRadians(b){return b*
Mj/180}static radiansToDegrees(b){return 180*b/Mj}static getArcLength(b,g,m,J){b=al.getSweep(b,m,J);return b/ll*ll*g}static getSweepFlag(b,g,m){m=pe.angle(b,m);return 0<(pe.angle(b,g)-m+3*Mj)%ll-Mj?0:1}static getLargeArcFlag(b,g,m){b=pe.angle(m,b);g=(pe.angle(m,g)-b+3*Mj)%ll-Mj;return Math.abs(g)>wm?0:1}static getArcDashOffset(b,g,m,J,Y){const ia=al.getSweepFlag(b,m,J);g=al.getArcLength(b,g,m,J);return-(0>ia?g:ll*b[2]-g)/2+Y}static getEllipseDashOffset(b,g){return-(ll*b[2])/2+-g}static radiansToCardinalDirection(b){return b<
.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*Math.PI?"south":b<1.75*Math.PI?"west":"north"}},lk=class{static getPolygonCentroid(b){var g=b.map(m=>m[0]);b=b.map(m=>m[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};Ya(lk,"getEdges",b=>{const g=b.length;return b.map((m,J)=>[m,b[(J+1)%g]])});Ya(lk,"getEdgeOutwardNormal",(b,g)=>pe.per(pe.uni(pe.sub(g,b))));Ya(lk,"getEdgeInwardNormal",(b,g)=>pe.neg(lk.getEdgeOutwardNormal(b,g)));Ya(lk,"getOffsetEdge",(b,
g,m)=>{m=pe.mul(pe.per(pe.uni(pe.sub(g,b))),m);return[pe.add(b,m),pe.add(g,m)]});Ya(lk,"getOffsetEdges",(b,g)=>b.map(([m,J])=>lk.getOffsetEdge(m,J,g)));Ya(lk,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[pe.add(b,[-g,-g]),pe.add(b,[g,-g]),pe.add(b,[g,g]),pe.add(b,[-g,g])];if(2===b.length){const [m,J]=b;return[...lk.getOffsetEdge(m,J,g),...lk.getOffsetEdge(J,m,g)]}return lk.getOffsetEdges(lk.getEdges(b),g).flatMap((m,J,Y)=>{{J=Y[(J+
1)%Y.length];const ia=yd.slope(m[0],m[1]);Y=yd.slope(J[0],J[1]);ia!==Y?Number.isNaN(ia)&&!Number.isNaN(Y)?m=[m[0][0],(m[0][0]-J[0][0])*Y+J[0][1]]:Number.isNaN(Y)&&!Number.isNaN(ia)?m=[J[0][0],(J[0][0]-m[0][0])*ia+m[0][1]]:(m=(ia*m[0][0]-Y*J[0][0]+J[0][1]-m[0][1])/(ia-Y),m=[m,Y*(m-J[0][0])+J[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});Ya(lk,"getPolygonVertices",(b,g,m=0,J=1)=>{b=pe.div(b,2);const [Y,ia]=[Math.max(1,b[0]-m),Math.max(1,b[1]-m)];m=[];for(let db=
0,sb=ll/g;db<g;db++){var ta=(-wm+db*sb)%ll,Ka=(-wm+(db+1)*sb)%ll;ta=pe.add(b,[Y*Math.cos(ta),ia*Math.sin(ta)]);Ka=pe.add(b,[Y*Math.cos(Ka),ia*Math.sin(Ka)]);var Za=pe.med(ta,Ka);Za=pe.nudge(Za,b,pe.dist(b,Za)*(1-J));m.push(ta,Za,Ka)}return m});Ya(lk,"getTriangleVertices",(b,g=0,m=1)=>{const [J,Y]=b;var ia=1-m;b=[J/2,g/2];m=[J-g,Y-g];g=[g/2,Y-g];const ta=lk.getPolygonCentroid([b,m,g]),Ka=pe.med(b,m),Za=pe.med(m,g),db=pe.med(g,b),sb=pe.dist(Ka,ta)*ia,xb=pe.dist(Za,ta)*ia;ia*=pe.dist(db,ta);return[b,
sb?pe.nudge(Ka,ta,sb):Ka,m,xb?pe.nudge(Za,ta,xb):Za,g,ia?pe.nudge(db,ta,ia):db]});Ya(lk,"getStarVertices",(b,g,m,J=1)=>{const Y=pe.div(g,2),ia=pe.mul(Y,J/2),ta=ll/m/2;return Array.from(Array(2*m)).map((Ka,Za)=>{Ka=-wm+Za*ta;const [db,sb]=Za%2?ia:Y;return pe.add(b,[db*Math.cos(Ka),sb*Math.sin(Ka)])})});var Uo=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let J=1;J<m;J++){const [Y,
ia]=b[J],[ta,Ka]=b[(J+1)%m];g.push(Y,ia,(Y+ta)/2,(ia+Ka)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let J=1;J<m-1;J++){const [Y,ia]=b[J],[ta,Ka]=b[J+1];g.push(Y,ia,(Y+ta)/2,(ia+Ka)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const m=b.length;if(4>m)return"";let J=b[0],Y=b[1];var ia=b[2];ia=`M${J[0].toFixed(2)},${J[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+
ia[0])/2).toFixed(2)},${((Y[1]+ia[1])/2).toFixed(2)} T`;for(let ta=2,Ka=m-1;ta<Ka;ta++)J=b[ta],Y=b[ta+1],ia+=`${((J[0]+Y[0])/2).toFixed(2)},${((J[1]+Y[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}static getSvgPathFromStrokePoints(b,g=!1){const m=b.length;if(4>m)return"";let J=b[0].point,Y=b[1].point;var ia=b[2].point;ia=`M${J[0].toFixed(2)},${J[1].toFixed(2)} Q${Y[0].toFixed(2)},${Y[1].toFixed(2)} ${((Y[0]+ia[0])/2).toFixed(2)},${((Y[1]+ia[1])/2).toFixed(2)} T`;for(let ta=2,Ka=m-1;ta<Ka;ta++)J=b[ta].point,
Y=b[ta+1].point,ia+=`${((J[0]+Y[0])/2).toFixed(2)},${((J[1]+Y[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}};Ya(Uo,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var ns={},ms=Object.assign,Kp=Object.getOwnPropertyDescriptor,Nn=Object.defineProperty,ag=Object.prototype,Jp=[];Object.freeze(Jp);var yq={};Object.freeze(yq);var go="undefined"!==typeof Proxy,Wo=Object.toString(),ho=function(){},Mp="undefined"!==typeof Object.getOwnPropertySymbols,Np="undefined"!==typeof Reflect&&Reflect.ownKeys?
Reflect.ownKeys:Mp?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,os=Object.getOwnPropertyDescriptors||function(b){var g={};Np(b).forEach(function(m){g[m]=Kp(b,m)});return g},Ll=Symbol("mobx-stored-annotations"),Xg=Symbol("mobx administration"),hp=function(){function b(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;
this.lowestObserverState_=Df.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.reportObserved=function(){return Xd(this)};g.reportChanged=function(){Ld();Nb(this);od()};g.toString=function(){return this.name_};return b}(),Lp=O("Atom",hp),Um={identity:function(b,g){return b===g},structural:function(b,g){return of(b,g)},"default":function(b,
g){return Object.is?Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return of(b,g,1)}},ir="override",zq=Pa(),Vo={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Vo);var At=Mb("observable"),jv=Mb("observable.ref",{enhancer:Ma}),xt=Mb("observable.shallow",{enhancer:function(b,g,m){if(void 0===b||null===b||Dd(b)||Db(b)||Zp(b)||Aq(b))return b;if(Array.isArray(b))return tg.array(b,{name:m,deep:!1});if(ba(b))return tg.object(b,void 0,{name:m,deep:!1});if(D(b))return tg.map(b,
{name:m,deep:!1});if(N(b))return tg.set(b,{name:m,deep:!1})}}),iv=Mb("observable.struct",{enhancer:function(b,g){return of(b,g)?g:b}}),yt=Ha(At);Object.assign(Mc,yt);var kv={box:function(b,g){g=g||Vo;return new Sd(b,Yb(g),g.name,!0,g.equals)},array:function(b,g){g=g||Vo;return(!1===Ud.useProxies||!1===g.proxy?Ze:pf)(b,Yb(g),g.name)},map:function(b,g){g=g||Vo;return new xy(b,Yb(g),g.name)},set:function(b,g){g=g||Vo;return new vy(b,Yb(g),g.name)},object:function(b,g,m){if(!1===Ud.useProxies||!1===(null==
m?void 0:m.proxy))m=jb({},m);else{var J={},Y,ia;T();J=jb(J,m);m=null!=(ia=(Y=J[Xg]).proxy_)?ia:Y.proxy_=new Proxy(J,EC)}return Ne(m,b,g)},ref:Ha(jv),shallow:Ha(xt),deep:yt,struct:Ha(iv)},tg=ms(Mc,kv),Bt=Ta("computed"),jr=Ta("computed.struct",{equals:Um.structural}),V=function(b,g){if(ma(g))return Ua(b,g,Bt);if(ba(b))return Ha(Ta("computed",b));g=ba(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new jh(g)};Object.assign(V,Bt);V.struct=Ha(jr);var la,Da,hb=0,Ib=1,pc=null!=(la=null==(Da=Kp(function(){},
"name"))?void 0:Da.configurable)?la:!1,Lc={value:"action",configurable:!0,writable:!1,enumerable:!1};var id=Symbol.toPrimitive;var Sd=function(b){function g(J,Y,ia,ta,Ka){void 0===ia&&(ia="ObservableValue");void 0===Ka&&(Ka=Um["default"]);ta=b.call(this,ia)||this;ta.enhancer=void 0;ta.hasUnreportedChange_=!1;ta.interceptors_=void 0;ta.changeListeners_=void 0;ta.value_=void 0;ta.dehancer=void 0;ta.enhancer=Y;ta.name_=ia;ta.equals=Ka;ta.value_=Y(J,void 0,ia);return ta}ca(g,b);var m=g.prototype;m.dehanceValue=
function(J){return void 0!==this.dehancer?this.dehancer(J):J};m.set=function(J){J=this.prepareNewValue_(J);J!==Ud.UNCHANGED&&this.setNewValue_(J)};m.prepareNewValue_=function(J){if(zb(this)){J=de(this,{object:this,type:ap,newValue:J});if(!J)return Ud.UNCHANGED;J=J.newValue}J=this.enhancer(J,this.value_,this.name_);return this.equals(this.value_,J)?Ud.UNCHANGED:J};m.setNewValue_=function(J){var Y=this.value_;this.value_=J;this.reportChanged();pd(this)&&Oe(this,{type:ap,object:this,newValue:J,oldValue:Y})};
m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};m.intercept_=function(J){return Td(this,J)};m.observe_=function(J,Y){Y&&J({observableKind:"value",debugObjectName:this.name_,object:this,type:ap,newValue:this.value_,oldValue:void 0});return oc(this,J)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return aa(this.get())};m[id]=function(){return this.valueOf()};
return g}(hp),Je=O("ObservableValue",Sd);var ig=Symbol.toPrimitive;var jh=function(){function b(m){this.dependenciesState_=Df.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Df.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Qg(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=dh.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;m.get||v(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=ad("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?Um.structural:Um["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){Xb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.get=function(){this.isComputing_&&v(32,this.name_,this.derivation);if(0!==Ud.inBatch||0!==this.observers_.size||this.keepAlive_){if(Xd(this),xc(this)){var m=Ud.trackingContext;this.keepAlive_&&!m&&(Ud.trackingContext=this);this.trackAndCompute()&&ec(this);Ud.trackingContext=m}}else xc(this)&&(this.warnAboutUntrackedRead_(),Ld(),this.value_=this.computeValue_(!1),od());m=this.value_;
if(m instanceof Qg)throw m.cause;return m};g.set=function(m){if(this.setter_){this.isRunningSetter_&&v(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else v(34,this.name_)};g.trackAndCompute=function(){var m=this.value_,J=this.dependenciesState_===Df.NOT_TRACKING_,Y=this.computeValue_(!0);if(m=J||m instanceof Qg||Y instanceof Qg||!this.equals_(m,Y))this.value_=Y;return m};g.computeValue_=function(m){this.isComputing_=!0;var J=Cb(!1);
if(m)var Y=Wc(this,this.derivation,this.scope_);else if(!0===Ud.disableErrorBoundaries)Y=this.derivation.call(this.scope_);else try{Y=this.derivation.call(this.scope_)}catch(ia){Y=new Qg(ia)}Ud.allowStateChanges=J;this.isComputing_=!1;return Y};g.suspend_=function(){this.keepAlive_||(kd(this),this.value_=void 0)};g.observe_=function(m,J){var Y=this,ia=!0,ta=void 0;return cd(function(){var Ka=Y.get();if(!ia||J){var Za=Kd();m({observableKind:"computed",debugObjectName:Y.name_,type:ap,object:Y,newValue:Ka,
oldValue:ta});Ud.trackingDerivation=Za}ia=!1;ta=Ka})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return aa(this.get())};g[ig]=function(){return this.valueOf()};return b}(),hf=O("ComputedValue",jh),Df;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Df||={});var dh;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(dh||={});var Qg=function(b){this.cause=void 0;this.cause=b},oe=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Yd=!0,ke=!1,Ud=function(){var b=n();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(Yd=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new oe).version&&(Yd=!1);if(Yd){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new oe}setTimeout(function(){ke||v(35)},
1);return new oe}(),bf=function(){function b(m,J,Y,ia){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Df.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=dh.NONE;this.name_=m;this.onInvalidate_=J;this.errorHandler_=Y;this.requiresObservable_=ia}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ud.pendingReactions.push(this),0<Ud.inBatch||Ud.isRunningReactions||sg(pb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){Ld();this.isScheduled_=!1;var m=Ud.trackingContext;Ud.trackingContext=this;if(xc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(J){this.reportExceptionInDerivation_(J)}}Ud.trackingContext=m;od()}};g.track=function(m){if(!this.isDisposed_){Ld();
this.isRunning_=!0;var J=Ud.trackingContext;Ud.trackingContext=this;m=Wc(this,m,void 0);Ud.trackingContext=J;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&kd(this);m instanceof Qg&&this.reportExceptionInDerivation_(m.cause);od()}};g.reportExceptionInDerivation_=function(m){var J=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(Ud.disableErrorBoundaries)throw m;Ud.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);Ud.globalReactionErrorHandlers.forEach(function(Y){return Y(m,
J)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ld(),kd(this),od()))};g.getDisposer_=function(){var m=this.dispose.bind(this);m[Xg]=this;return m};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(m){void 0===m&&(m=!1);ne(this,m)};return b}(),Hh=100,sg=function(b){return b()},th=O("Reaction",bf),gi="action",Ih=gb(gi),To=gb("action.bound",{bound:!0}),zt=gb("autoAction",{autoAction:!0}),CC=gb("autoAction.bound",{autoAction:!0,bound:!0}),rg=
uc(!1);Object.assign(rg,Ih);var ss=uc(!0);Object.assign(ss,zt);rg.bound=Ha(To);ss.bound=Ha(CC);var AC=function(b){return b()},BC="onBO",yC="onBUO",zC=0;Me.prototype=Object.create(Error.prototype);var uy=Ca("flow"),DC=Ca("flow.bound",{bound:!0}),Cs=Object.assign(function(b,g){if(ma(g))return Ua(b,g,uy);var m=b.name||"\x3cunnamed flow\x3e";g=function(){var J=arguments,Y=++zC,ia=rg(m+" - runid: "+Y+" - init",b).apply(this,J),ta,Ka=void 0;J=new Promise(function(Za,db){function sb(Ob){Ka=void 0;try{var sc=
rg(m+" - runid: "+Y+" - yield "+kc++,ia.next).call(ia,Ob)}catch(lc){return db(lc)}Wb(sc)}function xb(Ob){Ka=void 0;try{var sc=rg(m+" - runid: "+Y+" - yield "+kc++,ia["throw"]).call(ia,Ob)}catch(lc){return db(lc)}Wb(sc)}function Wb(Ob){if(L(null==Ob?void 0:Ob.then))Ob.then(Wb,db);else{if(Ob.done)return Za(Ob.value);Ka=Promise.resolve(Ob.value);return Ka.then(sb,xb)}}var kc=0;ta=db;sb(void 0)});J.cancel=rg(m+" - runid: "+Y+" - cancel",function(){try{if(Ka){var Za=Ka;L(Za.cancel)&&Za.cancel()}var db=
ia["return"](void 0),sb=Promise.resolve(db.value);sb.then(ho,ho);L(sb.cancel)&&sb.cancel();ta(new Me)}catch(xb){ta(xb)}});return J};g.isMobXFlow=!0;return g},uy);Cs.bound=Ha(DC);var EC={has:function(b,g){return b[Xg].has_(g)},get:function(b,g){return b[Xg].get_(g)},set:function(b,g,m){var J;return ma(g)?null!=(J=b[Xg].set_(g,m,!0))?J:!0:!1},deleteProperty:function(b,g){var m;return ma(g)?null!=(m=b[Xg].delete_(g,!0))?m:!0:!1},defineProperty:function(b,g,m){var J;return null!=(J=b[Xg].defineProperty_(g,
m))?J:!0},ownKeys:function(b){return b[Xg].ownKeys_()},preventExtensions:function(b){v(13)}},ap="update",FC={get:function(b,g){var m=b[Xg];return g===Xg?m:"length"===g?m.getArrayLength_():"string"!==typeof g||isNaN(g)?Z(Jt,g)?Jt[g]:b[g]:m.get_(parseInt(g))},set:function(b,g,m){var J=b[Xg];"length"===g&&J.setArrayLength_(m);"symbol"===typeof g||isNaN(g)?b[g]=m:J.set_(parseInt(g),m);return!0},preventExtensions:function(){v(15)}},vv=function(){function b(m,J,Y,ia){void 0===m&&(m="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=Y;this.legacyMode_=ia;this.atom_=new hp(m);this.enhancer_=function(ta,Ka){return J(ta,Ka,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};g.intercept_=function(m){return Td(this,
m)};g.observe_=function(m,J){void 0===J&&(J=!1);J&&m({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return oc(this,m)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&v("Out of range: "+m);var J=this.values_.length;if(m!==J)if(m>J){for(var Y=Array(m-J),ia=0;ia<
m-J;ia++)Y[ia]=void 0;this.spliceWithArray_(J,0,Y)}else this.spliceWithArray_(m,J-m)};g.updateArrayLength_=function(m,J){m!==this.lastKnownLength_&&v(16);this.lastKnownLength_+=J;this.legacyMode_&&0<J&&be(m+J+1)};g.spliceWithArray_=function(m,J,Y){var ia=this,ta=this.values_.length;void 0===m?m=0:m>ta?m=ta:0>m&&(m=Math.max(0,ta+m));J=1===arguments.length?ta-m:void 0===J||null===J?0:Math.max(0,Math.min(J,ta-m));void 0===Y&&(Y=Jp);if(zb(this)){var Ka=de(this,{object:this.proxy_,type:"splice",index:m,
removedCount:J,added:Y});if(!Ka)return Jp;J=Ka.removedCount;Y=Ka.added}Y=0===Y.length?Y:Y.map(function(Za){return ia.enhancer_(Za,void 0)});this.legacyMode_&&this.updateArrayLength_(ta,Y.length-J);ta=this.spliceItemsIntoValues_(m,J,Y);0===J&&0===Y.length||this.notifyArraySplice_(m,Y,ta);return this.dehanceValues_(ta)};g.spliceItemsIntoValues_=function(m,J,Y){if(1E4>Y.length){var ia;return(ia=this.values_).splice.apply(ia,[m,J].concat(Y))}ia=this.values_.slice(m,m+J);var ta=this.values_.slice(m+J);
this.values_.length+=Y.length-J;for(J=0;J<Y.length;J++)this.values_[m+J]=Y[J];for(J=0;J<ta.length;J++)this.values_[m+Y.length+J]=ta[J];return ia};g.notifyArrayChildUpdate_=function(m,J,Y){var ia=!this.owned_&&!1,ta=pd(this);m=ta||ia?{observableKind:"array",object:this.proxy_,type:ap,debugObjectName:this.atom_.name_,index:m,newValue:J,oldValue:Y}:null;this.atom_.reportChanged();ta&&Oe(this,m)};g.notifyArraySplice_=function(m,J,Y){var ia=!this.owned_&&!1,ta=pd(this);m=ta||ia?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:m,removed:Y,added:J,removedCount:Y.length,addedCount:J.length}:null;this.atom_.reportChanged();ta&&Oe(this,m)};g.get_=function(m){if(m<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m]);console.warn("[mobx.array] Attempt to read an array index ("+m+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")};g.set_=function(m,
J){var Y=this.values_;if(m<Y.length){var ia=Y[m];if(zb(this)){J=de(this,{type:ap,object:this.proxy_,index:m,newValue:J});if(!J)return;J=J.newValue}J=this.enhancer_(J,ia);J!==ia&&(Y[m]=J,this.notifyArrayChildUpdate_(m,J,ia))}else m===Y.length?this.spliceWithArray_(m,0,[J]):v(17,m,Y.length)};return b}(),Jt={clear:function(){return this.splice(0)},replace:function(b){var g=this[Xg];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var m=
arguments.length,J=Array(2<m?m-2:0),Y=2;Y<m;Y++)J[Y-2]=arguments[Y];m=this[Xg];switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(b);case 2:return m.spliceWithArray_(b,g)}return m.spliceWithArray_(b,g,J)},spliceWithArray:function(b,g,m){return this[Xg].spliceWithArray_(b,g,m)},push:function(){for(var b=this[Xg],g=arguments.length,m=Array(g),J=0;J<g;J++)m[J]=arguments[J];b.spliceWithArray_(b.values_.length,0,m);return b.values_.length},pop:function(){return this.splice(Math.max(this[Xg].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[Xg],g=arguments.length,m=Array(g),J=0;J<g;J++)m[J]=arguments[J];b.spliceWithArray_(0,0,m);return b.values_.length},reverse:function(){Ud.trackingDerivation&&v(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Ud.trackingDerivation&&v(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[Xg];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};vg("concat",$a);vg("flat",$a);vg("includes",$a);vg("indexOf",$a);vg("join",$a);vg("lastIndexOf",$a);vg("slice",$a);vg("toString",$a);vg("toLocaleString",$a);vg("every",Bb);vg("filter",Bb);vg("find",Bb);vg("findIndex",Bb);vg("flatMap",Bb);vg("forEach",Bb);vg("map",Bb);vg("some",Bb);vg("reduce",eb);vg("reduceRight",eb);var GC=O("ObservableArrayAdministration",vv),HC={};var IC=Symbol.iterator;var JC=Symbol.toStringTag;var xy=function(){function b(m,J,Y){var ia=this;
void 0===J&&(J=Xa);void 0===Y&&(Y="ObservableMap");this.name_=this.enhancer_=void 0;this[Xg]=HC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=J;this.name_=Y;L(Map)||v(18);this.keysAtom_=Oa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Rc(!0,function(){ia.merge(m)})}var g=b.prototype;g.has_=function(m){return this.data_.has(m)};g.has=function(m){var J=this;if(!Ud.trackingDerivation)return this.has_(m);var Y=this.hasMap_.get(m);
if(!Y){var ia=Y=new Sd(this.has_(m),Ma,"ObservableMap.key?",!1);this.hasMap_.set(m,ia);td(ia,function(){return J.hasMap_["delete"](m)})}return Y.get()};g.set=function(m,J){var Y=this.has_(m);if(zb(this)){J=de(this,{type:Y?ap:"add",object:this,newValue:J,name:m});if(!J)return this;J=J.newValue}Y?this.updateValue_(m,J):this.addValue_(m,J);return this};g["delete"]=function(m){var J=this;if(zb(this)&&!de(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var Y=pd(this),ia=Y?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;Dc(function(){var ta;J.keysAtom_.reportChanged();null==(ta=J.hasMap_.get(m))?void 0:ta.setNewValue_(!1);J.data_.get(m).setNewValue_(void 0);J.data_["delete"](m)});Y&&Oe(this,ia);return!0}return!1};g.updateValue_=function(m,J){var Y=this.data_.get(m);J=Y.prepareNewValue_(J);if(J!==Ud.UNCHANGED){var ia=pd(this);m=ia?{observableKind:"map",debugObjectName:this.name_,type:ap,object:this,oldValue:Y.value_,
name:m,newValue:J}:null;Y.setNewValue_(J);ia&&Oe(this,m)}};g.addValue_=function(m,J){var Y=this;Dc(function(){var Ka,Za=new Sd(J,Y.enhancer_,"ObservableMap.key",!1);Y.data_.set(m,Za);J=Za.value_;null==(Ka=Y.hasMap_.get(m))?void 0:Ka.setNewValue_(!0);Y.keysAtom_.reportChanged()});var ia=pd(this),ta=ia?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:J}:null;ia&&Oe(this,ta)};g.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var m=this,J=this.keys();return ra({next:function(){var Y=J.next(),ia=Y.done;Y=Y.value;return{done:ia,value:ia?void 0:m.get(Y)}}})};g.entries=function(){var m=this,J=this.keys();return ra({next:function(){var Y=J.next(),ia=Y.done;Y=Y.value;return{done:ia,value:ia?void 0:[Y,m.get(Y)]}}})};g[IC]=function(){return this.entries()};
g.forEach=function(m,J){for(var Y=ya(this),ia;!(ia=Y()).done;)ia=ia.value,m.call(J,ia[1],ia[0],this)};g.merge=function(m){var J=this;Zp(m)&&(m=new Map(m));Dc(function(){ba(m)?P(m).forEach(function(Y){return J.set(Y,m[Y])}):Array.isArray(m)?m.forEach(function(Y){return J.set(Y[0],Y[1])}):D(m)?(m.constructor!==Map&&v(19,m),m.forEach(function(Y,ia){return J.set(ia,Y)})):null!==m&&void 0!==m&&v(20,m)});return this};g.clear=function(){var m=this;Dc(function(){Od(function(){for(var J=ya(m.keys()),Y;!(Y=
J()).done;)m["delete"](Y.value)})})};g.replace=function(m){var J=this;Dc(function(){for(var Y=fc(m),ia=new Map,ta=!1,Ka=ya(J.data_.keys()),Za;!(Za=Ka()).done;)if(Za=Za.value,!Y.has(Za))if(J["delete"](Za))ta=!0;else{var db=J.data_.get(Za);ia.set(Za,db)}for(Y=ya(Y.entries());!(Ka=Y()).done;)Za=Ka.value,Ka=Za[0],db=Za[1],Za=J.data_.has(Ka),J.set(Ka,db),J.data_.has(Ka)&&(db=J.data_.get(Ka),ia.set(Ka,db),Za||(ta=!0));if(!ta)if(J.data_.size!==ia.size)J.keysAtom_.reportChanged();else for(ta=J.data_.keys(),
Y=ia.keys(),Ka=ta.next(),Za=Y.next();!Ka.done;){if(Ka.value!==Za.value){J.keysAtom_.reportChanged();break}Ka=ta.next();Za=Y.next()}J.data_=ia});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(m,J){return oc(this,m)};g.intercept_=function(m){return Td(this,m)};ha(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:JC,get:function(){return"Map"}}]);return b}(),Zp=O("ObservableMap",
xy),KC={};var LC=Symbol.iterator;var MC=Symbol.toStringTag;var vy=function(){function b(m,J,Y){void 0===J&&(J=Xa);void 0===Y&&(Y="ObservableSet");this.name_=void 0;this[Xg]=KC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=Y;L(Set)||v(22);this.atom_=Oa(this.name_);this.enhancer_=function(ia,ta){return J(ia,ta,Y)};m&&this.replace(m)}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};
g.clear=function(){var m=this;Dc(function(){Od(function(){for(var J=ya(m.data_.values()),Y;!(Y=J()).done;)m["delete"](Y.value)})})};g.forEach=function(m,J){for(var Y=ya(this),ia;!(ia=Y()).done;)ia=ia.value,m.call(J,ia,ia,this)};g.add=function(m){var J=this;if(zb(this)&&!de(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){Dc(function(){J.data_.add(J.enhancer_(m,void 0));J.atom_.reportChanged()});var Y=pd(this),ia=Y?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:m}:null;Y&&Oe(this,ia)}return this};g["delete"]=function(m){var J=this;if(zb(this)&&!de(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var Y=pd(this),ia=Y?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;Dc(function(){J.atom_.reportChanged();J.data_["delete"](m)});Y&&Oe(this,ia);return!0}return!1};g.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};g.entries=function(){var m=0,J=Array.from(this.keys()),
Y=Array.from(this.values());return ra({next:function(){var ia=m;m+=1;return ia<Y.length?{value:[J[ia],Y[ia]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var m=this,J=0,Y=Array.from(this.data_.values());return ra({next:function(){return J<Y.length?{value:m.dehanceValue_(Y[J++]),done:!1}:{done:!0}}})};g.replace=function(m){var J=this;Aq(m)&&(m=new Set(m));Dc(function(){Array.isArray(m)?(J.clear(),m.forEach(function(Y){return J.add(Y)})):
N(m)?(J.clear(),m.forEach(function(Y){return J.add(Y)})):null!==m&&void 0!==m&&v("Cannot initialize set from "+m)});return this};g.observe_=function(m,J){return oc(this,m)};g.intercept_=function(m){return Td(this,m)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[LC]=function(){return this.values()};ha(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:MC,get:function(){return"Set"}}]);return b}(),Aq=O("ObservableSet",
vy),ry=Object.create(null),sy=function(){function b(m,J,Y,ia){void 0===J&&(J=new Map);void 0===ia&&(ia=zq);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=J;this.name_=Y;this.defaultAnnotation_=ia;this.keysAtom_=new hp("ObservableObject.keys");this.isPlainObject_=ba(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(m){return this.values_.get(m).get()};
g.setObservablePropValue_=function(m,J){var Y=this.values_.get(m);if(Y instanceof jh)return Y.set(J),!0;if(zb(this)){J=de(this,{type:ap,object:this.proxy_||this.target_,name:m,newValue:J});if(!J)return null;J=J.newValue}J=Y.prepareNewValue_(J);if(J!==Ud.UNCHANGED){var ia=pd(this);m=ia?{type:ap,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Y.value_,name:m,newValue:J}:null;Y.setNewValue_(J);ia&&Oe(this,m)}return!0};g.get_=function(m){Ud.trackingDerivation&&
!Z(this.target_,m)&&this.has_(m);return this.target_[m]};g.set_=function(m,J,Y){void 0===Y&&(Y=!1);if(Z(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,J);if(Y)return Reflect.set(this.target_,m,J);this.target_[m]=J;return!0}return this.extend_(m,{value:J,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Y)};g.has_=function(m){if(!Ud.trackingDerivation)return m in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var J=this.pendingKeys_.get(m);
J||(J=new Sd(m in this.target_,Ma,"ObservableObject.key?",!1),this.pendingKeys_.set(m,J));return J.get()};g.make_=function(m,J){!0===J&&(J=this.defaultAnnotation_);if(!1!==J){if(!(m in this.target_)){var Y;if(null!=(Y=this.target_[Ll])&&Y[m])return;v(1,J.annotationType_,this.name_+"."+m.toString())}for(Y=this.target_;Y&&Y!==ag;){var ia=Kp(Y,m);if(ia){ia=J.make_(this,m,ia,Y);if(0===ia)return;if(1===ia)break}Y=Object.getPrototypeOf(Y)}var ta;null==(ta=this.target_[Ll])?!0:delete ta[m]}};g.extend_=function(m,
J,Y,ia){void 0===ia&&(ia=!1);!0===Y&&(Y=this.defaultAnnotation_);if(!1===Y)return this.defineProperty_(m,J,ia);if(J=Y.extend_(this,m,J,ia)){var ta;null==(ta=this.target_[Ll])?!0:delete ta[m]}return J};g.defineProperty_=function(m,J,Y){void 0===Y&&(Y=!1);try{Ld();var ia=this.delete_(m);if(!ia)return ia;if(zb(this)){var ta=de(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:J.value});if(!ta)return null;var Ka=ta.newValue;J.value!==Ka&&(J=M({},J,{value:Ka}))}if(Y){if(!Reflect.defineProperty(this.target_,
m,J))return!1}else Nn(this.target_,m,J);this.notifyPropertyAddition_(m,J.value)}finally{od()}return!0};g.defineObservableProperty_=function(m,J,Y,ia){void 0===ia&&(ia=!1);try{Ld();var ta=this.delete_(m);if(!ta)return ta;if(zb(this)){var Ka=de(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:J});if(!Ka)return null;J=Ka.newValue}var Za=jd(m),db={configurable:Ud.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Za.get,set:Za.set};if(ia){if(!Reflect.defineProperty(this.target_,
m,db))return!1}else Nn(this.target_,m,db);var sb=new Sd(J,Y,"ObservableObject.key",!1);this.values_.set(m,sb);this.notifyPropertyAddition_(m,sb.value_)}finally{od()}return!0};g.defineComputedProperty_=function(m,J,Y){void 0===Y&&(Y=!1);try{Ld();var ia=this.delete_(m);if(!ia)return ia;if(zb(this)&&!de(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;J.name||(J.name="ObservableObject.key");J.context=this.proxy_||this.target_;var ta=jd(m),Ka={configurable:Ud.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:ta.get,set:ta.set};if(Y){if(!Reflect.defineProperty(this.target_,m,Ka))return!1}else Nn(this.target_,m,Ka);this.values_.set(m,new jh(J));this.notifyPropertyAddition_(m,void 0)}finally{od()}return!0};g.delete_=function(m,J){void 0===J&&(J=!1);if(!Z(this.target_,m))return!0;if(zb(this)&&!de(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;try{var Y,ia;Ld();var ta=pd(this),Ka=this.values_.get(m),Za=void 0;if(!Ka&&ta){var db;Za=null==(db=
Kp(this.target_,m))?void 0:db.value}if(J){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];Ka&&(this.values_["delete"](m),Ka instanceof Sd&&(Za=Ka.value_),Nb(Ka));this.keysAtom_.reportChanged();null==(Y=this.pendingKeys_)?void 0:null==(ia=Y.get(m))?void 0:ia.set(m in this.target_);if(ta){var sb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Za,name:m};ta&&Oe(this,sb)}}finally{od()}return!0};g.observe_=function(m,
J){return oc(this,m)};g.intercept_=function(m){return Td(this,m)};g.notifyPropertyAddition_=function(m,J){var Y,ia,ta=pd(this);ta&&(J=ta?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:J}:null,ta&&Oe(this,J));null==(Y=this.pendingKeys_)?void 0:null==(ia=Y.get(m))?void 0:ia.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return Np(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),wC=O("ObservableObjectAdministration",sy),xC=je(0),tv=0,wy=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(wy,Array.prototype);var sv=function(b,g,m){function J(ia,ta,Ka,Za){void 0===Ka&&(Ka="ObservableArray");void 0===Za&&(Za=!1);var db=b.call(this)||this;ta=new vv(Ka,ta,Za,!0);ta.proxy_=da(db);K(da(db),Xg,ta);ia&&ia.length&&(ta=Cb(!0),db.spliceWithArray(0,
0,ia),Ud.allowStateChanges=ta);Object.defineProperty(da(db),"0",xC);return db}ca(J,b);var Y=J.prototype;Y.concat=function(){this[Xg].atom_.reportObserved();for(var ia=arguments.length,ta=Array(ia),Ka=0;Ka<ia;Ka++)ta[Ka]=arguments[Ka];return Array.prototype.concat.apply(this.slice(),ta.map(function(Za){return Db(Za)?Za.slice():Za}))};Y[m]=function(){var ia=this,ta=0;return ra({next:function(){return ta<ia.length?{value:ia[ta++],done:!1}:{done:!0,value:void 0}}})};ha(J,[{key:"length",get:function(){return this[Xg].getArrayLength_()},
set:function(ia){this[Xg].setArrayLength_(ia)}},{key:g,get:function(){return"Array"}}]);return J}(wy,Symbol.toStringTag,Symbol.iterator);Object.entries(Jt).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&U(sv.prototype,g,b)});be(1E3);var ty=ag.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof n()[b]&&v("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:ac,extras:{getDebugName:Eg},
$mobx:Xg});var Kb=S(611),cm=class{constructor(b){Ya(this,"props");Ya(this,"aspectRatio");Ya(this,"type");Ya(this,"hideCloneHandles",!1);Ya(this,"hideResizeHandles",!1);Ya(this,"hideRotateHandle",!1);Ya(this,"hideContextBar",!1);Ya(this,"hideSelectionDetail",!1);Ya(this,"hideSelection",!1);Ya(this,"canChangeAspectRatio",!0);Ya(this,"canUnmount",!0);Ya(this,"canResize",[!0,!0]);Ya(this,"canScale",!0);Ya(this,"canFlip",!0);Ya(this,"canEdit",!1);Ya(this,"canBind",!1);Ya(this,"nonce");Ya(this,"bindingDistance",
4);Ya(this,"isDirty",!1);Ya(this,"lastSerialized");Ya(this,"getCenter",()=>rf.getBoundsCenter(this.bounds));Ya(this,"getRotatedBounds",()=>{const {bounds:ia,props:{rotation:ta}}=this;return ta?rf.getBoundsFromPoints(rf.getRotatedCorners(ia,ta)):ia});Ya(this,"hitTestPoint",ia=>{var ta=this.rotatedBounds;if(!this.props.rotation)return Nj.pointInBounds(ia,ta);ta=rf.getRotatedCorners(ta,this.props.rotation);return Nj.pointInPolygon(ia,ta)});Ya(this,"hitTestLineSegment",(ia,ta)=>{const Ka=rf.getBoundsFromPoints([ia,
ta]),{rotatedBounds:Za,props:{rotation:db=0}}=this;return rf.boundsContain(Za,Ka)||db?t(ia,ta,rf.getRotatedCorners(this.bounds)).didIntersect:0<w(Za,ia,ta).length});Ya(this,"hitTestBounds",ia=>{const {rotatedBounds:ta,props:{rotation:Ka=0}}=this,Za=rf.getRotatedCorners(this.bounds,Ka);return rf.boundsContain(ia,ta)||0<H([ia.minX,ia.minY],[ia.width,ia.height],Za).length});Ya(this,"getExpandedBounds",()=>rf.expandBounds(this.getBounds(),this.bindingDistance));Ya(this,"getBindingPoint",(ia,ta,Ka,Za)=>
{var db=this.getBounds(),sb=this.getExpandedBounds();if(Nj.pointInBounds(ia,sb)){var xb=B(ta,Ka,sb).filter(Wb=>Wb.didIntersect).map(Wb=>Wb.points[0]);if(xb.length)return Ka=this.getCenter(),xb=xb.sort((Wb,kc)=>pe.dist(kc,ta)-pe.dist(Wb,ta))[0],xb=pe.med(ia,xb),Za?(Za=2>pe.dist(ia,Ka)?Ka:ia,db=0):(Za=2>pe.distanceToLineSegment(ia,xb,Ka)?Ka:xb,db=Nj.pointInBounds(ia,db)?this.bindingDistance:Math.max(this.bindingDistance,rf.getBoundsSides(db).map(Wb=>pe.distanceToLineSegment(Wb[1][0],Wb[1][1],ia)).sort((Wb,
kc)=>Wb-kc)[0])),sb=pe.divV(pe.sub(Za,[sb.minX,sb.minY]),[sb.width,sb.height]),{point:pe.clampV(sb,0,1),distance:db}}});Ya(this,"getSerialized",()=>{var ia=Ga(Qa({},this.props),{type:this.type,nonce:this.nonce});return me(ia,new Map)});Ya(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Dc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Ya(this,
"validateProps",ia=>ia);Ya(this,"update",(ia,ta=!1,Ka=!1)=>{ta||this.isDirty||this.setIsDirty(!0);ta||Ka||this.incNonce();Object.assign(this.props,this.validateProps(ia));return this});Ya(this,"clone",()=>new this.constructor(this.serialized));Ya(this,"onResetBounds",ia=>this);Ya(this,"scale",[1,1]);Ya(this,"onResizeStart",ia=>{var ta;this.scale=[...(null!=(ta=this.props.scale)?ta:[1,1])];return this});Ya(this,"onResize",(ia,ta)=>{const {bounds:Ka,rotation:Za,scale:[db,sb]}=ta;ia=[...this.scale];
0>db&&(ia[0]*=-1);0>sb&&(ia[1]*=-1);this.update({point:[Ka.minX,Ka.minY],scale:ia,rotation:Za});return this});Ya(this,"onHandleChange",(ia,{id:ta,delta:Ka})=>{if(void 0!==ia.handles){var Za=Pq(ia.handles);Za[ta]=Ga(Qa({},Za[ta]),{point:pe.add(Ka,ia.handles[ta].point)});var db=rf.getCommonTopLeft(Object.values(Za).map(sb=>sb.point));Object.values(Za).forEach(sb=>{sb.point=pe.sub(sb.point,db)});this.update({point:pe.add(ia.point,db),handles:Za})}});var g,m;const J=this.constructor.id,Y=null!=(g=this.constructor.defaultProps)?
g:{};this.type=J;this.props=Qa(Qa({scale:[1,1]},Y),b);this.nonce=null!=(m=b.nonce)?m:Date.now();vf(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:m,strokeType:J,
opacity:Y,fill:ia,noFill:ta,borderRadius:Ka}=this.props;return(0,Kb.jsx)("rect",{fill:ta?"none":Ce(ia,"background"),stroke:Ce(g,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===J?"8 2":void 0,fillOpacity:null!=Y?Y:.2,width:b.width,height:b.height,rx:Ka,ry:Ka})}};Ya(cm,"type");Ec([tg],cm.prototype,"props",2);Ec([tg],cm.prototype,"canResize",2);Ec([tg],cm.prototype,"nonce",2);Ec([tg],cm.prototype,"isDirty",2);Ec([tg],cm.prototype,"lastSerialized",2);Ec([V],cm.prototype,"id",1);Ec([rg],cm.prototype,
"setNonce",1);Ec([rg],cm.prototype,"incNonce",1);Ec([rg],cm.prototype,"setIsDirty",1);Ec([rg],cm.prototype,"setLastSerialized",1);Ec([V],cm.prototype,"center",1);Ec([V],cm.prototype,"bounds",1);Ec([V],cm.prototype,"rotatedBounds",1);Ec([V],cm.prototype,"serialized",1);Ec([rg],cm.prototype,"update",2);var On=class extends cm{constructor(b={}){super(b);Ya(this,"canBind",!0);Ya(this,"getBounds",()=>{const [g,m]=this.props.point,[J,Y]=this.props.size;return{minX:g,minY:m,maxX:g+J,maxY:m+Y,width:J,height:Y}});
Ya(this,"getRotatedBounds",()=>rf.getBoundsFromPoints(rf.getRotatedCorners(this.bounds,this.props.rotation)));Ya(this,"onResize",(g,m)=>{const {bounds:J,rotation:Y,scale:[ia,ta]}=m;g=[...this.scale];0>ia&&(g[0]*=-1);0>ta&&(g[1]*=-1);this.update({point:[J.minX,J.minY],scale:g,rotation:Y});return this.update({rotation:Y,point:[J.minX,J.minY],size:[Math.max(1,J.width),Math.max(1,J.height)],scale:g})});Ya(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),g.size[1]=Math.max(g.size[1],
1));return g});vf(this)}};Ya(On,"id","box");Ya(On,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var sr=class extends cm{constructor(b={}){super(b);Ya(this,"getBounds",()=>{const {pointBounds:g,props:{point:m}}=this;return rf.translateBounds(g,m)});Ya(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:m},bounds:J,rotatedPoints:Y}=this;return g?rf.translateBounds(rf.getBoundsFromPoints(Y),m):J});Ya(this,"normalizedPoints",[]);Ya(this,"isResizeFlippedX",!1);
Ya(this,"isResizeFlippedY",!1);Ya(this,"onResizeStart",()=>{var g;const {bounds:m,props:{points:J}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const Y=[m.width,m.height];this.normalizedPoints=J.map(ia=>yd.divV(ia,Y));return this});Ya(this,"onResize",(g,m)=>{const {bounds:J,scale:[Y,ia]}=m,ta=[J.width,J.height];g=[...this.scale];0>Y&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update(Y||ia?{point:[J.minX,J.minY],points:this.normalizedPoints.map(Ka=>yd.mulV(Ka,ta).concat(Ka[2])),scale:g}:
{point:[J.minX,J.minY],points:this.normalizedPoints.map(Ka=>yd.mulV(Ka,ta).concat(Ka[2]))})});Ya(this,"hitTestPoint",g=>{const {props:{points:m,point:J}}=this;return Nj.pointNearToPolyline(yd.sub(g,J),m)});Ya(this,"hitTestLineSegment",(g,m)=>{const {bounds:J,props:{points:Y,point:ia}}=this;if(Nj.pointInBounds(g,J)||Nj.pointInBounds(m,J)||0<w(J,g,m).length){const ta=yd.sub(g,ia),Ka=yd.sub(m,ia);return t(ta,Ka,Y).didIntersect||!!Y.find(Za=>5>yd.dist(ta,Za)||5>yd.dist(Ka,Za))}return!1});Ya(this,"hitTestBounds",
g=>{const {rotatedBounds:m,props:{points:J,point:Y}}=this,ia=rf.translateBounds(g,yd.neg(Y));return rf.boundsContain(g,m)||J.every(ta=>Nj.pointInBounds(ta,ia))||rf.boundsCollide(g,m)&&0<x([ia.minX,ia.minY],[ia.width,ia.height],J).length});vf(this)}get pointBounds(){const {props:{points:b}}=this;return rf.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:m},center:J}=this;if(!m)return g;const Y=yd.sub(J,b);return g.map(ia=>yd.rotWith(ia,Y,m))}};Ya(sr,"id","draw");Ya(sr,
"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Ec([V],sr.prototype,"pointBounds",1);Ec([V],sr.prototype,"rotatedPoints",1);var uv=class extends cm{constructor(b={}){super(b);Ya(this,"hideSelection",!0);Ya(this,"hideResizeHandles",!0);Ya(this,"hideRotateHandle",!0);Ya(this,"hideSelectionDetail",!0);Ya(this,"getBounds",()=>{const {props:{point:[g,m],radius:J=0}}=this;return{minX:g,minY:m,maxX:g+2*J,maxY:m+2*J,width:2*J,height:2*J}});Ya(this,"getRotatedBounds",
()=>rf.getBoundsFromPoints(rf.getRotatedCorners(this.bounds,this.props.rotation)));Ya(this,"onResize",(g,m)=>{({props:{radius:g=0}}=this);return this.update({point:[m.bounds.minX+m.bounds.width/2-g,m.bounds.minY+m.bounds.height/2-g]})});vf(this)}};Ya(uv,"id","dot");Ya(uv,"defaultProps",{id:"dot",type:"dot",parentId:"page",point:[0,0],radius:6});var rv=class extends On{constructor(b={}){super(b);Ya(this,"getBounds",()=>{const {props:{point:[g,m],size:[J,Y]}}=this;return rf.getRotatedEllipseBounds(g,
m,J/2,Y/2,0)});Ya(this,"getRotatedBounds",()=>{const {props:{point:[g,m],size:[J,Y],rotation:ia}}=this;return rf.getRotatedEllipseBounds(g,m,J/2,Y/2,ia)});Ya(this,"hitTestPoint",g=>{const {props:{size:m,rotation:J},center:Y}=this;return Nj.pointInEllipse(g,Y,m[0],m[1],J||0)});Ya(this,"hitTestLineSegment",(g,m)=>{const {props:{size:[J,Y],rotation:ia=0},center:ta}=this;return G(g,m,ta,J,Y,ia).didIntersect});Ya(this,"hitTestBounds",g=>{const {props:{size:[m,J],rotation:Y=0},rotatedBounds:ia}=this;var ta;
if(!(ta=rf.boundsContain(g,ia))){const {minX:Ka,minY:Za,width:db,height:sb}=g;ta=0<y(this.center,m/2,J/2,Y,[Ka,Za],[db,sb]).length}return ta});vf(this)}};Ya(rv,"id","ellipse");Ya(rv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var qv=class extends On{constructor(b={}){super(b);Ya(this,"onResetBounds",g=>{const {clipping:m,size:J,point:Y}=this.props;if(m){const [ia,ta,Ka,Za]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[Y[0]-Za,Y[1]-
ia],size:[J[0]+(Za-ta),J[1]+(ia-Ka)]})}if(g.asset){const {size:[ia,ta]}=g.asset;this.update({clipping:0,point:[Y[0]+J[0]/2-ia/2,Y[1]+J[1]/2-ta/2],size:[ia,ta]})}return this});Ya(this,"onResize",(g,m)=>{const {bounds:J,clip:Y,scale:ia}=m;({clipping:m}=this.props);const {clipping:ta}=g;if(Y){const {point:[Ka,Za],size:[db,sb]}=g,[xb,Wb,kc,Ob]=ta?Array.isArray(ta)?ta:[ta,ta,ta,ta]:[0,0,0,0];m=[xb+(J.minY-Za),Wb+(J.maxX-(Ka+db)),kc+(J.maxY-(Za+sb)),Ob+(J.minX-Ka)]}else void 0!==ta&&(m=Array.isArray(ta)?
ta:[ta,ta,ta,ta],m=[m[0]*ia[1],m[1]*ia[0],m[2]*ia[1],m[3]*ia[0]]);if(m&&Array.isArray(m)){const Ka=m;Ka.every((Za,db)=>0===db||Za===Ka[db-1])&&(m=Ka[0])}return this.update({point:[J.minX,J.minY],size:[Math.max(1,J.width),Math.max(1,J.height)],clipping:m})});vf(this)}};Ya(qv,"id","ellipse");Ya(qv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var qy=class extends cm{constructor(b={}){super(b);Ya(this,"getBounds",()=>{const {points:g,
props:{point:m}}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),m)});Ya(this,"getRotatedBounds",()=>{const {rotatedPoints:g,props:{point:m}}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),m)});Ya(this,"normalizedHandles",[]);Ya(this,"onResizeStart",()=>{var g;const {props:{handles:m},bounds:J}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const Y=[J.width,J.height];this.normalizedHandles=Object.values(m).map(ia=>yd.divV(ia.point,Y));return this});Ya(this,"onResize",
(g,m)=>{const {bounds:J,scale:[Y,ia]}=m,{props:{handles:ta},normalizedHandles:Ka}=this,Za=[J.width,J.height];g=[...this.scale];0>Y&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update({point:[J.minX,J.minY],handles:Object.values(ta).map((db,sb)=>Ga(Qa({},db),{point:yd.mulV(Ka[sb],Za)})),scale:g})});Ya(this,"hitTestPoint",g=>{const {points:m}=this;return Nj.pointNearToPolyline(yd.sub(g,this.props.point),m)});Ya(this,"hitTestLineSegment",(g,m)=>{const {bounds:J,points:Y,props:{point:ia}}=this;if(Nj.pointInBounds(g,
J)||Nj.pointInBounds(m,J)||0<w(J,g,m).length){const ta=yd.sub(g,ia),Ka=yd.sub(m,ia);return t(ta,Ka,Y).didIntersect||!!Y.find(Za=>5>yd.dist(ta,Za)||5>yd.dist(Ka,Za))}return!1});Ya(this,"hitTestBounds",g=>{const {rotatedBounds:m,points:J,props:{point:Y}}=this,ia=rf.translateBounds(g,yd.neg(Y));return rf.boundsContain(g,m)||J.every(ta=>Nj.pointInBounds(ta,ia))||rf.boundsCollide(g,m)&&0<x([ia.minX,ia.minY],[ia.width,ia.height],J).length});Ya(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==
g.handles&&1>Object.values(g.handles).length&&(g.handles=qy.defaultProps.handles);return g});vf(this)}get points(){return Object.values(this.props.handles).map(b=>b.point)}get centroid(){const {points:b}=this;return lk.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:m}}=this;return m?Object.values(g).map(J=>yd.rotWith(J.point,b,m)):this.points}},or=qy;Ya(or,"id","polyline");Ya(or,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});
Ec([V],or.prototype,"points",1);Ec([V],or.prototype,"centroid",1);Ec([V],or.prototype,"rotatedPoints",1);var py=class extends or{constructor(b={}){super(b);Ya(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=py.defaultProps.handles);return g});Ya(this,"getHandlesChange",(g,m)=>{var J=Tc(g.handles,m);J=Tc(J,{start:{point:pe.toFixed(J.start.point)},end:{point:pe.toFixed(J.end.point)}});if(!pe.isEqual(J.start.point,J.end.point)){m={point:g.point,
handles:Pq(J)};g=g.point;J=rf.translateBounds(rf.getBoundsFromPoints(Object.values(J).map(ia=>ia.point)),m.point);var Y=pe.sub([J.minX,J.minY],g);pe.isEqual(Y,[0,0])||(Object.values(m.handles).forEach(ia=>{ia.point=pe.toFixed(pe.sub(ia.point,Y))}),m.point=pe.toFixed(pe.add(m.point,Y)));return m}});vf(this)}},rs=py;Ya(rs,"id","line");Ya(rs,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Pp=
class extends On{constructor(b={}){super(b);Ya(this,"getRotatedBounds",()=>{const {rotatedVertices:g,props:{point:m},offset:J}=this;return rf.translateBounds(rf.getBoundsFromPoints(g),yd.add(m,J))});Ya(this,"hitTestPoint",g=>{const {vertices:m}=this;return Nj.pointInPolygon(yd.add(g,this.props.point),m)});Ya(this,"hitTestLineSegment",(g,m)=>{const {vertices:J,props:{point:Y}}=this;return t(yd.sub(g,Y),yd.sub(m,Y),J).didIntersect});Ya(this,"hitTestBounds",g=>{const {rotatedBounds:m,offset:J,rotatedVertices:Y,
props:{point:ia}}=this,ta=rf.translateBounds(g,yd.neg(yd.add(ia,J)));return rf.boundsContain(g,m)||Y.every(Ka=>Nj.pointInBounds(Ka,ta))||0<H([ta.minX,ta.minY],[ta.width,ta.height],Y).length});Ya(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});vf(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(m=>yd.add(m,b))}get centroid(){const {vertices:b}=this;return lk.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,
centroid:g,props:{rotation:m}}=this;return m?b.map(J=>yd.rotWith(J,g,m)):b}get offset(){const {props:{size:[b,g]}}=this,m=rf.getBoundsCenter(rf.getBoundsFromPoints(this.vertices));return yd.sub(yd.div([b,g],2),m)}getVertices(b=0){const {ratio:g,sides:m,size:J}=this.props;return 3===m?lk.getTriangleVertices(J,b,g):lk.getPolygonVertices(J,m,b,g)}};Ya(Pp,"id","polygon");Ya(Pp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Ec([V],
Pp.prototype,"vertices",1);Ec([V],Pp.prototype,"pageVertices",1);Ec([V],Pp.prototype,"centroid",1);Ec([V],Pp.prototype,"rotatedVertices",1);Ec([V],Pp.prototype,"offset",1);var ov=class extends On{constructor(b={}){super(b);Ya(this,"canEdit",!0);Ya(this,"canFlip",!1);vf(this)}};Ya(ov,"id","text");Ya(ov,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var nr=class{constructor(){Ya(this,"_id");Ya(this,"_initial");Ya(this,"_states");Ya(this,"_isActive",
!1);Ya(this,"cursor");Ya(this,"_disposables",[]);Ya(this,"children",new Map([]));Ya(this,"registerStates",m=>{m.forEach(J=>this.children.set(J.id,new J(this,this)));return this});Ya(this,"deregisterStates",m=>{m.forEach(J=>{var Y;null==(Y=this.children.get(J.id))?void 0:Y.dispose();this.children.delete(J.id)});return this});Ya(this,"currentState",{});Ya(this,"transition",(m,J={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const Y=this.children.get(m),
ia=this.currentState;if(!Y)throw Error(`Could not find a state named ${m}.`);Dc(()=>{this.currentState?(ia._events.onExit(Ga(Qa({},J),{toId:m})),ia.dispose(),Y.registerKeyboardShortcuts(),this.setCurrentState(Y),this._events.onTransition(Ga(Qa({},J),{fromId:ia.id,toId:m})),Y._events.onEnter(Ga(Qa({},J),{fromId:ia.id}))):(this.currentState=Y,Y._events.onEnter(Ga(Qa({},J),{fromId:""})))});return this});Ya(this,"isIn",m=>{m=m.split(".").reverse();let J=this;for(;0<m.length;){const Y=m.pop();if(!Y)return!0;
if(J.currentState.id===Y){if(0===m.length)return!0;J=J.currentState}else break}return!1});Ya(this,"isInAny",(...m)=>m.some(this.isIn));Ya(this,"forwardEvent",(m,...J)=>{var Y,ia;(null==(ia=null==(Y=this.currentState)?void 0:Y._events)?0:ia[m])&&Dc(()=>{var ta;return null==(ta=this.currentState._events)?void 0:ta[m](...J)})});Ya(this,"_events",{onTransition:m=>{var J;null==(J=this.onTransition)?void 0:J.call(this,m)},onEnter:m=>{var J;this._isActive=!0;this.initial&&this.transition(this.initial,m);
null==(J=this.onEnter)?void 0:J.call(this,m)},onExit:m=>{var J,Y,ia;this._isActive=!1;null==(Y=null==(J=this.currentState)?void 0:J.onExit)?void 0:Y.call(J,{toId:"parent"});null==(ia=this.onExit)?void 0:ia.call(this,m)},onWheel:(m,J)=>{var Y;null==(Y=this.onWheel)?void 0:Y.call(this,m,J);this.forwardEvent("onWheel",m,J)},onPointerDown:(m,J)=>{var Y;null==(Y=this.onPointerDown)?void 0:Y.call(this,m,J);this.forwardEvent("onPointerDown",m,J)},onPointerUp:(m,J)=>{var Y;null==(Y=this.onPointerUp)?void 0:
Y.call(this,m,J);this.forwardEvent("onPointerUp",m,J)},onPointerMove:(m,J)=>{var Y;null==(Y=this.onPointerMove)?void 0:Y.call(this,m,J);this.forwardEvent("onPointerMove",m,J)},onPointerEnter:(m,J)=>{var Y;null==(Y=this.onPointerEnter)?void 0:Y.call(this,m,J);this.forwardEvent("onPointerEnter",m,J)},onPointerLeave:(m,J)=>{var Y;null==(Y=this.onPointerLeave)?void 0:Y.call(this,m,J);this.forwardEvent("onPointerLeave",m,J)},onDoubleClick:(m,J)=>{var Y;null==(Y=this.onDoubleClick)?void 0:Y.call(this,m,
J);this.forwardEvent("onDoubleClick",m,J)},onKeyDown:(m,J)=>{var Y;this._events.onModifierKey(m,J);null==(Y=this.onKeyDown)?void 0:Y.call(this,m,J);this.forwardEvent("onKeyDown",m,J)},onKeyUp:(m,J)=>{var Y;this._events.onModifierKey(m,J);null==(Y=this.onKeyUp)?void 0:Y.call(this,m,J);this.forwardEvent("onKeyUp",m,J)},onPinchStart:(m,J)=>{var Y;null==(Y=this.onPinchStart)?void 0:Y.call(this,m,J);this.forwardEvent("onPinchStart",m,J)},onPinch:(m,J)=>{var Y;null==(Y=this.onPinch)?void 0:Y.call(this,
m,J);this.forwardEvent("onPinch",m,J)},onPinchEnd:(m,J)=>{var Y;null==(Y=this.onPinchEnd)?void 0:Y.call(this,m,J);this.forwardEvent("onPinchEnd",m,J)},onModifierKey:(m,J)=>{switch(J.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,J)}}});Ya(this,"onEnter");Ya(this,"onExit");Ya(this,"onTransition");Ya(this,"onWheel");Ya(this,"onPointerDown");Ya(this,"onPointerUp");Ya(this,"onPointerMove");Ya(this,"onPointerEnter");Ya(this,"onPointerLeave");Ya(this,"onDoubleClick");
Ya(this,"onKeyDown");Ya(this,"onKeyUp");Ya(this,"onPinchStart");Ya(this,"onPinch");Ya(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>
[b,...b.descendants])}setCurrentState(b){this.currentState=b}};Ya(nr,"id");Ya(nr,"shortcuts");Ec([tg],nr.prototype,"currentState",2);Ec([rg],nr.prototype,"setCurrentState",1);var pv=class extends nr{constructor(b,g){var m,J;super();Ya(this,"registerKeyboardShortcuts",()=>{var Y;null!=(Y=this._shortcuts)&&Y.length&&this._disposables.push(...this._shortcuts.map(({keys:ia,fn:ta})=>wl.registerShortcut(ia,Ka=>{this.isActive&&ta(this.root,this,Ka)})))});Ya(this,"_root");Ya(this,"_parent");Ya(this,"_shortcuts",
[]);Ya(this,"children",new Map([]));Ya(this,"registerStates",Y=>{Y.forEach(ia=>this.children.set(ia.id,new ia(this,this._root)));return this});Ya(this,"deregisterStates",Y=>{Y.forEach(ia=>{var ta;null==(ta=this.children.get(ia.id))?void 0:ta.dispose();this.children.delete(ia.id)});return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(m=this.initial)?m:this.states[0].id,m=this.children.get(b))&&(this.setCurrentState(m),null==(J=this.currentState)?
void 0:J._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;vf(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};Ya(pv,"cursor");var Op=class extends pv{constructor(){super(...arguments);Ya(this,"isLocked",!1);Ya(this,"previous");Ya(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});
Ya(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Ei=class extends pv{get app(){return this.root}get tool(){return this.parent}},Xx=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","crosshair");Ya(this,"creatingShape");Ya(this,"aspectRatio");Ya(this,"initialBounds",{});Ya(this,"onEnter",()=>{const {currentPage:b,
inputs:{originPoint:g,currentPoint:m}}=this.app;var {Shape:J}=this.tool;J=new J({id:Fg(),type:J.id,parentId:b.id,point:[...g],size:pe.abs(pe.sub(m,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};J.canChangeAspectRatio||(J.aspectRatio?(this.aspectRatio=J.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=J;this.app.currentPage.addShapes(J);this.app.setSelectedShapes([J])});Ya(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:m,shiftKey:J}=this.app.inputs;b=rf.getTransformedBoundingBox(b,"bottom_right_corner",pe.sub(g,m),0,J||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,
b.height]})}});Ya(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.settings.isToolLocked||this.app.transition("select");this.app.persist()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Ya(Xx,"id","creating");var Yx=
class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ya(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ya(Yx,"id","idle");var Zx=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Ya(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ya(Zx,"id","pointing");var kp=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","crosshair")}};Ya(kp,"id","box");Ya(kp,"states",[Yx,Zx,Xx]);Ya(kp,"initial","idle");var $x=class extends Ei{constructor(){super(...arguments);Ya(this,"shape",{});Ya(this,"points",[[0,0,.5]]);Ya(this,"onEnter",
()=>{var b;const {Shape:g,previousShape:m}=this.tool;var {originPoint:J}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&m){this.shape=m;var {shape:Y}=this;var ia=Y.props.points[Y.props.points.length-1];const Ka=yd.sub(J,Y.props.point).concat(null!=(b=J[2])?b:.5);this.points=[...Y.props.points,ia,ia];const Za=Math.ceil(yd.dist(ia,J)/16);for(let db=0,sb=db/(Za-1);db<Za;db++){b=this.points;J=b.push;Y=yd.lrp(ia,Ka,sb);var ta=ia[2];J.call(b,Y.concat.call(Y,ta+(Ka[2]-ta)*sb))}this.addNextPoint(Ka)}else this.tool.previousShape=
void 0,this.points=[[0,0,null!=(ia=J[2])?ia:.5]],this.shape=new g({id:Fg(),type:g.id,parentId:this.app.currentPage.id,point:J.slice(0,2),points:this.points,isComplete:!1}),this.app.currentPage.addShapes(this.shape)});Ya(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:m}=this.app.inputs;yd.isEqual(m,g)||this.addNextPoint(yd.sub(g,b.props.point).concat(g[2]))});Ya(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();
this.shape.update({isComplete:!0,points:this.tool.simplify?Nj.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,m=yd.min(b,
[0,0]);this.points.push(b);0>m[0]||0>m[1]?(this.points=this.points.map(J=>yd.sub(J,m).concat(J[2])),g.update({point:yd.add(g.props.point,m),points:this.points})):g.update({points:this.points})}};Ya($x,"id","creating");var ay=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Ya(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?
void 0:m.call(g,...b)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ya(ay,"id","idle");var qs=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","crosshair");Ya(this,"simplify",!0);Ya(this,"simplifyTolerance",1);Ya(this,"previousShape")}};Ya(qs,"id","draw");Ya(qs,"states",[ay,$x]);Ya(qs,"initial","idle");var by=class extends Ei{constructor(){super(...arguments);Ya(this,"points",[[0,0,.5]]);Ya(this,"hitShapes",new Set);Ya(this,"onEnter",
()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});Ya(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;yd.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(g,b)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Ya(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});Ya(this,"onWheel",
(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Ya(by,"id","erasing");var cy=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ya(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Ya(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ya(cy,"id","idle");var dy=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Ya(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];
this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};Ya(dy,"id","pointing");var Gt=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","crosshair")}};Ya(Gt,"id","erase");Ya(Gt,"states",[cy,dy,by]);Ya(Gt,"initial","idle");var lv=class extends Ei{constructor(){super(...arguments);Ya(this,"handle",{});Ya(this,"handleId","end");Ya(this,"currentShape",{});Ya(this,"initialShape",{});Ya(this,"bindableShapeIds",[]);Ya(this,"startBindingShapeId");Ya(this,
"newStartBindingId","");Ya(this,"draggedBindingId","");Ya(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:m,currentPoint:J,modKey:Y,altKey:ia}}=this.app;var ta=this.app.getShapeById(this.initialShape.id),{handles:Ka}=this.initialShape,Za=this.handleId,db="start"===this.handleId?"end":"start";if(!pe.isEqual(g,J)){var sb=pe.sub(J,m);if(b){var xb=Ka[db].point,Wb=pe.add(Ka[Za].point,sb),kc=pe.angle(xb,Wb);xb=pe.rotWith(Wb,xb,al.snapAngleToSegments(kc,24)-kc);sb=pe.add(sb,
pe.sub(xb,Wb))}sb=pe.add(Ka[Za].point,sb);Ka={[Za]:Ga(Qa({},Ka[Za]),{point:pe.toFixed(sb),bindingId:void 0})};var Ob=this.currentShape.getHandlesChange(this.initialShape,Ka);if(Ob){Ka=Tc(ta.props,Ob);var sc={},lc;Za=Ka.handles[Za];db=Ka.handles[db];if(this.startBindingShapeId){var Sb;if(sb=this.app.getShapeById(this.startBindingShapeId)){Wb=sb.getCenter();xb=Ka.handles.end;var rc=pe.add(Ka.handles.start.point,Ka.point);pe.isEqual(rc,Wb)&&rc[1]++;kc=sb.hitTestPoint(J);rc=pe.uni(pe.sub(rc,Wb));const Kc=
void 0!==this.app.currentPage.bindings[this.newStartBindingId];Y||sb.hitTestPoint(pe.add(Ka.point,xb.point))||(Sb=Gb(ta.props,sb,"start",this.newStartBindingId,Wb,Wb,rc,kc));Sb&&!Kc?(sc[this.newStartBindingId]=Sb,Ka.handles.start.bindingId=Sb.id):!Sb&&Kc&&(console.log("removing start binding"),delete sc[this.newStartBindingId],Ka.handles.start.bindingId=void 0)}}if(!Y){Sb=pe.add(db.point,Ka.point);db=pe.add(Za.point,Ka.point);Za=pe.uni(pe.sub(db,Sb));const Kc=pe.add(Ka.point,Ka.handles.start.point),
Gc=pe.add(Ka.point,Ka.handles.end.point);sb=this.bindableShapeIds.map(Xc=>this.app.getShapeById(Xc)).sort((Xc,$d)=>$d.nonce-Xc.nonce).filter(Xc=>![Kc,Gc].every($d=>Xc.hitTestPoint($d)));for(const Xc of sb)if(lc=Gb(ta.props,Xc,this.handleId,this.draggedBindingId,db,Sb,Za,ia))break}lc?(sc[this.draggedBindingId]=lc,Ka=Tc(Ka,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(ta=ta.props.handles[this.handleId].bindingId,void 0!==ta&&(delete sc[ta],Ka=Tc(Ka,{handles:{[this.handleId]:{bindingId:void 0}}})));
Ob=this.currentShape.getHandlesChange(Ka,Ka.handles);Dc(()=>{var Kc;if(Ob){this.currentShape.update(Ob);this.app.currentPage.updateBindings(sc);const Gc=Object.values(null!=(Kc=Ob.handles)?Kc:{}).map(Xc=>Xc.bindingId).map(Xc=>this.app.currentPage.bindings[Xc]).filter(Boolean).flatMap(Xc=>[Xc.toId,Xc.fromId].filter(Boolean));this.app.setBindingShapes(Gc)}})}}});Ya(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.settings.isToolLocked||
this.app.transition("select");this.app.persist()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};Ya(lv,"id","creating");var Px=class extends lv{constructor(){super(...arguments);Ya(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=Fg();this.draggedBindingId=
Fg();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:m}=this.app.inputs;g=new g(Ga(Qa({},g.defaultProps),{id:Fg(),type:g.id,parentId:this.app.currentPage.id,point:m}));this.initialShape=me(g.props,new Map);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(J=>this.app.getShapeById(J)).filter(J=>Nj.pointInBounds(m,J.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),
1),this.app.setBindingShapes([this.startBindingShapeId])})}};Ya(Px,"id","creating");var Qx=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ya(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Ya(this,"onPointerEnter",
b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});Ya(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Ya(Qx,"id","idle");var Rx=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&(this.tool.transition("creating"),
this.app.setSelectedShapes(this.app.currentPage.shapes))})}};Ya(Rx,"id","pointing");var Et=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","crosshair")}};Ya(Et,"id","line");Ya(Et,"states",[Qx,Rx,Px]);Ya(Et,"initial","idle");var Sx=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","crosshair");Ya(this,"creatingShape");Ya(this,"aspectRatio");Ya(this,"initialBounds",{});Ya(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:m}=this.tool,
J=new m({id:Fg(),type:m.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0});this.creatingShape=J;Dc(()=>{this.app.currentPage.addShapes(J);const {bounds:Y}=J;J.update({point:pe.sub(g,[Y.width/2,Y.height/2])});this.app.transition("select");this.app.setSelectedShapes([J]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};Ya(Sx,"id","creating");var Tx=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>
{b.order||this.tool.transition("creating")});Ya(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ya(Tx,"id","idle");var Ft=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","crosshair")}};Ya(Ft,"id","box");Ya(Ft,"states",[Tx,Sx]);Ya(Ft,"initial","idle");var uC=Cc(xa()),
vC=class extends uC.default{constructor(){super(...arguments);Ya(this,"toBBox",b=>b.rotatedBounds)}},Ux=class extends Ei{constructor(){super(...arguments);Ya(this,"initialSelectedIds",[]);Ya(this,"initialSelectedShapes",[]);Ya(this,"tree",new vC);Ya(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});Ya(this,"onExit",()=>{this.initialSelectedIds=
[];this.tree.clear()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:m,currentPoint:J}}=this.app,Y=rf.getBoundsFromPoints([J,m],0);this.app.setBrush(Y);const ia=this.tree.search(Y).filter(ta=>g?rf.boundsContain(Y,ta.rotatedBounds):ta.hitTestBounds(Y));b?ia.every(ta=>this.initialSelectedShapes.includes(ta))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(ta=>!ia.includes(ta))):this.app.setSelectedShapes(Array.from((new Set([...this.initialSelectedShapes,
...ia])).values())):this.app.setSelectedShapes(ia)});Ya(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Ya(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};Ya(Ux,"id","brushing");var Vx=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",b=>{const {selectedIds:g,selectedShapes:m,inputs:{shiftKey:J}}=this.app;"shape"!==b.type||
m.has(b.shape)||(J?this.app.setSelectedShapes([...Array.from(g.values()),b.shape.id]):this.app.setSelectedShapes([b.shape]))});Ya(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ya(Vx,"id","contextMenu");var Wx=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});Ya(this,"onExit",()=>{this.app.setHoveredShape(void 0)});Ya(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);
break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});Ya(this,"onPointerDown",(b,g)=>{const {selectedShapes:m,inputs:{ctrlKey:J}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(J)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");
break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(m.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:Y,inputs:ia}=this.app;Y&&Nj.pointInBounds(ia.currentPoint,Y)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",
Qa(Qa({},g),b))}});Ya(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ya(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit&&Nj.pointInBounds(this.app.inputs.currentPoint,g.bounds))switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===this.app.selectedShapesArray.length&&
this.tool.transition("editingShape",{type:"shape",target:g})}}});Ya(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};Ya(Wx,"id","idle");var ey=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",b=>{const {selectedIds:g,inputs:{shiftKey:m}}=this.app;m?this.app.setSelectedShapes([...Array.from(g.values()),
b.shape.id]):this.app.setSelectedShapes([b.shape])});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("translating")});Ya(this,"onPointerUp",()=>{this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(ey,"id","pointingShape");var fy=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","move");Ya(this,
"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("translating")});Ya(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(fy,"id","pointingBoundsBackground");var gy=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;
g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("brushing")});Ya(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});
Ya(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};Ya(gy,"id","pointingCanvas");var hy=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","move");Ya(this,"isCloning",!1);Ya(this,"didClone",!1);Ya(this,"initialPoints",{});Ya(this,"initialShapePoints",{});Ya(this,"initialClonePoints",{});Ya(this,"clones",[]);Ya(this,"onEnter",()=>{var b;this.app.history.pause();const {selectedShapesArray:g,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=
Object.fromEntries(g.map(({id:J,props:{point:Y}})=>[J,Y.slice()]));document.querySelectorAll("input,textarea").forEach(J=>J.blur());null==(b=document.getSelection())?void 0:b.empty();m.altKey?this.startCloning():this.moveSelectedShapesToPointer()});Ya(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,
"onPointerMove",()=>{this.moveSelectedShapesToPointer()});Ya(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ya(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.selectedShapes.forEach(m=>{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});Ya(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");
const {currentPage:m,selectedShapes:J}=this.app;m.removeShapes(...J);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {selectedShapes:b,inputs:{shiftKey:g,originPoint:m,currentPoint:J}}=this.app,{initialPoints:Y}=this,ia=yd.sub(J,m);g&&(Math.abs(ia[0])<Math.abs(ia[1])?ia[0]=0:ia[1]=0);Dc(()=>{b.forEach(ta=>ta.update({point:yd.add(Y[ta.id],ia)}))})}startCloning(){this.didClone||
(this.clones=this.app.selectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(Ga(Qa({},b.serialized),{id:Fg(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.selectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;
this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0;this.moveSelectedShapesToPointer()}};Ya(hy,"id","translating");var iy=class extends Ei{constructor(){super(...arguments);Ya(this,"pointedSelectedShape");Ya(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});Ya(this,"onExit",()=>{this.pointedSelectedShape=void 0});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",
()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("translating")});Ya(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:m}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&
this.pointedSelectedShape instanceof On&&Nj.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(iy,"id","pointingSelectedShape");var jy=class extends Ei{constructor(){super(...arguments);Ya(this,"info",{});Ya(this,"onEnter",b=>
{this.info=b;this.updateCursor()});Ya(this,"onExit",()=>{this.app.cursors.reset()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("resizing",this.info)});Ya(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(ip[this.info.handle],
this.app.selectionBounds.rotation)}};Ya(jy,"id","pointingResizeHandle");var ky=class extends Ei{constructor(){super(...arguments);Ya(this,"isSingle",!1);Ya(this,"handle","bottom_right_corner");Ya(this,"snapshots",{});Ya(this,"initialCommonBounds",{});Ya(this,"selectionRotation",0);Ya(this,"resizeType","corner");Ya(this,"onEnter",b=>{var g,m;const {history:J,selectedShapesArray:Y,selectionBounds:ia}=this.app;if(!ia)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===
b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(ky.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);J.pause();const ta=rf.getBoundsFromPoints(Y.map(Ka=>rf.getBoundsCenter(Ka.bounds)));this.selectionRotation=(this.isSingle=1===Y.length)?null!=(m=Y[0].props.rotation)?m:0:0;this.initialCommonBounds=Qa({},ia);this.snapshots=Object.fromEntries(Y.map(Ka=>{const Za=Qa({},Ka.bounds),
[db,sb]=rf.getBoundsCenter(Za);return[Ka.id,{props:Ka.serialized,bounds:Za,transformOrigin:[(db-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(sb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(db-ta.minX)/ta.width,(sb-ta.minY)/ta.height],isAspectRatioLocked:Ka.props.isAspectRatioLocked||!(Ka.canChangeAspectRatio&&!Ka.props.rotation)}]}));Y.forEach(Ka=>{var Za;null==(Za=Ka.onResizeStart)?void 0:Za.call(Ka,{isSingle:this.isSingle})})});Ya(this,
"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:m,originPoint:J,currentPoint:Y}}=this.app,{handle:ia,snapshots:ta,initialCommonBounds:Ka}=this;let Za=yd.sub(Y,J);b&&(Za=yd.mul(Za,2));const db=this.app.selectedShapes.values().next().value;let sb=rf.getTransformedBoundingBox(Ka,ia,Za,this.selectionRotation,
g||this.isSingle&&(m?!("clipping"in db.props):!db.canChangeAspectRatio||db.props.isAspectRatioLocked));b&&(sb=Qa(Qa({},sb),rf.centerBounds(sb,rf.getBoundsCenter(Ka))));const {scaleX:xb,scaleY:Wb}=sb;this.app.selectedShapes.forEach(kc=>{var Ob,sc;const {props:lc,bounds:Sb,transformOrigin:rc}=ta[kc.id];let Kc=rf.getRelativeTransformedBoundingBox(sb,Ka,Sb,0>xb,0>Wb);if(kc.canResize.some($d=>$d)||kc.props.isSizeLocked||!this.isSingle){var Gc=[xb,Wb],Xc=null!=(Ob=lc.rotation)?Ob:0;Ob=rf.getBoundsCenter(Kc);
kc.canFlip||(Gc=yd.abs(Gc));kc.canScale||(Gc=null!=(sc=lc.scale)?sc:[1,1]);if(Xc&&0>xb&&0<=Wb||0>Wb&&0<=xb)Xc*=-1;kc.onResize(lc,{center:Ob,rotation:Xc,scale:Gc,bounds:Kc,type:ia,clip:m,transformOrigin:rc})}});this.updateCursor(xb,Wb)});Ya(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(Qa({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(b,
g){var m,J,Y,ia;const ta=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":ta||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(J=this.app.selectionBounds)?void 0:J.rotation);break;case "top_right_corner":case "bottom_left_corner":ta||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(Y=this.app.selectionBounds)?void 0:Y.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ia=this.app.selectionBounds)?void 0:ia.rotation)}}},mv=ky;Ya(mv,"id","resizing");Ya(mv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var ly=class extends Ei{constructor(){super(...arguments);
Ya(this,"cursor","rotate");Ya(this,"handle","");Ya(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});Ya(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",
{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(ip[this.handle],this.app.selectionRotation)}};Ya(ly,"id","pointingRotateHandle");var my=class extends Ei{constructor(){super(...arguments);Ya(this,"info",{});Ya(this,"onEnter",b=>{this.info=b});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("translating")});Ya(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=
this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(my,"id","pointingShapeBehindBounds");var nv=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","rotate");Ya(this,"snapshot",{});Ya(this,"initialCommonCenter",[0,0]);Ya(this,"initialCommonBounds",{});Ya(this,"initialAngle",0);Ya(this,
"initialSelectionRotation",0);Ya(this,"handle","");Ya(this,"onEnter",b=>{const {history:g,selectedShapesArray:m,selectionBounds:J}=this.app;if(!J)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Qa({},J);this.initialCommonCenter=rf.getBoundsCenter(J);this.initialAngle=yd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(Y=>[Y.id,{point:[...Y.props.point],
center:[...Y.center],rotation:Y.props.rotation,handles:"handles"in Y?Pq(Y.handles):void 0}]));this.updateCursor()});Ya(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:m}}=this.app,{snapshot:J,initialCommonCenter:Y,initialAngle:ia,initialSelectionRotation:ta}=this;let Ka=yd.angle(Y,m)-ia;g&&(Ka=al.snapAngleToSegments(Ka,24));b.forEach(db=>{var sb=
J[db.id];let xb=0;if(g){var {rotation:Wb=0}=sb;xb=al.snapAngleToSegments(Wb,24)-Wb}const kc=yd.sub(sb.center,sb.point);Wb=yd.rotWith(sb.center,Y,Ka);if("handles"in db){sb=sb.handles;const Ob=sb.map(lc=>yd.rotWith(lc.point,kc,Ka)),sc=rf.getCommonTopLeft(Ob);db.update({point:yd.add(sc,yd.sub(Wb,kc)),handles:sb.map((lc,Sb)=>Ga(Qa({},lc),{point:yd.sub(Ob[Sb],sc)}))})}else db.update({point:yd.sub(Wb,kc),rotation:al.clampRadians((sb.rotation||0)+Ka+xb)})});const Za=al.clampRadians(ta+Ka);this.app.setSelectionRotation(g?
al.snapAngleToSegments(Za,24):Za);this.updateCursor()});Ya(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(ip[this.handle],this.app.selectionRotation)}};Ya(nv,"id","rotating");var ny=class extends Ei{constructor(){super(...arguments);Ya(this,"onPinch",
(b,g)=>{const {camera:m}=this.app.viewport;var {deltaY:J}=g,Y=0;if(g.ctrlKey||g.metaKey)Y=Math.sign(g.deltaY),10<Math.abs(g.deltaY)&&(J=10*Y),Y=J;g=.01*Y;0!==g&&this.app.viewport.pinchCamera(b.point,[0,0],m.zoom-g*m.zoom)});Ya(this,"onPinchEnd",()=>{this.tool.transition("idle")});Ya(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ya(ny,"id","pinching");var oy=class extends lv{constructor(){super(...arguments);Ya(this,"cursor","grabbing");Ya(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=
Fg();this.draggedBindingId=Fg();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=me(this.currentShape.props,new Map);this.app.setSelectedShapes([this.currentShape])})}};Ya(oy,"id","translatingHandle");var Hx=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","grabbing");Ya(this,"info",{});Ya(this,"onEnter",b=>{this.info=b});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<yd.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});Ya(this,"onPointerUp",()=>{this.tool.transition("idle")});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(Hx,"id","pointingHandle");var Ix=class extends Ei{constructor(){super(...arguments);Ya(this,"handle");Ya(this,"onEnter",b=>{var g;this.app.cursors.setCursor(ip[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});Ya(this,"onExit",
()=>{this.app.cursors.reset()});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ya(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",b)}}});Ya(this,"onPointerLeave",
()=>{this.tool.transition("idle")});Ya(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(m.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=m.onResetBounds)?void 0:g.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:m})}else m.onResetBounds({asset:m.props.assetId?this.app.assets[m.props.assetId]:
void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};Ya(Ix,"id","hoveringSelectionHandle");var Jx=class extends Ei{constructor(){super(...arguments);Ya(this,"editingShape",{});Ya(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});Ya(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):
(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ya(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Dc(()=>
{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};Ya(Jx,"id","editingShape");var Kx=class extends Ei{constructor(){super(...arguments);Ya(this,"minimapZoom",1);Ya(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Ya(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&m){const J=g.getBoundingClientRect();this.minimapRect.height=
J.height;this.minimapRect.width=J.width;this.minimapRect.minX=J.left;this.minimapRect.minY=J.top;this.minimapRect.maxX=J.right;this.minimapRect.maxY=J.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=yd.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=yd.mul(yd.sub(b,[m.left+m.width/2,m.top+m.height/2]),this.minimapZoom);return yd.sub(this.app.viewport.camera.point,m)}});Ya(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?
this.app.viewport.update({point:b}):this.tool.transition("idle")});Ya(this,"onWheel",(b,g)=>{this.onPointerMove(b,g)});Ya(this,"onPointerMove",(b,g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});Ya(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ya(Kx,"id","pointingMinimap");var lr=class extends Op{constructor(){super(...arguments);Ya(this,"returnTo","");Ya(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};Ya(lr,"id","select");Ya(lr,
"initial","idle");Ya(lr,"shortcut",["1"]);Ya(lr,"states",[Wx,Ux,Vx,gy,ey,my,iy,fy,Ix,jy,ly,Kx,Hx,oy,hy,mv,nv,nv,ny,Jx]);var Lx=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","grabbing");Ya(this,"originalScreenPoint",[]);Ya(this,"originalCameraPoint",[]);Ya(this,"prevState","idle");Ya(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});Ya(this,"onPointerMove",
(b,g)=>{b=pe.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:pe.sub(this.originalCameraPoint,pe.div(b,this.app.viewport.camera.zoom))})});Ya(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};Ya(Lx,"id","panning");var Mx=class extends Ei{constructor(){super(...arguments);Ya(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};Ya(Mx,"id","idle");var Nx=class extends Ei{constructor(){super(...arguments);Ya(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});Ya(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ya(Nx,"id","idleHold");
var Ox=class extends Ei{constructor(){super(...arguments);Ya(this,"origin",[0,0]);Ya(this,"prevDelta",[0,0]);Ya(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Ya(this,"onPinch",b=>{this.app.viewport.pinchCamera(b.point,[0,0],b.offset[0])});Ya(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ya(Ox,"id","pinching");var mr=class extends Op{constructor(){super(...arguments);Ya(this,"cursor","grab");Ya(this,"prevTool",null);Ya(this,"onEnter",b=>{this.prevTool=null==b?
void 0:b.prevTool});Ya(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ya(mr,"id","move");Ya(mr,"shortcut",["2"]);Ya(mr,"states",[Mx,Nx,Lx,Ox]);Ya(mr,"initial","idle");var zm=class{constructor(b,g={}){Ya(this,"lastShapesNounces",null);Ya(this,"app");Ya(this,"id");Ya(this,"name");Ya(this,"shapes",[]);Ya(this,"bindings",{});Ya(this,"nonce",0);Ya(this,"bump",()=>{this.nonce++});Ya(this,"bringForward",Ka=>{const Za=this.parseShapesArg(Ka);Za.sort((db,sb)=>this.shapes.indexOf(sb)-
this.shapes.indexOf(db)).map(db=>this.shapes.indexOf(db)).forEach(db=>{if(db!==this.shapes.length-1&&!Za.includes(this.shapes[db+1])){var sb=this.shapes[db];this.shapes[db]=this.shapes[db+1];this.shapes[db+1]=sb}});this.app.persist();return this});Ya(this,"sendBackward",Ka=>{const Za=this.parseShapesArg(Ka);Za.sort((db,sb)=>this.shapes.indexOf(db)-this.shapes.indexOf(sb)).map(db=>this.shapes.indexOf(db)).forEach(db=>{if(0!==db&&!Za.includes(this.shapes[db-1])){var sb=this.shapes[db];this.shapes[db]=
this.shapes[db-1];this.shapes[db-1]=sb}});this.app.persist();return this});Ya(this,"bringToFront",Ka=>{const Za=this.parseShapesArg(Ka);this.shapes=this.shapes.filter(db=>!Za.includes(db)).concat(Za);this.app.persist();return this});Ya(this,"sendToBack",Ka=>{const Za=this.parseShapesArg(Ka);this.shapes=Za.concat(this.shapes.filter(db=>!Za.includes(db)));this.app.persist();return this});Ya(this,"flip",(Ka,Za)=>{Ka=this.parseShapesArg(Ka);const db=rf.getCommonBounds(Ka.map(sb=>sb.bounds));Ka.forEach(sb=>
{var xb;const Wb=rf.getRelativeTransformedBoundingBox(db,db,sb.bounds,"horizontal"===Za,"vertical"===Za);if(sb.serialized)sb.onResize(sb.serialized,{bounds:Wb,center:rf.getBoundsCenter(Wb),rotation:null!=(xb=sb.props.rotation)?xb:-0,type:"top_left_corner",scale:sb.canFlip&&sb.props.scale?"horizontal"===Za?[-sb.props.scale[0],1]:[1,-sb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});Ya(this,"getShapeById",Ka=>this.shapes.find(Za=>Za.id===Ka));Ya(this,"cleanup",
Ka=>{Ka=cb(this.bindings,Ka);const Za=new Set;let db=!1,sb=!1;const xb=Pq(this.bindings);Ka.forEach(Wb=>{var kc;if(this.bindings[Wb.id]){var Ob=this.getShapeById(Wb.toId),sc=this.getShapeById(Wb.fromId);Ob&&sc?Za.has(sc.id)||(Wb=this.updateArrowBindings(sc),Za.add(sc.id),Wb&&(sc=Qa(Qa({},sc.props),Wb),db=!0,null==(kc=this.getShapeById(sc.id))?void 0:kc.update(sc,!1,!0))):(delete xb[Wb.id],sb=!0)}});Object.keys(xb).forEach(Wb=>{const kc=this.bindings[Wb];0===this.shapes.filter(Ob=>Ob.id===kc.fromId||
Ob.id===kc.toId).length&&(delete xb[Wb],sb=!0)});sb&&this.update({bindings:xb});(db||sb)&&this.app.persist(!0)});Ya(this,"updateArrowBindings",Ka=>{var Za,db,sb,xb={start:Pq(Ka.props.handles.start),end:Pq(Ka.props.handles.end)},Wb={isBound:!1,handle:Ka.props.handles.start,point:pe.add(Ka.props.handles.start.point,Ka.props.point)},kc={isBound:!1,handle:Ka.props.handles.end,point:pe.add(Ka.props.handles.end.point,Ka.props.point)};if(Ka.props.handles.start.bindingId){var Ob=void 0!==(null==(Za=Ka.props.decorations)?
void 0:Za.start);Za=Ka.props.handles.start;var sc=this.bindings[Ka.props.handles.start.bindingId],lc=this.getShapeById(null==sc?void 0:sc.toId);if(lc){Wb=lc.getBounds();var Sb=lc.getExpandedBounds(),rc=rf.expandBounds(Wb,Ob?sc.distance:1);const {minX:Kc,minY:Gc,width:Xc,height:$d}=Sb,Jd=pe.add([Kc,Gc],pe.mulV([Xc,$d],pe.rotWith(sc.point,[.5,.5],lc.props.rotation||0)));Wb={isBound:!0,hasDecoration:Ob,binding:sc,handle:Za,point:Jd,target:lc,bounds:Wb,expandedBounds:Sb,intersectBounds:rc,center:lc.getCenter()}}}if(Ka.props.handles.end.bindingId&&
(Ob=void 0!==(null==(db=Ka.props.decorations)?void 0:db.end),db=Ka.props.handles.end,Za=this.bindings[Ka.props.handles.end.bindingId],sc=this.getShapeById(null==Za?void 0:Za.toId))){kc=sc.getBounds();lc=sc.getExpandedBounds();Sb=Ob?rf.expandBounds(kc,Za.distance):kc;const {minX:Kc,minY:Gc,width:Xc,height:$d}=lc;rc=pe.add([Kc,Gc],pe.mulV([Xc,$d],pe.rotWith(Za.point,[.5,.5],sc.props.rotation||0)));kc={isBound:!0,hasDecoration:Ob,binding:Za,handle:db,point:rc,target:sc,bounds:kc,expandedBounds:lc,intersectBounds:Sb,
center:sc.getCenter()}}for(const Kc of["end","start"]){db="start"===Kc?Wb:kc;const Gc="start"===Kc?kc:Wb;if(db.isBound)if(db.binding.distance){if(Ob=pe.uni(pe.sub(db.point,Gc.point)),Za=B(Gc.point,Ob,db.intersectBounds,db.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]).sort((Xc,$d)=>pe.dist(Xc,Gc.point)-pe.dist($d,Gc.point)),Za[0])if(sc=void 0,Gc.isBound&&(sc=B(Gc.point,Ob,Gc.intersectBounds,Gc.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]).sort((Xc,
$d)=>pe.dist(Xc,Gc.point)-pe.dist($d,Gc.point))[0]),Gc.isBound&&(2>Za.length||sc&&Za[0]&&10>Math.ceil(pe.dist(Za[0],sc))||rf.boundsContain(db.expandedBounds,Gc.expandedBounds)||rf.boundsCollide(db.expandedBounds,Gc.expandedBounds)))Ob=pe.uni(pe.sub(Gc.point,db.point)),Za=B(db.point,Ob,db.bounds,db.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]),Za[0]&&(xb[Kc].point=pe.toFixed(pe.sub(Za[0],Ka.props.point)),xb["start"===Kc?"end":"start"].point=pe.toFixed(pe.add(pe.sub(Za[0],
Ka.props.point),pe.mul(Ob,Math.min(pe.dist(Za[0],Gc.point),10*(rf.boundsContain(Gc.bounds,db.intersectBounds)?-1:1))))));else{if(!Gc.isBound&&(Za[0]&&10>pe.dist(Za[0],Gc.point)||Nj.pointInBounds(Gc.point,db.intersectBounds)))return xb=pe.uni(pe.sub(db.center,Gc.point)),null==(sb=Ka.getHandlesChange)?void 0:sb.call(Ka,Ka.props,{[Kc]:Ga(Qa({},Ka.props.handles[Kc]),{point:pe.toFixed(pe.add(pe.sub(Gc.point,Ka.props.point),pe.mul(xb,10)))})});Za[0]&&(xb[Kc].point=pe.toFixed(pe.sub(Za[0],Ka.props.point)))}}else xb[Kc].point=
pe.sub(db.point,Ka.props.point)}return Ka.getHandlesChange(Ka.props,xb)});const {id:m,name:J,shapes:Y=[],bindings:ia={},nonce:ta}=g;this.id=m;this.name=J;this.bindings=Object.assign({},ia);this.app=b;this.nonce=ta||0;this.addShapes(...Y);vf(this);cd(()=>{const Ka=0<this.shapes.length?Object.fromEntries(this.shapes.map(Za=>[Za.id,Za.nonce])):null;if(this.lastShapesNounces&&Ka){const Za=this.lastShapesNounces,db=[...(new Set([...Object.keys(Ka),...Object.keys(Za)]))].filter(sb=>Za[sb]!==Ka[sb]);requestAnimationFrame(()=>
{this.cleanup(db)})}Ka&&(this.lastShapesNounces=Ka)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>me(b,new Map)),bindings:Pq(this.bindings),nonce:this.nonce}}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===
typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(m=>!g.includes(m));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};Ec([tg],zm.prototype,"id",2);Ec([tg],zm.prototype,"name",2);Ec([tg],zm.prototype,"shapes",2);Ec([tg],zm.prototype,"bindings",2);Ec([V],zm.prototype,"serialized",1);Ec([tg],zm.prototype,"nonce",2);Ec([rg],zm.prototype,"bump",2);Ec([rg],
zm.prototype,"update",1);Ec([rg],zm.prototype,"updateBindings",1);Ec([rg],zm.prototype,"addShapes",1);Ec([rg],zm.prototype,"removeShapes",1);Ec([rg],zm.prototype,"bringForward",2);Ec([rg],zm.prototype,"sendBackward",2);Ec([rg],zm.prototype,"bringToFront",2);Ec([rg],zm.prototype,"sendToBack",2);Ec([rg],zm.prototype,"cleanup",2);var yk=class{constructor(){Ya(this,"shiftKey",!1);Ya(this,"ctrlKey",!1);Ya(this,"modKey",!1);Ya(this,"altKey",!1);Ya(this,"spaceKey",!1);Ya(this,"isPinching",!1);Ya(this,"currentScreenPoint",
[0,0]);Ya(this,"currentPoint",[0,0]);Ya(this,"previousScreenPoint",[0,0]);Ya(this,"previousPoint",[0,0]);Ya(this,"originScreenPoint",[0,0]);Ya(this,"originPoint",[0,0]);Ya(this,"pointerIds",new Set);Ya(this,"state","idle");Ya(this,"containerOffset",[0,0]);Ya(this,"onWheel",(b,g)=>{this.updateModifiers(g);this.previousPoint=this.currentPoint;this.currentPoint=b;this.state="panning"});Ya(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;
this.originPoint=b;this.state="pointing"});Ya(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});Ya(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});Ya(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});Ya(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=
!1}});Ya(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});Ya(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});Ya(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});vf(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){"clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=pe.sub([b.clientX,b.clientY],this.containerOffset));"shiftKey"in
b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=Lg()?b.metaKey:b.ctrlKey)}};Ec([tg],yk.prototype,"shiftKey",2);Ec([tg],yk.prototype,"ctrlKey",2);Ec([tg],yk.prototype,"modKey",2);Ec([tg],yk.prototype,"altKey",2);Ec([tg],yk.prototype,"spaceKey",2);Ec([tg],yk.prototype,"isPinching",2);Ec([tg],yk.prototype,"currentScreenPoint",2);Ec([tg],yk.prototype,"currentPoint",2);Ec([tg],yk.prototype,"previousScreenPoint",2);Ec([tg],yk.prototype,"previousPoint",2);Ec([tg],yk.prototype,
"originScreenPoint",2);Ec([tg],yk.prototype,"originPoint",2);Ec([tg],yk.prototype,"state",2);Ec([tg],yk.prototype,"containerOffset",2);Ec([rg],yk.prototype,"updateContainerOffset",1);Ec([rg],yk.prototype,"updateModifiers",1);Ec([rg],yk.prototype,"onWheel",2);Ec([rg],yk.prototype,"onPointerDown",2);Ec([rg],yk.prototype,"onPointerMove",2);Ec([rg],yk.prototype,"onPointerUp",2);Ec([rg],yk.prototype,"onKeyDown",2);Ec([rg],yk.prototype,"onKeyUp",2);Ec([rg],yk.prototype,"onPinchStart",2);Ec([rg],yk.prototype,
"onPinch",2);Ec([rg],yk.prototype,"onPinchEnd",2);var Dt=class{constructor(){Ya(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Ya(this,"camera",{point:[0,0],zoom:1});Ya(this,"updateBounds",b=>{this.bounds=b;return this});Ya(this,"panCamera",b=>this.update({point:yd.sub(this.camera.point,yd.div(b,this.camera.zoom))}));Ya(this,"update",({point:b,zoom:g})=>{void 0!==b&&(this.camera.point=b);void 0!==g&&(this.camera.zoom=g);return this});Ya(this,"_currentView",{minX:0,minY:0,
maxX:1,maxY:1,width:1,height:1});Ya(this,"getPagePoint",b=>{const {camera:g,bounds:m}=this;return yd.sub(yd.div(yd.sub(b,[m.minX,m.minY]),g.zoom),g.point)});Ya(this,"getScreenPoint",b=>{const {camera:g}=this;return yd.mul(yd.add(b,g.point),g.zoom)});Ya(this,"pinchCamera",(b,g,m)=>{var {camera:J}=this;m=Math.max(Dt.minZoom,Math.min(Dt.maxZoom,m));g=yd.sub(J.point,yd.div(g,J.zoom));J=yd.sub(yd.div(b,J.zoom),g);b=yd.sub(yd.div(b,m),g);return this.update({point:yd.toFixed(yd.add(g,yd.sub(b,J))),zoom:m})});
Ya(this,"setZoom",b=>{const {bounds:g}=this;this.pinchCamera([g.width/2,g.height/2],[0,0],b)});Ya(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8)});Ya(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom)});Ya(this,"resetZoom",()=>{const {bounds:b,camera:{zoom:g,point:m}}=this;var J=[b.width/2,b.height/2];const Y=yd.sub(yd.div(J,g),m);J=yd.sub(yd.div(J,1),m);return this.update({point:yd.toFixed(yd.add(m,yd.sub(J,Y))),zoom:1})});Ya(this,"zoomToBounds",({width:b,height:g,
minX:m,minY:J})=>{const {bounds:Y,camera:ia}=this;let ta=Math.min((Y.width-100)/b,(Y.height-100)/g);ta=Math.min(1,Math.max(Dt.minZoom,ia.zoom===ta||1>ia.zoom?Math.min(1,ta):ta));return this.update({point:yd.add([-m,-J],[(Y.width-b*ta)/2/ta,(Y.height-g*ta)/2/ta]),zoom:ta})});vf(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:m}}=this,J=b.width/m,Y=b.height/m;return{minX:-g[0],minY:-g[1],maxX:J-g[0],maxY:Y-g[1],width:J,height:Y}}},Xo=Dt;Ya(Xo,"minZoom",.1);Ya(Xo,"maxZoom",4);Ec([tg],Xo.prototype,
"bounds",2);Ec([tg],Xo.prototype,"camera",2);Ec([rg],Xo.prototype,"updateBounds",2);Ec([rg],Xo.prototype,"update",2);Ec([V],Xo.prototype,"currentView",1);var rC=class{constructor(b){Ya(this,"app");Ya(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});Ya(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});Ya(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});Ya(this,"updateShapes",(...g)=>{this.app.updateShapes(g);
return this});Ya(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});Ya(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});Ya(this,"deselectShapes",(...g)=>{const m="string"===typeof g[0]?g:g.map(J=>J.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(J=>!m.includes(J.id)));return this});Ya(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});Ya(this,"flipVertical",(...g)=>{this.app.flipVertical(g);
return this});Ya(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes);return this});Ya(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});Ya(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Ya(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});Ya(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Ya(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=rf.getCommonBounds(g.map(m=>m.bounds));
this.app.viewport.zoomToBounds(g);return this});Ya(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=rf.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.update({point:pe.add(pe.neg(rf.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});Ya(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});Ya(this,"resetZoomToCursor",
()=>{this.app.viewport.update({zoom:1,point:pe.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Ya(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});Ya(this,"toggleToolLock",()=>{const {settings:g}=this.app;g.update({showGrid:!g.isToolLocked});return this});Ya(this,"save",()=>{this.app.save();return this});Ya(this,"saveAs",()=>{this.app.save();return this});Ya(this,"undo",()=>{this.app.undo();return this});Ya(this,"redo",
()=>{this.app.redo();return this});Ya(this,"createNewLineBinding",(g,m)=>this.app.createNewLineBinding(g,m));this.app=b}},kr=class{constructor(){Ya(this,"cursor","default");Ya(this,"rotation",0);Ya(this,"reset",()=>{this.cursor="default"});Ya(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});Ya(this,"setRotation",b=>{b!==this.rotation&&(this.rotation=b)});vf(this)}};Ec([tg],kr.prototype,"cursor",2);Ec([tg],kr.prototype,"rotation",2);Ec([rg],kr.prototype,
"reset",2);Ec([rg],kr.prototype,"setCursor",2);Ec([rg],kr.prototype,"setRotation",2);var sC=(b,g)=>{b=Mf(b.pages[0],"nonce");g=Mf(g.pages[0],"nonce");return!(0,Gx.default)(b,g)},Ao=class{constructor(b){Ya(this,"app");Ya(this,"stack",[]);Ya(this,"pointer",0);Ya(this,"isPaused",!0);Ya(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Ya(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});Ya(this,"reset",()=>{this.stack=[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",
null)});Ya(this,"persist",(g=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:m}=this.app;0<this.stack.length&&!sC(this.stack[this.pointer],m)||(g?this.stack[this.pointer]=m:(this.pointer<this.stack.length&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(m),this.pointer=this.stack.length-1),this.app.pages.forEach(J=>J.bump()),this.app.notify("persist",null))}});Ya(this,"setPointer",g=>{this.pointer=g;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});
Ya(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});Ya(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&this.setPointer(this.pointer+1)});Ya(this,"deserialize",g=>{Dc(()=>{var m,{pages:J}=g;const Y=this.isPaused;this.pause();const ia=[...this.app.selectedIds];try{const ta=new Map(this.app.pages),Ka=[];for(const Za of J){const db=ta.get(Za.id);if(void 0!==db){const sb=new Map(db.shapes.map(xb=>
[xb.props.id,xb]));J=[];for(const xb of Za.shapes){const Wb=sb.get(xb.id);if(void 0!==Wb)Wb.nonce!==xb.nonce&&(Wb.update(xb,!0),Wb.nonce=xb.nonce,Wb.setLastSerialized(xb)),sb.delete(xb.id);else{const kc=new (this.app.getShapeClass(xb.type))(xb);J.push(kc)}}0<sb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&db.removeShapes(...sb.values());0<J.length&&db.addShapes(...J);ta.delete(Za.id);db.updateBindings(Za.bindings);db.nonce=null!=(m=Za.nonce)?m:0}else{const {id:sb,name:xb,shapes:Wb,
bindings:kc,nonce:Ob}=Za;Ka.push(new zm(this.app,{id:sb,name:xb,nonce:Ob,bindings:kc,shapes:Wb.map(sc=>new (this.app.getShapeClass(sc.type))(sc))}))}}0<Ka.length&&this.app.addPages(Ka);0<ta.size&&this.app.removePages(Array.from(ta.values()));this.app.setSelectedShapes(ia).setErasingShapes([])}catch(ta){console.warn(ta)}Y||this.resume()})});this.app=b;vf(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}get canUndo(){return 0<this.pointer}get canRedo(){return this.pointer<
this.stack.length-1}};Ec([tg],Ao.prototype,"stack",2);Ec([tg],Ao.prototype,"pointer",2);Ec([V],Ao.prototype,"canUndo",1);Ec([V],Ao.prototype,"canRedo",1);Ec([rg],Ao.prototype,"reset",2);Ec([rg],Ao.prototype,"persist",2);Ec([rg],Ao.prototype,"setPointer",2);Ec([rg],Ao.prototype,"undo",2);Ec([rg],Ao.prototype,"redo",2);Ec([rg],Ao.prototype,"deserialize",2);var ps=class{constructor(){Ya(this,"mode","light");Ya(this,"showGrid",!0);Ya(this,"isToolLocked",!1);vf(this)}update(b){Object.assign(this,b)}};
Ec([tg],ps.prototype,"mode",2);Ec([tg],ps.prototype,"showGrid",2);Ec([tg],ps.prototype,"isToolLocked",2);Ec([rg],ps.prototype,"update",1);var ph=class extends nr{constructor(b,g,m){var J,Y;super();Ya(this,"keybindingRegistered",!1);Ya(this,"uuid",Fg());Ya(this,"api");Ya(this,"inputs",new yk);Ya(this,"cursors",new kr);Ya(this,"viewport",new Xo);Ya(this,"settings",new ps);Ya(this,"Tools",[]);Ya(this,"history",new Ao(this));Ya(this,"persist",this.history.persist);Ya(this,"undo",this.history.undo);Ya(this,
"redo",this.history.redo);Ya(this,"saving",!1);Ya(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});Ya(this,"load",()=>{this.notify("load",null);return this});Ya(this,"save",()=>{this.notify("save",null);return this});Ya(this,"saveAs",()=>{this.notify("saveAs",null);return this});Ya(this,"pages",new Map([["page",new zm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));Ya(this,"getPageById",ia=>{const ta=
this.pages.get(ia);if(!ta)throw Error(`Could not find a page named ${ia}.`);return ta});Ya(this,"getShapeById",(ia,ta=this.currentPage.id)=>{var Ka;return null==(Ka=this.getPageById(ta))?void 0:Ka.shapes.find(Za=>Za.id===ia)});Ya(this,"createShapes",ia=>{(ia=this.currentPage.addShapes(...ia))&&this.notify("create-shapes",ia);this.persist();return this});Ya(this,"updateShapes",ia=>{ia.forEach(ta=>{var Ka;return null==(Ka=this.getShapeById(ta.id))?void 0:Ka.update(ta)});this.persist();return this});
Ya(this,"deleteShapes",ia=>{if(0===ia.length)return this;let ta;ta="string"===typeof ia[0]?new Set(ia):new Set(ia.map(Ka=>Ka.id));this.setSelectedShapes(this.selectedShapesArray.filter(Ka=>!ta.has(Ka.id)));(ia=this.currentPage.removeShapes(...ia))&&this.notify("delete-shapes",ia);this.persist();return this});Ya(this,"bringForward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringForward(ia);return this});Ya(this,"sendBackward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendBackward(ia);
return this});Ya(this,"sendToBack",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendToBack(ia);return this});Ya(this,"bringToFront",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringToFront(ia);return this});Ya(this,"flipHorizontal",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"horizontal");return this});Ya(this,"flipVertical",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"vertical");return this});Ya(this,"align",(ia,ta=this.selectedShapesArray)=>
{if(2>ta.length)return this;const Ka=ta.map(Wb=>{const kc=Wb.getBounds();return{id:Wb.id,point:[kc.minX,kc.minY],bounds:kc}}),Za=rf.getCommonBounds(Ka.map(({bounds:Wb})=>Wb)),db=Za.minX+Za.width/2,sb=Za.minY+Za.height/2,xb=Object.fromEntries(Ka.map(({id:Wb,point:kc,bounds:Ob})=>[Wb,{prev:kc,next:{top:[kc[0],Za.minY],centerVertical:[kc[0],sb-Ob.height/2],bottom:[kc[0],Za.maxY-Ob.height],left:[Za.minX,kc[1]],centerHorizontal:[db-Ob.width/2,kc[1]],right:[Za.maxX-Ob.width,kc[1]]}[ia]}]));ta.forEach(Wb=>
{xb[Wb.id]&&Wb.update({point:xb[Wb.id].next})});this.persist();return this});Ya(this,"distribute",(ia,ta=this.selectedShapesArray)=>{if(2>ta.length)return this;const Ka=Object.fromEntries(rf.getDistributions(ta,ia).map(Za=>[Za.id,Za]));ta.forEach(Za=>{Ka[Za.id]&&Za.update({point:Ka[Za.id].next})});this.persist();return this});Ya(this,"packIntoRectangle",(ia=this.selectedShapesArray)=>{if(2>ia.length)return this;const ta=Object.fromEntries(rf.getPackedDistributions(ia).map(Ka=>[Ka.id,Ka]));ia.forEach(Ka=>
{ta[Ka.id]&&Ka.update({point:ta[Ka.id].next})});this.persist();return this});Ya(this,"assets",{});Ya(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){var ia=JSON.stringify({shapes:this.selectedShapesArray.map(ta=>ta.serialized),assets:this.getCleanUpAssets().filter(ta=>this.selectedShapesArray.some(Ka=>Ka.props.assetId===ta.id)),bindings:me(this.currentPage.bindings,new Map)});ia=`<whiteboard-tldr>${encodeURIComponent(ia)}</whiteboard-tldr>`;navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ia],
{type:"text/html"})})])}});Ya(this,"paste",(ia,ta)=>{var Ka;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!ta,dataTransfer:null!=(Ka=null==ia?void 0:ia.clipboardData)?Ka:void 0})});Ya(this,"cut",()=>{this.copy();this.api.deleteShapes()});Ya(this,"drop",(ia,ta)=>{this.notify("drop",{dataTransfer:ia,point:ta?this.viewport.getPagePoint(ta):rf.getBoundsCenter(this.viewport.currentView)})});Ya(this,"selectTool",this.transition);Ya(this,"editingId");Ya(this,"setEditingShape",
ia=>{this.editingId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ya(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});Ya(this,"hoveredId");Ya(this,"setHoveredShape",ia=>{this.hoveredId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ya(this,"selectedIds",new Set);Ya(this,"selectedShapes",new Set);Ya(this,"selectionRotation",0);Ya(this,"setSelectedShapes",ia=>{var ta;const {selectedIds:Ka,selectedShapes:Za}=this;Ka.clear();
Za.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(sb=>Ka.add(sb)):ia.forEach(sb=>Ka.add(sb.id));const db=this.currentPage.shapes.filter(sb=>Ka.has(sb.id));db.forEach(sb=>Za.add(sb));this.selectionRotation=1===db.length?null!=(ta=db[0].props.rotation)?ta:0:0;0===ia.length&&this.setEditingShape();return this});Ya(this,"erasingIds",new Set);Ya(this,"erasingShapes",new Set);Ya(this,"setErasingShapes",ia=>{const {erasingIds:ta,erasingShapes:Ka}=this;ta.clear();Ka.clear();ia[0]&&"string"===typeof ia[0]?
ia.forEach(Za=>ta.add(Za)):ia.forEach(Za=>ta.add(Za.id));this.currentPage.shapes.filter(Za=>ta.has(Za.id)).forEach(Za=>Ka.add(Za));return this});Ya(this,"bindingIds");Ya(this,"setBindingShapes",ia=>{this.bindingIds=ia;return this});Ya(this,"clearBindingShape",()=>this.setBindingShapes());Ya(this,"createNewLineBinding",(ia,ta)=>{ia="string"===typeof ia?this.getShapeById(ia):ia;ta="string"===typeof ta?this.getShapeById(ta):ta;if((null==ia?0:ia.canBind)&&(null==ta?0:ta.canBind)&&(ta=jc(ia,ta))){const [Ka,
Za]=ta;this.createShapes([Ka]);this.currentPage.updateBindings(Object.fromEntries(Za.map(db=>[db.id,db])));this.persist();return!0}return!1});Ya(this,"brush");Ya(this,"setBrush",ia=>{this.brush=ia;return this});Ya(this,"setCamera",(ia,ta)=>{this.viewport.update({point:ia,zoom:ta});return this});Ya(this,"getPagePoint",ia=>{const {camera:ta}=this.viewport;return yd.sub(yd.div(ia,ta.zoom),ta.point)});Ya(this,"getScreenPoint",ia=>{const {camera:ta}=this.viewport;return yd.mul(yd.add(ia,ta.point),ta.zoom)});
Ya(this,"Shapes",new Map);Ya(this,"registerShapes",ia=>{ia.forEach(ta=>this.Shapes.set(ta.id,ta))});Ya(this,"deregisterShapes",ia=>{ia.forEach(ta=>this.Shapes.delete(ta.id))});Ya(this,"getShapeClass",ia=>{if(!ia)throw Error("No shape type provided.");const ta=this.Shapes.get(ia);if(!ta)throw Error(`Could not find shape class for ${ia}`);return ta});Ya(this,"wrapUpdate",ia=>{Dc(()=>{const ta=!this.history.isPaused;ta&&this.history.pause();ia();ta&&(this.history.resume(),this.persist())})});Ya(this,
"subscriptions",new Set([]));Ya(this,"subscribe",(ia,ta)=>{if(void 0===ta)throw Error("Callback is required.");const Ka={event:ia,callback:ta};this.subscriptions.add(Ka);return()=>this.unsubscribe(Ka)});Ya(this,"unsubscribe",ia=>{this.subscriptions.delete(ia);return this});Ya(this,"notify",(ia,ta)=>{this.subscriptions.forEach(Ka=>{Ka.event===ia&&Ka.callback(this,ta)});return this});Ya(this,"onTransition",()=>{this.settings.update({isToolLocked:!1})});Ya(this,"onWheel",(ia,ta)=>{ta.ctrlKey||ta.metaKey||
this.isIn("select.contextMenu")||(this.viewport.panCamera(ia.delta),this.inputs.onWheel([...this.viewport.getPagePoint([ta.clientX,ta.clientY]),.5],ta))});Ya(this,"onPointerDown",(ia,ta)=>{if(!this.editingShape&&1===ta.button&&!this.isIn("move"))this.temporaryTransitionToMove(ta);else if(2===ta.button)this.transition("select");else if("clientX"in ta)this.inputs.onPointerDown([...this.viewport.getPagePoint([ta.clientX,ta.clientY]),.5],ta)});Ya(this,"onPointerUp",(ia,ta)=>{if(!this.editingShape&&1===
ta.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),ta.stopPropagation(),ta.preventDefault();else if("clientX"in ta)this.inputs.onPointerUp([...this.viewport.getPagePoint([ta.clientX,ta.clientY]),.5],ta)});Ya(this,"onPointerMove",(ia,ta)=>{if("clientX"in ta)this.inputs.onPointerMove([...this.viewport.getPagePoint([ta.clientX,ta.clientY]),.5],ta)});Ya(this,"onKeyDown",(ia,ta)=>{if(this.editingShape||" "!==ta.key||this.isIn("move"))this.inputs.onKeyDown(ta);else this.temporaryTransitionToMove(ta)});
Ya(this,"onKeyUp",(ia,ta)=>{if(!this.editingShape&&" "===ta.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),ta.stopPropagation(),ta.preventDefault();else this.inputs.onKeyUp(ta)});Ya(this,"onPinchStart",(ia,ta)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ia.point),.5],ta)});Ya(this,"onPinch",(ia,ta)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ia.point),.5],ta)});Ya(this,"onPinchEnd",(ia,ta)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ia.point),
.5],ta)});this._states=[lr,mr];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const ia=null!=(J=this.initial)?J:this.states[0].id;if(J=this.children.get(ia))this.currentState=J,null==(Y=this.currentState)?void 0:Y._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);m&&this.registerTools(m);this.history.resume();b&&this.history.deserialize(b);this.api=new rC(this);vf(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=
!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(m=>m.constructor.shortcut).map(m=>({keys:m.constructor.shortcut,fn:(J,Y,ia)=>{this.transition(m.id);ia.stopPropagation()}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",
fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:m}=this;"select"!==m.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",
fn:(m,J,Y)=>{this.editingShape||(Y.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.api.deleteShapes();this.selectedTool.transition("idle")}},...b,...g].map(({keys:m,fn:J})=>wl.registerShortcut(m,Y=>{J(this,this,Y)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(b=>
b.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();return this}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);
this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>g.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&b.add(this.assets[m.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(m=>
m.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}setSelectionRotation(b){this.selectionRotation=b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(J=>{var Y;return Object.values(null!=(Y=
J.props.handles)?Y:{})}).flatMap(J=>J.bindingId).filter(Nh).flatMap(J=>{var Y,ia;return[null==(Y=this.currentPage.bindings[J])?void 0:Y.fromId,null==(ia=this.currentPage.bindings[J])?void 0:ia.toId]}).filter(Nh):[],m=[...(null!=(b=this.bindingIds)?b:[]),...g];return m?this.currentPage.shapes.filter(J=>null==m?void 0:m.includes(J.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,
currentPage:g,viewport:{currentView:m}}=this;return g.shapes.filter(J=>!J.canUnmount||b.has(J)||rf.boundsContain(m,J.rotatedBounds)||rf.boundsCollide(m,J.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&!rf.boundsContain(g,b)&&!rf.boundsCollide(g,b)){var m=rf.getBoundsCenter(b);return yd.clampV([(m[0]-g.minX-g.width/2)/g.width,(m[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===
b.length?Ga(Qa({},b[0].bounds),{rotation:b[0].props.rotation}):rf.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>
b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle",
"select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};
Ya(ph,"id","app");Ya(ph,"initial","select");Ec([V],ph.prototype,"serialized",1);Ec([tg],ph.prototype,"pages",2);Ec([V],ph.prototype,"currentPageId",1);Ec([V],ph.prototype,"currentPage",1);Ec([rg],ph.prototype,"addPages",1);Ec([rg],ph.prototype,"removePages",1);Ec([rg],ph.prototype,"createShapes",2);Ec([rg],ph.prototype,"updateShapes",2);Ec([rg],ph.prototype,"deleteShapes",2);Ec([tg],ph.prototype,"assets",2);Ec([rg],ph.prototype,"addAssets",1);Ec([rg],ph.prototype,"removeAssets",1);Ec([V],ph.prototype,
"selectedTool",1);Ec([tg],ph.prototype,"editingId",2);Ec([V],ph.prototype,"editingShape",1);Ec([rg],ph.prototype,"setEditingShape",2);Ec([tg],ph.prototype,"hoveredId",2);Ec([V],ph.prototype,"hoveredShape",1);Ec([rg],ph.prototype,"setHoveredShape",2);Ec([tg],ph.prototype,"selectedIds",2);Ec([tg],ph.prototype,"selectedShapes",2);Ec([tg],ph.prototype,"selectionRotation",2);Ec([V],ph.prototype,"selectedShapesArray",1);Ec([rg],ph.prototype,"setSelectedShapes",2);Ec([rg],ph.prototype,"setSelectionRotation",
1);Ec([tg],ph.prototype,"erasingIds",2);Ec([tg],ph.prototype,"erasingShapes",2);Ec([V],ph.prototype,"erasingShapesArray",1);Ec([rg],ph.prototype,"setErasingShapes",2);Ec([tg],ph.prototype,"bindingIds",2);Ec([V],ph.prototype,"bindingShapes",1);Ec([rg],ph.prototype,"setBindingShapes",2);Ec([rg],ph.prototype,"createNewLineBinding",2);Ec([tg],ph.prototype,"brush",2);Ec([rg],ph.prototype,"setBrush",2);Ec([rg],ph.prototype,"setCamera",2);Ec([V],ph.prototype,"currentGrid",1);Ec([V],ph.prototype,"shapes",
1);Ec([V],ph.prototype,"shapesInViewport",1);Ec([V],ph.prototype,"selectionDirectionHint",1);Ec([V],ph.prototype,"selectionBounds",1);Ec([V],ph.prototype,"showSelection",1);Ec([V],ph.prototype,"showSelectionDetail",1);Ec([V],ph.prototype,"showSelectionRotation",1);Ec([V],ph.prototype,"showContextBar",1);Ec([V],ph.prototype,"showRotateHandles",1);Ec([V],ph.prototype,"showResizeHandles",1);var tC=Cc(Wa()),Gx=Cc(vb()),ND=Cc(bc()),Pq=tC.default,Sn=class{static insertTextFirefox(b,g){b.setRangeText(g,
b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,J=m.activeElement;J!==b&&b.focus();m.execCommand("insertText",!1,g)||Sn.insertTextFirefox(b,g);J===m.body?b.blur():J instanceof HTMLElement&&J!==b&&J.focus()}static set(b,g){b.select();Sn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,
g,m){const {selectionStart:J,selectionEnd:Y}=b,ia=Sn.getSelection(b);Sn.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(J||0)+g.length;b.selectionEnd=(Y||0)+g.length}static replace(b,g,m){let J=0;b.value.replace(g,(...Y)=>{const ia=J+Y[Y.length-2],ta=Y[0].length;b.selectionStart=ia;b.selectionEnd=ia+ta;Y="string"===typeof m?m:m(...Y);Sn.insert(b,Y);b.selectionStart=ia;J+=Y.length-ta;return Y})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;
const {selectionStart:m,selectionEnd:J,value:Y}=b;var ia=Y.slice(m,J);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=Y.lastIndexOf("\n",m-1)+1;var ta=b.value.slice(g,J-1);ia=ta.replace(/^|\n/g,`$&${Sn.INDENT}`);ta=ia.length-ta.length;b.setSelectionRange(g,J-1);Sn.insert(b,ia);b.setSelectionRange(m+1,J+ta)}else Sn.insert(b,Sn.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:m,value:J}=b;var Y=J.lastIndexOf("\n",g-1)+1;const ia=Sn.findLineEnd(J,m);var ta=b.value.slice(Y,ia);
const Ka=ta.replace(/(^|\n)(\t| {1,2})/g,"$1");ta=ta.length-Ka.length;b.setSelectionRange(Y,ia);Sn.insert(b,Ka);Y=(Y=/\t| {1,2}/.exec(J.slice(Y,g)))?Y[0].length:0;b.setSelectionRange(g-Y,Math.max(g-Y,m-ta))}static normalizeText(b){return b.replace(Sn.fixNewLines,"\n")}},Br=Sn;Ya(Br,"fixNewLines",/\r?\n|\r/g);Ya(Br,"INDENT","  ");var rp;"undefined"!==typeof window&&(rp=If());var xv=new Map,Qq=Lg()?"⌘":"Ctrl",PC=class extends ph{},yy=Cc(S(16)),QC=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var zy=Cc(S(16)),yv={},Es=Cc(S(16)),NC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},wv=Cc(S(16)),Kv=new Map,SC={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},RC=((b,...g)=>b.reduce((m,J,Y)=>m+J+(Y<g.length?g[Y]:""),""))`
  .tl-container {
    --tl-cursor: inherit;
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: var(--tl-cursor) !important;
    box-sizing: border-box;
    color: var(--tl-foreground);
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,By=Cc(S(16)),$y=Cc(S(16)),Lv={},Sk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},Gy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},XC=["enter","leave"],WC=["gotpointercapture","lostpointercapture"],
Fy=class{constructor(b,g,m){this.ctrl=b;this.args=g;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:m,args:J}=this;g[m]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=J;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,m=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=m.from?vh(m.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:m,shared:J}=this;g.args=this.args;var Y=0;if(b){g.event=b;m.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;J.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;J.locked=!!document.pointerLockElement;Y=Object;var ia=Y.assign,ta={};"buttons"in b&&(ta.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Gc,altKey:Xc,metaKey:$d,ctrlKey:Jd}=b;Object.assign(ta,{shiftKey:Gc,altKey:Xc,metaKey:$d,ctrlKey:Jd})}ia.call(Y,J,ta);J.down=J.pressed=1===J.buttons%2||0<J.touches;Y=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ia=g._delta.map(Math.abs),Sk.addTo(g._distance,ia));this.axisIntent&&this.axisIntent(b);
const [Ka,Za]=g._movement,[db,sb]=m.threshold,{_step:xb,values:Wb}=g;m.hasCustomTransform?(!1===xb[0]&&(xb[0]=Math.abs(Ka)>=db&&Wb[0]),!1===xb[1]&&(xb[1]=Math.abs(Za)>=sb&&Wb[1])):(!1===xb[0]&&(xb[0]=Math.abs(Ka)>=db&&Math.sign(Ka)*db),!1===xb[1]&&(xb[1]=Math.abs(Za)>=sb&&Math.sign(Za)*sb));g.intentional=!1!==xb[0]||!1!==xb[1];if(g.intentional){ia=[0,0];if(m.hasCustomTransform){const [Gc,Xc]=Wb;ia[0]=!1!==xb[0]?Gc-xb[0]:0;ia[1]=!1!==xb[1]?Xc-xb[1]:0}else ia[0]=!1!==xb[0]?Ka-xb[0]:0,ia[1]=!1!==xb[1]?
Za-xb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ia);ta=g.offset;var kc=g._active&&!g._blocked||g.active;kc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=J[this.ingKey]=g._active,b&&(g.first&&("bounds"in m&&(g._bounds=vh(m.bounds,g)),this.setup&&this.setup()),g.movement=ia,this.computeOffset()));var [Ob,sc]=g.offset,[[lc,Sb],[rc,Kc]]=g._bounds;g.overflow=[Ob<lc?-1:Ob>Sb?1:0,sc<rc?-1:sc>Kc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Xk(g._bounds,g.offset,g._active?m.rubberband||[0,0]:[0,0]);g.delta=Sk.sub(g.offset,ta);this.computeMovement();kc&&(!g.last||32<Y)&&(g.delta=Sk.sub(g.offset,ta),b=g.delta.map(Math.abs),Sk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<Y&&(g.velocity=[b[0]/Y,b[1]/Y]))}}emit(){const b=this.state;var g=this.shared;const m=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||m.triggerAllEvents)g=this.handler(Ah(Ah(Ah({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Gs=class extends Fy{constructor(...b){super(...b);$h(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Sk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Sk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,m=this.config;!g.axis&&b&&(b="object"===typeof m.axisThreshold?m.axisThreshold[gl(b)]:m.axisThreshold,g.axis=ii(g._movement,b));g._blocked=(m.lockDirection||!!m.axis)&&!g.axis||!!m.axis&&m.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},VC=b=>b,Ey={enabled(b=!0){return b},eventOptions(b,g,m){return Ah(Ah({},m.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Sk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Sk.toVector(b)},transform(b,g,m){b=b||m.shared.transform;this.hasCustomTransform=!!b;return b||VC},threshold(b){return Sk.toVector(b,0)}},Sq=Ah(Ah({},Ey),{},{axis(b,g,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ia=>Sq.bounds(b(ia));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:m=Infinity,top:J=-Infinity,bottom:Y=Infinity}=b;return[[g,m],[J,Y]]}}),Hy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},UC=class extends Gs{constructor(...b){super(...b);$h(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),m=b.currentTarget.getBoundingClientRect();b._bounds=Sq.bounds({left:g.left-m.left+b.offset[0],right:g.right-m.right+b.offset[0],top:g.top-m.top+b.offset[1],bottom:g.bottom-m.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,m=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var J=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
J&&1<J.size&&m._pointerActive||(this.start(b),this.setupPointer(b),m._pointerId=Zf(b),m._pointerActive=!0,this.computeValues(Xf(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==gl(b)?(m._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,m=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var J=Zf(b);if(void 0===g._pointerId||J===g._pointerId)J=Xf(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Sk.sub(J,g._values),this.computeValues(J)),Sk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):m.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===m.preventScrollAxis||"xy"===
m.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(ta){}const g=this.state,m=this.config;if(g._active&&g._pointerActive){var J=Zf(b);if(void 0===g._pointerId||J===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [Y,ia]=g._distance;
g.tap=Y<=m.tapsThreshold&&ia<=m.tapsThreshold;if(g.tap&&m.filterTaps)g._force=!0;else{const [ta,Ka]=g.direction,[Za,db]=g.velocity,[sb,xb]=g.movement,[Wb,kc]=m.swipe.velocity,[Ob,sc]=m.swipe.distance;g.elapsedTime<m.swipe.duration&&(Math.abs(Za)>Wb&&Math.abs(sb)>Ob&&(g.swipe[0]=ta),Math.abs(db)>kc&&Math.abs(xb)>sc&&(g.swipe[1]=Ka))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,m=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=Hy[b.key];if(g){const m=this.state,J=b.shiftKey?10:b.altKey?.1:1;this.start(b);m._delta=g(J);m._keyboardActive=!0;Sk.addTo(m._movement,m._delta);this.compute(b);this.emit()}}keyUp(b){b.key in Hy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Rq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Dy="constructor"in GestureEvent}catch(b){Dy=!1}var TC=Dy,Fs=Rq&&"ontouchstart"in window||Rq&&1<window.navigator.maxTouchPoints,zv=Rq&&
"ontouchstart"in window||Rq&&1<window.navigator.maxTouchPoints,Cy=Rq&&"onpointerdown"in window,OD=Rq&&"exitPointerLock"in window.document,Py={mouse:0,touch:0,pen:8},nD=Ah(Ah({},Sq),{},{device(b,g,{pointer:{touch:m=!1,lock:J=!1,mouse:Y=!1}={}}){this.pointerLock=J&&OD;return Fs&&m?"touch":this.pointerLock?"mouse":Cy&&!Y?"pointer":Fs?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:m}){this.preventScrollDelay="number"===typeof m?m:m||void 0===m&&b?250:void 0;if(zv&&!1!==m)return b?b:void 0!==m?
"y":void 0},pointerCapture(b,g,{pointer:{capture:m=!0,buttons:J=1}={}}){this.pointerButtons=J;return!this.pointerLock&&"pointer"===this.device&&m},keys(b=!0){return b},threshold(b,g,{filterTaps:m=!1,tapsThreshold:J=3,axis:Y}){b=Sk.toVector(b,m?J:Y?1:0);this.filterTaps=m;this.tapsThreshold=J;return b},swipe({velocity:b=.5,distance:g=50,duration:m=250}={}){return{velocity:this.transform(Sk.toVector(b)),distance:this.transform(Sk.toVector(g)),duration:m}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Ah(Ah({},Py),b):Py}}),pD=class extends Fy{constructor(...b){super(...b);$h(this,"ingKey","pinching");$h(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:m}=this.state;this.state.offset="wheel"===b?Sk.add(g,m):[(1+g[0])*m[0],g[1]+
m[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,m]=b._movement;if(!b.axis){const J=30*Math.abs(g)-Math.abs(m);0>J?b.axis="angle":0<J&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const m=this.ctrl.touchIds;g._active&&g._touchIds.every(J=>m.has(J))||2>m.size||(this.start(b),g._touchIds=Array.from(m).slice(0,2),g=ok(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,m=g._pointerEvents,J=this.ctrl.pointerIds;g._active&&Array.from(m.keys()).every(Y=>J.has(Y))||(2>m.size&&m.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=Jj(...Array.from(m.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=ok(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=Jj(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const m=this.state,J=g.angle-m._values[1];let Y=0;270<Math.abs(J)&&(Y+=Math.sign(J));
this.computeValues([g.distance,g.angle-360*Y]);m.origin=g.origin;m.turns=Y;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(m){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var m=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Sk.sub(g._movement,
m);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-oj(b)[1]/100*g.offset[0],0];Sk.addTo(g._movement,g._delta);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));b("wheel","",this.wheel.bind(this),{passive:!1})}},qD=Ah(Ah({},Ey),{},{device(b,g,{shared:m,pointer:{touch:J=!1}={}}){if(m.target&&!Fs&&TC)return"gesture";if(Fs&&J)return"touch";
if(zv){if(Cy)return"pointer";if(Fs)return"touch"}},bounds(b,g,{scaleBounds:m={},angleBounds:J={}}){const Y=ta=>{ta=vh(m,ta);ta=Object.assign({},{min:-Infinity,max:Infinity},ta||{});return[ta.min,ta.max]},ia=ta=>{ta=vh(J,ta);ta=Object.assign({},{min:-Infinity,max:Infinity},ta||{});return[ta.min,ta.max]};return"function"!==typeof m&&"function"!==typeof J?[Y(),ia()]:ta=>[Y(ta),ia(ta)]},threshold(b,g,m){this.lockDirection="lock"===m.axis;return Sk.toVector(b,this.lockDirection?[.1,3]:0)},modifierKey(b){return void 0===
b?"ctrlKey":b}}),rD=class extends Gs{constructor(...b){super(...b);$h(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(Xf(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=Xf(b),m=this.state;m._delta=Sk.sub(g,m._values);Sk.addTo(m._movement,m._delta);this.computeValues(g);
this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},sD=Ah(Ah({},Sq),{},{mouseOnly:(b=!0)=>b}),tD=class extends Gs{constructor(...b){super(...b);$h(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();
const g=this.state;var m,J;const {scrollX:Y,scrollY:ia,scrollLeft:ta,scrollTop:Ka}=b.currentTarget;var Za=[null!==(m=null!==Y&&void 0!==Y?Y:ta)&&void 0!==m?m:0,null!==(J=null!==ia&&void 0!==ia?ia:Ka)&&void 0!==J?J:0];g._delta=Sk.sub(Za,g._values);Sk.addTo(g._movement,g._delta);this.computeValues(Za);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll","",this.scroll.bind(this))}},uD=Sq,vD=class extends Gs{constructor(...b){super(...b);
$h(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=oj(b);Sk.addTo(g._movement,g._delta);const [m,J]=g.overflow,[Y,ia]=g._delta,[ta,Ka]=g._direction;if(0>m&&0<Y&&0>ta||0<m&&0>Y&&0<ta)g._movement[0]=g._movementBound[0];if(0>J&&0<ia&&0>Ka||0<J&&0>ia&&0<Ka)g._movement[1]=g._movementBound[1];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=
!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},wD=Sq,xD=class extends Gs{constructor(...b){super(...b);$h(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(Xf(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var m=Xf(b);g._movement=g._delta=Sk.sub(m,g._values);this.computeValues(m);this.compute(b);g.delta=g.movement;
this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},yD=Ah(Ah({},Sq),{},{mouseOnly:(b=!0)=>b}),Ev=new Map,Dv=new Map,mD={key:"drag",engine:UC,resolver:nD},zD={key:"hover",engine:xD,resolver:yD},oD={key:"move",engine:rD,resolver:sD},kD={key:"pinch",engine:pD,resolver:qD},lD={key:"scroll",engine:tD,resolver:uD},hD={key:"wheel",engine:vD,resolver:wD},Cv=Cc(S(16)),iD={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=
Rq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},fD=["target","eventOptions","window","enabled","transform"],Ny=class{constructor(b,g){$h(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,m,J,Y){const ia=this._listeners,ta=Tj(g,m),Ka=Ah(Ah({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),Y);b.addEventListener(ta,J,Ka);const Za=()=>{b.removeEventListener(ta,J,Ka);ia.delete(Za)};ia.add(Za);
return Za}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},dD=class{constructor(){$h(this,"_timeouts",new Map)}add(b,g,m=140,...J){this.remove(b);this._timeouts.set(b,window.setTimeout(g,m,...J))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},eD=class{constructor(b){$h(this,"gestures",new Set);$h(this,"_targetEventStore",new Ny(this));$h(this,"gestureEventStores",{});$h(this,"gestureTimeoutStores",
{});$h(this,"handlers",{});$h(this,"config",{});$h(this,"pointerIds",new Set);$h(this,"touchIds",new Set);$h(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&mh(this,"drag");b.wheel&&mh(this,"wheel");b.scroll&&mh(this,"scroll");b.move&&mh(this,"move");b.pinch&&mh(this,"pinch");b.hover&&mh(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Yj(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):
"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=g}applyConfig(b,g){this.config=Ek(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const m={};let J;if(g.target&&(J=g.target(),!J))return;if(g.enabled){for(const Y of this.gestures){const ia=
this.config[Y],ta=My(m,ia.eventOptions,!!J);ia.enabled&&(new (Ev.get(Y))(this,b,Y)).bind(ta)}g=My(m,g.eventOptions,!!J);for(const Y in this.nativeHandlers)g(Y,"",ia=>this.nativeHandlers[Y](Ah(Ah({},this.state.shared),{},{event:ia,args:b})),void 0,!0)}for(const Y in m)m[Y]=pk(...m[Y]);if(!J)return m;for(const Y in m){const {device:ia,capture:ta,passive:Ka}=nk(Y);this._targetEventStore.add(J,ia,"",m[Y],{capture:ta,passive:Ka})}}},My=(b,g,m)=>(J,Y,ia,ta={},Ka=!1)=>{var Za,db;const sb=null!==(Za=ta.capture)&&
void 0!==Za?Za:g.capture;ta=null!==(db=ta.passive)&&void 0!==db?db:g.passive;J=Ka?J:ql(J,Y,sb);m&&ta&&(J+="Passive");b[J]=b[J]||[];b[J].push(ia)},bD=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,cD=Cc(S(16)),Av=Cc(S(16)),Ly=Cc(S(16)),Ky=Cc(S(16)),$C=Cc(S(16)),aD=Cc(S(16)),ZC=Cc(S(16)),sp=Cc(S(16)),Fo={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>Jh('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>Jh("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>Jh("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>Jh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>Jh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>Jh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>Jh("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>Jh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>Jh("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>Jh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>Jh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>Jh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>Jh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>Jh('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},jD=Cc(S(16));Cc(S(16));var Jy=S(16),Iy=Cc(S(16));if(!S(16).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!vf)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var PD=S(25),Hs=Cc(S(16)),Bv="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,Oy=1E4,gD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,m=g&&b[g],J=0;if(m)return m.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&J>=
b.length&&(b=void 0);return{value:b&&b[J++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Lt=Bv?wj(Bv):pi(),Mt=Lt.addReactionToTrack,BD=Lt.recordReactionAsCommitted,az=function(b,g){var m="function"===typeof Symbol&&b[Symbol.iterator];if(!m)return b;b=m.call(b);var J,Y=[];try{for(;(void 0===g||0<g--)&&!(J=b.next()).done;)Y.push(J.value)}catch(ta){var ia={error:ta}}finally{try{J&&!J.done&&(m=b["return"])&&m.call(b)}finally{if(ia)throw ia.error;}}return Y},
JD=function(){return function(){}}(),Er=S(16),bz="function"===typeof Symbol&&Symbol.for,cz=bz?Symbol.for("react.forward_ref"):"function"===typeof Er.forwardRef&&(0,Er.forwardRef)(function(b){return null}).$$typeof,dz=bz?Symbol.for("react.memo"):"function"===typeof Er.memo&&(0,Er.memo)(function(b){return null}).$$typeof,QD={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Wi.displayName="Observer";S(16);S(16);S(16);(function(b){b||=Yk;Pc({reactionScheduler:b})})(PD.unstable_batchedUpdates);
var RD=Cc(S(16));Kb=S(611);var tp=RD.forwardRef(function(b,g){var {children:m,opacity:J,centered:Y,className:ia=""}=b,ta=bb(b,["children","opacity","centered","className"]);return(0,Kb.jsx)(Wi,{children:()=>(0,Kb.jsx)("div",{ref:g,className:`tl-positioned-div ${ia}`,style:J?{opacity:J}:void 0,draggable:!1,children:(0,Kb.jsx)("div",Ga(Qa({className:`tl-positioned-inner ${Y?"tl-centered":""}`},ta),{children:m}))})})}),SD=Cc(S(16));Kb=S(611);var no=SD.forwardRef(function(b,g){var {id:m,className:J="",
style:Y,children:ia}=b,ta=bb(b,["id","className","style","children"]);return(0,Kb.jsx)(Wi,{children:()=>(0,Kb.jsx)("svg",{ref:g,style:Y,className:`tl-positioned-svg ${J}`,children:(0,Kb.jsx)("g",Ga(Qa({id:m,className:"tl-centered-g"},ta),{children:ia}))})})}),Is=Cc(S(16)),ez=Cc(S(16)),Pt=Cc(S(16));Kb=S(611);var Cr=gf(function(b){var {id:g,bounds:m,zIndex:J,rotation:Y=0,className:ia="",children:ta}=b;b=bb(b,"id bounds zIndex rotation className children".split(" "));const Ka=Pt.useRef(null);Pt.useLayoutEffect(()=>
{Ka.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${Y+(m.rotation||0)}rad)`},[m.minX,m.minY,Y,m.rotation]);Pt.useLayoutEffect(()=>{const Za=Ka.current;Za.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Za.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);Pt.useLayoutEffect(()=>{const Za=Ka.current;void 0!==J&&(Za.style.zIndex=J.toString())},[J]);return(0,Kb.jsx)("div",Ga(Qa({id:g,ref:Ka,className:`tl-positioned ${ia}`,"aria-label":"container"},b),{children:ta}))}),
ID=Cc(S(16));Kb=S(611);var Gv=b=>b.stopPropagation(),GD=gf(function({shapes:b,hidden:g,bounds:m,rotation:J=0}){const {components:{ContextBar:Y},viewport:{bounds:ia,camera:{point:[ta,Ka],zoom:Za}}}=Sg(),db=ID.useRef(null);var sb=rf.getRotatedBounds(m,J);sb=rf.multiplyBounds(sb,Za);sl(db,m,J,10003);if(!Y)throw Error("Expected a ContextBar component.");const xb=rf.translateBounds(sb,[ta*Za,Ka*Za]);return(0,Kb.jsx)("div",{ref:db,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",
onPointerMove:Gv,onPointerUp:Gv,onPointerDown:Gv,children:(0,Kb.jsx)(Y,{hidden:g,shapes:b,bounds:m,offsets:{left:xb.minX,right:ia.width-xb.maxX,top:xb.minY,bottom:ia.height-xb.maxY,width:xb.width,height:xb.height},scaledBounds:sb,rotation:J})})}),Xy=Cc(S(16));Kb=S(611);var HD=gf(function({children:b}){const g=Xy.useRef(null),{viewport:m}=Sg();Xy.useEffect(()=>cd(()=>{const J=g.current;if(J){var {zoom:Y,point:ia}=m.camera;J.style.setProperty("transform",`scale(${Y}) translate3d(${ia[0]}px, ${ia[1]}px, 0)`)}}),
[]);return(0,Kb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});Kb=S(611);var Yy=gf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:J=!1,isEditing:Y=!1,meta:ia}){const {bounds:ta,props:{scale:Ka,rotation:Za=0},ReactIndicator:db}=b;return(0,Kb.jsx)(Cr,{"data-type":"Indicator",bounds:ta,rotation:Za,scale:Ka,zIndex:Y?1E3:1E4,children:(0,Kb.jsx)(no,{children:(0,Kb.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"}`,children:(0,Kb.jsx)(db,{isEditing:Y,
isBinding:J,isHovered:g,isSelected:m,isErasing:!1,meta:ia})})})})}),DD=Cc(S(16));Kb=S(611);var ED=gf(function({bounds:b,hidden:g,shapes:m,rotation:J=0,detail:Y="size"}){const {components:{SelectionDetail:ia},viewport:{camera:{zoom:ta}}}=Sg(),Ka=DD.useRef(null),Za=rf.multiplyBounds(b,ta);sl(Ka,b,J,10003);if(!ia)throw Error("Expected a SelectionDetail component.");return(0,Kb.jsx)("div",{ref:Ka,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,Kb.jsx)(ia,
{shapes:m,bounds:b,scaledBounds:Za,zoom:ta,rotation:J,detail:Y})})}),Sy=Cc(S(16));Kb=S(611);var FD=gf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:J=!1,isErasing:Y=!1,isEditing:ia=!1,onEditingEnd:ta,asset:Ka,meta:Za,zIndex:db}){const {bounds:sb,props:{rotation:xb,scale:Wb},ReactComponent:kc}=b,Ob=hn(b);return(0,Kb.jsx)(Cr,{"data-shape-id":b.id,zIndex:db,"data-type":"Shape",bounds:sb,rotation:xb,scale:Wb,children:(0,Kb.jsx)(kc,{meta:Za,isEditing:ia,isBinding:J,isHovered:g,isSelected:m,
isErasing:Y,events:Ob,asset:Ka,onEditingEnd:ta})})});Kb=S(611);var Ty=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],Uy=gf(function({size:b}){const {viewport:{camera:{point:g,zoom:m}}}=Sg();return(0,Kb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kb.jsx)("defs",{children:Ty.map(([J,Y,ia],ta)=>{ia=ia*b*m;var Ka=g[0]*m,Za=g[1]*m;Ka=0<Ka?Ka%ia:ia+Ka%ia;Za=0<Za?Za%ia:ia+Za%ia;J=m<Y?nd(m,[J,Y],[0,1]):1;return(0,Kb.jsx)("pattern",{id:`grid-${ta}`,width:ia,
height:ia,patternUnits:"userSpaceOnUse",children:(0,Kb.jsx)("circle",{className:"tl-grid-dot",cx:Ka,cy:Za,r:1.5,opacity:J})},`grid-pattern-${ta}`)})}),Ty.map((J,Y)=>(0,Kb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${Y})`},`grid-rect-${Y}`))]})});Kb=S(611);var Vy=gf(function({bounds:b}){const g=mg("background");return(0,Kb.jsx)(no,Ga(Qa({},g),{children:(0,Kb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});
S(16);Kb=S(611);var Wy=gf(function({scaledBounds:b,shapes:g,detail:m="size",rotation:J=0}){var Y;const ia=1===g.length?J:null!=(Y=b.rotation)?Y:0;return(0,Kb.jsx)(tp,{centered:!0,children:(0,Kb.jsx)("div",{className:"tl-bounds-detail",style:{transform:ia<wm||ia>3*wm?`rotate(${ia}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ia}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${pe.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:
"size"===m?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${al.radiansToDegrees(al.clampRadians(J)).toFixed()}\xB0`})})});Kb=S(611);var TD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Qt=gf(function({cx:b,cy:g,size:m,targetSize:J,corner:Y,isHidden:ia}){const ta=mg(Y);return(0,Kb.jsxs)("g",Ga(Qa({opacity:ia?0:1},ta),{children:[(0,Kb.jsx)("rect",{className:"tl-transparent "+(ia?"":TD[Y]),"aria-label":`${Y} target`,
x:b-1.25*J,y:g-1.25*J,width:2.5*J,height:2.5*J,pointerEvents:ia?"none":"all"}),(0,Kb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${Y} handle`,x:b-m/2,y:g-m/2,width:m,height:m,pointerEvents:"none"})]}))});Kb=S(611);var CD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Nt=gf(function({x:b,y:g,width:m,height:J,targetSize:Y,edge:ia,disabled:ta,isHidden:Ka}){const Za=mg(ia);return(0,Kb.jsx)("rect",Qa({pointerEvents:Ka||ta?"none":"all",
className:"tl-transparent tl-edge-handle "+(Ka?"":CD[ia]),"aria-label":`${ia} target`,opacity:Ka?0:1,x:b-Y,y:g-Y,width:Math.max(1,m+2*Y),height:Math.max(1,J+2*Y)},Za))});S(16);Kb=S(611);gf(function({cx:b,cy:g,size:m,targetSize:J,isHidden:Y}){const ia=mg("rotate");return(0,Kb.jsxs)("g",Ga(Qa({opacity:Y?0:1},ia),{children:[(0,Kb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:J,pointerEvents:Y?"none":"all"}),(0,Kb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",
cx:b,cy:g,r:m/2,pointerEvents:"none"})]}))});S(16);Kb=S(611);var Rt=gf(function({cx:b,cy:g,targetSize:m,corner:J,isHidden:Y}){const ia=mg(J);return(0,Kb.jsx)("g",Ga(Qa({opacity:Y?0:1},ia),{children:(0,Kb.jsx)("rect",{className:"tl-transparent","aria-label":`${J} target`,x:b-2.5*m,y:g-2.5*m,width:3*m,height:3*m,pointerEvents:Y?"none":"all"})}))});Kb=S(611);var fz=gf(function({bounds:b,showResizeHandles:g,showRotateHandles:m,shapes:J}){var Y,ia,ta=xg();let {width:Ka,height:Za}=b;var db=ta.viewport.camera.zoom;
b=8/db;db=6/db;J=1===J.length?J[0].canResize:[!0,!0];ta=null!=(ia=null==(Y=ta.editingShape)?void 0:Y.props.borderRadius)?ia:0;return(0,Kb.jsxs)(no,{children:[(0,Kb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ka,1),height:Math.max(Za,1),rx:ta,ry:ta,pointerEvents:"none"}),(0,Kb.jsx)(Nt,{x:2*db,y:0,width:Ka-4*db,height:0,targetSize:db,edge:"top_edge",disabled:!J[1],isHidden:!g}),(0,Kb.jsx)(Nt,{x:Ka,y:2*db,width:0,height:Za-4*db,targetSize:db,edge:"right_edge",disabled:!J[0],isHidden:!g}),(0,Kb.jsx)(Nt,
{x:2*db,y:Za,width:Ka-4*db,height:0,targetSize:db,edge:"bottom_edge",disabled:!J[1],isHidden:!g}),(0,Kb.jsx)(Nt,{x:0,y:2*db,width:0,height:Za-4*db,targetSize:db,edge:"left_edge",disabled:!J[0],isHidden:!g}),(0,Kb.jsx)(Rt,{cx:0,cy:0,targetSize:db,corner:"top_left_resize_corner",isHidden:!m}),(0,Kb.jsx)(Rt,{cx:Ka+2*db,cy:0,targetSize:db,corner:"top_right_resize_corner",isHidden:!m}),(0,Kb.jsx)(Rt,{cx:Ka+2*db,cy:Za+2*db,targetSize:db,corner:"bottom_right_resize_corner",isHidden:!m}),(0,Kb.jsx)(Rt,{cx:0,
cy:Za+2*db,targetSize:db,corner:"bottom_left_resize_corner",isHidden:!m}),(null==J?void 0:J.every(sb=>sb))&&(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)(Qt,{cx:0,cy:0,size:b,targetSize:db,corner:"top_left_corner",isHidden:!g}),(0,Kb.jsx)(Qt,{cx:Ka,cy:0,size:b,targetSize:db,corner:"top_right_corner",isHidden:!g}),(0,Kb.jsx)(Qt,{cx:Ka,cy:Za,size:b,targetSize:db,corner:"bottom_right_corner",isHidden:!g}),(0,Kb.jsx)(Qt,{cx:0,cy:Za,size:b,targetSize:db,corner:"bottom_left_corner",isHidden:!g})]})]})});
Kb=S(611);var gz=gf(function({bounds:b}){return(0,Kb.jsx)(Cr,{bounds:b,zIndex:10001,children:(0,Kb.jsx)(no,{children:(0,Kb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});Kb=S(611);gf(function(){return(0,Kb.jsx)(Kb.Fragment,{})});Kb=S(611);var hz=gf(function({shape:b,handle:g,id:m}){b=ai(b,m);const [J,Y]=g.point;return(0,Kb.jsxs)("g",Ga(Qa({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${J}, ${Y})`,children:[(0,Kb.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,Kb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),iz=Cc(S(16));Kb=S(611);var Fv=gf(function({direction:b}){const {viewport:{bounds:g}}=Sg(),m=iz.useRef(null);iz.useLayoutEffect(()=>{const J=m.current;if(J){var Y=[g.width/2,g.height/2],ia=rf.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[ta,Ka]]of ia)ia=c(Y,b,ta,Ka),ia.didIntersect&&(ia=ia.points[0],J.style.setProperty("transform",`translate(${ia[0]-6}px,${ia[1]-6}px) rotate(${pe.toAngle(b)}rad)`))}},
[b,g]);return(0,Kb.jsx)("div",{ref:m,className:"tl-direction-indicator",children:(0,Kb.jsx)("svg",{height:12,width:12,children:(0,Kb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});Kb=S(611);var UD=gf(function({id:b,className:g,brush:m,shapes:J,assets:Y,bindingShapes:ia,editingShape:ta,hoveredShape:Ka,selectionBounds:Za,selectedShapes:db,erasingShapes:sb,selectionDirectionHint:xb,cursor:Wb="default",cursorRotation:kc=0,selectionRotation:Ob=0,showSelection:sc=!0,showHandles:lc=!0,showSelectionRotation:Sb=
!1,showResizeHandles:rc=!0,showRotateHandles:Kc=!0,showSelectionDetail:Gc=!0,showContextBar:Xc=!0,showGrid:$d=!0,gridSize:Jd=8,onEditingEnd:qe=QC,theme:Ye=ul,children:Ge}){var Ve;const ee=Is.useRef(null),{viewport:Gd,components:gd,meta:bd}=Sg(),ud=xg(),zd=Is.useCallback(Ie=>{ud.inputs.updateContainerOffset([Ie.minX,Ie.minY])},[]);Cj(Ye,b);Zj(ee);ff(ee,Gd,zd);Uj(ee);jl();Kh(ee,Wb,kc);hj(ee);yj(ee);b=Dk();const Id=(Wb=1===(null==db?void 0:db.length)&&db[0])&&"handles"in Wb.props?null==db?void 0:db[0]:
void 0,we=Is.useMemo(()=>new Set(db||[]),[db]),ye=Is.useMemo(()=>new Set(sb||[]),[sb]);return(0,Kb.jsxs)("div",{ref:ee,className:`tl-container ${null!=g?g:""}`,children:[(0,Kb.jsxs)("div",Ga(Qa({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[$d&&gd.Grid&&(0,Kb.jsx)(gd.Grid,{size:Jd}),(0,Kb.jsxs)(HD,{children:[gd.SelectionBackground&&db&&Za&&sc&&(0,Kb.jsx)(Cr,{"data-type":"SelectionBackground",bounds:Za,zIndex:2,children:(0,Kb.jsx)(gd.SelectionBackground,{shapes:db,bounds:Za,showResizeHandles:rc,
showRotateHandles:Kc})}),J&&J.map((Ie,uf)=>(0,Kb.jsx)(FD,{shape:Ie,asset:Y&&Ie.props.assetId?Y[Ie.props.assetId]:void 0,isEditing:Ie===ta,isHovered:Ie===Ka,isBinding:null==ia?void 0:ia.includes(Ie),isSelected:we.has(Ie),isErasing:ye.has(Ie),meta:bd,zIndex:1E3+uf,onEditingEnd:qe},"shape_"+Ie.id)),!ud.isIn("select.pinching")&&(null==db?void 0:db.map(Ie=>(0,Kb.jsx)(Yy,{shape:Ie,isEditing:Ie===ta,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+Ie.id))),Ka&&ud.isInAny("creating")&&(0,Kb.jsx)(Yy,
{shape:Ka},"hovered_indicator_"+Ka.id),m&&gd.Brush&&(0,Kb.jsx)(gd.Brush,{bounds:m}),db&&Za&&(0,Kb.jsxs)(Kb.Fragment,{children:[sc&&gd.SelectionForeground&&(0,Kb.jsx)(Cr,{"data-type":"SelectionForeground",bounds:Za,zIndex:ta&&db.includes(ta)?1002:10002,children:(0,Kb.jsx)(gd.SelectionForeground,{shapes:db,bounds:Za,showResizeHandles:rc,showRotateHandles:Kc})}),lc&&Id&&gd.Handle&&(0,Kb.jsx)(Cr,{"data-type":"onlySelectedShapeWithHandles",bounds:Za,zIndex:10003,children:(0,Kb.jsx)(no,{children:Object.entries(null!=
(Ve=Id.props.handles)?Ve:{}).map(([Ie,uf])=>Is.createElement(gd.Handle,{key:`${uf.id}_handle_${uf.id}`,shape:Id,handle:uf,id:Ie}))})}),db&&gd.SelectionDetail&&(0,Kb.jsx)(ED,{shapes:db,bounds:Za,detail:Sb?"rotation":"size",hidden:!Gc,rotation:Ob},"detail"+db.map(Ie=>Ie.id).join("")),db&&gd.ContextBar&&(0,Kb.jsx)(GD,{shapes:db,hidden:!Xc,bounds:1===db.length?db[0].bounds:Za,rotation:1===db.length?db[0].props.rotation:0},"context"+db.map(Ie=>Ie.id).join(""))]})]}),xb&&Za&&db&&(0,Kb.jsx)(Fv,{direction:xb,
bounds:Za,shapes:db}),(0,Kb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),Ge]})}),jz=Cc(S(16)),kz=Cc(S(16));Kb=S(611);gf(function({children:b}){const g=kz.useRef(null),{viewport:m}=Sg();kz.useEffect(()=>cd(()=>{const J=g.current;if(J){var {zoom:Y,point:ia}=m.camera;J.style.setProperty("transform",`scale(${Y}) translateX(${ia[0]}px) translateY(${ia[1]}px)`)}}),[]);return(0,Kb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,Kb.jsx)("g",{ref:g,pointerEvents:"none",
children:b})})});Kb=S(611);var VD=gf(function(b){const g=sk(b),m=ng(b.id);Ii(g,b);Tm(g,b);return(0,Kb.jsx)(m.Provider,{value:g,children:b.children})});Kb=S(611);var WD=gf(function({id:b="noid",viewport:g,inputs:m,callbacks:J=ul,meta:Y=ul,components:ia=ul,children:ta}){const [Ka,Za]=jz.useState(()=>{const {Brush:sb,ContextBar:xb,DirectionIndicator:Wb,Grid:kc,Handle:Ob,SelectionBackground:sc,SelectionDetail:lc,SelectionForeground:Sb}=ia;return{id:b,viewport:g,inputs:m,callbacks:J,meta:Y,components:{Brush:null===
sb?void 0:gz,ContextBar:xb,DirectionIndicator:null===Wb?void 0:Fv,Grid:null===kc?void 0:Uy,Handle:null===Ob?void 0:hz,SelectionBackground:null===sc?void 0:Vy,SelectionDetail:null===lc?void 0:Wy,SelectionForeground:null===Sb?void 0:fz}}});jz.useLayoutEffect(()=>{const {Brush:sb,ContextBar:xb,DirectionIndicator:Wb,Grid:kc,Handle:Ob,SelectionBackground:sc,SelectionDetail:lc,SelectionForeground:Sb}=ia;return cd(()=>{Za({id:b,viewport:g,inputs:m,callbacks:J,meta:Y,components:{Brush:null===sb?void 0:gz,
ContextBar:xb,DirectionIndicator:null===Wb?void 0:Fv,Grid:null===kc?void 0:Uy,Handle:null===Ob?void 0:hz,SelectionBackground:null===sc?void 0:Vy,SelectionDetail:null===lc?void 0:Wy,SelectionForeground:null===Sb?void 0:fz}})})},[]);const db=hi(b);return(0,Kb.jsx)(db.Provider,{value:Ka,children:ta})});Kb=S(611);Kb=S(611);var XD=gf(function(b){const g=xg();return(0,Kb.jsx)(Gk,Qa({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,
bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,
selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},b))});Kb=S(611);var St=Cc(S(16)),Tt=Cc(S(16));Kb=S(611);Kb=S(611);var YD="object-compact object-expanded block block-search page page-search references-hide references-show whiteboard whiteboard-element select-cursor text connector".split(" "),Fi=b=>{var {name:g,className:m}=b;b=bb(b,["name","className"]);const J=YD.includes(g)?"tie tie-":"ti ti-";return(0,Kb.jsx)("i",Qa({className:[J+g,m].join(" ")},b))};Kb=S(611);var lo=S(16),
KD=S(16),Go=S(16),Ot=S(16),Jv=S(16),Hv=S(16),LD=S(25),Km=S(16),Dr=(0,Km.forwardRef)((b,g)=>{var {children:m}=b;b=bb(b,["children"]);const J=Km.Children.toArray(m),Y=J.find(nh);if(Y){const ia=Y.props.children;m=J.map(ta=>ta===Y?1<Km.Children.count(ia)?Km.Children.only(null):(0,Km.isValidElement)(ia)?ia.props.children:null:ta);return(0,Km.createElement)(Iv,ef({},b,{ref:g}),(0,Km.isValidElement)(ia)?(0,Km.cloneElement)(ia,void 0,m):null)}return(0,Km.createElement)(Iv,ef({},b,{ref:g}),m)});Dr.displayName=
"Slot";var Iv=(0,Km.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["children"]);return(0,Km.isValidElement)(m)?(0,Km.cloneElement)(m,Ga(Qa({},Xi(b,m.props)),{ref:uk(g,m.ref)})):1<Km.Children.count(m)?Km.Children.only(null):null});Iv.displayName="SlotClone";var MD=({children:b})=>(0,Km.createElement)(Km.Fragment,null,b),dl="a button div h2 h3 img li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,Hv.forwardRef)((J,Y)=>{var {asChild:ia}=J;J=bb(J,["asChild"]);ia=ia?Dr:g;(0,Hv.useEffect)(()=>
{window[Symbol.for("radix-ui")]=!0},[]);return(0,Hv.createElement)(ia,ef({},J,{ref:Y}))});m.displayName=`Primitive.${g}`;return Ga(Qa({},b),{[g]:m})},{}),Ug=S(16),bp=Cc(S(16)),Zy=S(16),ZD=(0,Zy.createContext)(void 0),An=S(16),$D=S(16),lz,aE=(0,An.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mz=(0,An.forwardRef)((b,g)=>{const {disableOutsidePointerEvents:m=!1,onEscapeKeyDown:J,onPointerDownOutside:Y,onFocusOutside:ia,onInteractOutside:ta,onDismiss:Ka}=
b,Za=bb(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),db=(0,An.useContext)(aE),[sb,xb]=(0,An.useState)(null),[,Wb]=(0,An.useState)({});g=Hg(g,rc=>xb(rc));var kc=Array.from(db.layers),[Ob]=[...db.layersWithOutsidePointerEventsDisabled].slice(-1);Ob=kc.indexOf(Ob);const sc=sb?kc.indexOf(sb):-1;kc=0<db.layersWithOutsidePointerEventsDisabled.size;const lc=sc>=Ob;Ob=vk(rc=>{const Kc=rc.target,Gc=[...db.branches].some(Xc=>Xc.contains(Kc));
lc&&!Gc&&(null===Y||void 0===Y||Y(rc),null===ta||void 0===ta||ta(rc),rc.defaultPrevented||null===Ka||void 0===Ka||Ka())});const Sb=im(rc=>{const Kc=rc.target;[...db.branches].some(Gc=>Gc.contains(Kc))||(null===ia||void 0===ia||ia(rc),null===ta||void 0===ta||ta(rc),rc.defaultPrevented||null===Ka||void 0===Ka||Ka())});Ik(rc=>{sc===db.layers.size-1&&(null===J||void 0===J||J(rc),!rc.defaultPrevented&&Ka&&(rc.preventDefault(),Ka()))});(0,An.useEffect)(()=>{if(sb)return m&&(0===db.layersWithOutsidePointerEventsDisabled.size&&
(lz=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),db.layersWithOutsidePointerEventsDisabled.add(sb)),db.layers.add(sb),fg(),()=>{m&&1===db.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=lz)}},[sb,m,db]);(0,An.useEffect)(()=>()=>{sb&&(db.layers.delete(sb),db.layersWithOutsidePointerEventsDisabled.delete(sb),fg())},[sb,db]);(0,An.useEffect)(()=>{const rc=()=>Wb({});document.addEventListener("dismissableLayer.update",rc);return()=>document.removeEventListener("dismissableLayer.update",
rc)},[]);return(0,An.createElement)(dl.div,ef({},Za,{ref:g,style:Qa({pointerEvents:kc?lc?"auto":"none":void 0},b.style),onFocusCapture:eg(b.onFocusCapture,Sb.onFocusCapture),onBlurCapture:eg(b.onBlurCapture,Sb.onBlurCapture),onPointerDownCapture:eg(b.onPointerDownCapture,Ob.onPointerDownCapture)}))}),bE=S(16),Mv=0,$p=S(16),nz={bubbles:!1,cancelable:!0},oz=(0,$p.forwardRef)((b,g)=>{const {loop:m=!1,trapped:J=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ia}=b;b=bb(b,["loop","trapped","onMountAutoFocus",
"onUnmountAutoFocus"]);const [ta,Ka]=(0,$p.useState)(null),Za=ki(Y),db=ki(ia),sb=(0,$p.useRef)(null);g=Hg(g,kc=>Ka(kc));const xb=(0,$p.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,$p.useEffect)(()=>{if(J){let kc=function(sc){!xb.paused&&ta&&(sc=sc.target,ta.contains(sc)?sb.current=sc:ui(sb.current,{select:!0}))},Ob=function(sc){!xb.paused&&ta&&(ta.contains(sc.relatedTarget)||ui(sb.current,{select:!0}))};document.addEventListener("focusin",kc);document.addEventListener("focusout",
Ob);return()=>{document.removeEventListener("focusin",kc);document.removeEventListener("focusout",Ob)}}},[J,ta,xb.paused]);(0,$p.useEffect)(()=>{if(ta){pz.add(xb);const kc=document.activeElement;if(!ta.contains(kc)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",nz);ta.addEventListener("focusScope.autoFocusOnMount",Za);ta.dispatchEvent(Ob);Ob.defaultPrevented||(Ig(Cf(am(ta)),{select:!0}),document.activeElement===kc&&ui(ta))}return()=>{ta.removeEventListener("focusScope.autoFocusOnMount",Za);
setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",nz);ta.addEventListener("focusScope.autoFocusOnUnmount",db);ta.dispatchEvent(Ob);Ob.defaultPrevented||ui(null!==kc&&void 0!==kc?kc:document.body,{select:!0});ta.removeEventListener("focusScope.autoFocusOnUnmount",db);pz.remove(xb)},0)}}},[ta,Za,db,xb]);const Wb=(0,$p.useCallback)(kc=>{if((m||J)&&!xb.paused){var Ob=document.activeElement;if("Tab"===kc.key&&!kc.altKey&&!kc.ctrlKey&&!kc.metaKey&&Ob){const lc=kc.currentTarget;var sc=
lc;const Sb=am(sc),rc=Nk(Sb,sc);sc=Nk(Sb.reverse(),sc);const [Kc,Gc]=[rc,sc];Kc&&Gc?kc.shiftKey||Ob!==Gc?kc.shiftKey&&Ob===Kc&&(kc.preventDefault(),m&&ui(Gc,{select:!0})):(kc.preventDefault(),m&&ui(Kc,{select:!0})):Ob===lc&&kc.preventDefault()}}},[m,J,xb.paused]);return(0,$p.createElement)(dl.div,ef({tabIndex:-1},b,{ref:g,onKeyDown:Wb}))}),pz=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=kl(b,g);b.unshift(g)},remove(g){var m;b=kl(b,g);null===(m=b[0])||void 0===
m||m.resume()}}}(),qz=Cc(S(16)),cE=S(16),$m=(null===globalThis||void 0===globalThis?0:globalThis.document)?cE.useLayoutEffect:()=>{},dE=qz["useId".toString()]||(()=>{}),eE=0,Lm=S(16),fE=(b,g,m)=>ue(void 0,null,function*(){const {placement:J="bottom",strategy:Y="absolute",middleware:ia=[],platform:ta}=m,Ka=yield null==ta.isRTL?void 0:ta.isRTL(g);let Za=yield ta.getElementRects({reference:b,floating:g,strategy:Y}),{x:db,y:sb}=Gm(Za,J,Ka),xb=J,Wb={},kc=0;for(let Ob=0;Ob<ia.length;Ob++){const {name:sc,
fn:lc}=ia[Ob],{x:Sb,y:rc,data:Kc,reset:Gc}=yield lc({x:db,y:sb,initialPlacement:J,placement:xb,strategy:Y,middlewareData:Wb,rects:Za,platform:ta,elements:{reference:b,floating:g}});db=null!=Sb?Sb:db;sb=null!=rc?rc:sb;Wb=Ga(Qa({},Wb),{[sc]:Qa(Qa({},Wb[sc]),Kc)});Gc&&50>=kc&&(kc++,"object"==typeof Gc&&(Gc.placement&&(xb=Gc.placement),Gc.rects&&(Za=!0===Gc.rects?yield ta.getElementRects({reference:b,floating:g,strategy:Y}):Gc.rects),{x:db,y:sb}=Gm(Za,xb,Ka)),Ob=-1)}return{x:db,y:sb,placement:xb,strategy:Y,
middlewareData:Wb}}),Nv=Math.min,Ov=Math.max,rz=b=>({name:"arrow",options:b,fn(g){return ue(this,null,function*(){const {element:m,padding:J=0}=null!=b?b:{},{x:Y,y:ia,placement:ta,rects:Ka,platform:Za}=g;if(null==m)return{};const db=Zi(J),sb={x:Y,y:ia},xb=qk(ta),Wb=ta.split("-")[1],kc=tk(xb);var Ob=yield Za.getDimensions(m);const sc="y"===xb?"top":"left",lc="y"===xb?"bottom":"right";var Sb=Ka.reference[kc]+Ka.reference[xb]-sb[xb]-Ka.floating[kc];const rc=sb[xb]-Ka.reference[xb];var Kc=yield null==
Za.getOffsetParent?void 0:Za.getOffsetParent(m);let Gc=Kc?"y"===xb?Kc.clientHeight||0:Kc.clientWidth||0:0;0===Gc&&(Gc=Ka.floating[kc]);Kc=db[sc];const Xc=Gc-Ob[kc]-db[lc];Ob=Gc/2-Ob[kc]/2+(Sb/2-rc/2);Sb=Ov(Kc,Nv(Ob,Xc));return{[xb]:sb[xb]-(0<("start"===Wb?db[sc]:db[lc])&&Ob!==Sb&&Ka.reference[kc]<=Ka.floating[kc]?Ob<Kc?Kc-Ob:Xc-Ob:0),data:{[xb]:Sb,centerOffset:Ob-Sb}}})}}),gE={left:"right",right:"left",bottom:"top",top:"bottom"},hE={start:"end",end:"start"},sz=["top","right","bottom","left"];sz.reduce((b,
g)=>b.concat(g,g+"-start",g+"-end"),[]);var tz=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return ue(this,null,function*(){var m;const {placement:J,middlewareData:Y,rects:ia,initialPlacement:ta,platform:Ka,elements:Za}=g;var db=b;const {mainAxis:sb=!0,crossAxis:xb=!0,fallbackPlacements:Wb,fallbackStrategy:kc="bestFit",flipAlignment:Ob=!0}=db;db=bb(db,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const sc=Vi(J);var lc=Wb||(sc!==ta&&Ob?function($d){const Jd=
Vj($d);return[Vm($d),Jd,Vm(Jd)]}(ta):[Vj(ta)]);lc=[ta,...lc];const Sb=yield Zk(g,db),rc=[];db=(null==(m=Y.flip)?void 0:m.overflows)||[];if(sb&&rc.push(Sb[sc]),xb){const {main:$d,cross:Jd}=yl(J,ia,yield null==Ka.isRTL?void 0:Ka.isRTL(Za.floating));rc.push(Sb[$d],Sb[Jd])}if(db=[...db,{placement:J,overflows:rc}],!rc.every($d=>0>=$d)){var Kc,Gc;m=(null!=(Kc=null==(Gc=Y.flip)?void 0:Gc.index)?Kc:0)+1;if(Kc=lc[m])return{data:{index:m,overflows:db},reset:{placement:Kc}};Kc="bottom";switch(kc){case "bestFit":var Xc;
(Gc=null==(Xc=db.map($d=>[$d,$d.overflows.filter(Jd=>0<Jd).reduce((Jd,qe)=>Jd+qe,0)]).sort(($d,Jd)=>$d[1]-Jd[1])[0])?void 0:Xc[0].placement)&&(Kc=Gc);break;case "initialPlacement":Kc=ta}if(J!==Kc)return{reset:{placement:Kc}}}return{}})}}},uz=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,m=bb(b,["strategy"]);return{name:"hide",fn(J){return ue(this,null,function*(){var {rects:Y}=J;switch(g){case "referenceHidden":return Y=kn(yield Zk(J,Ga(Qa({},m),{elementContext:"reference"})),
Y.reference),{data:{referenceHiddenOffsets:Y,referenceHidden:Yl(Y)}};case "escaped":return Y=kn(yield Zk(J,Ga(Qa({},m),{altBoundary:!0})),Y.floating),{data:{escapedOffsets:Y,escaped:Yl(Y)}};default:return{}}})}}},vz=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return ue(this,null,function*(){const {x:m,y:J}=g,Y=yield function(ia,ta){return ue(this,null,function*(){const {placement:Ka,platform:Za,elements:db}=ia;var sb=yield null==Za.isRTL?void 0:Za.isRTL(db.floating),xb=Vi(Ka);
const Wb=Ka.split("-")[1],kc="x"===qk(Ka);xb=["left","top"].includes(xb)?-1:1;sb=sb&&kc?-1:1;const Ob="function"==typeof ta?ta(ia):ta;let {mainAxis:sc,crossAxis:lc,alignmentAxis:Sb}="number"==typeof Ob?{mainAxis:Ob,crossAxis:0,alignmentAxis:null}:Qa({mainAxis:0,crossAxis:0,alignmentAxis:null},Ob);return Wb&&"number"==typeof Sb&&(lc="end"===Wb?-1*Sb:Sb),kc?{x:lc*sb,y:sc*xb}:{x:sc*xb,y:lc*sb}})}(g,b);return{x:m+Y.x,y:J+Y.y,data:Y}})}}},wz=function(b){return void 0===b&&(b={}),{name:"shift",options:b,
fn(g){return ue(this,null,function*(){const {x:m,y:J,placement:Y}=g;var ia=b;const {mainAxis:ta=!0,crossAxis:Ka=!1,limiter:Za={fn:kc=>{let {x:Ob,y:sc}=kc;return{x:Ob,y:sc}}}}=ia;var db=bb(ia,["mainAxis","crossAxis","limiter"]);ia={x:m,y:J};db=yield Zk(g,db);const sb=qk(Vi(Y)),xb="x"===sb?"y":"x";let Wb=ia[sb];ia=ia[xb];ta&&(Wb=Ov(Wb+db["y"===sb?"top":"left"],Nv(Wb,Wb-db["y"===sb?"bottom":"right"])));Ka&&(ia=Ov(ia+db["y"===xb?"top":"left"],Nv(ia,ia-db["y"===xb?"bottom":"right"])));ia=Za.fn(Ga(Qa({},
g),{[sb]:Wb,[xb]:ia}));return Ga(Qa({},ia),{data:{x:ia.x-m,y:ia.y-J}})})}}},xz=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:m,y:J,placement:Y,rects:ia,middlewareData:ta}=g,{offset:Ka=0,mainAxis:Za=!0,crossAxis:db=!0}=b;var sb={x:m,y:J};g=qk(Y);const xb="x"===g?"y":"x";let Wb=sb[g];sb=sb[xb];var kc="function"==typeof Ka?Ka(Ga(Qa({},ia),{placement:Y})):Ka;kc="number"==typeof kc?{mainAxis:kc,crossAxis:0}:Qa({mainAxis:0,crossAxis:0},kc);if(Za){var Ob="y"===g?"height":"width",sc=ia.reference[g]-
ia.floating[Ob]+kc.mainAxis;Ob=ia.reference[g]+ia.reference[Ob]-kc.mainAxis;Wb<sc?Wb=sc:Wb>Ob&&(Wb=Ob)}if(db){var lc,Sb,rc,Kc;const Gc="y"===g?"width":"height";sc=["top","left"].includes(Vi(Y));Ob=ia.reference[xb]-ia.floating[Gc]+(sc&&null!=(lc=null==(Sb=ta.offset)?void 0:Sb[xb])?lc:0)+(sc?0:kc.crossAxis);lc=ia.reference[xb]+ia.reference[Gc]+(sc?0:null!=(rc=null==(Kc=ta.offset)?void 0:Kc[xb])?rc:0)-(sc?kc.crossAxis:0);sb<Ob?sb=Ob:sb>lc&&(sb=lc)}return{[g]:Wb,[xb]:sb}}}},yz=Math.min,Js=Math.max,Ut=
Math.round,iE={getClippingRect:function(b){let {element:g,boundary:m,rootBoundary:J,strategy:Y}=b;b=[...("clippingAncestors"===m?Pk(g):[].concat(m)),J];b=b.reduce((ia,ta)=>{ta=xj(g,ta,Y);return ia.top=Js(ta.top,ia.top),ia.right=yz(ta.right,ia.right),ia.bottom=yz(ta.bottom,ia.bottom),ia.left=Js(ta.left,ia.left),ia},xj(g,b[0],Y));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:m,strategy:J}=
b;var Y=Qi(m);const ia=Yi(m);if(m===ia)return g;b={scrollLeft:0,scrollTop:0};var ta=0,Ka=0;(Y||!Y&&"fixed"!==J)&&(("body"!==Ki(m)||xk(ia))&&(b=$l(m)),Qi(m))&&(Y=sj(m,!0),ta=Y.x+m.clientLeft,Ka=Y.y+m.clientTop);return Ga(Qa({},g),{x:g.x-b.scrollLeft+ta,y:g.y-b.scrollTop+Ka})},isElement:dk,getDimensions:wk,getOffsetParent:xm,getDocumentElement:Yi,getElementRects:b=>{let {reference:g,floating:m,strategy:J}=b;b=xm(m);var Y=Qi(b);const ia=Yi(b);var ta;if(ta=Y)ta=sj(b),ta=Ut(ta.width)!==b.offsetWidth||
Ut(ta.height)!==b.offsetHeight;ta=sj(g,ta,"fixed"===J);let Ka={scrollLeft:0,scrollTop:0};var Za=0,db=0;if(Y||!Y&&"fixed"!==J)(("body"!==Ki(b)||xk(ia))&&(Ka=$l(b)),Qi(b))?(Y=sj(b,!0),Za=Y.x+b.clientLeft,db=Y.y+b.clientTop):ia&&(Za=bm(ia));return{reference:{x:ta.left+Ka.scrollLeft-Za,y:ta.top+Ka.scrollTop-db,width:ta.width,height:ta.height},floating:Ga(Qa({},wk(m)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===ck(b).direction},jE=(b,g,m)=>fE(b,g,Qa({platform:iE},m)),
Tn=Cc(S(16),1),zz=S(16),kE=Cc(S(25),1),Pv="undefined"!==typeof document?zz.useLayoutEffect:zz.useEffect,Az=b=>{const {element:g,padding:m}=b;return{name:"arrow",options:b,fn(J){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return rz({element:g.current,padding:m}).fn(J)}else if(g)return rz({element:g,padding:m}).fn(J);return{}}}},lE=S(16),[Qv,Bz]=ti("Popper"),[mE,Cz]=Qv("Popper"),nE=(0,Lm.forwardRef)((b,g)=>{const {__scopePopper:m,virtualRef:J}=b;b=bb(b,["__scopePopper",
"virtualRef"]);const Y=Cz("PopperAnchor",m),ia=(0,Lm.useRef)(null);g=Hg(g,ia);(0,Lm.useEffect)(()=>{Y.onAnchorChange((null===J||void 0===J?void 0:J.current)||ia.current)});return J?null:(0,Lm.createElement)(dl.div,ef({},b,{ref:g}))}),[oE]=Qv("PopperContent"),[pE,qE]=Qv("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),rE=(0,Lm.forwardRef)((b,g)=>{var m,J,Y,ia,ta,Ka,Za,db;const {__scopePopper:sb,side:xb="bottom",sideOffset:Wb=0,align:kc="center",alignOffset:Ob=0,arrowPadding:sc=0,collisionBoundary:lc=
[],collisionPadding:Sb=0,sticky:rc="partial",hideWhenDetached:Kc=!1,avoidCollisions:Gc=!0}=b;b=bb(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Xc=Cz("PopperContent",sb),[$d,Jd]=(0,Lm.useState)(null);g=Hg(g,Xn=>Jd(Xn));const [qe,Ye]=(0,Lm.useState)(null);var Ge=Ij(qe),Ve=null!==(m=null===Ge||void 0===Ge?void 0:Ge.width)&&void 0!==m?m:0;m=null!==(J=null===Ge||void 0===Ge?void 0:Ge.height)&&
void 0!==J?J:0;J=xb+("center"!==kc?"-"+kc:"");Ge="number"===typeof Sb?Sb:Qa({top:0,right:0,bottom:0,left:0},Sb);const ee=Array.isArray(lc)?lc:[lc],Gd=0<ee.length;Ge={padding:Ge,boundary:ee.filter(jj),altBoundary:Gd};const {reference:gd,floating:bd,strategy:ud,x:zd,y:Id,placement:we,middlewareData:ye,update:Ie}=Ag({strategy:"fixed",placement:J,whileElementsMounted:mk,middleware:[vz({mainAxis:Wb+m,alignmentAxis:Ob}),Gc?wz(Qa({mainAxis:!0,crossAxis:!1,limiter:"partial"===rc?xz():void 0},Ge)):void 0,
qe?Az({element:qe,padding:sc}):void 0,Gc?tz(Qa({},Ge)):void 0,sE({arrowWidth:Ve,arrowHeight:m}),Kc?uz({strategy:"referenceHidden"}):void 0].filter(Oh)});$m(()=>{gd(Xc.anchor)},[gd,Xc.anchor]);const uf=null!==zd&&null!==Id,[nf,Vg]=qg(we);Ve=null===(Y=ye.arrow)||void 0===Y?void 0:Y.x;Y=null===(ia=ye.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(ta=ye.arrow)||void 0===ta?void 0:ta.centerOffset);const [Kg,Wh]=(0,Lm.useState)();$m(()=>{$d&&Wh(window.getComputedStyle($d).zIndex)},[$d]);const {hasParent:Gj,
positionUpdateFns:ej}=qE("PopperContent",sb),em=!Gj;(0,Lm.useLayoutEffect)(()=>{if(!em)return ej.add(Ie),()=>{ej.delete(Ie)}},[em,ej,Ie]);(0,Lm.useLayoutEffect)(()=>{em&&uf&&Array.from(ej).reverse().forEach(Xn=>requestAnimationFrame(Xn))},[em,uf,ej]);ta=Ga(Qa({"data-side":nf,"data-align":Vg},b),{ref:g,style:Ga(Qa({},b.style),{animation:uf?void 0:"none",opacity:null!==(Ka=ye.hide)&&void 0!==Ka&&Ka.referenceHidden?0:void 0})});return(0,Lm.createElement)("div",{ref:bd,"data-radix-popper-content-wrapper":"",
style:{position:ud,left:0,top:0,transform:uf?`translate3d(${Math.round(zd)}px, ${Math.round(Id)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Kg,["--radix-popper-transform-origin"]:[null===(Za=ye.transformOrigin)||void 0===Za?void 0:Za.x,null===(db=ye.transformOrigin)||void 0===db?void 0:db.y].join(" ")}},(0,Lm.createElement)(oE,{scope:sb,placedSide:nf,onArrowChange:Ye,arrowX:Ve,arrowY:Y,shouldHideArrow:ia},em?(0,Lm.createElement)(pE,{scope:sb,hasParent:!0,positionUpdateFns:ej},
(0,Lm.createElement)(dl.div,ta)):(0,Lm.createElement)(dl.div,ta)))}),sE=b=>({name:"transformOrigin",options:b,fn(g){var m,J,Y,ia,ta;const {placement:Ka,rects:Za,middlewareData:db}=g,sb=(g=0!==(null===(m=db.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [xb,Wb]=qg(Ka),kc={start:"0%",center:"50%",end:"100%"}[Wb],Ob=(null!==(J=null===(Y=db.arrow)||void 0===Y?void 0:Y.x)&&void 0!==J?J:0)+sb/2;J=(null!==(ia=null===(ta=db.arrow)||void 0===ta?void 0:ta.y)&&void 0!==ia?
ia:0)+m/2;ta=ia="";"bottom"===xb?(ia=g?kc:`${Ob}px`,ta=`${-m}px`):"top"===xb?(ia=g?kc:`${Ob}px`,ta=`${Za.floating.height+m}px`):"right"===xb?(ia=`${-m}px`,ta=g?kc:`${J}px`):"left"===xb&&(ia=`${Za.floating.width+m}px`,ta=g?kc:`${J}px`);return{data:{x:ia,y:ta}}}}),tE=b=>{const {__scopePopper:g,children:m}=b,[J,Y]=(0,Lm.useState)(null);return(0,Lm.createElement)(mE,{scope:g,anchor:J,onAnchorChange:Y},m)},Dz=S(16),uE=Cc(S(25)),vE=(0,Dz.forwardRef)((b,g)=>{var m;const {container:J=null===globalThis||void 0===
globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=b;b=bb(b,["container"]);return J?uE.default.createPortal((0,Dz.createElement)(dl.div,ef({},b,{ref:g})),J):null}),up=S(16),wE=S(25),Vt=b=>{const {present:g,children:m}=b;b=Of(g);const J="function"===typeof m?m({present:b.isPresent}):up.Children.only(m),Y=Hg(b.ref,J.ref);return"function"===typeof m||b.isPresent?(0,up.cloneElement)(J,{ref:Y}):null};Vt.displayName="Presence";var Mm=S(16),Ez={bubbles:!1,cancelable:!0},[Rv,Fz,xE]=
qj("RovingFocusGroup"),[yE,Wt]=ti("RovingFocusGroup",[xE]),[zE,AE]=yE("RovingFocusGroup"),Gz=(0,Mm.forwardRef)((b,g)=>(0,Mm.createElement)(Rv.Provider,{scope:b.__scopeRovingFocusGroup},(0,Mm.createElement)(Rv.Slot,{scope:b.__scopeRovingFocusGroup},(0,Mm.createElement)(BE,ef({},b,{ref:g}))))),BE=(0,Mm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,orientation:J,loop:Y=!1,dir:ia,currentTabStopId:ta,defaultCurrentTabStopId:Ka,onCurrentTabStopIdChange:Za,onEntryFocus:db}=b,sb=bb(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
xb=(0,Mm.useRef)(null);g=Hg(g,xb);const Wb=Bi(ia),[kc=null,Ob]=Vf({prop:ta,defaultProp:Ka,onChange:Za}),[sc,lc]=(0,Mm.useState)(!1),Sb=ki(db),rc=Fz(m),Kc=(0,Mm.useRef)(!1);(0,Mm.useEffect)(()=>{const Gc=xb.current;if(Gc)return Gc.addEventListener("rovingFocusGroup.onEntryFocus",Sb),()=>Gc.removeEventListener("rovingFocusGroup.onEntryFocus",Sb)},[Sb]);return(0,Mm.createElement)(zE,{scope:m,orientation:J,dir:Wb,loop:Y,currentTabStopId:kc,onItemFocus:(0,Mm.useCallback)(Gc=>Ob(Gc),[Ob]),onItemShiftTab:(0,Mm.useCallback)(()=>
lc(!0),[])},(0,Mm.createElement)(dl.div,ef({tabIndex:sc?-1:0,"data-orientation":J},sb,{ref:g,style:Qa({outline:"none"},b.style),onMouseDown:eg(b.onMouseDown,()=>{Kc.current=!0}),onFocus:eg(b.onFocus,Gc=>{var Xc=!Kc.current;if(Gc.target===Gc.currentTarget&&Xc&&!sc&&(Xc=new CustomEvent("rovingFocusGroup.onEntryFocus",Ez),Gc.currentTarget.dispatchEvent(Xc),!Xc.defaultPrevented)){Gc=rc().filter(Jd=>Jd.focusable);Xc=Gc.find(Jd=>Jd.active);const $d=Gc.find(Jd=>Jd.id===kc);Gc=[Xc,$d,...Gc].filter(Boolean).map(Jd=>
Jd.ref.current);mi(Gc)}Kc.current=!1}),onBlur:eg(b.onBlur,()=>lc(!1))})))}),Hz=(0,Mm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,focusable:J=!0,active:Y=!1}=b,ia=bb(b,["__scopeRovingFocusGroup","focusable","active"]),ta=zj(),Ka=AE("RovingFocusGroupItem",m),Za=Ka.currentTabStopId===ta,db=Fz(m);return(0,Mm.createElement)(Rv.ItemSlot,{scope:m,id:ta,focusable:J,active:Y},(0,Mm.createElement)(dl.span,ef({tabIndex:Za?0:-1,"data-orientation":Ka.orientation},ia,{ref:g,onMouseDown:eg(b.onMouseDown,
sb=>{if(J)Ka.onItemFocus(ta);else sb.preventDefault()}),onFocus:eg(b.onFocus,()=>Ka.onItemFocus(ta)),onKeyDown:eg(b.onKeyDown,sb=>{if("Tab"===sb.key&&sb.shiftKey)Ka.onItemShiftTab();else if(sb.target===sb.currentTarget){var xb=Aj(sb,Ka.orientation,Ka.dir);if(void 0!==xb){sb.preventDefault();let Wb=db().filter(kc=>kc.focusable).map(kc=>kc.ref.current);if("last"===xb)Wb.reverse();else if("prev"===xb||"next"===xb)"prev"===xb&&Wb.reverse(),sb=Wb.indexOf(sb.currentTarget),Wb=Ka.loop?kh(Wb,sb+1):Wb.slice(sb+
1);setTimeout(()=>mi(Wb))}}})})))}),CE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},DE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?b[0]:b).ownerDocument.body},Fr=new WeakMap,Xt=new WeakMap,Yt={},Sv=0,Tv=function(b,g,m){void 0===g&&(g=DE(b));void 0===m&&(m="data-aria-hidden");var J=Array.isArray(b)?b:[b];Yt[m]||(Yt[m]=new WeakMap);var Y=Yt[m],ia=[],ta=new Set,Ka=function(db){db&&!ta.has(db)&&(ta.add(db),
Ka(db.parentNode))};J.forEach(Ka);var Za=function(db){!db||0<=J.indexOf(db)||Array.prototype.forEach.call(db.children,function(sb){if(ta.has(sb))Za(sb);else{var xb=sb.getAttribute("aria-hidden");xb=null!==xb&&"false"!==xb;var Wb=(Fr.get(sb)||0)+1,kc=(Y.get(sb)||0)+1;Fr.set(sb,Wb);Y.set(sb,kc);ia.push(sb);1===Wb&&xb&&Xt.set(sb,!0);1===kc&&sb.setAttribute(m,"true");xb||sb.setAttribute("aria-hidden","true")}})};Za(g);ta.clear();Sv++;return function(){ia.forEach(function(db){var sb=Fr.get(db)-1,xb=Y.get(db)-
1;Fr.set(db,sb);Y.set(db,xb);sb||(Xt.has(db)||db.removeAttribute("aria-hidden"),Xt.delete(db));xb||db.removeAttribute(m)});Sv--;Sv||(Fr=new WeakMap,Fr=new WeakMap,Xt=new WeakMap,Yt={})}},EE=Cc(wc(),1),{__assign:Bn,__rest:Uv,__spreadArray:Iz}=EE.default,Jz=Cc(S(16)),vp=Cc(S(16)),FE=S(16),GE=Cc(S(16)),Vv=function(b){var g=b.sideCar;b=Uv(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return GE.createElement(g,
Bn({},b))};Vv.isSideCarExport=!0;var Kz=Oi(),Wv=function(){},Zt=vp.forwardRef(function(b,g){var m=vp.useRef(null),J=vp.useState({onScrollCapture:Wv,onWheelCapture:Wv,onTouchMoveCapture:Wv}),Y=J[0];J=J[1];var ia=b.forwardProps,ta=b.children,Ka=b.className,Za=b.removeScrollBar,db=b.enabled,sb=b.shards,xb=b.sideCar,Wb=b.noIsolation,kc=b.inert,Ob=b.allowPinchZoom,sc=b.as;sc=void 0===sc?"div":sc;b=Uv(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
g=oh([m,g]);Y=Bn(Bn({},b),Y);return vp.createElement(vp.Fragment,null,db&&vp.createElement(xb,{sideCar:Kz,removeScrollBar:Za,shards:sb,noIsolation:Wb,inert:kc,setCallbacks:J,allowPinchZoom:!!Ob,lockRef:m}),ia?vp.cloneElement(vp.Children.only(ta),Bn(Bn({},Y),{ref:g})):vp.createElement(sc,Bn({},Y,{className:Ka,ref:g}),ta))});Zt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var nm=Cc(S(16)),Lz=Cc(S(16)),
HE=Cc(S(16)),IE=function(){var b=0,g=null;return{add:function(m){if(0==b){if(document){var J=document.createElement("style");J.type="text/css";var Y="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;Y&&J.setAttribute("nonce",Y)}else J=null;if(g=J)J=g,J.styleSheet?J.styleSheet.cssText=m:J.appendChild(document.createTextNode(m)),m=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},
JE=function(){var b=IE();return function(g,m){HE.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&m])}},Xv=function(){var b=JE();return function(g){b(g.styles,g.dynamic);return null}},KE={left:0,top:0,right:0,gap:0},LE=Xv(),ME=function(b,g,m,J){var Y=b.left,ia=b.top,ta=b.right;b=b.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(J,";\n   padding-right: ").concat(b,"px ").concat(J,";\n  }\n  body {\n    overflow: hidden ").concat(J,
";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(J,";"),"margin"===m&&"\n    padding-left: ".concat(Y,"px;\n    padding-top: ").concat(ia,"px;\n    padding-right: ").concat(ta,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(J,";\n    "),"padding"===m&&"padding-right: ".concat(b,"px ").concat(J,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(J,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(J,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(J,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(J,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},Mz=function(b){var g=b.noRelative,m=b.noImportant;
b=b.gapMode;var J=void 0===b?"margin":b;b=Lz.useMemo(function(){var Y=J;void 0===Y&&(Y="margin");if("undefined"===typeof window)Y=KE;else{var ia=window.getComputedStyle(document.body),ta=ia["padding"===Y?"paddingTop":"marginTop"],Ka=ia["padding"===Y?"paddingRight":"marginRight"];Y=[parseInt(ia["padding"===Y?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(ta||"",10)||0,parseInt(Ka||"",10)||0];Y={left:Y[0],top:Y[1],right:Y[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+Y[2]-
Y[0])}}return Y},[J]);return Lz.createElement(LE,{styles:ME(b,!g,J,m?"":"!important")})},Yv=!1;if("undefined"!==typeof window)try{var wp=Object.defineProperty({},"passive",{get:function(){return Yv=!0}});window.addEventListener("test",wp,wp);window.removeEventListener("test",wp,wp)}catch(b){Yv=!1}var Gr=Yv?{passive:!1}:!1,Nz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Oz(b,g)){var m=Pz(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&g!==document.body);
return!1},Oz=function(b,g){"v"===b?(b=window.getComputedStyle(g),b="hidden"!==b.overflowY&&!(b.overflowY===b.overflowX&&"visible"===b.overflowY)):(b=window.getComputedStyle(g),b="hidden"!==b.overflowX&&!(b.overflowY===b.overflowX&&"visible"===b.overflowX));return b},Pz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},$t=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Qz=function(b){return b&&
"current"in b?b.current:b},NE=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},OE=0,Hr=[];Kz.useMedium(function(b){var g=nm.useRef([]),m=nm.useRef([0,0]),J=nm.useRef(),Y=nm.useState(OE++)[0],ia=nm.useState(function(){return Xv()})[0],ta=nm.useRef(b);nm.useEffect(function(){ta.current=b},[b]);nm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(Y));var Ob=Iz([b.lockRef.current],
(b.shards||[]).map(Qz),!0).filter(Boolean);Ob.forEach(function(sc){return sc.classList.add("allow-interactivity-".concat(Y))});return function(){document.body.classList.remove("block-interactivity-".concat(Y));Ob.forEach(function(sc){return sc.classList.remove("allow-interactivity-".concat(Y))})}}},[b.inert,b.lockRef.current,b.shards]);var Ka=nm.useCallback(function(Ob,sc){if("touches"in Ob&&2===Ob.touches.length)return!ta.current.allowPinchZoom;var lc=$t(Ob),Sb=m.current,rc="deltaX"in Ob?Ob.deltaX:
Sb[0]-lc[0];Sb="deltaY"in Ob?Ob.deltaY:Sb[1]-lc[1];var Kc=Ob.target,Gc=Math.abs(rc)>Math.abs(Sb)?"h":"v";if("touches"in Ob&&"h"===Gc&&"range"===Kc.type)return!1;var Xc=Nz(Gc,Kc);if(!Xc)return!0;Xc?lc=Gc:(lc="v"===Gc?"h":"v",Xc=Nz(Gc,Kc));if(!Xc)return!1;!J.current&&"changedTouches"in Ob&&(rc||Sb)&&(J.current=lc);if(!lc)return!0;lc=J.current||lc;Sb="h"===lc?rc:Sb;rc=window.getComputedStyle(sc).direction;rc="h"===lc&&"rtl"===rc?-1:1;Gc=rc*Sb;Ob=Ob.target;Sb=sc.contains(Ob);Kc=!1;Gc=0<Gc;var $d=Xc=0;
do{var Jd=Pz(lc,Ob),qe=Jd[0];Jd=Jd[1]-Jd[2]-rc*qe;(qe||Jd)&&Oz(lc,Ob)&&(Xc+=Jd,$d+=qe);Ob=Ob.parentNode}while(!Sb&&Ob!==document.body||Sb&&(sc.contains(Ob)||sc===Ob));Gc&&0===Xc?Kc=!0:Gc||0!==$d||(Kc=!0);return Kc},[]),Za=nm.useCallback(function(Ob){if(Hr.length&&Hr[Hr.length-1]===ia){var sc="deltaY"in Ob?[Ob.deltaX,Ob.deltaY]:$t(Ob),lc=g.current.filter(function(Sb){var rc;if(rc=Sb.name===Ob.type&&Sb.target===Ob.target)Sb=Sb.delta,rc=Sb[0]===sc[0]&&Sb[1]===sc[1];return rc})[0];lc&&lc.should?Ob.preventDefault():
lc||(lc=(ta.current.shards||[]).map(Qz).filter(Boolean).filter(function(Sb){return Sb.contains(Ob.target)}),(0<lc.length?Ka(Ob,lc[0]):!ta.current.noIsolation)&&Ob.preventDefault())}},[]),db=nm.useCallback(function(Ob,sc,lc,Sb){var rc={name:Ob,delta:sc,target:lc,should:Sb};g.current.push(rc);setTimeout(function(){g.current=g.current.filter(function(Kc){return Kc!==rc})},1)},[]),sb=nm.useCallback(function(Ob){m.current=$t(Ob);J.current=void 0},[]),xb=nm.useCallback(function(Ob){db(Ob.type,[Ob.deltaX,
Ob.deltaY],Ob.target,Ka(Ob,b.lockRef.current))},[]),Wb=nm.useCallback(function(Ob){db(Ob.type,$t(Ob),Ob.target,Ka(Ob,b.lockRef.current))},[]);nm.useEffect(function(){Hr.push(ia);b.setCallbacks({onScrollCapture:xb,onWheelCapture:xb,onTouchMoveCapture:Wb});document.addEventListener("wheel",Za,Gr);document.addEventListener("touchmove",Za,Gr);document.addEventListener("touchstart",sb,Gr);return function(){Hr=Hr.filter(function(Ob){return Ob!==ia});document.removeEventListener("wheel",Za,Gr);document.removeEventListener("touchmove",
Za,Gr);document.removeEventListener("touchstart",sb,Gr)}},[]);var kc=b.removeScrollBar;return nm.createElement(nm.Fragment,null,b.inert?nm.createElement(ia,{styles:NE(Y)}):null,kc?nm.createElement(Mz,{gapMode:"margin"}):null)});var Zv=Jz.forwardRef(function(b,g){return Jz.createElement(Zt,Bn({},b,{ref:g,sideCar:Vv}))});Zv.classNames=Zt.classNames;var $v=["Enter"," "],Rz=["ArrowUp","PageDown","End"],PE=["ArrowDown","PageUp","Home",...Rz];[...$v];[...$v];var [aw,QE,RE]=qj("Menu"),[Tq,au]=ti("Menu",
[RE,Bz,Wt]),bw=Bz(),Sz=Wt(),[SE,bu]=Tq("Menu"),[TE,cw]=Tq("Menu"),Tz=(0,Ug.forwardRef)((b,g)=>{var {__scopeMenu:m}=b;b=bb(b,["__scopeMenu"]);m=bw(m);return(0,Ug.createElement)(nE,ef({},m,b,{ref:g}))}),[,UE]=Tq("MenuPortal",{forceMount:void 0}),[VE,Uz]=Tq("MenuContent"),Vz=(0,Ug.forwardRef)((b,g)=>{var m=UE("MenuContent",b.__scopeMenu);({forceMount:m=m.forceMount}=b);const J=bb(b,["forceMount"]),Y=bu("MenuContent",b.__scopeMenu),ia=cw("MenuContent",b.__scopeMenu);return(0,Ug.createElement)(aw.Provider,
{scope:b.__scopeMenu},(0,Ug.createElement)(Vt,{present:m||Y.open},(0,Ug.createElement)(aw.Slot,{scope:b.__scopeMenu},ia.modal?(0,Ug.createElement)(WE,ef({},J,{ref:g})):(0,Ug.createElement)(XE,ef({},J,{ref:g})))))}),WE=(0,Ug.forwardRef)((b,g)=>{const m=bu("MenuContent",b.__scopeMenu),J=(0,Ug.useRef)(null);g=Hg(g,J);(0,Ug.useEffect)(()=>{const Y=J.current;if(Y)return Tv(Y)},[]);return(0,Ug.createElement)(Wz,ef({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:eg(b.onFocusOutside,
Y=>Y.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),XE=(0,Ug.forwardRef)((b,g)=>{const m=bu("MenuContent",b.__scopeMenu);return(0,Ug.createElement)(Wz,ef({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),Wz=(0,Ug.forwardRef)((b,g)=>{const {__scopeMenu:m,loop:J=!1,trapFocus:Y,onOpenAutoFocus:ia,onCloseAutoFocus:ta,disableOutsidePointerEvents:Ka,onEscapeKeyDown:Za,onPointerDownOutside:db,onFocusOutside:sb,
onInteractOutside:xb,onDismiss:Wb,disableOutsideScroll:kc}=b,Ob=bb(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),sc=bu("MenuContent",m),lc=cw("MenuContent",m),Sb=bw(m),rc=Sz(m),Kc=QE(m),[Gc,Xc]=(0,Ug.useState)(null),$d=(0,Ug.useRef)(null);g=Hg(g,$d,sc.onContentChange);const Jd=(0,Ug.useRef)(0),qe=(0,Ug.useRef)(""),Ye=(0,Ug.useRef)(0),Ge=(0,Ug.useRef)(null),
Ve=(0,Ug.useRef)("right"),ee=(0,Ug.useRef)(0),Gd=kc?Zv:Ug.Fragment,gd=kc?{as:Dr,allowPinchZoom:!0}:void 0,bd=zd=>{var Id,we;zd=qe.current+zd;const ye=Kc().filter(Kg=>!Kg.disabled),Ie=document.activeElement,uf=null===(Id=ye.find(Kg=>Kg.ref.current===Ie))||void 0===Id?void 0:Id.textValue;Id=ye.map(Kg=>Kg.textValue);const nf=cc(Id,zd,uf),Vg=null===(we=ye.find(Kg=>Kg.textValue===nf))||void 0===we?void 0:we.ref.current;(function Gj(Wh){qe.current=Wh;window.clearTimeout(Jd.current);""!==Wh&&(Jd.current=
window.setTimeout(()=>Gj(""),1E3))})(zd);Vg&&setTimeout(()=>Vg.focus())};(0,Ug.useEffect)(()=>()=>window.clearTimeout(Jd.current),[]);ij();const ud=(0,Ug.useCallback)(zd=>{var Id,we,ye;if(ye=Ve.current===(null===(Id=Ge.current)||void 0===Id?void 0:Id.side)){if(Id=null===(we=Ge.current)||void 0===we?void 0:we.area){const {x:Ie,y:uf}={x:zd.clientX,y:zd.clientY};zd=!1;for(let nf=0,Vg=Id.length-1;nf<Id.length;Vg=nf++){we=Id[nf].x;ye=Id[nf].y;const Kg=Id[Vg].x,Wh=Id[Vg].y;ye>uf!==Wh>uf&&Ie<(Kg-we)*(uf-
ye)/(Wh-ye)+we&&(zd=!zd)}Id=zd}else Id=!1;ye=Id}return ye},[]);return(0,Ug.createElement)(VE,{scope:m,searchRef:qe,onItemEnter:(0,Ug.useCallback)(zd=>{ud(zd)&&zd.preventDefault()},[ud]),onItemLeave:(0,Ug.useCallback)(zd=>{var Id;ud(zd)||(null===(Id=$d.current)||void 0===Id||Id.focus(),Xc(null))},[ud]),onTriggerLeave:(0,Ug.useCallback)(zd=>{ud(zd)&&zd.preventDefault()},[ud]),pointerGraceTimerRef:Ye,onPointerGraceIntentChange:(0,Ug.useCallback)(zd=>{Ge.current=zd},[])},(0,Ug.createElement)(Gd,gd,(0,Ug.createElement)(oz,
{asChild:!0,trapped:Y,onMountAutoFocus:eg(ia,zd=>{var Id;zd.preventDefault();null===(Id=$d.current)||void 0===Id||Id.focus()}),onUnmountAutoFocus:ta},(0,Ug.createElement)(mz,{asChild:!0,disableOutsidePointerEvents:Ka,onEscapeKeyDown:Za,onPointerDownOutside:db,onFocusOutside:sb,onInteractOutside:xb,onDismiss:Wb},(0,Ug.createElement)(Gz,ef({asChild:!0},rc,{dir:lc.dir,orientation:"vertical",loop:J,currentTabStopId:Gc,onCurrentTabStopIdChange:Xc,onEntryFocus:zd=>{lc.isUsingKeyboardRef.current||zd.preventDefault()}}),
(0,Ug.createElement)(rE,ef({role:"menu","aria-orientation":"vertical","data-state":sc.open?"open":"closed",dir:lc.dir},Sb,Ob,{ref:g,style:Qa({outline:"none"},Ob.style),onKeyDown:eg(Ob.onKeyDown,zd=>{var Id=zd.target.closest('[role\x3d"menu"]')===zd.currentTarget;const we=zd.ctrlKey||zd.altKey||zd.metaKey,ye=1===zd.key.length;Id&&("Tab"===zd.key&&zd.preventDefault(),!we&&ye&&bd(zd.key));zd.target===$d.current&&PE.includes(zd.key)&&(zd.preventDefault(),Id=Kc().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current),
Rz.includes(zd.key)&&Id.reverse(),Qb(Id))}),onBlur:eg(b.onBlur,zd=>{zd.currentTarget.contains(zd.target)||(window.clearTimeout(Jd.current),qe.current="")}),onPointerMove:eg(b.onPointerMove,ka(zd=>{const Id=ee.current!==zd.clientX;zd.currentTarget.contains(zd.target)&&Id&&(Ve.current=zd.clientX>ee.current?"right":"left",ee.current=zd.clientX)}))})))))))}),Xz=(0,Ug.forwardRef)((b,g)=>{const {disabled:m=!1,onSelect:J}=b,Y=bb(b,["disabled","onSelect"]),ia=(0,Ug.useRef)(null),ta=cw("MenuItem",b.__scopeMenu),
Ka=Uz("MenuItem",b.__scopeMenu);g=Hg(g,ia);const Za=(0,Ug.useRef)(!1);return(0,Ug.createElement)(YE,ef({},Y,{ref:g,disabled:m,onClick:eg(b.onClick,()=>{const db=ia.current;if(!m&&db){const sb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});db.addEventListener("menu.itemSelect",xb=>null===J||void 0===J?void 0:J(xb),{once:!0});Hk(db,sb);if(sb.defaultPrevented)Za.current=!1;else ta.onClose()}}),onPointerDown:db=>{var sb;null===(sb=b.onPointerDown)||void 0===sb||sb.call(b,db);Za.current=
!0},onPointerUp:eg(b.onPointerUp,db=>{var sb;Za.current||null===(sb=db.currentTarget)||void 0===sb||sb.click()}),onKeyDown:eg(b.onKeyDown,db=>{const sb=""!==Ka.searchRef.current;m||sb&&" "===db.key||!$v.includes(db.key)||(db.currentTarget.click(),db.preventDefault())})}))}),YE=(0,Ug.forwardRef)((b,g)=>{const {__scopeMenu:m,disabled:J=!1,textValue:Y}=b,ia=bb(b,["__scopeMenu","disabled","textValue"]),ta=Uz("MenuItem",m),Ka=Sz(m),Za=(0,Ug.useRef)(null);g=Hg(g,Za);const [db,sb]=(0,Ug.useState)(!1),[xb,
Wb]=(0,Ug.useState)("");(0,Ug.useEffect)(()=>{const kc=Za.current;if(kc){var Ob;Wb((null!==(Ob=kc.textContent)&&void 0!==Ob?Ob:"").trim())}},[ia.children]);return(0,Ug.createElement)(aw.ItemSlot,{scope:m,disabled:J,textValue:null!==Y&&void 0!==Y?Y:xb},(0,Ug.createElement)(Hz,ef({asChild:!0},Ka,{focusable:!J}),(0,Ug.createElement)(dl.div,ef({role:"menuitem","data-highlighted":db?"":void 0,"aria-disabled":J||void 0,"data-disabled":J?"":void 0},ia,{ref:g,onPointerMove:eg(b.onPointerMove,ka(kc=>{if(J)ta.onItemLeave(kc);
else ta.onItemEnter(kc),kc.defaultPrevented||kc.currentTarget.focus()})),onPointerLeave:eg(b.onPointerLeave,ka(kc=>ta.onItemLeave(kc))),onFocus:eg(b.onFocus,()=>sb(!0)),onBlur:eg(b.onBlur,()=>sb(!1))}))))});Tq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Tq("MenuItemIndicator",{checked:!1});var ZE=(0,Ug.forwardRef)((b,g)=>{b=bb(b,["__scopeMenu"]);return(0,Ug.createElement)(dl.div,ef({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Tq("MenuSub");var Yz=b=>{const {__scopeMenu:g,
open:m=!1,children:J,dir:Y,onOpenChange:ia,modal:ta=!0}=b;b=bw(g);const [Ka,Za]=(0,Ug.useState)(null),db=(0,Ug.useRef)(!1),sb=ki(ia),xb=Bi(Y);(0,Ug.useEffect)(()=>{const Wb=()=>{db.current=!0;document.addEventListener("pointerdown",kc,{capture:!0,once:!0});document.addEventListener("pointermove",kc,{capture:!0,once:!0})},kc=()=>db.current=!1;document.addEventListener("keydown",Wb,{capture:!0});return()=>{document.removeEventListener("keydown",Wb,{capture:!0});document.removeEventListener("pointerdown",
kc,{capture:!0});document.removeEventListener("pointermove",kc,{capture:!0})}},[]);return(0,Ug.createElement)(tE,b,(0,Ug.createElement)(SE,{scope:g,open:m,onOpenChange:sb,content:Ka,onContentChange:Za},(0,Ug.createElement)(TE,{scope:g,onClose:(0,Ug.useCallback)(()=>sb(!1),[sb]),isUsingKeyboardRef:db,dir:xb,modal:ta},J)))},[$E]=ti("DropdownMenu",[au]),cu=au(),[aF,Zz]=$E("DropdownMenu"),bF=(0,lo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:m,disabled:J=!1}=b,Y=bb(b,["__scopeDropdownMenu","disabled"]),
ia=Zz("DropdownMenuTrigger",m),ta=cu(m);return(0,lo.createElement)(Tz,ef({asChild:!0},ta),(0,lo.createElement)(dl.button,ef({type:"button",id:ia.triggerId,"aria-haspopup":"menu","aria-expanded":ia.open?!0:void 0,"aria-controls":ia.open?ia.contentId:void 0,"data-state":ia.open?"open":"closed","data-disabled":J?"":void 0,disabled:J},Y,{ref:uk(g,ia.triggerRef),onPointerDown:eg(b.onPointerDown,Ka=>{J||0!==Ka.button||!1!==Ka.ctrlKey||(ia.onOpenToggle(),ia.open||Ka.preventDefault())}),onKeyDown:eg(b.onKeyDown,
Ka=>{if(!J){if(["Enter"," "].includes(Ka.key))ia.onOpenToggle();if("ArrowDown"===Ka.key)ia.onOpenChange(!0);[" ","ArrowDown"].includes(Ka.key)&&Ka.preventDefault()}})})))}),cF=(0,lo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;const J=bb(b,["__scopeDropdownMenu"]),Y=Zz("DropdownMenuContent",m);m=cu(m);const ia=(0,lo.useRef)(!1);return(0,lo.createElement)(Vz,ef({id:Y.contentId,"aria-labelledby":Y.triggerId},m,J,{ref:g,onCloseAutoFocus:eg(b.onCloseAutoFocus,ta=>{var Ka;ia.current||null===(Ka=Y.triggerRef.current)||
void 0===Ka||Ka.focus();ia.current=!1;ta.preventDefault()}),onInteractOutside:eg(b.onInteractOutside,ta=>{ta=ta.detail.originalEvent;const Ka=0===ta.button&&!0===ta.ctrlKey;ta=2===ta.button||Ka;if(!Y.modal||ta)ia.current=!0}),style:Ga(Qa({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Ks=(0,lo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;b=bb(b,["__scopeDropdownMenu"]);m=cu(m);return(0,lo.createElement)(Xz,ef({},m,b,{ref:g}))}),dF=
b=>{const {__scopeDropdownMenu:g,children:m,dir:J,open:Y,defaultOpen:ia,onOpenChange:ta,modal:Ka=!0}=b;b=cu(g);const Za=(0,lo.useRef)(null),[db=!1,sb]=Vf({prop:Y,defaultProp:ia,onChange:ta});return(0,lo.createElement)(aF,{scope:g,triggerId:zj(),triggerRef:Za,contentId:zj(),open:db,onOpenChange:sb,onOpenToggle:(0,lo.useCallback)(()=>sb(xb=>!xb),[sb]),modal:Ka},(0,lo.createElement)(Yz,ef({},b,{open:db,onOpenChange:sb,dir:J,modal:Ka}),m))};Kb=S(611);var eF=gf(function(){const b=xg(),g=m=>{m.preventDefault()};
return(0,Kb.jsxs)(dF,{children:[(0,Kb.jsx)(bF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,Kb.jsxs)(cF,{className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Kb.jsxs)(Ks,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,children:["Zoom to fit",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:"⇧"})," ",(0,Kb.jsx)("code",
{children:"1"})]})})]}),(0,Kb.jsxs)(Ks,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,children:["Zoom to selection",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"⇧"})," ",(0,Kb.jsx)("code",{children:"1"})]})})]}),(0,Kb.jsxs)(Ks,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"+"})]})})]}),(0,Kb.jsxs)(Ks,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"-"})]})})]}),(0,Kb.jsxs)(Ks,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,
children:["Reset zoom",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:"⇧"})," ",(0,Kb.jsx)("code",{children:"0"})]})})]})]})]})}),$z=S(16),aA=["horizontal","vertical"],Ls=(0,$z.forwardRef)((b,g)=>{const {decorative:m,orientation:J="horizontal"}=b;b=bb(b,["decorative","orientation"]);const Y=aA.includes(J)?J:"horizontal";return(0,$z.createElement)(dl.div,ef({"data-orientation":Y},m?{role:"none"}:{"aria-orientation":"vertical"===
Y?Y:void 0,role:"separator"},b,{ref:g}))});Ls.propTypes={orientation(b,g,m){b=b[g];g=String(b);return b&&!aA.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};Kb=S(611);var fF=gf(function(){const b=xg(),g=Tt.useCallback(()=>{b.api.undo()},[b]),m=Tt.useCallback(()=>{b.api.redo()},[b]),J=Tt.useCallback(()=>{b.api.zoomIn()},[b]),Y=Tt.useCallback(()=>{b.api.zoomOut()},[b]);return(0,Kb.jsxs)("div",{className:"tl-action-bar",children:[(0,Kb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Kb.jsx)(Ji,{title:"Undo",onClick:g,children:(0,Kb.jsx)(Fi,{name:"arrow-back-up"})}),(0,Kb.jsx)(Ji,{title:"Redo",onClick:m,
children:(0,Kb.jsx)(Fi,{name:"arrow-forward-up"})})]}),(0,Kb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,Kb.jsx)(Ji,{title:"Zoom in",onClick:J,id:"tl-zoom-in",children:(0,Kb.jsx)(Fi,{name:"plus"})}),(0,Kb.jsx)(Ji,{title:"Zoom out",onClick:Y,id:"tl-zoom-out",children:(0,Kb.jsx)(Fi,{name:"minus"})}),(0,Kb.jsx)(Ls,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Kb.jsx)(eF,{})]})]})}),Uq=Cc(S(16)),bA=Cc(S(25));Kb=S(611);var du=b=>`[${b.map(g=>g.toFixed(2)).join(", ")}]`,
gF=gf(function(){const b=xg(),g=Uq.default.useRef(),[,m]=Uq.default.useState(0);Uq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);m(J=>J+1);return()=>{var J;null==(J=g.current)?void 0:J.remove()}},[]);Uq.default.useEffect(()=>{requestIdleCallback(()=>{var J,Y;null==(Y=null==(J=g.current)?void 0:J.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:Y.scrollIntoView()})},[b.history.pointer]);return g.current?
bA.default.createPortal((0,Kb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((J,Y)=>(0,Kb.jsx)("div",{"data-item-index":Y,style:{background:b.history.pointer===Y?"pink":"grey"},onClick:()=>b.history.setPointer(Y),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:J.pages[0].nonce},Y))}),g.current):null});gf(()=>{const {viewport:{bounds:b,camera:{point:g,zoom:m}},inputs:J}=Sg(),
Y=Uq.default.useRef(),ia=Uq.default.useRef();Uq.default.useEffect(()=>{var Ka=document.getElementById("tl-dev-tools-canvas-anchor");Y.current=Ka;Ka=document.getElementById("tl-statusbar-anchor");ia.current=Ka},[]);var ta=[["Z",m.toFixed(2)],["MP",du(J.currentPoint)],["MS",du(J.currentScreenPoint)],["VP",du(g)],["VBR",du([b.maxX,b.maxY])]].map(Ka=>Ka.join("")).join("|");ta=ia.current?bA.default.createPortal((0,Kb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:ta}),ia.current):
null;return(0,Kb.jsxs)(Kb.Fragment,{children:[ta,(0,Kb.jsx)(gF,{})]})});var eu=Cc(S(16));Kb=S(611);var cp=gf(b=>{var {id:g,icon:m,title:J}=b;b=bb(b,["id","icon","title"]);var Y,ia;const ta=xg(),Ka=eu.useCallback(db=>{(db=db.currentTarget.dataset.tool)&&ta.selectTool(db)},[ta]),Za=null==(ia=(null==(Y=[...ta.Tools,lr,mr])?void 0:Y.find(db=>db.id===g)).shortcut)?void 0:ia[0];Y=Za?`${J} (${Za})`:J;return(0,Kb.jsx)(Ji,Ga(Qa({},b),{title:Y,"data-tool":g,"data-selected":g===ta.selectedTool.id,onClick:Ka,
children:"string"===typeof m?(0,Kb.jsx)(Fi,{name:m}):m}))}),hF=gf(()=>{const b=[{id:"box",icon:"square",title:"Rectangle"},{id:"ellipse",icon:"circle",title:"Circle"},{id:"polygon",icon:"triangle",title:"Triangle"}],g=xg(),[m,J]=eu.useState(()=>{var ta;return(null!=(ta=b.find(Ka=>Ka.id===g.selectedTool.id))?ta:b[0]).id}),[Y,ia]=eu.useState(!1);eu.useEffect(()=>{J(ta=>{var Ka,Za;return null!=(Za=null==(Ka=b.find(db=>db.id===g.selectedTool.id))?void 0:Ka.id)?Za:ta})},[g.selectedTool.id]);return(0,Kb.jsxs)("div",
{className:"tl-geometry-tools-pane-anchor",onMouseEnter:()=>ia(!0),onMouseLeave:()=>ia(!1),children:[(0,Kb.jsx)(cp,Qa({},b.find(ta=>ta.id===m))),Y&&(0,Kb.jsx)("div",{className:"tl-geometry-tools-pane",children:b.map(ta=>(0,Kb.jsx)(cp,Qa({},ta),ta.id))})]})}),iF=gf(function(){const b=xg();return(0,Kb.jsx)("div",{className:"tl-primary-tools",children:(0,Kb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel","data-tool-locked":b.settings.isToolLocked,children:[(0,Kb.jsx)(cp,{title:"Select",id:"select",
icon:"select-cursor"}),(0,Kb.jsx)(cp,{title:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Kb.jsx)(cp,{title:"Draw",id:"pencil",icon:"ballpen"}),(0,Kb.jsx)(cp,{title:"Highlight",id:"highlighter",icon:"highlight"}),(0,Kb.jsx)(cp,{title:"Eraser",id:"erase",icon:"eraser"}),(0,Kb.jsx)(cp,{title:"Connector",id:"line",icon:"connector"}),(0,Kb.jsx)(cp,{title:"Text",id:"text",icon:"text"}),(0,Kb.jsx)(hF,{}),(0,Kb.jsx)(cp,{title:"Logseq Portal",id:"logseq-portal",icon:(0,Kb.jsx)(tl,
{})})]})})}),jF=Cc(S(16));Kb=S(611);gf(function(){const b=xg();jF.useEffect(()=>{const g=document.querySelector(".logseq-tldraw-wrapper .tl-canvas"),m=document.querySelector(".logseq-tldraw-wrapper .tl-action-bar");g&&(g.style.height="calc(100% - 32px)");m&&(m.style.marginBottom="32px");return()=>{g&&(g.style.height="100%");m&&(m.style.marginBottom="0px")}});return(0,Kb.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,(0,Kb.jsx)("div",{style:{flex:1}}),
(0,Kb.jsx)("div",{id:"tl-statusbar-anchor",style:{display:"flex"}})]})});Kb=S(611);var kF=gf(function(){return(0,Kb.jsxs)(Kb.Fragment,{children:[!1,!1,(0,Kb.jsx)(iF,{}),(0,Kb.jsx)(fF,{})]})}),Ms=Cc(S(16)),Vq=Cc(S(16)),xp=Cc(S(16)).default.createContext({}),lF=Cc(S(16)),Oj=S(16),Cn=S(16),dw=S(16),mF=S(25),Nm=S(16),ew=(0,Nm.forwardRef)((b,g)=>{var {children:m}=b;b=bb(b,["children"]);const J=Nm.Children.toArray(m),Y=J.find(Eb);if(Y){const ia=Y.props.children;m=J.map(ta=>ta===Y?1<Nm.Children.count(ia)?
Nm.Children.only(null):(0,Nm.isValidElement)(ia)?ia.props.children:null:ta);return(0,Nm.createElement)(fw,ef({},b,{ref:g}),(0,Nm.isValidElement)(ia)?(0,Nm.cloneElement)(ia,void 0,m):null)}return(0,Nm.createElement)(fw,ef({},b,{ref:g}),m)});ew.displayName="Slot";var fw=(0,Nm.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["children"]);return(0,Nm.isValidElement)(m)?(0,Nm.cloneElement)(m,Ga(Qa({},Tb(b,m.props)),{ref:uk(g,m.ref)})):1<Nm.Children.count(m)?Nm.Children.only(null):null});fw.displayName=
"SlotClone";var nF=({children:b})=>(0,Nm.createElement)(Nm.Fragment,null,b),gw="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,dw.forwardRef)((J,Y)=>{var {asChild:ia}=J;J=bb(J,["asChild"]);ia=ia?ew:g;(0,dw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,dw.createElement)(ia,ef({},J,{ref:Y}))});m.displayName=`Primitive.${g}`;return Ga(Qa({},b),{[g]:m})},{}),oF=S(16),cA,pF=(0,Cn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,
branches:new Set}),qF=(0,Cn.forwardRef)((b,g)=>{var m;const {disableOutsidePointerEvents:J=!1,onEscapeKeyDown:Y,onPointerDownOutside:ia,onFocusOutside:ta,onInteractOutside:Ka,onDismiss:Za}=b,db=bb(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),sb=(0,Cn.useContext)(pF),[xb,Wb]=(0,Cn.useState)(null),kc=null!==(m=null===xb||void 0===xb?void 0:xb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,
[,Ob]=(0,Cn.useState)({});g=Hg(g,Kc=>Wb(Kc));m=Array.from(sb.layers);var [sc]=[...sb.layersWithOutsidePointerEventsDisabled].slice(-1);sc=m.indexOf(sc);const lc=xb?m.indexOf(xb):-1;m=0<sb.layersWithOutsidePointerEventsDisabled.size;const Sb=lc>=sc;sc=Pb(Kc=>{const Gc=Kc.target,Xc=[...sb.branches].some($d=>$d.contains(Gc));Sb&&!Xc&&(null===ia||void 0===ia||ia(Kc),null===Ka||void 0===Ka||Ka(Kc),Kc.defaultPrevented||null===Za||void 0===Za||Za())},kc);const rc=qb(Kc=>{const Gc=Kc.target;[...sb.branches].some(Xc=>
Xc.contains(Gc))||(null===ta||void 0===ta||ta(Kc),null===Ka||void 0===Ka||Ka(Kc),Kc.defaultPrevented||null===Za||void 0===Za||Za())},kc);wb(Kc=>{lc===sb.layers.size-1&&(null===Y||void 0===Y||Y(Kc),!Kc.defaultPrevented&&Za&&(Kc.preventDefault(),Za()))},kc);(0,Cn.useEffect)(()=>{if(xb)return J&&(0===sb.layersWithOutsidePointerEventsDisabled.size&&(cA=kc.body.style.pointerEvents,kc.body.style.pointerEvents="none"),sb.layersWithOutsidePointerEventsDisabled.add(xb)),sb.layers.add(xb),Lb(),()=>{J&&1===
sb.layersWithOutsidePointerEventsDisabled.size&&(kc.body.style.pointerEvents=cA)}},[xb,kc,J,sb]);(0,Cn.useEffect)(()=>()=>{xb&&(sb.layers.delete(xb),sb.layersWithOutsidePointerEventsDisabled.delete(xb),Lb())},[xb,sb]);(0,Cn.useEffect)(()=>{const Kc=()=>Ob({});document.addEventListener("dismissableLayer.update",Kc);return()=>document.removeEventListener("dismissableLayer.update",Kc)},[]);return(0,Cn.createElement)(gw.div,ef({},db,{ref:g,style:Qa({pointerEvents:m?Sb?"auto":"none":void 0},b.style),onFocusCapture:eg(b.onFocusCapture,
rc.onFocusCapture),onBlurCapture:eg(b.onBlurCapture,rc.onBlurCapture),onPointerDownCapture:eg(b.onPointerDownCapture,sc.onPointerDownCapture)}))}),aq=S(16),dA={bubbles:!1,cancelable:!0},rF=(0,aq.forwardRef)((b,g)=>{const {loop:m=!1,trapped:J=!1,onMountAutoFocus:Y,onUnmountAutoFocus:ia}=b;b=bb(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ta,Ka]=(0,aq.useState)(null),Za=ki(Y),db=ki(ia),sb=(0,aq.useRef)(null);g=Hg(g,kc=>Ka(kc));const xb=(0,aq.useRef)({paused:!1,pause(){this.paused=
!0},resume(){this.paused=!1}}).current;(0,aq.useEffect)(()=>{if(J){let kc=function(sc){!xb.paused&&ta&&(sc=sc.target,ta.contains(sc)?sb.current=sc:Rd(sb.current,{select:!0}))},Ob=function(sc){!xb.paused&&ta&&(ta.contains(sc.relatedTarget)||Rd(sb.current,{select:!0}))};document.addEventListener("focusin",kc);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",kc);document.removeEventListener("focusout",Ob)}}},[J,ta,xb.paused]);(0,aq.useEffect)(()=>{if(ta){eA.add(xb);
const kc=document.activeElement;if(!ta.contains(kc)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",dA);ta.addEventListener("focusScope.autoFocusOnMount",Za);ta.dispatchEvent(Ob);Ob.defaultPrevented||(Bc(Ed(Qc(ta)),{select:!0}),document.activeElement===kc&&Rd(ta))}return()=>{ta.removeEventListener("focusScope.autoFocusOnMount",Za);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",dA);ta.addEventListener("focusScope.autoFocusOnUnmount",db);ta.dispatchEvent(Ob);Ob.defaultPrevented||
Rd(null!==kc&&void 0!==kc?kc:document.body,{select:!0});ta.removeEventListener("focusScope.autoFocusOnUnmount",db);eA.remove(xb)},0)}}},[ta,Za,db,xb]);const Wb=(0,aq.useCallback)(kc=>{if((m||J)&&!xb.paused){var Ob=document.activeElement;if("Tab"===kc.key&&!kc.altKey&&!kc.ctrlKey&&!kc.metaKey&&Ob){const lc=kc.currentTarget;var sc=lc;const Sb=Qc(sc),rc=Uc(Sb,sc);sc=Uc(Sb.reverse(),sc);const [Kc,Gc]=[rc,sc];Kc&&Gc?kc.shiftKey||Ob!==Gc?kc.shiftKey&&Ob===Kc&&(kc.preventDefault(),m&&Rd(Gc,{select:!0})):
(kc.preventDefault(),m&&Rd(Kc,{select:!0})):Ob===lc&&kc.preventDefault()}}},[m,J,xb.paused]);return(0,aq.createElement)(gw.div,ef({tabIndex:-1},b,{ref:g,onKeyDown:Wb}))}),eA=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=Hd(b,g);b.unshift(g)},remove(g){var m;b=Hd(b,g);null===(m=b[0])||void 0===m||m.resume()}}}(),Ak=S(16),hw=S(16),iw=S(16);S(25);var Om=S(16),fA=(0,Om.forwardRef)((b,g)=>{var {children:m}=b;b=bb(b,["children"]);const J=Om.Children.toArray(m),
Y=J.find(Md);if(Y){const ia=Y.props.children;m=J.map(ta=>ta===Y?1<Om.Children.count(ia)?Om.Children.only(null):(0,Om.isValidElement)(ia)?ia.props.children:null:ta);return(0,Om.createElement)(jw,ef({},b,{ref:g}),(0,Om.isValidElement)(ia)?(0,Om.cloneElement)(ia,void 0,m):null)}return(0,Om.createElement)(jw,ef({},b,{ref:g}),m)});fA.displayName="Slot";var jw=(0,Om.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["children"]);return(0,Om.isValidElement)(m)?(0,Om.cloneElement)(m,Ga(Qa({},Ae(b,m.props)),
{ref:uk(g,m.ref)})):1<Om.Children.count(m)?Om.Children.only(null):null});jw.displayName="SlotClone";var sF=({children:b})=>(0,Om.createElement)(Om.Fragment,null,b),tF="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,iw.forwardRef)((J,Y)=>{var {asChild:ia}=J;J=bb(J,["asChild"]);ia=ia?fA:g;(0,iw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,iw.createElement)(ia,ef({},J,{ref:Y}))});m.displayName=`Primitive.${g}`;return Ga(Qa({},b),{[g]:m})},
{}),uF=(0,hw.forwardRef)((b,g)=>{const {children:m,width:J=10,height:Y=5}=b,ia=bb(b,["children","width","height"]);return(0,hw.createElement)(tF.svg,ef({},ia,{ref:g,width:J,height:Y,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?m:(0,hw.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),kw=S(16);S(25);var Pm=S(16),gA=(0,Pm.forwardRef)((b,g)=>{var {children:m}=b;b=bb(b,["children"]);const J=Pm.Children.toArray(m),Y=J.find(Qf);if(Y){const ia=Y.props.children;m=J.map(ta=>ta===Y?1<Pm.Children.count(ia)?
Pm.Children.only(null):(0,Pm.isValidElement)(ia)?ia.props.children:null:ta);return(0,Pm.createElement)(lw,ef({},b,{ref:g}),(0,Pm.isValidElement)(ia)?(0,Pm.cloneElement)(ia,void 0,m):null)}return(0,Pm.createElement)(lw,ef({},b,{ref:g}),m)});gA.displayName="Slot";var lw=(0,Pm.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["children"]);return(0,Pm.isValidElement)(m)?(0,Pm.cloneElement)(m,Ga(Qa({},ve(b,m.props)),{ref:uk(g,m.ref)})):1<Pm.Children.count(m)?Pm.Children.only(null):null});lw.displayName=
"SlotClone";var vF=({children:b})=>(0,Pm.createElement)(Pm.Fragment,null,b),mw="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,kw.forwardRef)((J,Y)=>{var {asChild:ia}=J;J=bb(J,["asChild"]);ia=ia?gA:g;(0,kw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,kw.createElement)(ia,ef({},J,{ref:Y}))});m.displayName=`Primitive.${g}`;return Ga(Qa({},b),{[g]:m})},{}),[nw,hA]=ti("Popper"),[wF,iA]=nw("Popper"),xF=(0,Ak.forwardRef)((b,g)=>{const {__scopePopper:m,
virtualRef:J}=b;b=bb(b,["__scopePopper","virtualRef"]);const Y=iA("PopperAnchor",m),ia=(0,Ak.useRef)(null);g=Hg(g,ia);(0,Ak.useEffect)(()=>{Y.onAnchorChange((null===J||void 0===J?void 0:J.current)||ia.current)});return J?null:(0,Ak.createElement)(mw.div,ef({},b,{ref:g}))}),[yF,zF]=nw("PopperContent"),[AF,BF]=nw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),CF=(0,Ak.forwardRef)((b,g)=>{var m,J,Y,ia,ta,Ka,Za,db;const {__scopePopper:sb,side:xb="bottom",sideOffset:Wb=0,align:kc="center",alignOffset:Ob=
0,arrowPadding:sc=0,collisionBoundary:lc=[],collisionPadding:Sb=0,sticky:rc="partial",hideWhenDetached:Kc=!1,avoidCollisions:Gc=!0}=b;b=bb(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Xc=iA("PopperContent",sb),[$d,Jd]=(0,Ak.useState)(null);g=Hg(g,Xn=>Jd(Xn));const [qe,Ye]=(0,Ak.useState)(null);var Ge=Ij(qe),Ve=null!==(m=null===Ge||void 0===Ge?void 0:Ge.width)&&void 0!==m?m:0;m=null!==(J=
null===Ge||void 0===Ge?void 0:Ge.height)&&void 0!==J?J:0;J=xb+("center"!==kc?"-"+kc:"");Ge="number"===typeof Sb?Sb:Qa({top:0,right:0,bottom:0,left:0},Sb);const ee=Array.isArray(lc)?lc:[lc],Gd=0<ee.length;Ge={padding:Ge,boundary:ee.filter(Pe),altBoundary:Gd};const {reference:gd,floating:bd,strategy:ud,x:zd,y:Id,placement:we,middlewareData:ye,update:Ie}=Ag({strategy:"fixed",placement:J,whileElementsMounted:mk,middleware:[vz({mainAxis:Wb+m,alignmentAxis:Ob}),Gc?wz(Qa({mainAxis:!0,crossAxis:!1,limiter:"partial"===
rc?xz():void 0},Ge)):void 0,qe?Az({element:qe,padding:sc}):void 0,Gc?tz(Qa({},Ge)):void 0,FF({arrowWidth:Ve,arrowHeight:m}),Kc?uz({strategy:"referenceHidden"}):void 0].filter($e)});$m(()=>{gd(Xc.anchor)},[gd,Xc.anchor]);const uf=null!==zd&&null!==Id,[nf,Vg]=Te(we);Ve=null===(Y=ye.arrow)||void 0===Y?void 0:Y.x;Y=null===(ia=ye.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(ta=ye.arrow)||void 0===ta?void 0:ta.centerOffset);const [Kg,Wh]=(0,Ak.useState)();$m(()=>{$d&&Wh(window.getComputedStyle($d).zIndex)},
[$d]);const {hasParent:Gj,positionUpdateFns:ej}=BF("PopperContent",sb),em=!Gj;(0,Ak.useLayoutEffect)(()=>{if(!em)return ej.add(Ie),()=>{ej.delete(Ie)}},[em,ej,Ie]);(0,Ak.useLayoutEffect)(()=>{em&&uf&&Array.from(ej).reverse().forEach(Xn=>requestAnimationFrame(Xn))},[em,uf,ej]);ta=Ga(Qa({"data-side":nf,"data-align":Vg},b),{ref:g,style:Ga(Qa({},b.style),{animation:uf?void 0:"none",opacity:null!==(Ka=ye.hide)&&void 0!==Ka&&Ka.referenceHidden?0:void 0})});return(0,Ak.createElement)("div",{ref:bd,"data-radix-popper-content-wrapper":"",
style:{position:ud,left:0,top:0,transform:uf?`translate3d(${Math.round(zd)}px, ${Math.round(Id)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Kg,["--radix-popper-transform-origin"]:[null===(Za=ye.transformOrigin)||void 0===Za?void 0:Za.x,null===(db=ye.transformOrigin)||void 0===db?void 0:db.y].join(" ")}},(0,Ak.createElement)(yF,{scope:sb,placedSide:nf,onArrowChange:Ye,arrowX:Ve,arrowY:Y,shouldHideArrow:ia},em?(0,Ak.createElement)(AF,{scope:sb,hasParent:!0,positionUpdateFns:ej},
(0,Ak.createElement)(mw.div,ta)):(0,Ak.createElement)(mw.div,ta)))}),DF={top:"bottom",right:"left",bottom:"top",left:"right"},EF=(0,Ak.forwardRef)(function(b,g){var {__scopePopper:m}=b;b=bb(b,["__scopePopper"]);m=zF("PopperArrow",m);return(0,Ak.createElement)("span",{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[DF[m.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",
bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,Ak.createElement)(uF,ef({},b,{ref:g,style:Ga(Qa({},b.style),{display:"block"})})))}),FF=b=>({name:"transformOrigin",options:b,fn(g){var m,J,Y,ia,ta;const {placement:Ka,rects:Za,middlewareData:db}=g,sb=(g=0!==(null===(m=db.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [xb,Wb]=Te(Ka),kc={start:"0%",center:"50%",end:"100%"}[Wb],
Ob=(null!==(J=null===(Y=db.arrow)||void 0===Y?void 0:Y.x)&&void 0!==J?J:0)+sb/2;J=(null!==(ia=null===(ta=db.arrow)||void 0===ta?void 0:ta.y)&&void 0!==ia?ia:0)+m/2;ta=ia="";"bottom"===xb?(ia=g?kc:`${Ob}px`,ta=`${-m}px`):"top"===xb?(ia=g?kc:`${Ob}px`,ta=`${Za.floating.height+m}px`):"right"===xb?(ia=`${-m}px`,ta=g?kc:`${J}px`):"left"===xb&&(ia=`${Za.floating.width+m}px`,ta=g?kc:`${J}px`);return{data:{x:ia,y:ta}}}}),GF=b=>{const {__scopePopper:g,children:m}=b,[J,Y]=(0,Ak.useState)(null);return(0,Ak.createElement)(wF,
{scope:g,anchor:J,onAnchorChange:Y},m)},jA=Cc(S(16)),yp=Cc(S(16)),kA=Oi(),ow=function(){},fu=yp.forwardRef(function(b,g){var m=yp.useRef(null),J=yp.useState({onScrollCapture:ow,onWheelCapture:ow,onTouchMoveCapture:ow}),Y=J[0];J=J[1];var ia=b.forwardProps,ta=b.children,Ka=b.className,Za=b.removeScrollBar,db=b.enabled,sb=b.shards,xb=b.sideCar,Wb=b.noIsolation,kc=b.inert,Ob=b.allowPinchZoom,sc=b.as;sc=void 0===sc?"div":sc;b=Uv(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
g=oh([m,g]);Y=Bn(Bn({},b),Y);return yp.createElement(yp.Fragment,null,db&&yp.createElement(xb,{sideCar:kA,removeScrollBar:Za,shards:sb,noIsolation:Wb,inert:kc,setCallbacks:J,allowPinchZoom:!!Ob,lockRef:m}),ia?yp.cloneElement(yp.Children.only(ta),Bn(Bn({},Y),{ref:g})):yp.createElement(sc,Bn({},Y,{className:Ka,ref:g}),ta))});fu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fu.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var om=Cc(S(16)),pw=!1;if("undefined"!==
typeof window)try{wp=Object.defineProperty({},"passive",{get:function(){return pw=!0}}),window.addEventListener("test",wp,wp),window.removeEventListener("test",wp,wp)}catch(b){pw=!1}var Ir=pw?{passive:!1}:!1,lA=function(b,g){var m=window.getComputedStyle(b);return"hidden"!==m[g]&&!(m.overflowY===m.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===m[g])},mA=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(nA(b,g)){var m=oA(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&
g!==document.body);return!1},nA=function(b,g){return"v"===b?lA(g,"overflowY"):lA(g,"overflowX")},oA=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},gu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},pA=function(b){return b&&"current"in b?b.current:b},HF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},
IF=0,Jr=[];kA.useMedium(function(b){var g=om.useRef([]),m=om.useRef([0,0]),J=om.useRef(),Y=om.useState(IF++)[0],ia=om.useState(function(){return Xv()})[0],ta=om.useRef(b);om.useEffect(function(){ta.current=b},[b]);om.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(Y));var Ob=Iz([b.lockRef.current],(b.shards||[]).map(pA),!0).filter(Boolean);Ob.forEach(function(sc){return sc.classList.add("allow-interactivity-".concat(Y))});return function(){document.body.classList.remove("block-interactivity-".concat(Y));
Ob.forEach(function(sc){return sc.classList.remove("allow-interactivity-".concat(Y))})}}},[b.inert,b.lockRef.current,b.shards]);var Ka=om.useCallback(function(Ob,sc){if("touches"in Ob&&2===Ob.touches.length)return!ta.current.allowPinchZoom;var lc=gu(Ob),Sb=m.current,rc="deltaX"in Ob?Ob.deltaX:Sb[0]-lc[0];Sb="deltaY"in Ob?Ob.deltaY:Sb[1]-lc[1];var Kc=Ob.target,Gc=Math.abs(rc)>Math.abs(Sb)?"h":"v";if("touches"in Ob&&"h"===Gc&&"range"===Kc.type)return!1;var Xc=mA(Gc,Kc);if(!Xc)return!0;Xc?lc=Gc:(lc=
"v"===Gc?"h":"v",Xc=mA(Gc,Kc));if(!Xc)return!1;!J.current&&"changedTouches"in Ob&&(rc||Sb)&&(J.current=lc);if(!lc)return!0;lc=J.current||lc;Sb="h"===lc?rc:Sb;rc=window.getComputedStyle(sc).direction;rc="h"===lc&&"rtl"===rc?-1:1;Gc=rc*Sb;Ob=Ob.target;Sb=sc.contains(Ob);Kc=!1;Gc=0<Gc;var $d=Xc=0;do{var Jd=oA(lc,Ob),qe=Jd[0];Jd=Jd[1]-Jd[2]-rc*qe;(qe||Jd)&&nA(lc,Ob)&&(Xc+=Jd,$d+=qe);Ob=Ob.parentNode}while(!Sb&&Ob!==document.body||Sb&&(sc.contains(Ob)||sc===Ob));Gc&&0===Xc?Kc=!0:Gc||0!==$d||(Kc=!0);return Kc},
[]),Za=om.useCallback(function(Ob){if(Jr.length&&Jr[Jr.length-1]===ia){var sc="deltaY"in Ob?[Ob.deltaX,Ob.deltaY]:gu(Ob),lc=g.current.filter(function(Sb){var rc;if(rc=Sb.name===Ob.type&&Sb.target===Ob.target)Sb=Sb.delta,rc=Sb[0]===sc[0]&&Sb[1]===sc[1];return rc})[0];lc&&lc.should?Ob.cancelable&&Ob.preventDefault():lc||(lc=(ta.current.shards||[]).map(pA).filter(Boolean).filter(function(Sb){return Sb.contains(Ob.target)}),(0<lc.length?Ka(Ob,lc[0]):!ta.current.noIsolation)&&Ob.cancelable&&Ob.preventDefault())}},
[]),db=om.useCallback(function(Ob,sc,lc,Sb){var rc={name:Ob,delta:sc,target:lc,should:Sb};g.current.push(rc);setTimeout(function(){g.current=g.current.filter(function(Kc){return Kc!==rc})},1)},[]),sb=om.useCallback(function(Ob){m.current=gu(Ob);J.current=void 0},[]),xb=om.useCallback(function(Ob){db(Ob.type,[Ob.deltaX,Ob.deltaY],Ob.target,Ka(Ob,b.lockRef.current))},[]),Wb=om.useCallback(function(Ob){db(Ob.type,gu(Ob),Ob.target,Ka(Ob,b.lockRef.current))},[]);om.useEffect(function(){Jr.push(ia);b.setCallbacks({onScrollCapture:xb,
onWheelCapture:xb,onTouchMoveCapture:Wb});document.addEventListener("wheel",Za,Ir);document.addEventListener("touchmove",Za,Ir);document.addEventListener("touchstart",sb,Ir);return function(){Jr=Jr.filter(function(Ob){return Ob!==ia});document.removeEventListener("wheel",Za,Ir);document.removeEventListener("touchmove",Za,Ir);document.removeEventListener("touchstart",sb,Ir)}},[]);var kc=b.removeScrollBar;return om.createElement(om.Fragment,null,b.inert?om.createElement(ia,{styles:HF(Y)}):null,kc?om.createElement(Mz,
{gapMode:"margin"}):null)});var qA=jA.forwardRef(function(b,g){return jA.createElement(fu,Bn({},b,{ref:g,sideCar:Vv}))});qA.classNames=fu.classNames;var [rA]=ti("Popover",[hA]),hu=hA(),[JF,Ns]=rA("Popover"),KF=(0,Oj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;const J=bb(b,["__scopePopover"]),Y=Ns("PopoverTrigger",m);m=hu(m);g=Hg(g,Y.triggerRef);b=(0,Oj.createElement)(gw.button,ef({type:"button","aria-haspopup":"dialog","aria-expanded":Y.open,"aria-controls":Y.contentId,"data-state":Y.open?"open":
"closed"},J,{ref:g,onClick:eg(b.onClick,Y.onOpenToggle)}));return Y.hasCustomAnchor?b:(0,Oj.createElement)(xF,ef({asChild:!0},m),b)}),[,LF]=rA("PopoverPortal",{forceMount:void 0}),MF=(0,Oj.forwardRef)((b,g)=>{var m=LF("PopoverContent",b.__scopePopover);({forceMount:m=m.forceMount}=b);const J=bb(b,["forceMount"]);b=Ns("PopoverContent",b.__scopePopover);return(0,Oj.createElement)(Vt,{present:m||b.open},b.modal?(0,Oj.createElement)(NF,ef({},J,{ref:g})):(0,Oj.createElement)(OF,ef({},J,{ref:g})))}),NF=
(0,Oj.forwardRef)((b,g)=>{const m=Ns("PopoverContent",b.__scopePopover),J=(0,Oj.useRef)(null);g=Hg(g,J);const Y=(0,Oj.useRef)(!1);(0,Oj.useEffect)(()=>{const ia=J.current;if(ia)return Tv(ia)},[]);return(0,Oj.createElement)(qA,{as:ew,allowPinchZoom:!0},(0,Oj.createElement)(sA,ef({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:eg(b.onCloseAutoFocus,ia=>{var ta;ia.preventDefault();Y.current||null===(ta=m.triggerRef.current)||void 0===ta||ta.focus()}),onPointerDownOutside:eg(b.onPointerDownOutside,
ia=>{ia=ia.detail.originalEvent;const ta=0===ia.button&&!0===ia.ctrlKey;Y.current=2===ia.button||ta},{checkForDefaultPrevented:!1}),onFocusOutside:eg(b.onFocusOutside,ia=>ia.preventDefault(),{checkForDefaultPrevented:!1})})))}),OF=(0,Oj.forwardRef)((b,g)=>{const m=Ns("PopoverContent",b.__scopePopover),J=(0,Oj.useRef)(!1);return(0,Oj.createElement)(sA,ef({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Y=>{var ia;null===(ia=b.onCloseAutoFocus)||void 0===ia||ia.call(b,Y);if(!Y.defaultPrevented){var ta;
J.current||null===(ta=m.triggerRef.current)||void 0===ta||ta.focus();Y.preventDefault()}J.current=!1},onInteractOutside:Y=>{var ia,ta;null===(ia=b.onInteractOutside)||void 0===ia||ia.call(b,Y);Y.defaultPrevented||(J.current=!0);ia=Y.target;(null===(ta=m.triggerRef.current)||void 0===ta?0:ta.contains(ia))&&Y.preventDefault()}}))}),sA=(0,Oj.forwardRef)((b,g)=>{const {__scopePopover:m,trapFocus:J,onOpenAutoFocus:Y,onCloseAutoFocus:ia,disableOutsidePointerEvents:ta,onEscapeKeyDown:Ka,onPointerDownOutside:Za,
onFocusOutside:db,onInteractOutside:sb}=b;b=bb(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const xb=Ns("PopoverContent",m),Wb=hu(m);ij();return(0,Oj.createElement)(rF,{asChild:!0,loop:!0,trapped:J,onMountAutoFocus:Y,onUnmountAutoFocus:ia},(0,Oj.createElement)(qF,{asChild:!0,disableOutsidePointerEvents:ta,onInteractOutside:sb,onEscapeKeyDown:Ka,onPointerDownOutside:Za,onFocusOutside:db,
onDismiss:()=>xb.onOpenChange(!1)},(0,Oj.createElement)(CF,ef({"data-state":xb.open?"open":"closed",role:"dialog",id:xb.contentId},Wb,b,{ref:g,style:Ga(Qa({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),PF=(0,Oj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;b=bb(b,["__scopePopover"]);m=hu(m);return(0,Oj.createElement)(EF,ef({},m,b,{ref:g}))}),QF=b=>{const {__scopePopover:g,children:m,open:J,defaultOpen:Y,onOpenChange:ia,modal:ta=!1}=b;b=hu(g);
const Ka=(0,Oj.useRef)(null),[Za,db]=(0,Oj.useState)(!1),[sb=!1,xb]=Vf({prop:J,defaultProp:Y,onChange:ia});return(0,Oj.createElement)(GF,b,(0,Oj.createElement)(JF,{scope:g,contentId:zj(),triggerRef:Ka,open:sb,onOpenChange:xb,onOpenToggle:(0,Oj.useCallback)(()=>xb(Wb=>!Wb),[xb]),hasCustomAnchor:Za,onCustomAnchorAdd:(0,Oj.useCallback)(()=>db(!0),[]),onCustomAnchorRemove:(0,Oj.useCallback)(()=>db(!1),[]),modal:ta},m))},RF=KF,SF=MF,TF=PF,ri=S(16),tA=S(16),qw=S(16);S(25);var Qm=S(16),iu=(0,Qm.forwardRef)((b,
g)=>{var {children:m}=b;b=bb(b,["children"]);const J=Qm.Children.toArray(m),Y=J.find($i);if(Y){const ia=Y.props.children;m=J.map(ta=>ta===Y?1<Qm.Children.count(ia)?Qm.Children.only(null):(0,Qm.isValidElement)(ia)?ia.props.children:null:ta);return(0,Qm.createElement)(rw,ef({},b,{ref:g}),(0,Qm.isValidElement)(ia)?(0,Qm.cloneElement)(ia,void 0,m):null)}return(0,Qm.createElement)(rw,ef({},b,{ref:g}),m)});iu.displayName="Slot";var rw=(0,Qm.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["children"]);
return(0,Qm.isValidElement)(m)?(0,Qm.cloneElement)(m,Ga(Qa({},Lf(b,m.props)),{ref:uk(g,m.ref)})):1<Qm.Children.count(m)?Qm.Children.only(null):null});rw.displayName="SlotClone";var UF=({children:b})=>(0,Qm.createElement)(Qm.Fragment,null,b),ju="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,qw.forwardRef)((J,Y)=>{var {asChild:ia}=J;J=bb(J,["asChild"]);ia=ia?iu:g;(0,qw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,qw.createElement)(ia,ef({},
J,{ref:Y}))});m.displayName=`Primitive.${g}`;return Ga(Qa({},b),{[g]:m})},{}),dp=Cc(S(16)),uA=["PageUp","PageDown"],vA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[sw,VF,WF]=function(b){var g=b+"CollectionProvider";const [m,J]=ti(g),[Y,ia]=m(g,{collectionRef:{current:null},
itemMap:new Map}),ta=sb=>{const {scope:xb,children:Wb}=sb;sb=dp.default.useRef(null);const kc=dp.default.useRef(new Map).current;return dp.default.createElement(Y,{scope:xb,itemMap:kc,collectionRef:sb},Wb)};Object.assign(ta,{displayName:g});const Ka=b+"CollectionSlot";g=dp.default.forwardRef((sb,xb)=>{const {scope:Wb,children:kc}=sb;sb=ia(Ka,Wb);xb=Hg(xb,sb.collectionRef);return dp.default.createElement(iu,{ref:xb},kc)});Object.assign(g,{displayName:Ka});const Za=b+"CollectionItemSlot",db=dp.default.forwardRef((sb,
xb)=>{const {scope:Wb,children:kc}=sb,Ob=bb(sb,["scope","children"]),sc=dp.default.useRef(null);sb=Hg(xb,sc);const lc=ia(Za,Wb);dp.default.useEffect(()=>{lc.itemMap.set(sc,Qa({ref:sc},Ob));return()=>void lc.itemMap.delete(sc)});return dp.default.createElement(iu,{["data-radix-collection-item"]:"",ref:sb},kc)});Object.assign(db,{displayName:Za});return[{Provider:ta,Slot:g,ItemSlot:db},function(sb){const xb=ia(b+"CollectionConsumer",sb);return dp.default.useCallback(()=>{const Wb=xb.collectionRef.current;
if(!Wb)return[];const kc=Array.from(Wb.querySelectorAll("[data-radix-collection-item]"));return Array.from(xb.itemMap.values()).sort((Ob,sc)=>kc.indexOf(Ob.ref.current)-kc.indexOf(sc.ref.current))},[xb.collectionRef,xb.itemMap])},J]}("Slider"),[xA]=ti("Slider",[WF]),[XF,ku]=xA("Slider"),YF=(0,ri.forwardRef)((b,g)=>{function m(ee){const Gd=Og(Ye,ee);ia(ee,Gd)}function J(ee){ia(ee,$d.current)}function Y(){Ye[$d.current]!==Ve.current[$d.current]&&lc(Ye)}function ia(ee,Gd,{commit:gd}={commit:!1}){const bd=
(String(db).split(".")[1]||"").length;ee=$g(Math.round((ee-Ka)/db)*db+Ka,bd);const ud=kg(ee,[Ka,Za]);Ge((zd=[])=>{const Id=dg(zd,ud,Gd);var we=Wb*db;if(0<we){const ye=ug(Id);we=Math.min(...ye)>=we}else we=!0;return we?($d.current=Id.indexOf(ud),(we=String(Id)!==String(zd))&&gd&&lc(Id),we?Id:zd):zd})}const {name:ta,min:Ka=0,max:Za=100,step:db=1,orientation:sb="horizontal",disabled:xb=!1,minStepsBetweenThumbs:Wb=0,defaultValue:kc=[Ka],value:Ob,onValueChange:sc=()=>{},onValueCommit:lc=()=>{},inverted:Sb=
!1}=b,rc=bb(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Kc,Gc]=(0,ri.useState)(null);g=Hg(g,ee=>Gc(ee));const Xc=(0,ri.useRef)(new Set),$d=(0,ri.useRef)(0);var Jd="horizontal"===sb;const qe=Kc?!!Kc.closest("form"):!0;Jd=Jd?ZF:$F;const [Ye=[],Ge]=Vf({prop:Ob,defaultProp:kc,onChange:ee=>{var Gd;null===(Gd=[...Xc.current][$d.current])||void 0===Gd||Gd.focus();sc(ee)}}),Ve=(0,ri.useRef)(Ye);return(0,ri.createElement)(XF,
{scope:b.__scopeSlider,disabled:xb,min:Ka,max:Za,valueIndexToChangeRef:$d,thumbs:Xc.current,values:Ye,orientation:sb},(0,ri.createElement)(sw.Provider,{scope:b.__scopeSlider},(0,ri.createElement)(sw.Slot,{scope:b.__scopeSlider},(0,ri.createElement)(Jd,ef({"aria-disabled":xb,"data-disabled":xb?"":void 0},rc,{ref:g,onPointerDown:eg(rc.onPointerDown,()=>{xb||(Ve.current=Ye)}),min:Ka,max:Za,inverted:Sb,onSlideStart:xb?void 0:m,onSlideMove:xb?void 0:J,onSlideEnd:xb?void 0:Y,onHomeKeyDown:()=>!xb&&ia(Ka,
0,{commit:!0}),onEndKeyDown:()=>!xb&&ia(Za,Ye.length-1,{commit:!0}),onStepKeyDown:({event:ee,direction:Gd})=>{if(!xb){ee=uA.includes(ee.key)||ee.shiftKey&&vA.includes(ee.key);const gd=$d.current;ia(Ye[gd]+db*(ee?10:1)*Gd,gd,{commit:!0})}}})))),qe&&Ye.map((ee,Gd)=>(0,ri.createElement)(eG,{key:Gd,name:ta?ta+(1<Ye.length?"[]":""):void 0,value:ee})))}),[yA,zA]=xA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZF=(0,ri.forwardRef)((b,g)=>{function m(rc){const Kc=Ob.current||Wb.getBoundingClientRect(),
Gc=Yf([0,Kc.width],Sb?[J,Y]:[Y,J]);Ob.current=Kc;return Gc(rc-Kc.left)}const {min:J,max:Y,dir:ia,inverted:ta,onSlideStart:Ka,onSlideMove:Za,onSlideEnd:db,onStepKeyDown:sb}=b,xb=bb(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Wb,kc]=(0,ri.useState)(null);g=Hg(g,rc=>kc(rc));const Ob=(0,ri.useRef)(),sc=Bi(ia),lc="ltr"===sc,Sb=lc&&!ta||!lc&&ta;return(0,ri.createElement)(yA,{scope:b.__scopeSlider,startEdge:Sb?"left":"right",endEdge:Sb?"right":"left",direction:Sb?
1:-1,size:"width"},(0,ri.createElement)(AA,ef({dir:sc,"data-orientation":"horizontal"},xb,{ref:g,style:Ga(Qa({},xb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:rc=>{rc=m(rc.clientX);null===Ka||void 0===Ka||Ka(rc)},onSlideMove:rc=>{rc=m(rc.clientX);null===Za||void 0===Za||Za(rc)},onSlideEnd:()=>{Ob.current=void 0;null===db||void 0===db||db()},onStepKeyDown:rc=>{const Kc=wA[Sb?"from-left":"from-right"].includes(rc.key);null===sb||void 0===sb||sb({event:rc,direction:Kc?
-1:1})}})))}),$F=(0,ri.forwardRef)((b,g)=>{function m(Ob){const sc=Wb.current||xb.current.getBoundingClientRect(),lc=Yf([0,sc.height],kc?[Y,J]:[J,Y]);Wb.current=sc;return lc(Ob-sc.top)}const {min:J,max:Y,inverted:ia,onSlideStart:ta,onSlideMove:Ka,onSlideEnd:Za,onStepKeyDown:db}=b,sb=bb(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),xb=(0,ri.useRef)(null);g=Hg(g,xb);const Wb=(0,ri.useRef)(),kc=!ia;return(0,ri.createElement)(yA,{scope:b.__scopeSlider,startEdge:kc?
"bottom":"top",endEdge:kc?"top":"bottom",size:"height",direction:kc?1:-1},(0,ri.createElement)(AA,ef({"data-orientation":"vertical"},sb,{ref:g,style:Ga(Qa({},sb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Ob=>{Ob=m(Ob.clientY);null===ta||void 0===ta||ta(Ob)},onSlideMove:Ob=>{Ob=m(Ob.clientY);null===Ka||void 0===Ka||Ka(Ob)},onSlideEnd:()=>{Wb.current=void 0;null===Za||void 0===Za||Za()},onStepKeyDown:Ob=>{const sc=wA[kc?"from-bottom":"from-top"].includes(Ob.key);null===
db||void 0===db||db({event:Ob,direction:sc?-1:1})}})))}),AA=(0,ri.forwardRef)((b,g)=>{const {__scopeSlider:m,onSlideStart:J,onSlideMove:Y,onSlideEnd:ia,onHomeKeyDown:ta,onEndKeyDown:Ka,onStepKeyDown:Za}=b,db=bb(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),sb=ku("Slider",m);return(0,ri.createElement)(ju.span,ef({},db,{ref:g,onKeyDown:eg(b.onKeyDown,xb=>{"Home"===xb.key?(ta(xb),xb.preventDefault()):"End"===xb.key?(Ka(xb),xb.preventDefault()):
uA.concat(vA).includes(xb.key)&&(Za(xb),xb.preventDefault())}),onPointerDown:eg(b.onPointerDown,xb=>{const Wb=xb.target;Wb.setPointerCapture(xb.pointerId);xb.preventDefault();sb.thumbs.has(Wb)?Wb.focus():J(xb)}),onPointerMove:eg(b.onPointerMove,xb=>{xb.target.hasPointerCapture(xb.pointerId)&&Y(xb)}),onPointerUp:eg(b.onPointerUp,xb=>{const Wb=xb.target;Wb.hasPointerCapture(xb.pointerId)&&(Wb.releasePointerCapture(xb.pointerId),ia(xb))})}))}),aG=(0,ri.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;b=bb(b,
["__scopeSlider"]);m=ku("SliderTrack",m);return(0,ri.createElement)(ju.span,ef({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},b,{ref:g}))}),bG=(0,ri.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;const J=bb(b,["__scopeSlider"]),Y=ku("SliderRange",m);m=zA("SliderRange",m);var ia=(0,ri.useRef)(null);g=Hg(g,ia);var ta=Y.values.length;ia=Y.values.map(Ka=>eh(Ka,Y.min,Y.max));ta=1<ta?Math.min(...ia):0;ia=100-Math.max(...ia);return(0,ri.createElement)(ju.span,ef({"data-orientation":Y.orientation,
"data-disabled":Y.disabled?"":void 0},J,{ref:g,style:Ga(Qa({},b.style),{[m.startEdge]:ta+"%",[m.endEdge]:ia+"%"})}))}),cG=(0,ri.forwardRef)((b,g)=>{const m=VF(b.__scopeSlider),[J,Y]=(0,ri.useState)(null);g=Hg(g,ta=>Y(ta));const ia=(0,ri.useMemo)(()=>J?m().findIndex(ta=>ta.ref.current===J):-1,[m,J]);return(0,ri.createElement)(dG,ef({},b,{ref:g,index:ia}))}),dG=(0,ri.forwardRef)((b,g)=>{const {__scopeSlider:m,index:J}=b,Y=bb(b,["__scopeSlider","index"]),ia=ku("SliderThumb",m),ta=zA("SliderThumb",m),
[Ka,Za]=(0,ri.useState)(null);g=Hg(g,kc=>Za(kc));var db=Ij(Ka);const sb=ia.values[J],xb=void 0===sb?0:eh(sb,ia.min,ia.max),Wb=Ng(J,ia.values.length);db=(db=null===db||void 0===db?void 0:db[ta.size])?hh(db,xb,ta.direction):0;(0,ri.useEffect)(()=>{if(Ka)return ia.thumbs.add(Ka),()=>{ia.thumbs.delete(Ka)}},[Ka,ia.thumbs]);return(0,ri.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ta.startEdge]:`calc(${xb}% + ${db}px)`}},(0,ri.createElement)(sw.ItemSlot,
{scope:b.__scopeSlider},(0,ri.createElement)(ju.span,ef({role:"slider","aria-label":b["aria-label"]||Wb,"aria-valuemin":ia.min,"aria-valuenow":sb,"aria-valuemax":ia.max,"aria-orientation":ia.orientation,"data-orientation":ia.orientation,"data-disabled":ia.disabled?"":void 0,tabIndex:ia.disabled?void 0:0},Y,{ref:g,style:void 0===sb?{display:"none"}:b.style,onFocus:eg(b.onFocus,()=>{ia.valueIndexToChangeRef.current=J})}))))}),eG=b=>{const {value:g}=b;b=bb(b,["value"]);const m=(0,ri.useRef)(null),J=
Nf(g);(0,ri.useEffect)(()=>{const Y=m.current,ia=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(J!==g&&ia){const ta=new Event("input",{bubbles:!0});ia.call(Y,g);Y.dispatchEvent(ta)}},[J,g]);return(0,ri.createElement)("input",ef({style:{display:"none"}},b,{ref:m,defaultValue:g}))},fG=YF,gG=aG,hG=bG,iG=cG;Kb=S(611);var jG=Cc(S(16)),yf=S(16),BA=S(25),kG=S(16),[,lG]=function(b,g){function m(Y){const {children:ia}=Y,ta=bb(Y,["children"]);Y=(0,Go.useMemo)(()=>ta,Object.values(ta));
return(0,Go.createElement)(J.Provider,{value:Y},ia)}const J=(0,Go.createContext)(g);m.displayName=b+"Provider";return[m,function(Y){const ia=(0,Go.useContext)(J);if(ia)return ia;if(void 0!==g)return g;throw Error(`\`${Y}\` must be used within \`${b}\``);}]}("Label",{id:void 0,controlRef:{current:null}}),mG=b=>{const g=lG("LabelConsumer"),{controlRef:m}=g;(0,kG.useEffect)(()=>{b&&(m.current=b)},[b,m]);return g.id},CA=S(16),nG=(0,CA.forwardRef)((b,g)=>(0,CA.createElement)(dl.span,ef({},b,{ref:g,style:Qa({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),oG=[" ","Enter","ArrowUp","ArrowDown"],pG=[" ","Enter"],[lu,tw,qG]=qj("Select"),[Os]=ti("Select",[qG]),[rG,Kr]=Os("Select"),[sG,tG]=Os("Select"),uG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:m,disabled:J=!1,"aria-labelledby":Y}=b;b=bb(b,["__scopeSelect","disabled","aria-labelledby"]);const ia=Kr("SelectTrigger",m);g=Hg(g,ia.onTriggerChange);const ta=tw(m);
var Ka=mG(ia.trigger);Ka=Y||Ka;const [Za,db,sb]=Pi(xb=>{const Wb=ta().filter(Ob=>!Ob.disabled),kc=Wb.find(Ob=>Ob.value===ia.value);xb=qh(Wb,xb,kc);if(void 0!==xb)ia.onValueChange(xb.value)});return(0,yf.createElement)(dl.button,ef({type:"button",role:"combobox","aria-controls":ia.contentId,"aria-expanded":ia.open,"aria-autocomplete":"none","aria-labelledby":Ka,dir:ia.dir,"data-state":ia.open?"open":"closed",disabled:J,"data-disabled":J?"":void 0,"data-placeholder":void 0===ia.value?"":void 0},b,{ref:g,
onPointerDown:eg(b.onPointerDown,xb=>{xb.target.releasePointerCapture(xb.pointerId);0===xb.button&&!1===xb.ctrlKey&&(J||(ia.onOpenChange(!0),sb()),ia.triggerPointerDownPosRef.current={x:Math.round(xb.pageX),y:Math.round(xb.pageY)},xb.preventDefault())}),onKeyDown:eg(b.onKeyDown,xb=>{const Wb=""!==Za.current;xb.ctrlKey||xb.altKey||xb.metaKey||1!==xb.key.length||db(xb.key);Wb&&" "===xb.key||!oG.includes(xb.key)||(J||(ia.onOpenChange(!0),sb()),xb.preventDefault())})}))}),vG=(0,yf.forwardRef)((b,g)=>
{const {__scopeSelect:m,children:J,placeholder:Y}=b;b=bb(b,["__scopeSelect","className","style","children","placeholder"]);const ia=Kr("SelectValue",m),{onValueNodeHasChildrenChange:ta}=ia,Ka=void 0!==J;g=Hg(g,ia.onValueNodeChange);$m(()=>{ta(Ka)},[ta,Ka]);return(0,yf.createElement)(dl.span,ef({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===ia.value&&void 0!==Y?Y:J)}),wG=(0,yf.forwardRef)((b,g)=>{const {children:m}=b;b=bb(b,["__scopeSelect","children"]);return(0,yf.createElement)(dl.span,ef({"aria-hidden":!0},
b,{ref:g}),m||"▼")}),xG=(0,yf.forwardRef)((b,g)=>{const m=Kr("SelectContent",b.__scopeSelect),[J,Y]=(0,yf.useState)();$m(()=>{Y(new DocumentFragment)},[]);return(0,yf.createElement)(yf.Fragment,null,m.open?(0,yf.createElement)(yG,ef({},b,{ref:g})):J?(0,BA.createPortal)((0,yf.createElement)(DA,{scope:b.__scopeSelect},(0,yf.createElement)(lu.Slot,{scope:b.__scopeSelect},(0,yf.createElement)("div",null,b.children))),J):null)}),[DA,Lr]=Os("SelectContent"),yG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:m,
onCloseAutoFocus:J}=b;b=bb(b,["__scopeSelect","onCloseAutoFocus"]);const Y=Kr("SelectContent",m),[ia,ta]=(0,yf.useState)(null),[Ka,Za]=(0,yf.useState)(null),[db,sb]=(0,yf.useState)(null);g=Hg(g,Id=>Za(Id));const [xb,Wb]=(0,yf.useState)(null),[kc,Ob]=(0,yf.useState)(null),sc=tw(m),[lc,Sb]=(0,yf.useState)(!1),rc=(0,yf.useRef)(!0),Kc=(0,yf.useRef)(!1),Gc=(0,yf.useRef)(!1);(0,yf.useEffect)(()=>{if(Ka)return Tv(Ka)},[Ka]);ij();const [Xc,$d]=(0,yf.useState)();$m(()=>{Ka&&$d(window.getComputedStyle(Ka).zIndex)},
[Ka]);const Jd=(0,yf.useCallback)(Id=>{const [we,...ye]=sc().map(nf=>nf.ref.current),[Ie]=ye.slice(-1),uf=document.activeElement;for(const nf of Id){if(nf===uf)break;null===nf||void 0===nf||nf.scrollIntoView({block:"nearest"});nf===we&&db&&(db.scrollTop=0);nf===Ie&&db&&(db.scrollTop=db.scrollHeight);null===nf||void 0===nf||nf.focus();if(document.activeElement!==uf)break}},[sc,db]),qe=(0,yf.useCallback)(()=>{if(Y.trigger&&Y.valueNode&&ia&&Ka&&db&&xb&&kc){var Id=Y.trigger.getBoundingClientRect(),we=
Ka.getBoundingClientRect(),ye=Y.valueNode.getBoundingClientRect(),Ie=kc.getBoundingClientRect();"rtl"!==Y.dir?(Ie=ye.left-(Ie.left-we.left),ye=Id.width+(Id.left-Ie),we=kg(Ie,[10,window.innerWidth-10-Math.max(ye,we.width)]),ia.style.minWidth=ye+"px",ia.style.left=we+"px"):(Ie=window.innerWidth-ye.right-(we.right-Ie.right),ye=Id.width+(window.innerWidth-Id.right-Ie),we=kg(Ie,[10,window.innerWidth-10-Math.max(ye,we.width)]),ia.style.minWidth=ye+"px",ia.style.right=we+"px");const Gj=sc();we=window.innerHeight-
20;var uf=db.scrollHeight,nf=window.getComputedStyle(Ka);ye=parseInt(nf.borderTopWidth,10);var Vg=parseInt(nf.paddingTop,10);Ie=parseInt(nf.borderBottomWidth,10);nf=parseInt(nf.paddingBottom,10);var Kg=ye+Vg+uf+nf+Ie;uf=Math.min(5*xb.offsetHeight,Kg);var Wh=window.getComputedStyle(db);nf=parseInt(Wh.paddingTop,10);Wh=parseInt(Wh.paddingBottom,10);const ej=Id.top+Id.height/2-10,em=we-ej;Id=xb.offsetHeight/2;Vg=ye+Vg+(xb.offsetTop+Id);Kg-=Vg;Vg<=ej?(ye=xb===Gj[Gj.length-1].ref.current,ia.style.bottom=
"0px",ia.style.height=Vg+Math.max(em,Id+(ye?Wh:0)+(Ka.clientHeight-db.offsetTop-db.offsetHeight)+Ie)+"px"):(Ie=xb===Gj[0].ref.current,ia.style.top="0px",ia.style.height=Math.max(ej,ye+db.offsetTop+(Ie?nf:0)+Id)+Kg+"px",db.scrollTop=Vg-ej+db.offsetTop);ia.style.margin="10px 0";ia.style.minHeight=uf+"px";ia.style.maxHeight=we+"px";Sb(!0);requestAnimationFrame(()=>Kc.current=!0)}},[sc,Y.trigger,Y.valueNode,ia,Ka,db,xb,kc,Y.dir]);$m(()=>qe(),[qe]);const Ye=(0,yf.useCallback)(()=>Jd([xb,Ka]),[Jd,xb,Ka]);
(0,yf.useEffect)(()=>{lc&&Ye()},[lc,Ye]);const Ge=(0,yf.useCallback)(Id=>{Id&&!0===rc.current&&(qe(),Ye(),rc.current=!1)},[qe,Ye]),{onOpenChange:Ve,triggerPointerDownPosRef:ee}=Y;(0,yf.useEffect)(()=>{if(Ka){var Id=0,we=0;const ye=uf=>{var nf,Vg,Kg,Wh;Id=Math.abs(Math.round(uf.pageX)-(null!==(nf=null===(Vg=ee.current)||void 0===Vg?void 0:Vg.x)&&void 0!==nf?nf:0));we=Math.abs(Math.round(uf.pageY)-(null!==(Kg=null===(Wh=ee.current)||void 0===Wh?void 0:Wh.y)&&void 0!==Kg?Kg:0))},Ie=uf=>{10>=Id&&10>=
we?uf.preventDefault():Ka.contains(uf.target)||Ve(!1);document.removeEventListener("pointermove",ye);ee.current=null};null!==ee.current&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",Ie,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",ye);document.removeEventListener("pointerup",Ie,{capture:!0})}}},[Ka,Ve,ee]);(0,yf.useEffect)(()=>{const Id=()=>Ve(!1);window.addEventListener("blur",Id);window.addEventListener("resize",Id);return()=>
{window.removeEventListener("blur",Id);window.removeEventListener("resize",Id)}},[Ve]);const [Gd,gd]=Pi(Id=>{const we=sc().filter(uf=>!uf.disabled),ye=we.find(uf=>uf.ref.current===document.activeElement),Ie=qh(we,Id,ye);Ie&&setTimeout(()=>Ie.ref.current.focus())}),bd=(0,yf.useCallback)((Id,we,ye)=>{ye=!Gc.current&&!ye;if(void 0!==Y.value&&Y.value===we||ye)Wb(Id),ye&&(Gc.current=!0)},[Y.value]),ud=(0,yf.useCallback)(()=>null===Ka||void 0===Ka?void 0:Ka.focus(),[Ka]),zd=(0,yf.useCallback)((Id,we,ye)=>
{ye=!Gc.current&&!ye;(void 0!==Y.value&&Y.value===we||ye)&&Ob(Id)},[Y.value]);return(0,yf.createElement)(DA,{scope:m,contentWrapper:ia,content:Ka,viewport:db,onViewportChange:sb,itemRefCallback:bd,selectedItem:xb,onItemLeave:ud,itemTextRefCallback:zd,selectedItemText:kc,onScrollButtonChange:Ge,isPositioned:lc,shouldExpandOnScrollRef:Kc,searchRef:Gd},(0,yf.createElement)(Zv,{as:Dr,allowPinchZoom:!0},(0,yf.createElement)("div",{ref:ta,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Xc}},
(0,yf.createElement)(oz,{asChild:!0,trapped:Y.open,onMountAutoFocus:Id=>{Id.preventDefault()},onUnmountAutoFocus:eg(J,Id=>{var we;null===(we=Y.trigger)||void 0===we||we.focus({preventScroll:!0});Id.preventDefault()})},(0,yf.createElement)(mz,ef({role:"listbox",id:Y.contentId,"data-state":Y.open?"open":"closed",dir:Y.dir,onContextMenu:Id=>Id.preventDefault()},b,{ref:g,style:Qa({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,
onFocusOutside:Id=>Id.preventDefault(),onDismiss:()=>Y.onOpenChange(!1),onKeyDown:eg(b.onKeyDown,Id=>{var we=Id.ctrlKey||Id.altKey||Id.metaKey;"Tab"===Id.key&&Id.preventDefault();we||1!==Id.key.length||gd(Id.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Id.key)){let ye=sc().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);["ArrowUp","End"].includes(Id.key)&&(ye=ye.slice().reverse());["ArrowUp","ArrowDown"].includes(Id.key)&&(we=ye.indexOf(Id.target),ye=ye.slice(we+1));setTimeout(()=>Jd(ye));
Id.preventDefault()}})}))))))}),zG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:m}=b;b=bb(b,["__scopeSelect"]);const J=Lr("SelectViewport",m);g=Hg(g,J.onViewportChange);const Y=(0,yf.useRef)(0);return(0,yf.createElement)(yf.Fragment,null,(0,yf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,yf.createElement)(lu.Slot,
{scope:m},(0,yf.createElement)(dl.div,ef({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:Qa({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:eg(b.onScroll,ia=>{ia=ia.currentTarget;const {contentWrapper:ta,shouldExpandOnScrollRef:Ka}=J;if(null!==Ka&&void 0!==Ka&&Ka.current&&ta){var Za=Math.abs(Y.current-ia.scrollTop);if(0<Za){var db=window.innerHeight-20,sb=parseFloat(ta.style.minHeight);const xb=parseFloat(ta.style.height);sb=Math.max(sb,xb);sb<db&&(Za=sb+Za,db=
Math.min(db,Za),Za-=db,ta.style.height=db+"px","0px"===ta.style.bottom&&(ia.scrollTop=0<Za?Za:0,ta.style.justifyContent="flex-end"))}}Y.current=ia.scrollTop})}))))});Os("SelectGroup");var [AG,BG]=Os("SelectItem"),CG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:m,value:J,disabled:Y=!1,textValue:ia}=b;b=bb(b,["__scopeSelect","value","disabled","textValue"]);const ta=Kr("SelectItem",m),Ka=Lr("SelectItem",m),Za=ta.value===J,[db,sb]=(0,yf.useState)(null!==ia&&void 0!==ia?ia:""),[xb,Wb]=(0,yf.useState)(!1);
g=Hg(g,sc=>{var lc;return null===(lc=Ka.itemRefCallback)||void 0===lc?void 0:lc.call(Ka,sc,J,Y)});const kc=zj(),Ob=()=>{Y||(ta.onValueChange(J),ta.onOpenChange(!1))};return(0,yf.createElement)(AG,{scope:m,value:J,disabled:Y,textId:kc,isSelected:Za,onItemTextChange:(0,yf.useCallback)(sc=>{sb(lc=>{var Sb;return lc||(null!==(Sb=null===sc||void 0===sc?void 0:sc.textContent)&&void 0!==Sb?Sb:"").trim()})},[])},(0,yf.createElement)(lu.ItemSlot,{scope:m,value:J,disabled:Y,textValue:db},(0,yf.createElement)(dl.div,
ef({role:"option","aria-labelledby":kc,"data-highlighted":xb?"":void 0,"aria-selected":Za&&xb,"data-state":Za?"checked":"unchecked","aria-disabled":Y||void 0,"data-disabled":Y?"":void 0,tabIndex:Y?void 0:-1},b,{ref:g,onFocus:eg(b.onFocus,()=>Wb(!0)),onBlur:eg(b.onBlur,()=>Wb(!1)),onPointerUp:eg(b.onPointerUp,Ob),onPointerMove:eg(b.onPointerMove,sc=>{if(Y){var lc;null===(lc=Ka.onItemLeave)||void 0===lc||lc.call(Ka)}else sc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:eg(b.onPointerLeave,
sc=>{if(sc.currentTarget===document.activeElement){var lc;null===(lc=Ka.onItemLeave)||void 0===lc||lc.call(Ka)}}),onKeyDown:eg(b.onKeyDown,sc=>{var lc;if(""===(null===(lc=Ka.searchRef)||void 0===lc?void 0:lc.current)||" "!==sc.key)pG.includes(sc.key)&&Ob()," "===sc.key&&sc.preventDefault()})}))))}),DG=(0,yf.forwardRef)((b,g)=>{var {__scopeSelect:m}=b;b=bb(b,["__scopeSelect","className","style"]);const J=Kr("SelectItemText",m),Y=Lr("SelectItemText",m),ia=BG("SelectItemText",m);m=tG("SelectItemText",
m);const [ta,Ka]=(0,yf.useState)(null);g=Hg(g,Wb=>Ka(Wb),ia.onItemTextChange,Wb=>{var kc;return null===(kc=Y.itemTextRefCallback)||void 0===kc?void 0:kc.call(Y,Wb,ia.value,ia.disabled)});const Za=null===ta||void 0===ta?void 0:ta.textContent,db=(0,yf.useMemo)(()=>(0,yf.createElement)("option",{key:ia.value,value:ia.value,disabled:ia.disabled},Za),[ia.disabled,ia.value,Za]),{onNativeOptionAdd:sb,onNativeOptionRemove:xb}=m;$m(()=>{sb(db);return()=>xb(db)},[sb,xb,db]);return(0,yf.createElement)(yf.Fragment,
null,(0,yf.createElement)(dl.span,ef({id:ia.textId},b,{ref:g})),ia.isSelected&&J.valueNode&&!J.valueNodeHasChildren?(0,BA.createPortal)(b.children,J.valueNode):null)}),EG=(0,yf.forwardRef)((b,g)=>{const m=Lr("SelectScrollUpButton",b.__scopeSelect),[J,Y]=(0,yf.useState)(!1);g=Hg(g,m.onScrollButtonChange);$m(()=>{if(m.viewport&&m.isPositioned){let ia=function(){Y(0<ta.scrollTop)};const ta=m.viewport;ia();ta.addEventListener("scroll",ia);return()=>ta.removeEventListener("scroll",ia)}},[m.viewport,m.isPositioned]);
return J?(0,yf.createElement)(EA,ef({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:ta}=m;ia&&ta&&(ia.scrollTop-=ta.offsetHeight)}})):null}),FG=(0,yf.forwardRef)((b,g)=>{const m=Lr("SelectScrollDownButton",b.__scopeSelect),[J,Y]=(0,yf.useState)(!1);g=Hg(g,m.onScrollButtonChange);$m(()=>{if(m.viewport&&m.isPositioned){let ia=function(){Y(Math.ceil(ta.scrollTop)<ta.scrollHeight-ta.clientHeight)};const ta=m.viewport;ia();ta.addEventListener("scroll",ia);return()=>ta.removeEventListener("scroll",
ia)}},[m.viewport,m.isPositioned]);return J?(0,yf.createElement)(EA,ef({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:ta}=m;ia&&ta&&(ia.scrollTop+=ta.offsetHeight)}})):null}),EA=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:m,onAutoScroll:J}=b;b=bb(b,["__scopeSelect","onAutoScroll"]);const Y=Lr("SelectScrollButton",m),ia=(0,yf.useRef)(null),ta=tw(m),Ka=(0,yf.useCallback)(()=>{null!==ia.current&&(window.clearInterval(ia.current),ia.current=null)},[]);(0,yf.useEffect)(()=>()=>Ka(),[Ka]);
$m(()=>{var Za;const db=ta().find(sb=>sb.ref.current===document.activeElement);null===db||void 0===db||null===(Za=db.ref.current)||void 0===Za||Za.scrollIntoView({block:"nearest"})},[ta]);return(0,yf.createElement)(dl.div,ef({"aria-hidden":!0},b,{ref:g,style:Qa({flexShrink:0},b.style),onPointerMove:eg(b.onPointerMove,()=>{var Za;null===(Za=Y.onItemLeave)||void 0===Za||Za.call(Y);null===ia.current&&(ia.current=window.setInterval(J,50))}),onPointerLeave:eg(b.onPointerLeave,()=>{Ka()})}))}),FA=(0,yf.forwardRef)((b,
g)=>{const {value:m}=b;b=bb(b,["value"]);const J=(0,yf.useRef)(null);g=Hg(g,J);const Y=Nf(m);(0,yf.useEffect)(()=>{const ia=J.current,ta=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(Y!==m&&ta){const Ka=new Event("change",{bubbles:!0});ta.call(ia,m);ia.dispatchEvent(Ka)}},[Y,m]);return(0,yf.createElement)(nG,{asChild:!0},(0,yf.createElement)("select",ef({},b,{ref:g,defaultValue:m})))});FA.displayName="BubbleSelect";var GG=b=>{const {__scopeSelect:g,children:m,
open:J,defaultOpen:Y,onOpenChange:ia,value:ta,defaultValue:Ka,onValueChange:Za,dir:db,name:sb,autoComplete:xb}=b,[Wb,kc]=(0,yf.useState)(null),[Ob,sc]=(0,yf.useState)(null),[lc,Sb]=(0,yf.useState)(!1),rc=Bi(db),[Kc=!1,Gc]=Vf({prop:J,defaultProp:Y,onChange:ia}),[Xc,$d]=Vf({prop:ta,defaultProp:Ka,onChange:Za}),Jd=(0,yf.useRef)(null),qe=Wb?!!Wb.closest("form"):!0,[Ye,Ge]=(0,yf.useState)(new Set),Ve=Array.from(Ye).map(ee=>ee.props.value).join(";");return(0,yf.createElement)(rG,{scope:g,trigger:Wb,onTriggerChange:kc,
valueNode:Ob,onValueNodeChange:sc,valueNodeHasChildren:lc,onValueNodeHasChildrenChange:Sb,contentId:zj(),value:Xc,onValueChange:$d,open:Kc,onOpenChange:Gc,dir:rc,triggerPointerDownPosRef:Jd},(0,yf.createElement)(lu.Provider,{scope:g},(0,yf.createElement)(sG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,yf.useCallback)(ee=>{Ge(Gd=>(new Set(Gd)).add(ee))},[]),onNativeOptionRemove:(0,yf.useCallback)(ee=>{Ge(Gd=>{Gd=new Set(Gd);Gd.delete(ee);return Gd})},[])},m)),qe?(0,yf.createElement)(FA,{key:Ve,"aria-hidden":!0,
tabIndex:-1,name:sb,autoComplete:xb,value:Xc,onChange:ee=>$d(ee.target.value)},Array.from(Ye)):null)},HG=uG,IG=vG,JG=wG,KG=b=>(0,yf.createElement)(vE,ef({asChild:!0},b)),LG=xG,MG=zG,NG=CG,OG=DG,PG=EG,QG=FG;Kb=S(611);var RG=Cc(S(16));Kb=S(611);var uw=RG.forwardRef((b,g)=>{var {value:m,className:J}=b;b=bb(b,["autoResize","value","className"]);return(0,Kb.jsx)("div",{className:"tl-input"+(J?" "+J:""),children:(0,Kb.jsxs)("div",{className:"tl-input-sizer",children:[(0,Kb.jsx)("div",{className:"tl-input-hidden",
children:m}),(0,Kb.jsx)("input",Qa({ref:g,value:m,className:"tl-text-input",type:"text"},b))]})})}),el=Cc(S(16)),GA=S(16),HA=(0,GA.forwardRef)((b,g)=>{const {pressed:m,defaultPressed:J=!1,onPressedChange:Y}=b,ia=bb(b,["pressed","defaultPressed","onPressedChange"]),[ta=!1,Ka]=Vf({prop:m,onChange:Y,defaultProp:J});return(0,GA.createElement)(dl.button,ef({type:"button","aria-pressed":ta,"data-state":ta?"on":"off","data-disabled":b.disabled?"":void 0},ia,{ref:g,onClick:eg(b.onClick,()=>{b.disabled||Ka(!ta)})}))}),
SG=HA,[IA]=ti("ToggleGroup",[Wt]),JA=Wt(),TG=el.default.forwardRef((b,g)=>{const {type:m}=b;b=bb(b,["type"]);if("single"===m)return el.default.createElement(UG,ef({},b,{ref:g}));if("multiple"===m)return el.default.createElement(VG,ef({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[KA,LA]=IA("ToggleGroup"),UG=el.default.forwardRef((b,g)=>{const {value:m,defaultValue:J,onValueChange:Y=()=>{}}=b,ia=bb(b,["value","defaultValue","onValueChange"]),[ta,Ka]=Vf({prop:m,defaultProp:J,
onChange:Y});return el.default.createElement(KA,{scope:b.__scopeToggleGroup,type:"single",value:ta?[ta]:[],onItemActivate:Ka,onItemDeactivate:el.default.useCallback(()=>Ka(""),[Ka])},el.default.createElement(MA,ef({},ia,{ref:g})))}),VG=el.default.forwardRef((b,g)=>{const {value:m,defaultValue:J,onValueChange:Y=()=>{}}=b,ia=bb(b,["value","defaultValue","onValueChange"]),[ta=[],Ka]=Vf({prop:m,defaultProp:J,onChange:Y}),Za=el.default.useCallback(sb=>Ka((xb=[])=>[...xb,sb]),[Ka]),db=el.default.useCallback(sb=>
Ka((xb=[])=>xb.filter(Wb=>Wb!==sb)),[Ka]);return el.default.createElement(KA,{scope:b.__scopeToggleGroup,type:"multiple",value:ta,onItemActivate:Za,onItemDeactivate:db},el.default.createElement(MA,ef({},ia,{ref:g})))}),[WG,XG]=IA("ToggleGroup"),MA=el.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,disabled:J=!1,rovingFocus:Y=!0,orientation:ia,dir:ta,loop:Ka=!0}=b;var Za=bb(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=JA(m);const db=Bi(ta);Za=Qa({role:"group",
dir:db},Za);return el.default.createElement(WG,{scope:m,rovingFocus:Y,disabled:J},Y?el.default.createElement(Gz,ef({asChild:!0},b,{orientation:ia,dir:db,loop:Ka}),el.default.createElement(dl.div,ef({},Za,{ref:g}))):el.default.createElement(dl.div,ef({},Za,{ref:g})))}),YG=el.default.forwardRef((b,g)=>{var m=LA("ToggleGroupItem",b.__scopeToggleGroup);const J=XG("ToggleGroupItem",b.__scopeToggleGroup),Y=JA(b.__scopeToggleGroup);m=m.value.includes(b.value);const ia=J.disabled||b.disabled;b=Ga(Qa({},b),
{pressed:m,disabled:ia});const ta=el.default.useRef(null);return J.rovingFocus?el.default.createElement(Hz,ef({asChild:!0},Y,{focusable:!ia,active:m,ref:ta}),el.default.createElement(vw,ef({},b,{ref:g}))):el.default.createElement(vw,ef({},b,{ref:g}))}),vw=el.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,value:J}=b,Y=bb(b,["__scopeToggleGroup","value"]),ia=LA("ToggleGroupItem",m);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return el.default.createElement(HA,ef({},"single"===
ia.type?b:void 0,Y,{ref:g,onPressedChange:ta=>{if(ta)ia.onItemActivate(J);else ia.onItemDeactivate(J)}}))}),NA=TG,OA=YG;Kb=S(611);Kb=S(611);Kb=S(611);var PA="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink IFrameSource LogseqPortalViewMode ArrowMode OpenPage".split(" "),ZG=["Edit","YoutubeLink","IFrameSource","OpenPage"],Un=new Map,ww={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel OpenPage AutoResizing".split(" "),youtube:["YoutubeLink"],iframe:["IFrameSource"],
box:["Swatch","NoFill","StrokeType"],ellipse:["Swatch","NoFill","StrokeType"],polygon:["Swatch","NoFill","StrokeType"],line:["Edit","Swatch","ArrowMode"],pencil:["Swatch"],highlighter:["Swatch"],text:["Edit","Swatch","ScaleLevel","AutoResizing","TextStyle"],html:["ScaleLevel","AutoResizing"]};Object.entries(ww).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var $G=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"Edit")[0];return(0,Kb.jsx)(Ji,{type:"button",title:"Edit",onClick:()=>
{var m,J,Y,ia,ta,Ka;b.api.editShape(g);if("logseq-portal"===g.props.type){let Za=g.props.pageId;"P"===g.props.blockType&&(Za=(null==(Y=null==(J=null==(m=window.logseq)?void 0:m.api)?void 0:J.get_page_blocks_tree)?void 0:Y.call(J,g.props.pageId).find(db=>!("propertiesOrder"in db))).uuid);null==(Ka=null==(ta=null==(ia=window.logseq)?void 0:ia.api)?void 0:ta.edit_block)?void 0:Ka.call(ta,Za)}},children:(0,Kb.jsx)(Fi,{name:"text"})})}),aH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"AutoResizing"),
m=g.every(J=>J.props.isAutoResizing);return(0,Kb.jsx)(Uk,{title:"Auto Resize",toggle:g.every(J=>"logseq-portal"===J.props.type),className:"tl-button",pressed:m,onPressedChange:J=>{g.forEach(Y=>{if("logseq-portal"===Y.props.type)Y.update({isAutoResizing:J});else Y.onResetBounds({zoom:b.viewport.camera.zoom})});b.persist()},children:(0,Kb.jsx)(Fi,{name:"dimensions"})})}),bH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"LogseqPortalViewMode"),m=g.every(J=>J.collapsed);return(0,Kb.jsx)(vi,{title:"View Mode",
options:[{value:"1",icon:"object-compact"},{value:"0",icon:"object-expanded"}],value:m?"1":"0",onValueChange:J=>{g.forEach(Y=>{Y.setCollapsed("1"===J?!0:!1)});b.persist()}})}),cH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"ScaleLevel"),m=1<(new Set(g.map(J=>J.scaleLevel))).size?"":g[0].scaleLevel;return(0,Kb.jsx)(Wj,{title:"Scale Level",options:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"},{label:"Extra Large",value:"xl"},
{label:"Huge",value:"xxl"}],value:m,onValueChange:J=>{g.forEach(Y=>{Y.setScaleLevel(J)});b.persist()}})}),dH=gf(()=>{const {handlers:b}=Vq.default.useContext(xp);var g=xg();g=qi(g.selectedShapesArray,"OpenPage")[0];const {pageId:m,blockType:J}=g.props;return(0,Kb.jsxs)("span",{className:"flex gap-1",children:[(0,Kb.jsx)(Ji,{title:"Open Page in Right Sidebar",type:"button",onClick:()=>null==b?void 0:b.sidebarAddBlock(m,"B"===J?"block":"page"),children:(0,Kb.jsx)(Fi,{name:"layout-sidebar-right"})}),
(0,Kb.jsx)(Ji,{title:"Open Page",type:"button",onClick:()=>null==b?void 0:b.redirectToPage(m),children:(0,Kb.jsx)(Fi,{name:"external-link"})})]})}),eH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"IFrameSource")[0],m=Vq.default.useCallback(Y=>{g.onIFrameSourceChange(Y.target.value.trim().toLowerCase());b.persist()},[]),J=Vq.default.useCallback(()=>{g.reload()},[]);return(0,Kb.jsxs)("span",{className:"flex gap-3",children:[(0,Kb.jsx)(Ji,{title:"Reload",type:"button",onClick:J,children:(0,Kb.jsx)(Fi,
{name:"refresh"})}),(0,Kb.jsx)(uw,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:m}),(0,Kb.jsx)(Ji,{title:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,Kb.jsx)(Fi,{name:"external-link"})})]})}),fH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"YoutubeLink")[0],m=Vq.default.useCallback(J=>{g.onYoutubeLinkChange(J.target.value);b.persist()},[]);return(0,Kb.jsxs)("span",{className:"flex gap-3",children:[(0,Kb.jsx)(uw,{title:"YouTube Link",
className:"tl-youtube-link",value:`${g.props.url}`,onChange:m}),(0,Kb.jsx)(Ji,{title:"Open YouTube Link",type:"button",onClick:()=>{var J,Y,ia;return null==(ia=null==(Y=null==(J=window.logseq)?void 0:J.api)?void 0:Y.open_external_link)?void 0:ia.call(Y,g.props.url)},children:(0,Kb.jsx)(Fi,{name:"external-link"})})]})}),gH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"NoFill"),m=Vq.default.useCallback(Y=>{g.forEach(ia=>ia.update({noFill:Y}));b.persist()},[]),J=g.every(Y=>Y.props.noFill);return(0,Kb.jsx)(Uk,
{title:"Fill Toggle",className:"tl-button",pressed:J,onPressedChange:m,children:(0,Kb.jsx)(Fi,{name:J?"droplet-off":"droplet"})})}),hH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"Swatch"),m=Vq.default.useCallback(Y=>{g.forEach(ia=>{ia.update({fill:Y,stroke:Y})});b.persist()},[]),J=Vq.default.useCallback(Y=>{g.forEach(ia=>{ia.update({opacity:Y})});b.persist()},[]);return(0,Kb.jsx)(Jf,{title:"Color Picker",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,collisionRef:document.getElementById("main-content-container"),
setOpacity:J,setColor:m})}),iH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"StrokeType"),m=g.every(J=>"dashed"===J.props.strokeType)?"dashed":g.every(J=>"line"===J.props.strokeType)?"line":"mixed";return(0,Kb.jsx)(vi,{title:"Stroke Type",options:[{value:"line",icon:"circle"},{value:"dashed",icon:"circle-dashed"}],value:m,onValueChange:J=>{g.forEach(Y=>{Y.update({strokeType:J})});b.persist()}})}),jH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"ArrowMode");var m=g.every(Y=>{var ia;return"arrow"===
(null==(ia=Y.props.decorations)?void 0:ia.start)});const J=g.every(Y=>{var ia;return"arrow"===(null==(ia=Y.props.decorations)?void 0:ia.end)});m=[m?"start":null,J?"end":null].filter(Nh);return(0,Kb.jsx)(Bk,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:m,onValueChange:Y=>{g.forEach(ia=>{var ta=ia.update;var Ka={start:Y.includes("start")?"arrow":null,end:Y.includes("end")?"arrow":null};ta.call(ia,{decorations:Ka})});b.persist()}})}),
kH=gf(()=>{const b=xg(),g=qi(b.selectedShapesArray,"TextStyle"),m=g.every(Y=>500<Y.props.fontWeight),J=g.every(Y=>Y.props.italic);return(0,Kb.jsxs)("span",{className:"flex gap-1",children:[(0,Kb.jsx)(Uk,{title:"Bold",className:"tl-button",pressed:m,onPressedChange:Y=>{g.forEach(ia=>{ia.update({fontWeight:Y?700:400});ia.onResetBounds()});b.persist()},children:(0,Kb.jsx)(Fi,{name:"bold"})}),(0,Kb.jsx)(Uk,{title:"Italic",className:"tl-button",pressed:J,onPressedChange:Y=>{g.forEach(ia=>{ia.update({italic:Y});
ia.onResetBounds()});b.persist()},children:(0,Kb.jsx)(Fi,{name:"italic"})})]})});Un.set("Edit",$G);Un.set("AutoResizing",aH);Un.set("LogseqPortalViewMode",bH);Un.set("ScaleLevel",cH);Un.set("OpenPage",dH);Un.set("YoutubeLink",fH);Un.set("IFrameSource",eH);Un.set("NoFill",gH);Un.set("Swatch",hH);Un.set("StrokeType",iH);Un.set("ArrowMode",jH);Un.set("TextStyle",kH);var QA=b=>{var g;return(null!=(g=ww[b])?g:[]).filter(Nh)},lH=b=>{const g=b.map(J=>J.props.type),m=new Set(0<b.length?QA(g[0]):[]);for(let J=
1;J<g.length&&0<m.size;J++){const Y=QA(g[J]);m.forEach(ia=>{Y.includes(ia)||m.delete(ia)})}1<b.length&&ZG.forEach(J=>{m.has(J)&&m.delete(J)});return Array.from(m).sort((J,Y)=>PA.indexOf(J)-PA.indexOf(Y)).map(J=>Un.get(J))};Kb=S(611);var mH=gf(({shapes:b,offsets:g,hidden:m})=>{const J=xg(),Y=Ms.useRef(null),ia=Ms.useRef(null);Ms.useLayoutEffect(()=>{setTimeout(()=>{const Ka=ia.current;if(Ka){var {offsetWidth:Za,offsetHeight:db}=Ka;Y.current=[Za,db]}})});Ms.useLayoutEffect(()=>{var Ka;const Za=ia.current;
if(Za){var db=null!=(Ka=Y.current)?Ka:[0,0];Ka=Ga(Qa({},g),{bottom:g.bottom-32});var sb=0;if(116>Ka.top){var xb=Ka.height/2+72;140>Ka.bottom&&(xb+=Ka.bottom-140)}else xb=-(Ka.height/2+40);16>Ka.left+Ka.width/2-db[0]/2?sb+=-(Ka.left+Ka.width/2-db[0]/2-16):16>Ka.right+Ka.width/2-db[0]/2&&(sb+=Ka.right+Ka.width/2-db[0]/2-16);var [Wb,kc]=[sb,xb];Za.style.setProperty("transform",`translateX(${Wb}px) translateY(${kc}px)`)}},[g]);if(!J)return null;const ta=lH(b);return(0,Kb.jsx)(tp,{centered:!0,children:0<
ta.length&&(0,Kb.jsx)("div",{ref:ia,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:ta.map((Ka,Za)=>(0,Kb.jsxs)(Ms.Fragment,{children:[(0,Kb.jsx)(Ka,{}),Za<ta.length-1&&(0,Kb.jsx)(Ls,{className:"tl-toolbar-separator",orientation:"vertical"})]},Za))})})}),RA=Cc(S(16)),Rl=S(16),[nH]=ti("ContextMenu",[au]),Ps=au(),[oH,SA]=nH("ContextMenu"),pH=(0,Rl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const J=bb(b,["__scopeContextMenu"]),
Y=SA("ContextMenuTrigger",m);m=Ps(m);const ia=(0,Rl.useRef)({x:0,y:0}),ta=(0,Rl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Qa({width:0,height:0},ia.current))}),Ka=(0,Rl.useRef)(0),Za=(0,Rl.useCallback)(()=>window.clearTimeout(Ka.current),[]);(0,Rl.useEffect)(()=>Za,[Za]);return(0,Rl.createElement)(Rl.Fragment,null,(0,Rl.createElement)(Tz,ef({},m,{virtualRef:ta})),(0,Rl.createElement)(dl.span,ef({"data-state":Y.open?"open":"closed"},J,{ref:g,style:Qa({WebkitTouchCallout:"none"},b.style),onContextMenu:eg(b.onContextMenu,
db=>{Za();ia.current={x:db.clientX,y:db.clientY};Y.onOpenChange(!0);db.preventDefault()}),onPointerDown:eg(b.onPointerDown,Gl(db=>{Za();Ka.current=window.setTimeout(()=>{ia.current={x:db.clientX,y:db.clientY};Y.onOpenChange(!0)},700)})),onPointerMove:eg(b.onPointerMove,Gl(Za)),onPointerCancel:eg(b.onPointerCancel,Gl(Za)),onPointerUp:eg(b.onPointerUp,Gl(Za))})))}),qH=(0,Rl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const J=bb(b,["__scopeContextMenu"]),Y=SA("ContextMenuContent",m);m=Ps(m);const ia=
(0,Rl.useRef)(!1);return(0,Rl.createElement)(Vz,ef({},m,J,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:ta=>{var Ka;null===(Ka=b.onCloseAutoFocus)||void 0===Ka||Ka.call(b,ta);!ta.defaultPrevented&&ia.current&&ta.preventDefault();ia.current=!1},onInteractOutside:ta=>{var Ka;null===(Ka=b.onInteractOutside)||void 0===Ka||Ka.call(b,ta);ta.defaultPrevented||Y.modal||(ia.current=!0)},style:Ga(Qa({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Vn=(0,Rl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=bb(b,["__scopeContextMenu"]);m=Ps(m);return(0,Rl.createElement)(Xz,ef({},m,b,{ref:g}))}),Qs=(0,Rl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=bb(b,["__scopeContextMenu"]);m=Ps(m);return(0,Rl.createElement)(ZE,ef({},m,b,{ref:g}))}),rH=b=>{const {__scopeContextMenu:g,children:m,onOpenChange:J,dir:Y,modal:ia=!0}=b,[ta,Ka]=(0,Rl.useState)(!1);b=Ps(g);const Za=ki(J),db=(0,Rl.useCallback)(sb=>{Ka(sb);Za(sb)},[Za]);return(0,Rl.createElement)(oH,
{scope:g,open:ta,onOpenChange:db,modal:ia},(0,Rl.createElement)(Yz,ef({},b,{dir:Y,open:ta,onOpenChange:db,modal:ia}),m))};Kb=S(611);var sH=gf(function({children:b,collisionRef:g}){var m,J,Y,ia,ta;const Ka=xg(),Za=RA.useRef(null),db=xb=>{xb();Ka.transition("select")},sb=RA.useMemo(()=>{var xb,Wb,kc;return(null==(kc=null==(Wb=null==(xb=null==window?void 0:window.logseq)?void 0:xb.api)?void 0:Wb.get_state_from_store)?void 0:kc.call(Wb,"ui/developer-mode?"))||!1},[]);return(0,Kb.jsxs)(rH,{children:[(0,Kb.jsx)(pH,
{children:b}),(0,Kb.jsx)(qH,{className:"tl-menu tl-context-menu",ref:Za,onEscapeKeyDown:()=>Ka.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,Kb.jsxs)("div",{children:[1<(null==(m=Ka.selectedShapes)?void 0:m.size)&&(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsxs)(Vn,{children:[(0,Kb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Kb.jsx)(Ji,{title:"Align left",onClick:()=>db(()=>Ka.align("left")),children:(0,Kb.jsx)(Fi,{name:"layout-align-left"})}),
(0,Kb.jsx)(Ji,{title:"Align center horizontally",onClick:()=>db(()=>Ka.align("centerHorizontal")),children:(0,Kb.jsx)(Fi,{name:"layout-align-center"})}),(0,Kb.jsx)(Ji,{title:"Align right",onClick:()=>db(()=>Ka.align("right")),children:(0,Kb.jsx)(Fi,{name:"layout-align-right"})}),(0,Kb.jsx)(Ls,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Kb.jsx)(Ji,{title:"Distribute horizontally",onClick:()=>db(()=>Ka.distribute("horizontal")),children:(0,Kb.jsx)(Fi,{name:"layout-distribute-vertical"})})]}),
(0,Kb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Kb.jsx)(Ji,{title:"Align top",onClick:()=>db(()=>Ka.align("top")),children:(0,Kb.jsx)(Fi,{name:"layout-align-top"})}),(0,Kb.jsx)(Ji,{title:"Align center vertically",onClick:()=>db(()=>Ka.align("centerVertical")),children:(0,Kb.jsx)(Fi,{name:"layout-align-middle"})}),(0,Kb.jsx)(Ji,{title:"Align bottom",onClick:()=>db(()=>Ka.align("bottom")),children:(0,Kb.jsx)(Fi,{name:"layout-align-bottom"})}),(0,Kb.jsx)(Ls,{className:"tl-toolbar-separator",
orientation:"vertical"}),(0,Kb.jsx)(Ji,{title:"Distribute vertically",onClick:()=>db(()=>Ka.distribute("vertical")),children:(0,Kb.jsx)(Fi,{name:"layout-distribute-horizontal"})})]})]}),(0,Kb.jsx)(Qs,{className:"menu-separator"}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.packIntoRectangle),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,Kb.jsx)(Qs,{className:"menu-separator"})]}),0<(null==(J=Ka.selectedShapes)?void 0:J.size)&&(0,Kb.jsxs)(Kb.Fragment,
{children:[(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.cut),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"X"})]})})]}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.copy),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"C"})]})})]})]}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.paste),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"V"})]})})]}),(0,Kb.jsx)(Qs,
{className:"menu-separator"}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.api.selectAll),children:["Select all",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:Qq})," ",(0,Kb.jsx)("code",{children:"A"})]})})]}),1<(null==(Y=Ka.selectedShapes)?void 0:Y.size)&&(0,Kb.jsx)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.api.deselectAll),children:"Deselect all"}),0<(null==(ia=Ka.selectedShapes)?
void 0:ia.size)&&(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.api.deleteShapes),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsx)("span",{className:"keyboard-shortcut",children:(0,Kb.jsx)("code",{children:"Del"})})})]}),1<(null==(ta=Ka.selectedShapes)?void 0:ta.size)&&(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)(Qs,{className:"menu-separator"}),(0,Kb.jsxs)(Vn,
{className:"tl-menu-item",onClick:()=>db(Ka.flipHorizontal),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.flipVertical),children:[(0,Kb.jsx)(Fi,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,Kb.jsx)(Qs,{className:"menu-separator"}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.bringToFront),children:["Move to front",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:"⇧"})," ",(0,Kb.jsx)("code",{children:"]"})]})})]}),(0,Kb.jsxs)(Vn,{className:"tl-menu-item",onClick:()=>db(Ka.sendToBack),children:["Move to back",(0,Kb.jsx)("div",{className:"tl-menu-right-slot",children:(0,Kb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,Kb.jsx)("code",{children:"⇧"})," ",(0,Kb.jsx)("code",{children:"["})]})})]}),sb&&(0,Kb.jsx)(Vn,{className:"tl-menu-item",onClick:()=>console.log(Ka.selectedShapesArray.map(xb=>
me(xb.serialized,new Map))),children:"(Dev) Print shape props"})]})]})})]})}),tH=Cc(S(16)),TA=Cc(S(16));Kb=S(611);Kb=S(611);var mu=class extends On{constructor(){super(...arguments);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isBinding:m,isSelected:J})=>{const {props:{size:[Y,ia],stroke:ta,fill:Ka,noFill:Za,strokeWidth:db,strokeType:sb,borderRadius:xb,opacity:Wb}}=this;return(0,Kb.jsxs)(no,Ga(Qa({},b),{opacity:g?.2:Wb,children:[m&&(0,Kb.jsx)(gg,{mode:"svg",strokeWidth:db,size:[Y,ia]}),(0,Kb.jsx)("rect",
{className:J||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",x:db/2,y:db/2,rx:xb,ry:xb,width:Math.max(.01,Y-db),height:Math.max(.01,ia-db),pointerEvents:"all"}),(0,Kb.jsx)("rect",{x:db/2,y:db/2,rx:xb,ry:xb,width:Math.max(.01,Y-db),height:Math.max(.01,ia-db),strokeWidth:db,stroke:Ce(ta,"stroke"),strokeDasharray:"dashed"===sb?"8 2":void 0,fill:Za?"none":Ce(Ka,"background")})]}))}));Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g],borderRadius:m}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,rx:m,
ry:m,fill:"transparent"})}));Ya(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return Xj(this,b)})}};Ya(mu,"id","box");Ya(mu,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Kb=S(611);var xw=class extends uv{constructor(){super(...arguments);Ya(this,"ReactComponent",
gf(({events:b,isErasing:g})=>{const {radius:m,stroke:J,fill:Y,strokeWidth:ia,opacity:ta}=this.props;return(0,Kb.jsxs)(no,Ga(Qa({},b),{opacity:g?.2:ta,children:[(0,Kb.jsx)("circle",{className:"tl-hitarea-fill",cx:m,cy:m,r:m}),(0,Kb.jsx)("circle",{cx:m,cy:m,r:m,stroke:J,fill:Y,strokeWidth:ia,pointerEvents:"none"})]}))}));Ya(this,"ReactIndicator",gf(()=>{const {radius:b}=this.props;return(0,Kb.jsx)("circle",{cx:b,cy:b,r:b,pointerEvents:"all"})}));Ya(this,"validateProps",b=>{void 0!==b.radius&&(b.radius=
Math.max(b.radius,1));return Xj(this,b)})}};Ya(xw,"id","dot");Ya(xw,"defaultProps",{id:"dot",parentId:"page",type:"dot",point:[0,0],radius:4,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Kb=S(611);var nu=class extends rv{constructor(){super(...arguments);Ya(this,"ReactComponent",gf(({isSelected:b,isErasing:g,events:m})=>{const {size:[J,Y],stroke:ia,fill:ta,noFill:Ka,strokeWidth:Za,strokeType:db,opacity:sb}=this.props;return(0,Kb.jsxs)(no,
Ga(Qa({},m),{opacity:g?.2:sb,children:[(0,Kb.jsx)("ellipse",{className:b||!Ka?"tl-hitarea-fill":"tl-hitarea-stroke",cx:J/2,cy:Y/2,rx:Math.max(.01,(J-Za)/2),ry:Math.max(.01,(Y-Za)/2)}),(0,Kb.jsx)("ellipse",{cx:J/2,cy:Y/2,rx:Math.max(.01,(J-Za)/2),ry:Math.max(.01,(Y-Za)/2),strokeWidth:Za,stroke:Ce(ia,"stroke"),strokeDasharray:"dashed"===db?"8 2":void 0,fill:Ka?"none":Ce(ta,"background")})]}))}));Ya(this,"ReactIndicator",gf(()=>{const {size:[b,g]}=this.props;return(0,Kb.jsx)("ellipse",{cx:b/2,cy:g/2,
rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})}));Ya(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Xj(this,b)})}getShapeSVGJsx(b){const {size:[g,m],stroke:J,fill:Y,noFill:ia,strokeWidth:ta,strokeType:Ka,opacity:Za}=this.props;return(0,Kb.jsxs)("g",{opacity:Za,children:[(0,Kb.jsx)("ellipse",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:m/2,rx:Math.max(.01,(g-ta)/2),ry:Math.max(.01,(m-ta)/2)}),(0,Kb.jsx)("ellipse",
{cx:g/2,cy:m/2,rx:Math.max(.01,(g-ta)/2),ry:Math.max(.01,(m-ta)/2),strokeWidth:ta,stroke:Ce(J,"stroke"),strokeDasharray:"dashed"===Ka?"8 2":void 0,fill:ia?"none":Ce(Y,"background")})]})}};Ya(nu,"id","ellipse");Ya(nu,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});Kb=S(611);var Rs=class extends sr{constructor(b={}){super(b);Ya(this,"ReactComponent",gf(({events:g,isErasing:m})=>{const {pointsPath:J,
props:{stroke:Y,strokeWidth:ia,opacity:ta}}=this;return(0,Kb.jsx)(no,Ga(Qa({},g),{opacity:m?.2:1,children:(0,Kb.jsx)("path",{d:J,strokeWidth:16*ia,stroke:Ce(Y,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:ta})}))}));Ya(this,"ReactIndicator",gf(()=>{const {pointsPath:g}=this;return(0,Kb.jsx)("path",{d:g,fill:"none"})}));Ya(this,"validateProps",g=>{g=Xj(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});vf(this)}get pointsPath(){const {points:b}=
this.props;return Uo.getCurvedPathForPoints(b)}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,opacity:J}}=this;return(0,Kb.jsx)("path",{d:b,strokeWidth:16*m,stroke:Ce(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:J})}};Ya(Rs,"id","highlighter");Ya(Rs,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Ec([V],
Rs.prototype,"pointsPath",1);var yw=Cc(S(16));Kb=S(611);var zw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},bq=class extends On{constructor(){super(...arguments);Ya(this,"canChangeAspectRatio",!0);Ya(this,"canFlip",!1);Ya(this,"canEdit",!0);Ya(this,"htmlAnchorRef",yw.createRef());Ya(this,"setScaleLevel",b=>ue(this,null,function*(){var g;const m=pe.mul(this.props.size,zw[null!=b?b:"md"]/zw[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield lh();this.update({size:m})}));Ya(this,"onResetBounds",
b=>{var g;if(this.htmlAnchorRef.current){const m=this.htmlAnchorRef.current.getBoundingClientRect(),[J,Y]=pe.div([m.width,m.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(J||400,1400),10),Math.max(Math.min(Y||400,1400),10)]})}return this});Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isEditing:m})=>{const {props:{html:J,scaleLevel:Y}}=this,ia=sm(),ta=xg(),Ka=ta.selectedIds.has(this.id),Za=ia||Ka&&!m||"select"!==ta.selectedTool.id,db=yw.useCallback(xb=>{Za||
xb.stopPropagation()},[Za]),sb=zw[null!=Y?Y:"md"];yw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:ta.viewport.camera.zoom}),ta.persist(!0))},[]);return(0,Kb.jsx)(tp,Ga(Qa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,Kb.jsx)("div",{onWheelCapture:db,onPointerDown:db,onPointerUp:db,className:"tl-html-container",style:{pointerEvents:ia||!m&&!Ka?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${sb})`,height:`calc(100% / ${sb})`,transform:`scale(${sb})`},
children:(0,Kb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:J.trim()}})})}))}));Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g]}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,fill:"transparent"})}));Ya(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Xj(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Ya(bq,"id","html");Ya(bq,"defaultProps",
{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Ec([V],bq.prototype,"scaleLevel",1);Ec([rg],bq.prototype,"setScaleLevel",2);var uH=Cc(S(16));Kb=S(611);var ou=class extends qv{constructor(){super(...arguments);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isBinding:m,asset:J})=>{const {props:{opacity:Y,objectFit:ia,clipping:ta,size:[Ka,Za]}}=this,[db,sb,xb,Wb]=Array.isArray(ta)?ta:[ta,ta,ta,ta],{handlers:kc}=uH.useContext(xp);return(0,Kb.jsxs)(tp,Ga(Qa({},b),{opacity:g?
.2:Y,children:[m&&(0,Kb.jsx)(gg,{mode:"html",strokeWidth:4,size:[Ka,Za]}),(0,Kb.jsx)("div",{className:"tl-image-shape-container",children:J?(0,Kb.jsx)("img",{src:kc?kc.makeAssetUrl(J.src):J.src,draggable:!1,style:{position:"relative",top:-db,left:-Wb,width:Ka+(Wb-sb),height:Za+(db-xb),objectFit:ia}}):"Asset is missing"})]}))}));Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g]}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,m;const J=
this.getBounds(),{assetId:Y,clipping:ia,size:[ta,Ka]}=this.props;if(b=b.find(Za=>Za.id===Y)){const [Za,db,sb,xb]=Array.isArray(ia)?ia:[ia,ia,ia,ia],Wb=null==(m=null==(g=window.logseq)?void 0:g.api)?void 0:m.make_asset_url;return(0,Kb.jsx)("foreignObject",{width:J.width,height:J.height,children:(0,Kb.jsx)("img",{src:Wb?Wb(b.src):b.src,draggable:!1,loading:"lazy",style:{position:"relative",top:-Za,left:-xb,width:ta+(xb-db),height:Ka+(Za-sb),objectFit:this.props.objectFit,pointerEvents:"all"}})})}return super.getShapeSVGJsx({})}};
Ya(ou,"id","image");Ya(ou,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var UA=Cc(S(16));Kb=S(611);var pu=class extends On{constructor(){super(...arguments);Ya(this,"canFlip",!1);Ya(this,"canEdit",!0);Ya(this,"canChangeAspectRatio",!1);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,asset:m,isEditing:J})=>{const {props:{opacity:Y}}=this,ia=sm();var ta=xg();const Ka=ta.selectedIds.has(this.id),
Za=ia||Ka&&!J||"select"!==ta.selectedTool.id;ta=UA.useCallback(sb=>{Za||sb.stopPropagation()},[Za]);const {handlers:db}=UA.useContext(xp);return(0,Kb.jsx)(tp,Ga(Qa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:Y}},b),{children:(0,Kb.jsx)("div",{onWheelCapture:ta,onPointerDown:ta,onPointerUp:ta,className:"tl-video-container",style:{pointerEvents:ia||!J&&!Ka?"none":"all",overflow:J?"auto":"hidden"},children:m&&(0,Kb.jsx)("video",{controls:!0,src:db?db.makeAssetUrl(m.src):m.src})})}))}));
Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g]}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};Ya(pu,"id","video");Ya(pu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var VA=Cc(S(16));Kb=S(611);var Wq=class extends On{constructor(){super(...arguments);Ya(this,"frameRef",VA.createRef());Ya(this,"canEdit",!0);Ya(this,"onIFrameSourceChange",b=>{this.update({url:b})});Ya(this,
"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isEditing:m})=>{VA.useRef(null);return(0,Kb.jsx)(tp,Ga(Qa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,Kb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.props.url&&(0,Kb.jsx)("div",{style:{overflow:"hidden",position:"relative",
height:"100%"},children:(0,Kb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts"})})})}))}));Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g]}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};Ya(Wq,"id","iframe");Ya(Wq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Ec([rg],Wq.prototype,"onIFrameSourceChange",
2);Ec([rg],Wq.prototype,"reload",2);var Aw=Cc(S(16)),vH=Cc(S(16));Kb=S(611);Kb=S(611);var wH=vH.memo(function({style:b,start:g,end:m,decorationStart:J,decorationEnd:Y}){var ia=pe.dist(g,m);if(2>ia)return null;const {strokeWidth:ta}=b,Ka=1+1.618*ta,Za="M"+pe.toFixed(g)+"L"+pe.toFixed(m);ia=Math.min(ia/3,16*ta);J=J?Hl(g,m,ia):null;Y=Y?Hl(m,g,ia):null;return(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)("path",{className:"tl-stroke-hitarea",d:Za}),(0,Kb.jsx)("path",{d:Za,strokeWidth:Ka,stroke:b.stroke,
strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),J&&(0,Kb.jsx)(Rm,{left:J.left,middle:g,right:J.right,stroke:b.stroke,strokeWidth:Ka}),Y&&(0,Kb.jsx)(Rm,{left:Y.left,middle:m,right:Y.right,stroke:b.stroke,strokeWidth:Ka})]})});Kb=S(611);var Ho=Cc(S(16)),Wn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,
g){const m=b.ownerDocument,J=m.activeElement;J!==b&&b.focus();m.execCommand("insertText",!1,g)||Wn.insertTextFirefox(b,g);J===m.body?b.blur():J instanceof HTMLElement&&J!==b&&J.focus()}static set(b,g){b.select();Wn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:J,selectionEnd:Y}=b,ia=Wn.getSelection(b);Wn.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(J||0)+g.length;b.selectionEnd=
(Y||0)+g.length}static replace(b,g,m){let J=0;b.value.replace(g,(...Y)=>{const ia=J+Y[Y.length-2],ta=Y[0].length;b.selectionStart=ia;b.selectionEnd=ia+ta;Y="string"===typeof m?m:m(...Y);Wn.insert(b,Y);b.selectionStart=ia;J+=Y.length-ta;return Y})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,selectionEnd:J,value:Y}=b;var ia=Y.slice(m,J);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=Y.lastIndexOf("\n",
m-1)+1;var ta=b.value.slice(g,J-1);ia=ta.replace(/^|\n/g,"$\x26  ");ta=ia.length-ta.length;b.setSelectionRange(g,J-1);Wn.insert(b,ia);b.setSelectionRange(m+1,J+ta)}else Wn.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:m,value:J}=b;var Y=J.lastIndexOf("\n",g-1)+1;const ia=Wn.findLineEnd(J,m);var ta=b.value.slice(Y,ia);const Ka=ta.replace(/(^|\n)(\t| {1,2})/g,"$1");ta=ta.length-Ka.length;b.setSelectionRange(Y,ia);Wn.insert(b,Ka);Y=(Y=/\t| {1,2}/.exec(J.slice(Y,g)))?Y[0].length:
0;b.setSelectionRange(g-Y,Math.max(g-Y,m-ta))}};Kb=S(611);var qu=b=>b.stopPropagation(),xH=Ho.memo(function({font:b,text:g,color:m,offsetX:J=0,offsetY:Y=0,scale:ia=1,isEditing:ta=!1,onBlur:Ka,onChange:Za}){const db=Ho.useRef(null),sb=Ho.useRef(!1),xb=Ho.useCallback(Sb=>{Za(Br.normalizeText(Sb.currentTarget.value))},[Za]),Wb=Ho.useCallback(Sb=>{if("Escape"!==Sb.key)if("Tab"===Sb.key&&0===g.length)Sb.preventDefault();else{if("Meta"!==Sb.key&&!Sb.metaKey)Sb.stopPropagation();else if("z"===Sb.key&&Sb.metaKey){Sb.shiftKey?
document.execCommand("redo",!1):document.execCommand("undo",!1);Sb.stopPropagation();Sb.preventDefault();return}"Tab"===Sb.key&&(Sb.preventDefault(),Sb.shiftKey?Wn.unindent(Sb.currentTarget):Wn.indent(Sb.currentTarget),null==Za?void 0:Za(Br.normalizeText(Sb.currentTarget.value)))}},[Za]),kc=Ho.useCallback(Sb=>{ta&&(Sb.currentTarget.setSelectionRange(0,0),null==Ka?void 0:Ka())},[Ka]),Ob=Ho.useCallback(Sb=>{ta&&sb.current&&document.activeElement===Sb.currentTarget&&Sb.currentTarget.select()},[ta]),
sc=Ho.useCallback(Sb=>{ta&&Sb.stopPropagation()},[ta]);Ho.useEffect(()=>{ta&&requestAnimationFrame(()=>{sb.current=!0;const Sb=db.current;Sb&&(Sb.focus(),Sb.select())})},[ta,Ka]);const lc=Ho.useRef(null);Ho.useLayoutEffect(()=>{const Sb=lc.current;if(Sb){var rc=Tf(g,b,4);Sb.style.transform=`scale(${ia}, ${ia}) translate(${J}px, ${Y}px)`;Sb.style.width=rc[0]+1+"px";Sb.style.height=rc[1]+1+"px"}},[g,b,Y,J,ia]);return(0,Kb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Kb.jsxs)("div",{className:"tl-text-label-inner-wrapper",
ref:lc,style:{font:b,color:m,pointerEvents:g?"all":"none",userSelect:ta?"text":"none"},children:[ta?(0,Kb.jsx)("textarea",{ref:db,style:{font:b,color:m},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:m,onFocus:Ob,onChange:xb,onKeyDown:Wb,onBlur:kc,onPointerDown:sc,onContextMenu:qu,onCopy:qu,onPaste:qu,
onCut:qu}):g,"​"]})})});Kb=S(611);var ru=class extends rs{constructor(){super(...arguments);Ya(this,"hideSelection",!0);Ya(this,"canEdit",!0);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isEditing:m,onEditingEnd:J})=>{const {stroke:Y,handles:{start:ia,end:ta},opacity:Ka,label:Za,id:db}=this.props,sb=Za||m?Tf(Za,"18px / 1 var(--ls-font-family)",4):[0,0],xb=pe.med(ia.point,ta.point);var Wb=pe.dist(ia.point,ta.point);Wb=Math.max(.5,Math.min(1,Math.max(Wb/(sb[1]+128),Wb/(sb[0]+128))));const kc=
this.getBounds(),Ob=Aw.useMemo(()=>pe.sub(xb,pe.toFixed([kc.width/2,kc.height/2])),[kc,Wb,xb]),sc=Aw.useCallback(lc=>{var Sb;null==(Sb=this.update)?void 0:Sb.call(this,{label:lc})},[Za]);return(0,Kb.jsxs)("div",Ga(Qa({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Kb.jsx)(xH,{font:"18px / 1 var(--ls-font-family)",text:Za,color:Ce(Y,"text"),offsetX:Ob[0],offsetY:Ob[1],scale:Wb,isEditing:m,onChange:sc,onBlur:J}),(0,Kb.jsxs)(no,{opacity:g?.2:Ka,id:db+"_svg",children:[(0,Kb.jsx)(vj,
{id:db,bounds:kc,labelSize:sb,offset:Ob,scale:Wb}),(0,Kb.jsx)("g",{pointerEvents:"none",mask:Za||m?`url(#${db}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));Ya(this,"ReactIndicator",gf(()=>{const {id:b,decorations:g,label:m,strokeWidth:J,handles:{start:Y,end:ia}}=this.props,ta=this.getBounds(),Ka=m?Tf(m,"18px / 1 var(--ls-font-family)",4):[0,0],Za=pe.med(Y.point,ia.point);var db=pe.dist(Y.point,ia.point);db=Math.max(.5,Math.min(1,Math.max(db/(Ka[1]+128),db/(Ka[0]+128))));const sb=
Aw.useMemo(()=>pe.sub(Za,pe.toFixed([ta.width/2,ta.height/2])),[ta,db,Za]);return(0,Kb.jsxs)("g",{children:[(0,Kb.jsx)(vj,{id:b,bounds:ta,labelSize:Ka,offset:sb,scale:db}),(0,Kb.jsx)("path",{mask:m?`url(#${b}_clip)`:"",d:Rj({strokeWidth:J},Y.point,ia.point,null==g?void 0:g.start,null==g?void 0:g.end)}),m&&(0,Kb.jsx)("rect",{x:ta.width/2-Ka[0]/2*db+sb[0],y:ta.height/2-Ka[1]/2*db+sb[1],width:Ka[0]*db,height:Ka[1]*db,rx:4*db,ry:4*db,fill:"transparent"})]})}));Ya(this,"validateProps",b=>Xj(this,b))}getShapeSVGJsx({preview:b}){const {stroke:g,
fill:m,strokeWidth:J,strokeType:Y,decorations:ia,label:ta,handles:{start:Ka,end:Za}}=this.props,db=pe.med(Ka.point,Za.point);return(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)(wH,{style:{stroke:Ce(g,"stroke"),fill:m,strokeWidth:J,strokeType:Y},start:Ka.point,end:Za.point,decorationStart:null==ia?void 0:ia.start,decorationEnd:null==ia?void 0:ia.end}),b&&(0,Kb.jsx)(Kb.Fragment,{children:(0,Kb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${db[0]}, ${db[1]})`,
textAnchor:"middle",fill:Ce(g,"text"),stroke:Ce(g,"text"),children:ta})})]})}};Ya(ru,"id","line");Ya(ru,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});var Dn=S(16),yH=["children"],su="undefined"!==typeof document?Dn.useLayoutEffect:Dn.useEffect,ch=Cc(S(16)),di=S(16),zH=S(25),Ss,pm,AH=
"undefined"!=typeof document?di.useLayoutEffect:di.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(pm||={});var BH=((Ss={})[pm.DEBUG]="debug",Ss[pm.INFO]="log",Ss[pm.WARN]="warn",Ss[pm.ERROR]="error",Ss),cq=sh(function(){var b=mf(pm.ERROR);return{log:mf(function(g,m,J){var Y;void 0===J&&(J=pm.INFO);J>=(null!=(Y=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?Y:b(4))&&console[BH[J]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold",
"color: initial",g,m)}),logLevel:b}},[],{singleton:!0}),En=sh(function(){var b=le(),g=le(),m=mf(0),J=le(),Y=mf(0),ia=le(),ta=le(),Ka=mf(0),Za=mf(0),db=mf(0),sb=mf(0),xb=le(),Wb=le(),kc=mf(!1),Ob=mf(!1);return lg(We(b,Pf(function(sc){return sc.scrollTop})),g),lg(We(b,Pf(function(sc){return sc.scrollHeight})),ta),lg(g,Y),{scrollContainerState:b,scrollTop:g,viewportHeight:ia,headerHeight:Ka,fixedHeaderHeight:Za,fixedFooterHeight:db,footerHeight:sb,scrollHeight:ta,smoothScrollTargetReached:J,react18ConcurrentRendering:Ob,
scrollTo:xb,scrollBy:Wb,statefulScrollTop:Y,deviation:m,scrollingInProgress:kc}},[],{singleton:!0}),Mi={lvl:0},Bw=sh(function(){return{recalcInProgress:mf(!1)}},[],{singleton:!0}),CH={offsetHeight:"height",offsetWidth:"width"},zp=sh(function(b){var g=b[0].log,m=b[1].recalcInProgress;b=le();var J=le(),Y=Ui(J,0),ia=le(),ta=le(),Ka=mf(0),Za=mf([]),db=mf(void 0),sb=mf(void 0),xb=mf(function(rc,Kc){return Mh(rc,CH[Kc])}),Wb=mf(void 0),kc=mf(0),Ob={offsetTree:[],sizeTree:Mi,groupOffsetTree:Mi,lastIndex:0,
lastOffset:0,lastSize:0,groupIndices:[]},sc=Ui(We(b,ah(Za,g,kc),Ff(fi,Ob),cf()),Ob);lg(We(Za,Ef(function(rc){return 0<rc.length}),ah(sc,kc),Pf(function(rc){var Kc=rc[0],Gc=rc[1],Xc=rc[2];rc=Kc.reduce(function($d,Jd,qe){return wa($d,Jd,Yh(Jd,Gc.offsetTree,Xc)||qe)},Mi);return Rg({},Gc,{groupIndices:Kc,groupOffsetTree:rc})})),sc);lg(We(J,ah(sc),Ef(function(rc){return rc[0]<rc[1].lastIndex}),Pf(function(rc){var Kc=rc[1];return[{startIndex:rc[0],endIndex:Kc.lastIndex,size:Kc.lastSize}]})),b);lg(db,sb);
var lc=Ui(We(db,Pf(function(rc){return void 0===rc})),!0);lg(We(sb,Ef(function(rc){return void 0!==rc&&sc(4).sizeTree===Mi}),Pf(function(rc){return[{startIndex:0,endIndex:0,size:rc}]})),b);Ob=fj(We(b,ah(sc),Ff(function(rc,Kc){Kc=Kc[1];return{changed:Kc!==rc.sizes,sizes:Kc}},{changed:!1,sizes:Ob}),Pf(function(rc){return rc.changed})));Wg(We(Ka,Ff(function(rc,Kc){return{diff:rc.prev-Kc,prev:Kc}},{diff:0,prev:0}),Pf(function(rc){return rc.diff})),function(rc){0<rc?(m(0,!0),ia(0,rc)):0>rc&&ta(0,rc)});
Wg(We(Ka,ah(g)),function(rc){0>rc[0]&&(0,rc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ka},pm.ERROR)});g=fj(ia);lg(We(ia,ah(sc),Pf(function(rc){var Kc=rc[0];rc=rc[1];if(0<rc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Fa(rc.sizeTree).reduce(function(Gc,Xc){var $d=Xc.k;Xc=Xc.v;return{ranges:[].concat(Gc.ranges,[{startIndex:Gc.prevIndex,endIndex:$d+Kc-
1,size:Gc.prevSize}]),prevIndex:$d+Kc,prevSize:Xc}},{ranges:[],prevIndex:0,prevSize:rc.lastSize}).ranges})),b);var Sb=fj(We(ta,ah(sc,kc),Pf(function(rc){return Yh(-rc[0],rc[1].offsetTree,rc[2])})));return lg(We(ta,ah(sc,kc),Pf(function(rc){var Kc=rc[0],Gc=rc[1];rc=rc[2];if(0<Gc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Xc=Fa(Gc.sizeTree).reduce(function($d,Jd){return wa($d,Math.max(0,Jd.k+Kc),Jd.v)},Mi);return Rg({},Gc,{sizeTree:Xc},fh(Gc.offsetTree,
0,Xc,rc))})),sc),{data:Wb,totalCount:J,sizeRanges:b,groupIndices:Za,defaultItemSize:sb,fixedItemSize:db,unshiftWith:ia,shiftWith:ta,shiftWithOffset:Sb,beforeUnshiftWith:g,firstItemIndex:Ka,gap:kc,sizes:sc,listRefresh:Ob,statefulTotalCount:Y,trackItemSizes:lc,itemSize:xb}},Lh(cq,Bw),{singleton:!0}),DH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Ts=sh(function(b){function g(){lc&&(lc(),lc=null);rc&&(rc(),rc=null);Sb&&(clearTimeout(Sb),Sb=null);Ka(0,!1)}var m=b[0],
J=m.sizes,Y=m.totalCount,ia=m.listRefresh;m=m.gap;var ta=b[1],Ka=ta.scrollingInProgress,Za=ta.viewportHeight,db=ta.scrollTo,sb=ta.smoothScrollTargetReached,xb=ta.headerHeight,Wb=ta.footerHeight,kc=ta.fixedHeaderHeight;ta=ta.fixedFooterHeight;b=b[2].log;var Ob=le(),sc=mf(0),lc=null,Sb=null,rc=null;return lg(We(Ob,ah(J,Za,Y,sc,xb,Wb,b),ah(m,kc,ta),Pf(function(Kc){var Gc=Kc[0],Xc=Gc[0],$d=Gc[1],Jd=Gc[2],qe=Gc[3],Ye=Gc[4],Ge=Gc[5],Ve=Gc[6],ee=Gc[7],Gd=Kc[1];Gc=Kc[2];Kc=Kc[3];var gd=Kf(Xc),bd=gd.align,
ud=gd.behavior,zd=gd.offset;--qe;gd=Th(gd,$d,qe);Ge=Yh(gd,$d.offsetTree,Gd)+Ge;"end"===bd?(Ge+=Gc+W($d.sizeTree,gd)[1]-Jd+Kc,gd===qe&&(Ge+=Ve)):"center"===bd?Ge+=(Gc+W($d.sizeTree,gd)[1]-Jd+Kc)/2:Ge-=Ye;zd&&(Ge+=zd);var Id=function(ye){g();ye?(ee("retrying to scroll to",{location:Xc},pm.DEBUG),Ob(0,Xc)):ee("list did not change, scroll successful",{},pm.DEBUG)};if(g(),"smooth"===ud){var we=!1;rc=Wg(ia,function(ye){we=we||ye});lc=Fe(sb,function(){Id(we)})}else lc=Fe(We(ia,function(ye){var Ie=setTimeout(function(){ye(!1)},
150);return function(uf){uf&&(ye(!0),clearTimeout(Ie))}}),Id);Sb=setTimeout(function(){g()},1200);Ka(0,!0);return ee("scrolling from index to",{index:gd,top:Ge,behavior:ud},pm.DEBUG),{top:Ge,behavior:ud}})),db),{scrollToIndex:Ob,topListHeight:sc}},Lh(zp,En,cq),{singleton:!0}),EH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Us=sh(function(b){var g=b[0],m=g.scrollContainerState;b=g.scrollTop;var J=g.viewportHeight,Y=g.headerHeight,
ia=g.footerHeight,ta=g.scrollBy;g=mf(!1);var Ka=mf(!0),Za=le(),db=le(),sb=mf(4),xb=mf(0),Wb=Ui(We(Fh(We(hg(b),um(1),kk(!0)),We(hg(b),um(1),kk(!1),Gf(100))),cf()),!1),kc=Ui(We(Fh(We(ta,kk(!0)),We(ta,kk(!1),Gf(200))),cf()),!1);lg(We(Dj(hg(b),hg(xb)),Pf(function(Ob){return Ob[0]<=Ob[1]}),cf()),Ka);lg(We(Ka,gk(50)),db);J=fj(We(Dj(m,hg(J),hg(Y),hg(ia),hg(sb)),Ff(function(Ob,sc){var lc,Sb,rc=sc[0],Kc=rc.scrollTop;rc=rc.scrollHeight;var Gc=sc[1],Xc={viewportHeight:Gc,scrollTop:Kc,scrollHeight:rc};return Kc+
Gc-rc>-sc[4]?(Kc>Ob.state.scrollTop?(lc="SCROLLED_DOWN",Sb=Ob.state.scrollTop-Kc):(lc="SIZE_DECREASED",Sb=Ob.state.scrollTop-Kc||Ob.scrollTopDelta),{atBottom:!0,state:Xc,atBottomBecause:lc,scrollTopDelta:Sb}):{atBottom:!1,notAtBottomBecause:Xc.scrollHeight>Ob.state.scrollHeight?"SIZE_INCREASED":Gc<Ob.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Kc<Ob.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Xc}},EH),cf(function(Ob,sc){return Ob&&Ob.atBottom===sc.atBottom})));
Y=Ui(We(m,Ff(function(Ob,sc){var lc=sc.scrollTop,Sb=sc.scrollHeight;sc=sc.viewportHeight;return 1.01>Math.abs(Ob.scrollHeight-Sb)?{scrollTop:lc,scrollHeight:Sb,jump:0,changed:!1}:Ob.scrollTop!==lc&&1>Sb-(lc+sc)?{scrollHeight:Sb,scrollTop:lc,jump:Ob.scrollTop-lc,changed:!0}:{scrollHeight:Sb,scrollTop:lc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ef(function(Ob){return Ob.changed}),Pf(function(Ob){return Ob.jump})),0);lg(We(J,Pf(function(Ob){return Ob.atBottom})),g);lg(We(g,
gk(50)),Za);ia=mf("down");lg(We(m,Pf(function(Ob){return Ob.scrollTop}),cf(),Ff(function(Ob,sc){return kc(4)?{direction:Ob.direction,prevScrollTop:sc}:{direction:sc<Ob.prevScrollTop?"up":"down",prevScrollTop:sc}},{direction:"down",prevScrollTop:0}),Pf(function(Ob){return Ob.direction})),ia);lg(We(m,gk(50),kk("none")),ia);m=mf(0);return lg(We(Wb,Ef(function(Ob){return!Ob}),kk(0)),m),lg(We(b,gk(100),ah(Wb),Ef(function(Ob){return!!Ob[1]}),Ff(function(Ob,sc){return[Ob[1],sc[0]]},[0,0]),Pf(function(Ob){return Ob[1]-
Ob[0]})),m),{isScrolling:Wb,isAtTop:Ka,isAtBottom:g,atBottomState:J,atTopStateChange:db,atBottomStateChange:Za,scrollDirection:ia,atBottomThreshold:sb,atTopThreshold:xb,scrollVelocity:m,lastJumpDueToItemResize:Y}},Lh(En)),Xq=sh(function(b){var g=b[0].log;b=mf(!1);var m=fj(We(b,Ef(function(J){return J}),cf()));return Wg(b,function(J){J&&g(4)("props updated",{},pm.DEBUG)}),{propsReady:b,didMount:m}},Lh(cq),{singleton:!0}),Cw=sh(function(b){var g=b[0],m=g.sizes,J=g.listRefresh;g=g.defaultItemSize;var Y=
b[1].scrollTop,ia=b[2].scrollToIndex;b=b[3].didMount;var ta=mf(!0),Ka=mf(0);return lg(We(b,ah(Ka),Ef(function(Za){return!!Za[1]}),kk(!1)),ta),Wg(We(Dj(J,b),ah(ta,m,g),Ef(function(Za){var db=Za[1],sb=Za[3];return Za[0][1]&&(Za[2].sizeTree!==Mi||void 0!==sb)&&!db}),ah(Ka)),function(Za){var db=Za[1];setTimeout(function(){Fe(Y,function(){ta(0,!0)});ia(0,db)})}),{scrolledToInitialItem:ta,initialTopMostItemIndex:Ka}},Lh(zp,En,Ts,Xq),{singleton:!0}),FH=sh(function(b){function g(sc){Za(0,{index:"LAST",align:"end",
behavior:sc})}function m(sc){var lc=Fe(Ka,function(Sb){!sc||Sb.atBottom||"SIZE_INCREASED"!==Sb.notAtBottomBecause||Ob||(xb(4)("scrolling to bottom due to increased size",{},pm.DEBUG),g("auto"))});setTimeout(lc,100)}var J=b[0],Y=J.totalCount,ia=J.listRefresh,ta=b[1];J=ta.isAtBottom;var Ka=ta.atBottomState,Za=b[2].scrollToIndex;ta=b[3].scrolledToInitialItem;var db=b[4],sb=db.propsReady;db=db.didMount;var xb=b[5].log;b=b[6].scrollingInProgress;var Wb=mf(!1),kc=le(),Ob=null;return Wg(We(Dj(We(hg(Y),um(1)),
db),ah(hg(Wb),J,ta,b),Pf(function(sc){var lc=sc[0],Sb=lc[0];lc=lc[1]&&sc[3];var rc="auto";lc&&(rc=sc[1],sc=sc[2]||sc[4],rc="function"==typeof rc?Bh(rc(sc)):sc&&Bh(rc),lc=lc&&!!rc);return{totalCount:Sb,shouldFollow:lc,followOutputBehavior:rc}}),Ef(function(sc){return sc.shouldFollow})),function(sc){var lc=sc.totalCount,Sb=sc.followOutputBehavior;Ob&&(Ob(),Ob=null);Ob=Fe(ia,function(){xb(4)("following output to ",{totalCount:lc},pm.DEBUG);g(Sb);Ob=null})}),Wg(We(Dj(hg(Wb),Y,sb),Ef(function(sc){return sc[0]&&
sc[2]}),Ff(function(sc,lc){lc=lc[1];return{refreshed:sc.value===lc,value:lc}},{refreshed:!1,value:0}),Ef(function(sc){return sc.refreshed}),ah(Wb,Y)),function(sc){m(!1!==sc[1])}),Wg(kc,function(){m(!1!==Wb(4))}),Wg(Dj(hg(Wb),Ka),function(sc){var lc=sc[1];sc[0]&&!lc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===lc.notAtBottomBecause&&g("auto")}),{followOutput:Wb,autoscrollToBottom:kc}},Lh(zp,Us,Ts,Cw,Xq,cq,En)),WA=sh(function(b){var g=b[0],m=g.totalCount,J=g.groupIndices;g=g.sizes;var Y=b[1];b=Y.scrollTop;
Y=Y.headerHeight;var ia=le(),ta=le(),Ka=fj(We(ia,Pf(ih)));return lg(We(Ka,Pf(function(Za){return Za.totalCount})),m),lg(We(Ka,Pf(function(Za){return Za.groupIndices})),J),lg(We(Dj(b,g,Y),Ef(function(Za){return Za[1].groupOffsetTree!==Mi}),Pf(function(Za){return W(Za[1].groupOffsetTree,Math.max(Za[0]-Za[2],0),"v")[0]}),cf(),Pf(function(Za){return[Za]})),ta),{groupCounts:ia,topItemsIndexes:ta}},Lh(zp,En)),Dw=sh(function(b){var g=b[0];b=g.scrollTop;var m=g.viewportHeight,J=g.deviation,Y=g.headerHeight,
ia=g.fixedHeaderHeight;g=le();var ta=mf(0),Ka=mf(0),Za=mf(0);b=Ui(We(Dj(hg(b),hg(m),hg(Y),hg(g,Si),hg(Za),hg(ta),hg(ia),hg(J),hg(Ka)),Pf(function(db){var sb=db[0],xb=db[1],Wb=db[2],kc=db[3],Ob=kc[0];kc=kc[1];var sc=db[4],lc=db[6],Sb=db[7],rc=db[8],Kc=sb-Sb;db=db[5]+lc;var Gc=Math.max(Wb-Kc,0),Xc="none",$d="number"==typeof rc?rc:rc.top||0;rc="number"==typeof rc?rc:rc.bottom||0;return Ob-=Sb,kc+=Wb+lc,Ob+(Wb+lc)>sb+db-$d&&(Xc="up"),kc-Sb<sb-Gc+xb+rc&&(Xc="down"),"none"!==Xc?[Math.max(Kc-Wb-Sj(sc,"top",
Xc)-$d,0),Kc-Gc-lc+xb+Sj(sc,"bottom",Xc)+rc]:null}),Ef(function(db){return null!=db}),cf(Si)),[0,0]);return{listBoundary:g,overscan:Za,topListHeight:ta,increaseViewportBy:Ka,visibleRange:b}},Lh(En),{singleton:!0}),XA={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Mr=sh(function(b){var g=b[0],m=g.sizes,J=g.totalCount,Y=g.data,ia=g.firstItemIndex,ta=g.gap,Ka=b[1],Za=b[2],db=Za.visibleRange;g=Za.listBoundary;Za=Za.topListHeight;var sb=b[3],
xb=sb.scrolledToInitialItem,Wb=sb.initialTopMostItemIndex;sb=b[4].topListHeight;var kc=b[5],Ob=b[6].didMount,sc=b[7].recalcInProgress;b=mf([]);var lc=le();lg(Ka.topItemsIndexes,b);m=Ui(We(Dj(Ob,sc,hg(db,Si),hg(J),hg(m),hg(Wb),xb,hg(b),hg(ia),hg(ta),Y),Ef(function(Sb){return Sb[0]&&!Sb[1]}),Pf(function(Sb){var rc=Sb[2],Kc=rc[0],Gc=rc[1];rc=Sb[3];var Xc=Sb[5],$d=Sb[6],Jd=Sb[7],qe=Sb[8],Ye=Sb[9],Ge=Sb[10];Sb=Sb[4];var Ve=Sb.sizeTree,ee=Sb.offsetTree;if(0===rc||0===Kc&&0===Gc)return Rg({},XA,{totalCount:rc});
if(Ve===Mi)return ek(function(uf,nf,Vg){return nf.groupOffsetTree!==Mi?(uf=Wf(uf,nf),[{index:W(nf.groupOffsetTree,uf)[0],size:0,offset:0},{index:uf,size:0,offset:0,data:Vg&&Vg[0]}]):[{index:uf,size:0,offset:0,data:Vg&&Vg[0]}]}("number"==typeof Xc?Xc:"LAST"===Xc.index?rc-1:Xc.index,Sb,Ge),[],rc,Ye,Sb,qe);Xc=[];if(0<Jd.length){var Gd,gd=Jd[0],bd=Jd[Jd.length-1],ud=0;for(Ve=Ul(Fc(Ve,gd,bd));!(Gd=Ve()).done;){var zd=Gd.value;Gd=zd.value;var Id=Math.min(zd.end,bd);for(zd=Math.max(zd.start,gd);zd<=Id;zd++)Xc.push({index:zd,
size:Gd,offset:ud,data:Ge&&Ge[zd]}),ud+=Gd}}if(!$d)return ek([],Xc,rc,Ye,Sb,qe);var we=0<Jd.length?Jd[Jd.length-1]+1:0,ye=function(uf,nf,Vg,Kg){return void 0===Kg&&(Kg=0),0<Kg&&(nf=Math.max(nf,uf[Be(uf,Kg,Bg)].offset)),Nd((Gj=Vg,em=Be(Wh=uf,nf,ej=Ej),Xn=Be(Wh,Gj,ej,em),Wh.slice(em,Xn+1)),pg);var Wh,Gj,ej,em,Xn}(ee,Kc,Gc,we);if(0===ye.length)return null;var Ie=rc-1;return ek(yi([],function(uf){for(var nf,Vg=Ul(ye);!(nf=Vg()).done;){var Kg=nf.value,Wh=Kg.value;nf=Wh.offset;var Gj=Kg.start,ej=Wh.size;
Wh.offset<Kc&&(Wh=(Gj+=Math.floor((Kc-Wh.offset+Ye)/(ej+Ye)))-Kg.start,nf+=Wh*ej+Wh*Ye);Gj<we&&(nf+=(we-Gj)*ej,Gj=we);for(Kg=Math.min(Kg.end,Ie);Gj<=Kg&&!(nf>=Gc);Gj++)uf.push({index:Gj,size:ej,offset:nf,data:Ge&&Ge[Gj]}),nf+=ej+Ye}}),Xc,rc,Ye,Sb,qe)}),Ef(function(Sb){return null!==Sb}),cf()),XA);return lg(We(Y,Ef(function(Sb){return void 0!==Sb}),Pf(function(Sb){return Sb.length})),J),lg(We(m,Pf(function(Sb){return Sb.topListHeight})),sb),lg(sb,Za),lg(We(m,Pf(function(Sb){return[Sb.top,Sb.bottom]})),
g),lg(We(m,Pf(function(Sb){return Sb.items})),lc),Rg({listState:m,topItemsIndexes:b,endReached:fj(We(m,Ef(function(Sb){return 0<Sb.items.length}),ah(J,Y),Ef(function(Sb){var rc=Sb[0].items;return rc[rc.length-1].originalIndex===Sb[1]-1}),Pf(function(Sb){return[Sb[1]-1,Sb[2]]}),cf(Si),Pf(function(Sb){return Sb[0]}))),startReached:fj(We(m,gk(200),Ef(function(Sb){var rc=Sb.items;return 0<rc.length&&rc[0].originalIndex===Sb.topItems.length}),Pf(function(Sb){return Sb.items[0].index}),cf())),rangeChanged:fj(We(m,
Ef(function(Sb){return 0<Sb.items.length}),Pf(function(Sb){Sb=Sb.items;for(var rc=0,Kc=Sb.length-1;"group"===Sb[rc].type&&rc<Kc;)rc++;for(;"group"===Sb[Kc].type&&Kc>rc;)Kc--;return{startIndex:Sb[rc].index,endIndex:Sb[Kc].index}}),cf(xi))),itemsRendered:lc},kc)},Lh(zp,WA,Dw,Cw,Ts,Us,Xq,Bw),{singleton:!0}),GH=sh(function(b){var g=b[0],m=g.sizes,J=g.firstItemIndex,Y=g.data;g=g.gap;var ia=b[1].listState;b=b[2].didMount;var ta=mf(0);return lg(We(b,ah(ta),Ef(function(Ka){return 0!==Ka[1]}),ah(m,J,g,Y),
Pf(function(Ka){var Za=Ka[0][1],db=Ka[1],sb=Ka[2],xb=Ka[3];Ka=Ka[4];var Wb=void 0===Ka?[]:Ka;Ka=0;if(0<db.groupIndices.length)for(var kc,Ob=Ul(db.groupIndices);!((kc=Ob()).done||kc.value-Ka>=Za);)Ka++;Za+=Ka;return ek(Array.from({length:Za}).map(function(sc,lc){return{index:lc,size:0,offset:0,data:Wb[lc]}}),[],Za,xb,db,sb)})),ia),{initialItemCount:ta}},Lh(zp,Mr,Xq),{singleton:!0}),YA=sh(function(b){b=b[0].scrollVelocity;var g=mf(!1),m=le(),J=mf(!1);return lg(We(b,ah(J,g,m),Ef(function(Y){return!!Y[1]}),
Pf(function(Y){var ia=Y[0],ta=Y[1],Ka=Y[2];Y=Y[3];var Za=ta.enter;if(Ka){if((0,ta.exit)(ia,Y))return!1}else if(Za(ia,Y))return!0;return Ka}),cf()),g),Wg(We(Dj(g,b,m),ah(J)),function(Y){var ia=Y[0];Y=Y[1];return ia[0]&&Y&&Y.change&&Y.change(ia[1],ia[2])}),{isSeeking:g,scrollSeekConfiguration:J,scrollVelocity:b,scrollSeekRangeChanged:m}},Lh(Us),{singleton:!0}),HH=sh(function(b){b=b[0].topItemsIndexes;var g=mf(0);return lg(We(g,Ef(function(m){return 0<m}),Pf(function(m){return Array.from({length:m}).map(function(J,
Y){return Y})})),b),{topItemCount:g}},Lh(Mr)),Ew=sh(function(b){var g=b[0],m=g.footerHeight,J=g.headerHeight,Y=g.fixedHeaderHeight;g=g.fixedFooterHeight;var ia=b[1].listState;b=le();m=Ui(We(Dj(m,g,J,Y,ia),Pf(function(ta){var Ka=ta[4];return ta[0]+ta[1]+ta[2]+ta[3]+Ka.offsetBottom+Ka.bottom})),0);return lg(hg(m),b),{totalListHeight:m,totalListHeightChanged:b}},Lh(En,Mr),{singleton:!0}),IH=ym(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),JH=sh(function(b){function g(lc){0<
lc?(J(0,{top:-lc,behavior:"auto"}),ia(0,0)):(ia(0,0),J(0,{top:-lc,behavior:"auto"}))}var m=b[0],J=m.scrollBy,Y=m.scrollTop,ia=m.deviation,ta=m.scrollingInProgress,Ka=b[1];m=Ka.isScrolling;var Za=Ka.isAtBottom,db=Ka.scrollDirection,sb=b[3],xb=sb.beforeUnshiftWith,Wb=sb.shiftWithOffset,kc=sb.sizes;sb=sb.gap;var Ob=b[4].log,sc=b[5].recalcInProgress;b=fj(We(b[2].listState,ah(Ka.lastJumpDueToItemResize),Ff(function(lc,Sb){var rc=lc[1],Kc=Sb[0],Gc=Kc.items,Xc=Kc.totalCount;Kc=Kc.bottom+Kc.offsetBottom;
var $d=0;return lc[2]===Xc&&0<rc.length&&0<Gc.length&&(0===Gc[0].originalIndex&&0===rc[0].originalIndex||0!=($d=Kc-lc[3])&&($d+=Sb[1])),[$d,Gc,Xc,Kc]},[0,[],0,0]),Ef(function(lc){return 0!==lc[0]}),ah(Y,db,ta,Za,Ob),Ef(function(lc){return!lc[3]&&0!==lc[1]&&"up"===lc[2]}),Pf(function(lc){var Sb=lc[0][0];return(0,lc[5])("Upward scrolling compensation",{amount:Sb},pm.DEBUG),Sb})));return Wg(We(b,ah(ia,m)),function(lc){var Sb=lc[0],rc=lc[1];lc[2]&&IH()?ia(0,rc-Sb):g(-Sb)}),Wg(We(Dj(Ui(m,!1),ia,sc),Ef(function(lc){return!lc[0]&&
!lc[2]&&0!==lc[1]}),Pf(function(lc){return lc[1]}),gk(1)),g),lg(We(Wb,Pf(function(lc){return{top:-lc}})),J),Wg(We(xb,ah(kc,sb),Pf(function(lc){var Sb=lc[0];return Sb*lc[1].lastSize+Sb*lc[2]})),function(lc){ia(0,lc);requestAnimationFrame(function(){Zg(J,{top:lc});requestAnimationFrame(function(){ia(0,0);sc(0,!1)})})}),{deviation:ia}},Lh(En,Us,Mr,zp,cq,Bw)),KH=sh(function(b){var g=b[0].totalListHeight,m=b[1].didMount,J=b[2].scrollTo;b=mf(0);return Wg(We(m,ah(b),Ef(function(Y){return 0!==Y[1]}),Pf(function(Y){return{top:Y[1]}})),
function(Y){Fe(We(g,Ef(function(ia){return 0!==ia})),function(){setTimeout(function(){J(0,Y)})})}),{initialScrollTop:b}},Lh(Ew,Xq,En),{singleton:!0}),LH=sh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var m=mf(!1);return{alignToBottom:m,paddingTopAddition:Ui(We(Dj(m,g,b),Ef(function(J){return J[0]}),Pf(function(J){return Math.max(0,J[1]-J[2])}),cf()),0)}},Lh(En,Ew),{singleton:!0}),ZA=sh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var m=le(),J=le(),Y=le(),ia=mf(!1),
ta=mf(void 0);return lg(We(Dj(m,J),Pf(function(Ka){var Za=Ka[0];return{scrollTop:Math.max(0,Za.scrollTop-Ka[1].offsetTop),scrollHeight:Za.scrollHeight,viewportHeight:Za.viewportHeight}})),g),lg(We(b,ah(J),Pf(function(Ka){var Za=Ka[0];return Rg({},Za,{top:Za.top+Ka[1].offsetTop})})),Y),{useWindowScroll:ia,customScrollParent:ta,windowScrollContainerState:m,windowViewportRect:J,windowScrollTo:Y}},Lh(En)),MH=["done","behavior","align"],NH=sh(function(b){var g=b[0],m=g.sizes,J=g.totalCount;g=g.gap;var Y=
b[1],ia=Y.scrollTop,ta=Y.viewportHeight,Ka=Y.headerHeight,Za=Y.fixedHeaderHeight,db=Y.fixedFooterHeight,sb=Y.scrollingInProgress;b=b[2].scrollToIndex;Y=le();return lg(We(Y,ah(m,ta,J,Ka,Za,db,ia),ah(g),Pf(function(xb){var Wb=xb[0],kc=Wb[0],Ob=Wb[1],sc=Wb[2],lc=Wb[3],Sb=Wb[4],rc=Wb[5],Kc=Wb[6];Wb=Wb[7];var Gc=xb[1];xb=kc.done;var Xc=kc.behavior,$d=kc.align,Jd=Di(kc,MH),qe=null;kc=Th(kc,Ob,lc-1);Sb=Yh(kc,Ob.offsetTree,Gc)+Sb+rc;return Sb<Wb+rc?qe=Rg({},Jd,{behavior:Xc,align:null!=$d?$d:"start"}):Sb+
W(Ob.sizeTree,kc)[1]>Wb+sc-Kc&&(qe=Rg({},Jd,{behavior:Xc,align:null!=$d?$d:"end"})),qe?xb&&Fe(We(sb,um(1),Ef(function(Ye){return!1===Ye})),xb):xb&&xb(),qe}),Ef(function(xb){return null!==xb})),b),{scrollIntoView:Y}},Lh(zp,En,Ts,Mr,cq),{singleton:!0}),OH=["listState","topItemsIndexes"],PH=sh(function(b){return Rg({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},Lh(Dw,GH,Xq,YA,Ew,KH,LH,ZA,NH)),$A=sh(function(b){var g=b[0],m=g.totalCount,J=g.sizeRanges,Y=g.fixedItemSize,ia=g.defaultItemSize,ta=g.trackItemSizes,
Ka=g.itemSize,Za=g.data,db=g.firstItemIndex,sb=g.groupIndices,xb=g.statefulTotalCount;g=g.gap;var Wb=b[1],kc=Wb.initialTopMostItemIndex;Wb=Wb.scrolledToInitialItem;var Ob=b[2],sc=b[3],lc=b[4],Sb=lc.listState,rc=lc.topItemsIndexes;lc=Di(lc,OH);var Kc=b[5].scrollToIndex,Gc=b[7].topItemCount,Xc=b[8].groupCounts,$d=b[9];b=b[10];return lg(lc.rangeChanged,$d.scrollSeekRangeChanged),lg(We($d.windowViewportRect,Pf(function(Jd){return Jd.visibleHeight})),Ob.viewportHeight),Rg({totalCount:m,data:Za,firstItemIndex:db,
sizeRanges:J,initialTopMostItemIndex:kc,scrolledToInitialItem:Wb,topItemsIndexes:rc,topItemCount:Gc,groupCounts:Xc,fixedItemHeight:Y,defaultItemHeight:ia,gap:g},sc,{statefulTotalCount:xb,listState:Sb,scrollToIndex:Kc,trackItemSizes:ta,itemSize:Ka,groupIndices:sb},lc,$d,Ob,b)},Lh(zp,Cw,En,FH,Mr,Ts,JH,HH,WA,PH,cq)),aB=ym(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":
"sticky"}),tu=ch.createContext(void 0),bB=ch.createContext(void 0),QH=["placeholder"],RH=["style","children"],SH=["style","children"],TH=sh(function(){var b=mf(function(Za){return"Item "+Za}),g=mf(null),m=mf(function(Za){return"Group "+Za}),J=mf({}),Y=mf(Wm),ia=mf("div"),ta=mf(af),Ka=function(Za,db){return void 0===db&&(db=null),Ui(We(J,Pf(function(sb){return sb[Za]}),cf()),db)};return{context:g,itemContent:b,groupContent:m,components:J,computeItemKey:Y,headerFooterTag:ia,scrollerRef:ta,FooterComponent:Ka("Footer"),
HeaderComponent:Ka("Header"),TopItemListComponent:Ka("TopItemList"),ListComponent:Ka("List","div"),ItemComponent:Ka("Item","div"),GroupComponent:Ka("Group","div"),ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder")}}),UH=sh(function(b){function g(Y,ia,ta){lg(We(Y,ah(J.components),Pf(function(Ka){var Za,db=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+ta+" property is deprecated. Pass components."+ia+" instead."),
Rg({},Ka,((Za={})[ia]=db,Za))})),J.components)}var m=b[0],J=b[1];b={item:Pg(J.itemContent,"Rename the %citem%c prop to %citemContent."),group:Pg(J.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Pg(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Pg(m.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Pg(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:le(),
maxHeightCacheSize:le(),footer:le(),header:le(),HeaderContainer:le(),FooterContainer:le(),ItemContainer:le(),ScrollContainer:le(),GroupContainer:le(),ListContainer:le(),emptyComponent:le(),scrollSeek:le()};return Wg(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),Wg(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
Wg(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Wg(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),Wg(b.scrollSeek,function(Y){var ia=Y.placeholder;
Y=Di(Y,QH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Rg({},(0,J.components)(4),{ScrollSeekPlaceholder:ia});(0,J.components)(0,ia);(0,m.scrollSeekConfiguration)(0,Y)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Rg({},m,J,b)},Lh($A,TH)),VH=function(b){return ch.createElement("div",{style:{height:b.height}})},WH={position:aB(),zIndex:1,overflowAnchor:"none"},XH={overflowAnchor:"none"},cB=ch.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=mj("listState"),m=oo("sizeRanges"),J=mj("useWindowScroll"),Y=mj("customScrollParent"),ia=oo("windowScrollContainerState"),ta=oo("scrollContainerState");J=Y||J?ia:ta;var Ka=mj("itemContent"),
Za=mj("context"),db=mj("groupContent");ia=mj("trackItemSizes");ta=mj("itemSize");var sb=mj("log"),xb=oo("gap");m=bg(m,ta,ia,b?af:J,sb,xb,Y).callbackRef;Y=ch.useState(0);var Wb=Y[0],kc=Y[1];Fw("deviation",function(Gc){Wb!==Gc&&kc(Gc)});Y=mj("EmptyPlaceholder");var Ob=mj("ScrollSeekPlaceholder")||VH;J=mj("ListComponent");var sc=mj("ItemComponent"),lc=mj("GroupComponent"),Sb=mj("computeItemKey"),rc=mj("isSeeking"),Kc=0<mj("groupIndices").length;ia=mj("paddingTopAddition");ia=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ia,paddingBottom:g.offsetBottom,marginTop:Wb};return!b&&0===g.totalCount&&Y?(0,di.createElement)(Y,bj(Y,Za)):(0,di.createElement)(J,Rg({},bj(J,Za),{ref:m,style:ia,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Gc){var Xc=Gc.originalIndex,$d=Sb(Xc+g.firstItemIndex,Gc.data,Za);return rc?(0,di.createElement)(Ob,Rg({},bj(Ob,Za),{key:$d,index:Gc.index,height:Gc.size,type:Gc.type||"item"},"group"===Gc.type?{}:{groupIndex:Gc.groupIndex})):
"group"===Gc.type?(0,di.createElement)(lc,Rg({},bj(lc,Za),{key:$d,"data-index":Xc,"data-known-size":Gc.size,"data-item-index":Gc.index,style:WH}),db(Gc.index)):(0,di.createElement)(sc,Rg({},bj(sc,Za),{key:$d,"data-index":Xc,"data-known-size":Gc.size,"data-item-index":Gc.index,"data-item-group-index":Gc.groupIndex,style:XH}),Kc?Ka(Gc.index,Gc.groupIndex,Gc.data,Za):Ka(Gc.index,Gc.data,Za))}))}),YH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Nr=
{width:"100%",height:"100%",position:"absolute",top:0},ZH={width:"100%",position:aB(),top:0},$H=ch.memo(function(){var b=mj("HeaderComponent"),g=oo("headerHeight"),m=mj("headerFooterTag"),J=zi(function(ia){return g(Mh(ia,"height"))}),Y=mj("context");return b?(0,di.createElement)(m,{ref:J},(0,di.createElement)(b,bj(b,Y))):null}),aI=ch.memo(function(){var b=mj("FooterComponent"),g=oo("footerHeight"),m=mj("headerFooterTag"),J=zi(function(ia){return g(Mh(ia,"height"))}),Y=mj("context");return b?(0,di.createElement)(m,
{ref:J},(0,di.createElement)(b,bj(b,Y))):null}),bI=function(b){b=b.children;var g=(0,di.useContext)(tu),m=oo("viewportHeight"),J=oo("fixedItemHeight"),Y=zi(yh(m,function(ia){return Mh(ia,"height")}));return ch.useEffect(function(){g&&(m(g.viewportHeight),J(g.itemHeight))},[g,m,J]),ch.createElement("div",{style:Nr,ref:Y,"data-viewport-type":"element"},b)},cI=function(b){b=b.children;var g=(0,di.useContext)(tu),m=oo("windowViewportRect"),J=oo("fixedItemHeight"),Y=mj("customScrollParent");Y=yo(m,Y);
return ch.useEffect(function(){g&&(J(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,J]),ch.createElement("div",{ref:Y,style:Nr,"data-viewport-type":"window"},b)},dI=function(b){b=b.children;var g=mj("TopItemListComponent"),m=mj("headerHeight");m=Rg({},ZH,{marginTop:m+"px"});var J=mj("context");return(0,di.createElement)(g||"div",{style:m,context:J},b)},uu=Qh(UH,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ch.memo(function(b){var g=mj("useWindowScroll"),m=0<mj("topItemsIndexes").length,J=mj("customScrollParent"),Y=J||g?cI:bI;return ch.createElement(J||g?gI:fI,Rg({},b),ch.createElement(Y,null,ch.createElement($H,null),ch.createElement(cB,null),ch.createElement(aI,
null)),m&&ch.createElement(dI,null,ch.createElement(cB,{showTopList:!0})))})),eI=uu.Component,oo=uu.usePublisher,mj=uu.useEmitterValue,Fw=uu.useEmitter,fI=Vk({usePublisher:oo,useEmitterValue:mj,useEmitter:Fw}),gI=In({usePublisher:oo,useEmitterValue:mj,useEmitter:Fw}),dB={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},hI={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},eB=Math.round,fB=Math.ceil,vu=Math.floor,Gw=Math.min,Or=Math.max,
iI=sh(function(b){var g=b[0],m=g.overscan,J=g.visibleRange,Y=g.listBoundary,ia=b[1];g=ia.scrollTop;var ta=ia.viewportHeight,Ka=ia.scrollBy,Za=ia.scrollTo,db=ia.smoothScrollTargetReached,sb=ia.scrollContainerState,xb=ia.footerHeight;ia=ia.headerHeight;var Wb=b[2],kc=b[3],Ob=b[4],sc=Ob.propsReady,lc=Ob.didMount,Sb=b[5];Ob=Sb.windowViewportRect;var rc=Sb.windowScrollTo,Kc=Sb.useWindowScroll,Gc=Sb.customScrollParent;Sb=Sb.windowScrollContainerState;b=b[6];var Xc=mf(0),$d=mf(0),Jd=mf(dB),qe=mf({height:0,
width:0}),Ye=mf({height:0,width:0}),Ge=le(),Ve=le(),ee=mf(0),Gd=mf(void 0),gd=mf({row:0,column:0});lg(We(Dj(lc,$d,Gd),Ef(function(bd){return 0!==bd[1]}),Pf(function(bd){return{items:gn(0,bd[1]-1,bd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Jd);lg(We(Dj(hg(Xc),J,hg(gd,so),hg(Ye,function(bd,ud){return bd&&bd.width===ud.width&&bd.height===ud.height}),Gd),ah(qe),Pf(function(bd){var ud=bd[0],zd=ud[0],Id=ud[1],we=Id[0],ye=Id[1],Ie=ud[2],uf=ud[3],nf=ud[4],Vg=bd[1];bd=Ie.row;
ud=uf.height;Id=uf.width;var Kg=Vg.width;if(0===zd||0===Kg)return dB;if(0===Id)return hI;var Wh=Ie.column;Kg=Or(1,vu((Kg+Wh)/(Id+Wh)));we=Kg*vu((we+bd)/(ud+bd));ye=Kg*fB((ye+bd)/(ud+bd))-1;ye=Or(0,Gw(zd-1,ye));we=gn(Gw(ye,Or(0,we)),ye,nf);uf=co(Vg,Ie,uf,we);Ie=uf.top;uf=uf.bottom;zd=fB(zd/Kg);return{items:we,offsetTop:Ie,offsetBottom:zd*ud+(zd-1)*bd-uf,top:Ie,bottom:uf,itemHeight:ud,itemWidth:Id}})),Jd);lg(We(Gd,Ef(function(bd){return void 0!==bd}),Pf(function(bd){return bd.length})),Xc);lg(We(qe,
Pf(function(bd){return bd.height})),ta);lg(We(Dj(qe,Ye,Jd,gd),Pf(function(bd){bd=co(bd[0],bd[3],bd[1],bd[2].items);return[bd.top,bd.bottom]}),cf(Si)),Y);J=fj(We(hg(Jd),Ef(function(bd){return 0<bd.items.length}),ah(Xc),Ef(function(bd){var ud=bd[0].items;return ud[ud.length-1].index===bd[1]-1}),Pf(function(bd){return bd[1]-1}),cf()));Y=fj(We(hg(Jd),Ef(function(bd){bd=bd.items;return 0<bd.length&&0===bd[0].index}),kk(0),cf()));ta=fj(We(hg(Jd),Ef(function(bd){return 0<bd.items.length}),Pf(function(bd){bd=
bd.items;return{startIndex:bd[0].index,endIndex:bd[bd.length-1].index}}),cf(xi)));lg(ta,kc.scrollSeekRangeChanged);lg(We(Ge,ah(qe,Ye,Xc,gd),Pf(function(bd){var ud=bd[1],zd=bd[2],Id=bd[3],we=bd[4],ye=Kf(bd[0]);bd=ye.align;var Ie=ye.behavior,uf=ye.offset;ye=ye.index;"LAST"===ye&&(ye=Id-1);Id=Xl(ud,we,zd,Or(0,ye,Gw(Id-1,ye)));return"end"===bd?Id=eB(Id-ud.height+zd.height):"center"===bd&&(Id=eB(Id-ud.height/2+zd.height/2)),uf&&(Id+=uf),{top:Id,behavior:Ie}})),Za);lc=Ui(We(Jd,Pf(function(bd){return bd.offsetBottom+
bd.bottom})),0);return lg(We(Ob,Pf(function(bd){return{width:bd.visibleWidth,height:bd.visibleHeight}})),qe),Rg({data:Gd,totalCount:Xc,viewportDimensions:qe,itemDimensions:Ye,scrollTop:g,scrollHeight:Ve,overscan:m,scrollBy:Ka,scrollTo:Za,scrollToIndex:Ge,smoothScrollTargetReached:db,windowViewportRect:Ob,windowScrollTo:rc,useWindowScroll:Kc,customScrollParent:Gc,windowScrollContainerState:Sb,deviation:ee,scrollContainerState:sb,footerHeight:xb,headerHeight:ia,initialItemCount:$d,gap:gd},kc,{gridState:Jd,
totalListHeight:lc},Wb,{startReached:Y,endReached:J,rangeChanged:ta,propsReady:sc},b)},Lh(Dw,En,Us,YA,Xq,ZA,cq)),jI=["placeholder"],kI=sh(function(){var b=mf(function(db){return"Item "+db}),g=mf({}),m=mf(null),J=mf("virtuoso-grid-item"),Y=mf("virtuoso-grid-list"),ia=mf(Wm),ta=mf("div"),Ka=mf(af),Za=function(db,sb){return void 0===sb&&(sb=null),Ui(We(g,Pf(function(xb){return xb[db]}),cf()),sb)};return{context:m,itemContent:b,components:g,computeItemKey:ia,itemClassName:J,listClassName:Y,headerFooterTag:ta,
scrollerRef:Ka,FooterComponent:Za("Footer"),HeaderComponent:Za("Header"),ListComponent:Za("List","div"),ItemComponent:Za("Item","div"),ScrollerComponent:Za("Scroller","div"),ScrollSeekPlaceholder:Za("ScrollSeekPlaceholder","div")}}),lI=sh(function(b){function g(Y,ia,ta){lg(We(Y,ah(J.components),Pf(function(Ka){var Za,db=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+ta+" property is deprecated. Pass components."+ia+" instead."),Rg({},Ka,((Za={})[ia]=db,Za))})),J.components)}var m=b[0],J=b[1];
b={item:Pg(J.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:le(),ScrollContainer:le(),ListContainer:le(),emptyComponent:le(),scrollSeek:le()};return Wg(b.scrollSeek,function(Y){var ia=Y.placeholder;Y=Di(Y,jI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Rg({},(0,J.components)(4),{ScrollSeekPlaceholder:ia});(0,J.components)(0,ia);(0,m.scrollSeekConfiguration)(0,
Y)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Rg({},m,J,b)},Lh(iI,kI)),mI=ch.memo(function(){var b=El("gridState"),g=El("listClassName"),m=El("itemClassName"),J=El("itemContent"),Y=El("computeItemKey"),ia=El("isSeeking"),ta=Io("scrollHeight"),Ka=El("ItemComponent"),Za=El("ListComponent"),db=El("ScrollSeekPlaceholder"),sb=El("context"),xb=Io("itemDimensions"),Wb=Io("gap"),kc=El("log"),Ob=zi(function(sc){ta(sc.parentElement.parentElement.scrollHeight);
var lc=sc.firstChild;lc&&xb(lc.getBoundingClientRect());Wb({row:Sm("row-gap",getComputedStyle(sc).rowGap,kc),column:Sm("column-gap",getComputedStyle(sc).columnGap,kc)})});return(0,di.createElement)(Za,Rg({ref:Ob,className:g},bj(Za,sb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(sc){var lc=Y(sc.index,sc.data,sb);return ia?(0,di.createElement)(db,Rg({key:lc},bj(db,sb),{index:sc.index,height:b.itemHeight,width:b.itemWidth})):(0,di.createElement)(Ka,Rg({},bj(Ka,
sb),{className:m,"data-index":sc.index,key:lc}),J(sc.index,sc.data,sb))}))}),nI=ch.memo(function(){var b=El("HeaderComponent"),g=Io("headerHeight"),m=El("headerFooterTag"),J=zi(function(ia){return g(Mh(ia,"height"))}),Y=El("context");return b?(0,di.createElement)(m,{ref:J},(0,di.createElement)(b,bj(b,Y))):null}),oI=ch.memo(function(){var b=El("FooterComponent"),g=Io("footerHeight"),m=El("headerFooterTag"),J=zi(function(ia){return g(Mh(ia,"height"))}),Y=El("context");return b?(0,di.createElement)(m,
{ref:J},(0,di.createElement)(b,bj(b,Y))):null}),pI=function(b){b=b.children;var g=(0,di.useContext)(bB),m=Io("itemDimensions"),J=Io("viewportDimensions"),Y=zi(function(ia){J(ia.getBoundingClientRect())});return ch.useEffect(function(){g&&(J({height:g.viewportHeight,width:g.viewportWidth}),m({height:g.itemHeight,width:g.itemWidth}))},[g,J,m]),ch.createElement("div",{style:Nr,ref:Y},b)},qI=function(b){b=b.children;var g=(0,di.useContext)(bB),m=Io("windowViewportRect"),J=Io("itemDimensions"),Y=El("customScrollParent");
Y=yo(m,Y);return ch.useEffect(function(){g&&(J({height:g.itemHeight,width:g.itemWidth}),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,m,J]),ch.createElement("div",{ref:Y,style:Nr},b)},Hw=Qh(lI,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},ch.memo(function(b){b=Rg({},b);var g=El("useWindowScroll"),m=El("customScrollParent"),J=m||g?qI:pI;return ch.createElement(m||g?sI:rI,Rg({},b),ch.createElement(J,null,ch.createElement(nI,null),ch.createElement(mI,null),ch.createElement(oI,null)))})),Io=Hw.usePublisher,El=Hw.useEmitterValue,gB=Hw.useEmitter,rI=Vk({usePublisher:Io,useEmitterValue:El,useEmitter:gB}),sI=In({usePublisher:Io,useEmitterValue:El,useEmitter:gB}),tI=sh(function(){var b=mf(function(Za){return ch.createElement("td",
null,"Item $",Za)}),g=mf(null),m=mf(null),J=mf(null),Y=mf({}),ia=mf(Wm),ta=mf(af),Ka=function(Za,db){return void 0===db&&(db=null),Ui(We(Y,Pf(function(sb){return sb[Za]}),cf()),db)};return{context:g,itemContent:b,fixedHeaderContent:m,fixedFooterContent:J,components:Y,computeItemKey:ia,scrollerRef:ta,TableComponent:Ka("Table","table"),TableHeadComponent:Ka("TableHead","thead"),TableFooterComponent:Ka("TableFoot","tfoot"),TableBodyComponent:Ka("TableBody","tbody"),TableRowComponent:Ka("TableRow","tr"),
ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder"),FillerRow:Ka("FillerRow")}}),uI=sh(function(b){return Rg({},b[0],b[1])},Lh($A,tI)),vI=function(b){return ch.createElement("tr",null,ch.createElement("td",{style:{height:b.height}}))},wI=function(b){return ch.createElement("tr",null,ch.createElement("td",{style:{height:b.height,padding:0,border:0}}))},xI=ch.memo(function(){var b=Pj("listState"),g=Jo("sizeRanges"),m=Pj("useWindowScroll"),
J=Pj("customScrollParent"),Y=Jo("windowScrollContainerState"),ia=Jo("scrollContainerState");m=J||m?Y:ia;var ta=Pj("itemContent");Y=Pj("trackItemSizes");J=bg(g,Pj("itemSize"),Y,m,Pj("log"),void 0,J);g=J.callbackRef;var Ka=J.ref;J=ch.useState(0);var Za=J[0],db=J[1];Jw("deviation",function(Sb){Za!==Sb&&(Ka.current.style.marginTop=Sb+"px",db(Sb))});Y=Pj("EmptyPlaceholder");var sb=Pj("ScrollSeekPlaceholder")||vI;m=Pj("FillerRow")||wI;J=Pj("TableBodyComponent");var xb=Pj("TableRowComponent"),Wb=Pj("computeItemKey"),
kc=Pj("isSeeking");ia=Pj("paddingTopAddition");var Ob=Pj("firstItemIndex"),sc=Pj("statefulTotalCount"),lc=Pj("context");if(0===sc&&Y)return(0,di.createElement)(Y,bj(Y,lc));Y=b.offsetTop+ia+Za;ia=b.offsetBottom;Y=0<Y?ch.createElement(m,{height:Y,key:"padding-top"}):null;m=0<ia?ch.createElement(m,{height:ia,key:"padding-bottom"}):null;b=b.items.map(function(Sb){var rc=Sb.originalIndex,Kc=Wb(rc+Ob,Sb.data,lc);return kc?(0,di.createElement)(sb,Rg({},bj(sb,lc),{key:Kc,index:Sb.index,height:Sb.size,type:Sb.type||
"item"})):(0,di.createElement)(xb,Rg({},bj(xb,lc),{key:Kc,"data-index":rc,"data-known-size":Sb.size,"data-item-index":Sb.index,style:{overflowAnchor:"none"}}),ta(Sb.index,Sb.data,lc))});return(0,di.createElement)(J,Rg({ref:g,"data-test-id":"virtuoso-item-list"},bj(J,lc)),[Y].concat(b,[m]))}),yI=function(b){b=b.children;var g=(0,di.useContext)(tu),m=Jo("viewportHeight"),J=Jo("fixedItemHeight"),Y=zi(yh(m,function(ia){return Mh(ia,"height")}));return ch.useEffect(function(){g&&(m(g.viewportHeight),J(g.itemHeight))},
[g,m,J]),ch.createElement("div",{style:Nr,ref:Y,"data-viewport-type":"element"},b)},zI=function(b){b=b.children;var g=(0,di.useContext)(tu),m=Jo("windowViewportRect"),J=Jo("fixedItemHeight"),Y=Pj("customScrollParent");Y=yo(m,Y);return ch.useEffect(function(){g&&(J(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,J]),ch.createElement("div",{ref:Y,style:Nr,"data-viewport-type":"window"},b)},Iw=Qh(uI,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ch.memo(function(b){var g=Pj("useWindowScroll"),m=Pj("customScrollParent"),J=Jo("fixedHeaderHeight"),Y=Jo("fixedFooterHeight"),ia=Pj("fixedHeaderContent"),ta=Pj("fixedFooterContent"),Ka=Pj("context");J=zi(yh(J,function(xb){return Mh(xb,
"height")}));var Za=zi(yh(Y,function(xb){return Mh(xb,"height")}));Y=m||g?BI:AI;g=m||g?zI:yI;m=Pj("TableComponent");var db=Pj("TableHeadComponent"),sb=Pj("TableFooterComponent");ia=ia?ch.createElement(db,Rg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:J},bj(db,Ka)),ia()):null;ta=ta?ch.createElement(sb,Rg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Za},bj(sb,Ka)),ta()):null;return ch.createElement(Y,Rg({},b),ch.createElement(g,null,ch.createElement(m,Rg({style:{borderSpacing:0}},
bj(m,Ka)),[ia,ch.createElement(xI,{key:"TableBody"}),ta])))})),Jo=Iw.usePublisher,Pj=Iw.useEmitterValue,Jw=Iw.useEmitter,AI=Vk({usePublisher:Jo,useEmitterValue:Pj,useEmitter:Jw}),BI=In({usePublisher:Jo,useEmitterValue:Pj,useEmitter:Jw}),Fj=Cc(S(16));Kb=S(611);var Vs={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Yq=({type:b,active:g})=>(0,Kb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,Kb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BS:"block-search",PS:"page-search"})[b]}`})}),
CI=gf(({type:b,fill:g,opacity:m,children:J})=>{const Y=Ce(g,"background");return(0,Kb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,Kb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:m,background:"P"===b?Y:`linear-gradient(0deg, var(--ls-highlight-color-${g?g:"default"}), ${Y}`}}),(0,Kb.jsx)("div",{className:"relative",children:J})]})}),hB=(b,g)=>(0,Kb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$\x26")})`,"gi")).map((m,J)=>1===J%2?(0,Kb.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,J)=>(0,Kb.jsx)(Fj.Fragment,{children:m},J))}),DI=(b,g)=>{const {handlers:m}=Fj.useContext(xp),[J,Y]=Fj.useState(null),ia=si(b,200);Fj.useEffect(()=>{let ta=!1;if(0<ia.length){const Ka={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?Ka["pages?"]=!1:"P"===g&&(Ka["blocks?"]=!1);m.search(ia,Ka).then(Za=>{ta||Y(Za)})}else Y(null);return()=>{ta=!0}},[ia,null==m?void 0:m.search]);return J},iB=({active:b,
style:g,icon:m,otherIcon:J,onClick:Y})=>{const [ia,ta]=Fj.useState(!1);Fj.useEffect(()=>{ta(!0);const Ka=setTimeout(()=>{ta(!1)},500);return()=>clearTimeout(Ka)},[b]);return(0,Kb.jsx)("button",{"data-active":b,"data-recently-changed":ia,style:g,className:"tl-circle-button",onMouseDown:Y,children:(0,Kb.jsxs)("div",{className:"tl-circle-button-icons-wrapper","data-icons-count":J?2:1,children:[J&&(0,Kb.jsx)(Fi,{name:J}),(0,Kb.jsx)(Fi,{name:m})]})})},Zq=class extends On{constructor(b={}){var g;super(b);
Ya(this,"hideRotateHandle",!0);Ya(this,"canChangeAspectRatio",!0);Ya(this,"canFlip",!0);Ya(this,"canEdit",!0);Ya(this,"persist",null);Ya(this,"initialHeightCalculated",!0);Ya(this,"getInnerHeight",null);Ya(this,"setCollapsed",m=>ue(this,null,function*(){var J;"B"===this.props.blockType?(this.update({compact:m}),this.canResize[1]=!m,m||(yield lh(),this.onResetBounds()),null==(J=this.persist)?void 0:J.call(this)):(J=this.props.size[1],this.canResize[1]=!m,console.log(m,m?this.getHeaderHeight():this.props.collapsedHeight,
this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!m,collapsed:m,size:[this.props.size[0],m?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:m?J:this.props.collapsedHeight}))}));Ya(this,"setScaleLevel",m=>ue(this,null,function*(){var J;const Y=pe.mul(this.props.size,Vs[null!=m?m:"md"]/Vs[null!=(J=this.props.scaleLevel)?J:"md"]);this.update({scaleLevel:m});yield lh();this.update({size:Y})}));Ya(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==
m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});Ya(this,"onResize",(m,J)=>{var Y;const {bounds:ia,rotation:ta,scale:[Ka,Za]}=J;m=[...this.scale];0>Ka&&(m[0]*=-1);0>Za&&(m[1]*=-1);J=ia.height;this.props.isAutoResizing&&(J=null!=(Y=this.getAutoResizeHeight())?Y:J);return this.update({point:[ia.minX,ia.minY],size:[Math.max(1,ia.width),Math.max(1,J)],scale:m,rotation:ta})});Ya(this,"LogseqQuickSearch",gf(({onChange:m})=>{const [J,
Y]=Fj.useState(Zq.defaultSearchQuery),[ia,ta]=Fj.useState(Zq.defaultSearchFilter),Ka=Fj.useRef(null),{handlers:Za,renderers:db}=Fj.useContext(xp),sb=xg(),xb=Fj.useCallback(Gc=>{var Xc;m(Gc);null==(Xc=Ka.current)?void 0:Xc.blur();Gc&&(Zq.defaultSearchQuery="",Zq.defaultSearchFilter=null)},[]),Wb=Fj.useCallback(Gc=>{const Xc=null==Za?void 0:Za.addNewBlock(Gc);Xc&&(xb(Xc),setTimeout(()=>{var $d,Jd,qe;sb.api.editShape(this);null==(qe=null==(Jd=null==($d=window.logseq)?void 0:$d.api)?void 0:Jd.edit_block)?
void 0:qe.call(Jd,Xc)}));return Xc},[]),kc=Fj.useRef(null),[Ob,sc]=Fj.useState(0),lc=DI(J,ia),[Sb,rc]=Fj.useState("circle-plus");Fj.useEffect(()=>{setTimeout(()=>{var Gc;null==(Gc=Ka.current)?void 0:Gc.focus()})},[ia]);Fj.useEffect(()=>{Zq.defaultSearchQuery=J;Zq.defaultSearchFilter=ia},[J,ia]);const Kc=Fj.useMemo(()=>{var Gc;const Xc=[],$d=null==db?void 0:db.Breadcrumb;if(!$d||!Za)return[];Xc.push({actionIcon:"circle-plus",onChosen:()=>!!Wb(J),element:(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Kb.jsx)(Yq,{active:!0,type:"B"}),0<J.length?(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)("strong",{children:"New whiteboard block:"}),J]}):(0,Kb.jsx)("strong",{children:"New whiteboard block"})]})});(null==(Gc=null==lc?void 0:lc.pages)?0:Gc.some(Jd=>Jd.toLowerCase()===J.toLowerCase()))||!J||Xc.push({actionIcon:"circle-plus",onChosen:()=>{xb(J);return!0},element:(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)(Yq,{active:!0,type:"P"}),(0,Kb.jsx)("strong",
{children:"New page:"}),J]})});0===J.length&&null===ia&&Xc.push({actionIcon:"search",onChosen:()=>{ta("B");return!0},element:(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)(Yq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{ta("P");return!0},element:(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)(Yq,{type:"PS"}),"Search only pages"]})});ia&&"P"!==ia||!lc||!lc.pages||Xc.push(...lc.pages.map(Jd=>({actionIcon:"search",
onChosen:()=>{xb(Jd);return!0},element:(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)(Yq,{type:Za.isWhiteboardPage(Jd)?"WP":"P"}),hB(Jd,J)]})})));ia&&"B"!==ia||!lc||!lc.blocks||Xc.push(...lc.blocks.filter(Jd=>Jd.content&&Jd.uuid).map(({content:Jd,uuid:qe})=>{const Ye=Za.queryBlockByUUID(qe);return{actionIcon:"search",onChosen:()=>{var Ge,Ve,ee;return Ye?(xb(qe),null==(ee=null==(Ve=null==(Ge=window.logseq)?void 0:Ge.api)?void 0:Ve.set_blocks_id)?void 0:ee.call(Ve,[qe]),
!0):!1},element:Ye?(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)(Yq,{type:"B"}),(0,Kb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Kb.jsx)($d,{blockId:qe})})]}),(0,Kb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Kb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),hB(Jd,J)]})]}):(0,Kb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return Xc},[J,ia,lc,null==db?void 0:db.Breadcrumb,Za]);Fj.useEffect(()=>{const Gc=Xc=>{var $d,Jd;let qe=Ob;"ArrowDown"===Xc.key?qe=Math.min(Kc.length-1,Ob+1):"ArrowUp"===Xc.key?qe=Math.max(0,Ob-1):"Enter"===Xc.key?(null==($d=Kc[Ob])?void 0:$d.onChosen(),Xc.stopPropagation(),Xc.preventDefault()):"Backspace"===Xc.key&&0===J.length?ta(null):"Escape"===Xc.key&&xb("");qe!==Ob&&($d=Kc[qe],sc(qe),rc($d.actionIcon),Xc.stopPropagation(),Xc.preventDefault(),(Xc=null==(Jd=kc.current)?void 0:Jd.querySelector(".tl-quick-search-option:nth-child("+
(qe+1)+")"))&&(null==Xc?void 0:Xc.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Gc,!0);return()=>{document.removeEventListener("keydown",Gc,!0)}},[Kc,Ob,J]);return(0,Kb.jsxs)("div",{className:"tl-quick-search",children:[(0,Kb.jsx)(iB,{icon:Sb,onClick:()=>{var Gc;null==(Gc=Kc[Ob])?void 0:Gc.onChosen()}}),(0,Kb.jsxs)("div",{className:"tl-quick-search-input-container",children:[ia&&(0,Kb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Kb.jsx)(Yq,{type:ia}),"B"===
ia?"Search blocks":"Search pages",(0,Kb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>ta(null),children:(0,Kb.jsx)(Fi,{name:"x"})})]}),(0,Kb.jsx)(uw,{ref:Ka,type:"text",value:J,className:"tl-quick-search-input",placeholder:"Create or search your graph...",onChange:Gc=>Y(Gc.target.value),onKeyDown:Gc=>{"Enter"===Gc.key&&xb(J)}})]}),(0,Kb.jsx)("div",{className:"tl-quick-search-options",ref:kc,children:(0,Kb.jsx)(eI,{style:{height:36*Math.min(Math.max(1,Kc.length),12)},totalCount:Kc.length,
itemContent:Gc=>{const {actionIcon:Xc,onChosen:$d,element:Jd}=Kc[Gc];return(0,Kb.jsx)("div",{"data-focused":Gc===Ob,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{rc(Xc);sc(Gc)},onMouseDownCapture:qe=>{$d()&&(qe.stopPropagation(),qe.preventDefault())},children:Jd},Gc)}})})]})}));Ya(this,"PortalComponent",gf(({})=>{const {props:{pageId:m,fill:J,opacity:Y}}=this,{renderers:ia}=Fj.useContext(xp),ta=xg(),Ka=Fj.useRef(null),[,Za]=this.useComponentSize(Ka,this.props.compact?".tl-logseq-cp-container \x3e .single-block":
".tl-logseq-cp-container \x3e .page");if(null==ia||!ia.Page)return null;const {Page:db,Block:sb}=ia;Fj.useEffect(()=>{var xb,Wb;if(this.props.isAutoResizing){const kc=(null!=(Wb=null==(xb=this.getInnerHeight)?void 0:xb.call(this))?Wb:Za)+this.getHeaderHeight();Za&&1<Math.abs(kc-this.props.size[1])&&(this.update({size:[this.props.size[0],kc]}),ta.persist(!0))}},[Za,this.props.isAutoResizing]);Fj.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ta.persist(!0)})},[this.initialHeightCalculated]);
return(0,Kb.jsxs)("div",{ref:Ka,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:[(0,Kb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{background:J?`var(--ls-highlight-color-${J})`:"var(--ls-secondary-background-color)",opacity:Y}}),"B"===this.props.blockType&&this.props.compact?(0,Kb.jsx)(sb,{blockId:m}):(0,Kb.jsx)(db,{pageName:m})]})}));Ya(this,"ReactComponent",gf(m=>{var J;const {events:Y,isErasing:ia,isEditing:ta,
isBinding:Ka}=m,{props:{opacity:Za,pageId:db,fill:sb,scaleLevel:xb,strokeWidth:Wb,size:kc}}=this,Ob=xg(),{renderers:sc,handlers:lc}=Fj.useContext(xp);this.persist=()=>Ob.persist();const Sb=sm(),rc=Ob.selectedIds.has(this.id)&&1===Ob.selectedIds.size,Kc=Ob.isIn("logseq-portal.creating")&&!db,Gc=(Sb||rc&&!ta||"select"!==Ob.selectedTool.id)&&!Kc,Xc=Fj.useCallback(bd=>{Gc||bd.stopPropagation()},[Gc]),$d=1===Ob.selectedShapesArray.length&&Ob.selectedShapesArray.some(bd=>"logseq-portal"===bd.type&&bd.props.id!==
this.props.id&&db&&bd.props.pageId===db),Jd=Vs[null!=xb?xb:"md"];Fj.useEffect(()=>this.props.collapsed&&ta?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[ta,this.props.collapsed]);const qe=Fj.useCallback(bd=>{this.initialHeightCalculated=!1;const ud=wf(bd)?"B":"P";this.update({pageId:bd,size:[400,320],blockType:ud,compact:"B"===ud});Ob.selectTool("select");Ob.history.resume();Ob.history.persist()},
[]),Ye=this.PortalComponent,Ge=this.LogseqQuickSearch;var Ve=Fj.useMemo(()=>{var bd;if(db&&"B"===this.props.blockType)return null==(bd=null==lc?void 0:lc.queryBlockByUUID(db))?void 0:bd.content},[null==lc?void 0:lc.queryBlockByUUID,db]);Ve="B"===this.props.blockType&&"string"!==typeof Ve;const ee=(!this.props.collapsed||ta)&&!Ve;if(null==sc||!sc.Page)return null;const {Breadcrumb:Gd,PageNameLink:gd}=sc;return(0,Kb.jsxs)(tp,Ga(Qa({style:{pointerEvents:"all"}},Y),{children:[Ka&&(0,Kb.jsx)(gg,{mode:"html",
strokeWidth:Wb,size:kc}),(0,Kb.jsx)("div",{onWheelCapture:Xc,onPointerDown:Xc,onPointerUp:Xc,style:{width:"100%",height:"100%",pointerEvents:Sb||!ta&&!rc?"none":"all"},children:Kc?(0,Kb.jsx)(Ge,{onChange:qe}):(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":db,"data-portal-selected":$d,"data-editing":ta,style:{width:`calc(100% / ${Jd})`,height:`calc(100% / ${Jd})`,transform:`scale(${Jd})`,opacity:ia?.2:1},children:[!this.props.compact&&
!Ve&&(0,Kb.jsx)(CI,{type:null!=(J=this.props.blockType)?J:"P",fill:sb,opacity:Za,children:"P"===this.props.blockType?(0,Kb.jsx)(gd,{pageName:db}):(0,Kb.jsx)(Gd,{blockId:db})}),Ve&&(0,Kb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),ee&&(0,Kb.jsx)(Ye,Qa({},m))]}),(0,Kb.jsx)(iB,{active:!!this.collapsed,style:{opacity:rc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:()=>this.setCollapsed(!this.collapsed),otherIcon:"whiteboard-element"})]})})]}))}));Ya(this,"ReactIndicator",
gf(()=>{const m=this.getBounds();return 1===xg().selectedShapesArray.length?null:(0,Kb.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8})}));Ya(this,"validateProps",m=>{var J;if(void 0!==m.size){const Y=Vs[null!=(J=this.props.scaleLevel)?J:"md"];m.size[0]=Math.max(m.size[0],60*Y);m.size[1]=Math.max(m.size[1],40*Y)}return Xj(this,m)});vf(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?
/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [m,J]=Fj.useState([0,0]),Y=xg();Fj.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const ta=()=>{const {width:Za,height:db}=ia.getBoundingClientRect(),sb=pe.div([Za,db],Y.viewport.camera.zoom);J(sb);return sb};ta();this.getInnerHeight=
()=>ta()[1];const Ka=new ResizeObserver(()=>{ta()});Ka.observe(ia);return()=>{Ka.disconnect()}}}return()=>{}},[b,g]);return m}getHeaderHeight(){var b;const g=Vs[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,m;const J=this.getBounds();return(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)("rect",{fill:this.props.fill?`var(--ls-highlight-color-${this.props.fill})`:
"var(--ls-secondary-background-color)",stroke:Ce(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:J.width,rx:8,ry:8,height:J.height}),!this.props.compact&&(0,Kb.jsx)("rect",{fill:this.props.fill?Ce(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:J.width-2,height:38,rx:8,ry:8}),(0,Kb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${J.width/
2}, ${10+J.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}},an=Zq;Ya(an,"id","logseq-portal");Ya(an,"defaultSearchQuery","");Ya(an,"defaultSearchFilter",null);Ya(an,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,
strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Ec([V],an.prototype,"collapsed",1);Ec([rg],an.prototype,"setCollapsed",2);Ec([V],an.prototype,"scaleLevel",1);Ec([rg],an.prototype,"setScaleLevel",2);var {min:Pr,PI:EI}=Math,Ws=EI+1E-4;Kb=S(611);var FI={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},GI={easing:b=>b*b,simulatePressure:!1},Xs=class extends sr{constructor(b={}){super(b);Ya(this,"ReactComponent",gf(({events:g,isErasing:m})=>{const {props:{opacity:J}}=
this;return(0,Kb.jsx)(no,Ga(Qa({},g),{opacity:m?.2:J,children:this.getShapeSVGJsx()}))}));Ya(this,"ReactIndicator",gf(()=>{const {pointsPath:g}=this;return(0,Kb.jsx)("path",{d:g})}));Ya(this,"validateProps",g=>{g=Xj(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});vf(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=Ga(Qa({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?FI:GI),{last:b.isComplete}),
b=Po(b.points,g),g=Uo.getSvgPathFromStroke(sn(b,g));return g}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,strokeType:J}}=this;return(0,Kb.jsx)("path",{pointerEvents:"none",d:b,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Ce(g,"stroke"),fill:Ce(g,"stroke"),strokeDasharray:"dashed"===J?"12 4":void 0})}};Ya(Xs,"id","pencil");Ya(Xs,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",
strokeWidth:2,opacity:1});Ec([V],Xs.prototype,"pointsPath",1);Kb=S(611);var wu=class extends Pp{constructor(){super(...arguments);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isSelected:m})=>{const {offset:[J,Y],props:{stroke:ia,fill:ta,noFill:Ka,strokeWidth:Za,opacity:db,strokeType:sb}}=this,xb=this.getVertices(Za/2).join();return(0,Kb.jsx)(no,Ga(Qa({},b),{opacity:g?.2:db,children:(0,Kb.jsxs)("g",{transform:`translate(${J}, ${Y})`,children:[(0,Kb.jsx)("polygon",{className:m||!Ka?"tl-hitarea-fill":
"tl-hitarea-stroke",points:xb}),(0,Kb.jsx)("polygon",{points:xb,stroke:Ce(ia,"stroke"),fill:Ka?"none":Ce(ta,"background"),strokeWidth:Za,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===sb?"8 2":void 0})]})}))}));Ya(this,"ReactIndicator",gf(()=>{const {offset:[b,g],props:{strokeWidth:m}}=this;return(0,Kb.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(m/2).join()})}));Ya(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return Xj(this,b)})}getShapeSVGJsx(b){const {offset:[g,
m],props:{stroke:J,fill:Y,noFill:ia,strokeWidth:ta,opacity:Ka,strokeType:Za}}=this;b=this.getVertices(ta/2).join();return(0,Kb.jsxs)("g",{transform:`translate(${g}, ${m})`,opacity:Ka,children:[(0,Kb.jsx)("polygon",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,Kb.jsx)("polygon",{points:b,stroke:Ce(J,"stroke"),fill:ia?"none":Ce(Y,"background"),strokeWidth:ta,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Za?"8 2":void 0})]})}};Ya(wu,"id","polygon");Ya(wu,"defaultProps",
{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});var ep=Cc(S(16));Kb=S(611);var HI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Qr=class extends ov{constructor(){super(...arguments);Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isEditing:m,onEditingEnd:J})=>{const {props:{opacity:Y,fontFamily:ia,fontSize:ta,fontWeight:Ka,italic:Za,lineHeight:db,text:sb,stroke:xb,padding:Wb}}=
this,kc=ep.useRef(null),Ob=ep.useRef(!1),sc=ep.useRef(null),lc=ep.useCallback(Xc=>{const {isSizeLocked:$d}=this.props;Xc=Br.normalizeText(Xc.currentTarget.value);$d?this.update({text:Xc,size:this.getAutoSizedBoundingBox({text:Xc})}):this.update({text:Xc})},[]),Sb=ep.useCallback(Xc=>{if("Escape"!==Xc.key)if("Tab"===Xc.key&&0===sb.length)Xc.preventDefault();else{if("Meta"!==Xc.key&&!Xc.metaKey)Xc.stopPropagation();else if("z"===Xc.key&&Xc.metaKey){Xc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",
!1);Xc.stopPropagation();Xc.preventDefault();return}"Tab"===Xc.key&&(Xc.preventDefault(),Xc.shiftKey?Wn.unindent(Xc.currentTarget):Wn.indent(Xc.currentTarget),this.update({text:Br.normalizeText(Xc.currentTarget.value)}))}},[]),rc=ep.useCallback(Xc=>{Xc.currentTarget.setSelectionRange(0,0);null==J?void 0:J()},[J]),Kc=ep.useCallback(Xc=>{m&&Ob.current&&document.activeElement===Xc.currentTarget&&Xc.currentTarget.select()},[m]),Gc=ep.useCallback(Xc=>{m&&Xc.stopPropagation()},[m]);ep.useEffect(()=>{m?
requestAnimationFrame(()=>{Ob.current=!0;const Xc=kc.current;Xc&&(Xc.focus(),Xc.select())}):null==J?void 0:J()},[m,J]);ep.useLayoutEffect(()=>{const {fontFamily:Xc,fontSize:$d,fontWeight:Jd,lineHeight:qe,padding:Ye}=this.props,[Ge,Ve]=Tf(sb,{fontFamily:Xc,fontSize:$d,fontWeight:Jd,lineHeight:qe},Ye);this.update({size:[Ge,Ve]})},[]);return(0,Kb.jsx)(tp,Ga(Qa({},b),{opacity:g?.2:Y,children:(0,Kb.jsx)("div",{ref:sc,className:"tl-text-shape-wrapper","data-hastext":!!sb,"data-isediting":m,style:{fontFamily:ia,
fontStyle:Za?"italic":"normal",fontSize:ta,fontWeight:Ka,padding:Wb,lineHeight:db,color:Ce(xb,"text")},children:m?(0,Kb.jsx)("textarea",{ref:kc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:sb,onFocus:Kc,onChange:lc,onKeyDown:Sb,onBlur:rc,onPointerDown:Gc}):(0,Kb.jsxs)(Kb.Fragment,{children:[sb,"​"]})})}))}));Ya(this,"setScaleLevel",
b=>ue(this,null,function*(){this.update({scaleLevel:b,fontSize:HI[null!=b?b:"md"]});this.onResetBounds()}));Ya(this,"ReactIndicator",gf(()=>{const {props:{borderRadius:b},bounds:g}=this;return(0,Kb.jsx)("rect",{width:g.width,height:g.height,rx:b,ry:b,fill:"transparent"})}));Ya(this,"validateProps",b=>Xj(this,b));Ya(this,"getBounds",()=>{const [b,g]=this.props.point,[m,J]=this.props.size;return{minX:b,minY:g,maxX:b+m,maxY:g+J,width:m,height:J}});Ya(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;
this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});Ya(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:m=this.props.fontFamily,fontSize:J=this.props.fontSize,fontWeight:Y=this.props.fontWeight,lineHeight:ia=this.props.lineHeight,padding:ta=this.props.padding}=b,
[Ka,Za]=Tf(g,{fontFamily:m,fontSize:J,lineHeight:ia,fontWeight:Y},ta);return[Ka,Za]}getShapeSVGJsx(){const {props:{text:b,stroke:g,fontSize:m,fontFamily:J}}=this,Y=this.getBounds();return(0,Kb.jsx)("foreignObject",{width:Y.width,height:Y.height,children:(0,Kb.jsx)("div",{style:{color:Ce(g,"text"),fontSize:m,fontFamily:J},children:b})})}};Ya(Qr,"id","text");Ya(Qr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[100,100],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,
italic:!1,padding:4,fontFamily:"var(--ls-font-family), 'Helvetica Neue', Helvetica, Arial, sans-serif",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Ec([V],Qr.prototype,"scaleLevel",1);Ec([rg],Qr.prototype,"setScaleLevel",2);Kb=S(611);var jB=class extends On{constructor(){super(...arguments);Ya(this,"aspectRatio",480/853);Ya(this,"canChangeAspectRatio",!1);Ya(this,"canFlip",!1);Ya(this,"canEdit",!0);Ya(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:jB.defaultProps.size})});
Ya(this,"ReactComponent",gf(({events:b,isErasing:g,isEditing:m})=>(0,Kb.jsx)(tp,Ga(Qa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,Kb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.embedId?(0,Kb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Kb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",
src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Kb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Kb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Kb.jsxs)("g",{children:[(0,Kb.jsx)("path",
{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Kb.jsx)("g",{children:(0,Kb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Kb.jsxs)("g",{fill:"#fff",children:[(0,Kb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Kb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));Ya(this,"ReactIndicator",gf(()=>{const {props:{size:[b,g]}}=this;return(0,Kb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Ya(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return Xj(this,b)})}get embedId(){var b,g;const m=this.props.url,J=m.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
return null!=(g=null!=(b=null==J?void 0:J[1])?b:m)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,Kb.jsx)(Kb.Fragment,{children:(0,Kb.jsxs)("foreignObject",{width:b.width,height:b.height,children:[(0,Kb.jsx)("img",{src:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,draggable:!1,loading:"lazy",className:"rounded-lg relative pointer-events-none w-full h-full grayscale-[50%]"}),(0,Kb.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",
children:(0,Kb.jsx)("svg",{width:"240",height:"240",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Kb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014","fill-rule":"evenodd","clip-rule":"evenodd"})})})]})}):super.getShapeSVGJsx({})}},$q=jB;Ya($q,"id","youtube");Ya($q,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Ec([V],$q.prototype,"embedId",1);Ec([rg],$q.prototype,"onYoutubeLinkChange",2);var kB=[mu,xw,nu,Rs,ou,pu,ru,Xs,wu,Qr,$q,Wq,bq,an],Kw=class extends kp{constructor(){super(...arguments);Ya(this,"Shape",mu)}};Ya(Kw,"id","box");Ya(Kw,"shortcut",["8"]);var lB=class extends kp{constructor(){super(...arguments);
Ya(this,"Shape",nu)}};Ya(lB,"id","ellipse");var Lw=class extends Gt{};Ya(Lw,"id","erase");Ya(Lw,"shortcut",["5"]);var Mw=class extends qs{constructor(){super(...arguments);Ya(this,"Shape",Rs);Ya(this,"simplify",!0);Ya(this,"simplifyTolerance",.618)}};Ya(Mw,"id","highlighter");Ya(Mw,"shortcut",["4"]);var Nw=class extends Et{constructor(){super(...arguments);Ya(this,"Shape",ru)}};Ya(Nw,"id","line");Ya(Nw,"shortcut",["6"]);var Ow=class extends qs{constructor(){super(...arguments);Ya(this,"Shape",Xs);
Ya(this,"simplify",!1)}};Ya(Ow,"id","pencil");Ya(Ow,"shortcut",["3"]);var mB=class extends kp{constructor(){super(...arguments);Ya(this,"Shape",wu)}};Ya(mB,"id","polygon");var Pw=class extends Ft{constructor(){super(...arguments);Ya(this,"Shape",Qr)}};Ya(Pw,"id","text");Ya(Pw,"shortcut",["7"]);var nB=class extends kp{constructor(){super(...arguments);Ya(this,"Shape",$q)}};Ya(nB,"id","youtube");var oB=class extends Ei{constructor(){super(...arguments);Ya(this,"creatingShape");Ya(this,"offset",[0,0]);
Ya(this,"onEnter",()=>{this.app.history.pause();Dc(()=>{const b=new an({id:Fg(),parentId:this.app.currentPage.id,point:pe.sub(this.app.inputs.originPoint,this.offset),size:an.defaultProps.size});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b]);(.8>this.app.viewport.camera.zoom||1.2<this.app.viewport.camera.zoom)&&this.app.api.resetZoomToCursor()})});Ya(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;
this.app.selectTool("select");break;case "canvas":b.order||this.app.selectTool("select")}});Ya(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Ya(oB,"id","creating");var pB=class extends Ei{constructor(){super(...arguments);Ya(this,"cursor","crosshair");Ya(this,"onPointerDown",
b=>{this.tool.transition("creating")})}};Ya(pB,"id","idle");var Ys=class extends Op{constructor(){super(...arguments);Ya(this,"Shape",an);Ya(this,"onPinch",b=>{this.app.viewport.pinchCamera(b.point,[0,0],b.offset[0])})}};Ya(Ys,"id","logseq-portal");Ya(Ys,"shortcut",["9"]);Ya(Ys,"states",[pB,oB]);Ya(Ys,"initial","idle");var qB=class extends kp{constructor(){super(...arguments);Ya(this,"Shape",bq)}};Ya(qB,"id","youtube");var rB=class extends kp{constructor(){super(...arguments);Ya(this,"Shape",Wq)}};
Ya(rB,"id","iframe");var II=Cc(S(614));Kb=S(611);var JI=new Map(kB.map(b=>[b.id,b])),Qw=class{constructor(b){Ya(this,"shapes");Ya(this,"pageId");Ya(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(m=>{var J=m.type;if(!J)throw Error("No shape type provided.");const Y=JI.get(J);if(!Y)throw Error(`Could not find shape class for ${J}`);return new Y(m)})}generatePreviewJsx(b){var g,m;const J=[...(null!=
(g=this.shapes)?g:[]).map(Za=>Za.getRotatedBounds())];(g=null==b?void 0:b.currentView)&&J.push(g);let Y=rf.getCommonBounds(J);if(!Y)return null;Y=rf.expandBounds(Y,16);Y=b?rf.ensureRatio(Y,4/3):Y;const ia=Za=>[(Za[0]-Y.minX).toFixed(2),(Za[1]-Y.minY).toFixed(2)],[ta,Ka]=g?ia([g.minX,g.minY]):[0,0];return Y&&(0,Kb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":Y.minX.toFixed(2),"data-common-bound-y":Y.minY.toFixed(2),"data-common-bound-width":Y.width.toFixed(2),"data-common-bound-height":Y.height.toFixed(2),
viewBox:[0,0,Y.width,Y.height].join(" "),children:[(0,Kb.jsx)("defs",{children:g&&(0,Kb.jsxs)(Kb.Fragment,{children:[(0,Kb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${ta}, ${Ka})`,width:g.width,height:g.height}),(0,Kb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Kb.jsx)("rect",{width:Y.width,height:Y.height,fill:"white"}),(0,Kb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Kb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(m=
this.shapes)?void 0:m.map(Za=>{var db,sb;const {bounds:xb,props:{rotation:Wb}}=Za,[kc,Ob]=ia([xb.minX,xb.minY]),sc=+(180*((null!=Wb?Wb:0)+(null!=(db=xb.rotation)?db:0))/Math.PI).toFixed(2),[lc,Sb]=[(xb.width/2).toFixed(2),(xb.height/2).toFixed(2)];return(0,Kb.jsx)("g",{transform:[`translate(${kc}, ${Ob})`,`rotate(${sc}, ${lc}, ${Sb})`].join(" "),children:Za.getShapeSVGJsx({assets:null!=(sb=this.assets)?sb:[]})},Za.id)})}),(0,Kb.jsx)("rect",{mask:g?`url(#${this.pageId}-camera-mask)`:"",width:Y.width,
height:Y.height,fill:"transparent"}),g&&(0,Kb.jsx)("use",{id:"minimap-camera-rect","data-x":ta,"data-y":Ka,"data-width":g.width,"data-height":g.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(){const b=this.generatePreviewJsx();return b?II.default.renderToString(b):""}},KI=b=>{var g;if(b=null==(g=b.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:g[1]){g=decodeURIComponent(b);try{var m=JSON.parse(g)}catch(J){m=null}return m}},
LI=[".png",".svg",".jpg",".jpeg",".gif"],MI=[".mp4",".webm",".ogg"],NI=Cc(S(16));Kb=S(611);var OI={ContextBar:mH},PI=[Kw,lB,mB,Lw,Mw,Nw,Ow,Pw,nB,rB,qB,Ys],QI=()=>{const b=St.useRef(null),g=xg();return(0,Kb.jsx)(sH,{collisionRef:b,children:(0,Kb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,Kb.jsx)(XD,{components:OI,children:(0,Kb.jsx)(kF,{})})})})},RI=b=>{var {onPersist:g,model:m}=b;b=bb(b,["onPersist","model"]);const J=So(),Y=eo(),ia=zo(),ta=St.useCallback((Ka,
Za)=>{(0,Gx.default)(Ka.serialized,m)||(null==g?void 0:g(Ka,Za))},[m]);return(0,Kb.jsx)(VD,Ga(Qa({Shapes:kB,Tools:PI,onDrop:J,onPaste:Y,onCanvasDBClick:ia,onPersist:ta,model:m},b),{children:(0,Kb.jsx)(QI,{})}))},SI=function(b){var {renderers:g,handlers:m}=b;b=bb(b,["renderers","handlers"]);const J={renderers:St.useMemo(()=>Object.fromEntries(Object.entries(g).map(([Y,ia])=>[Y,St.memo(ia)])),[]),handlers:m};return(0,Kb.jsx)(xp.Provider,{value:J,children:(0,Kb.jsx)(RI,Qa({},b))})}};
'use strict';var a4c=function(a){return a},b4c=function(a,b){React.useLayoutEffect(function(){var c=a.K?a.K():a.call(null);if($APP.n(c))return c},$APP.Wb(b)?b:$APP.qn.C(b))},c4c=function(a){a=$APP.YD(a);return $APP.Mn.j($APP.jK,a)},d4c=function(a){var b=$APP.Rv.C($APP.fE(a));a=c4c(a);a=$APP.ug.j(function(d){return $APP.B.j(b,$APP.Rv.C($APP.BC.C(d)))},a);var c=$APP.Gh($APP.Mn.j($APP.Vb,$APP.$h.j(function(d){return $APP.Jv.F(d,new $APP.O(null,2,5,$APP.P,[$APP.CC,$APP.Rv],null),null)},a)));a=$APP.Mn.j(function(d){d=
$APP.Rv.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},g4c=function(a,b){b=$APP.Jr.G(b,$APP.E([new $APP.m(null,1,[$APP.Kr,!0],null)]));b=$APP.Nf(b);var c=$APP.H.j(b,e4c),d=$APP.H.j(b,$APP.bH),e=$APP.H.j(b,f4c),f=$APP.mz();return $APP.kn(null,function(){return $APP.kn($APP.n(d)?$APP.L3a(f,a,new $APP.m(null,1,[$APP.vu,100],null)):null,function(g){return $APP.kn($APP.n(c)?$APP.O3a(a,10):null,function(h){return $APP.kn($APP.n(e)?$APP.P3a(a,100):null,function(l){return $APP.dn($APP.yj(new $APP.m(null,
3,[$APP.DE,h,$APP.xC,g,$APP.O1a,l],null)))})})})})},h4c=function(a){return $APP.jn($APP.Cob($APP.mz(),new $APP.O(null,1,5,$APP.P,[$APP.Jr.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.Eob($APP.n(c)?c:b)):null})},p4c=function(a){return new $APP.m(null,8,[$APP.w6,g4c,i4c,function(b){return $APP.yj($APP.yD($APP.mj(b)))},j4c,$APP.FE,k4c,h4c,l4c,a4c,m4c,function(b){var c=$APP.t,d=c.C,e=$APP.py(),f=$APP.fE(a),
g=d4c(a);b=new $APP.m(null,6,[$APP.CC,$APP.Bh($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.P,[$APP.Rv],null)),$APP.oA,e,$APP.HD,$APP.n(b)?b:"",$APP.YC,$APP.Es,$APP.eC,new $APP.m(null,1,[$APP.Ds,$APP.Cs.C?$APP.Cs.C(a):$APP.Cs.call(null,a)],null),$APP.BC,new $APP.m(null,1,[$APP.Ds,a],null)],null);$APP.pC(new $APP.O(null,1,5,$APP.P,[b],null));return d.call(c,e)},n4c,function(b,c){return $APP.lA($APP.mz(),$APP.Rv.C($APP.fE(b)),$APP.ai.C(c))},o4c,function(b){return $APP.n($APP.FE(b))?$APP.iJ(b,null):$APP.fJ(b)}],
null)},i4c=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),m4c=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),f4c=new $APP.M(null,"files?","files?",-1267491104),q4c=new $APP.M(null,"renderers","renderers",-1460292282),r4c=new $APP.M(null,"model","model",331153215),s4c=new $APP.M(null,"PageNameLink","PageNameLink",10142086),t4c=new $APP.M(null,"onMount","onMount",-876858467),l4c=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),u4c=new $APP.M(null,"onPersist","onPersist",
-1848738852),v4c=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),o4c=new $APP.M(null,"redirectToPage","redirectToPage",87147838),k4c=new $APP.M(null,"saveAsset","saveAsset",-668047853),w4c=new $APP.M(null,"Block","Block",-1959785792),n4c=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),x4c=new $APP.M(null,"Page","Page",-1267059506),e4c=new $APP.M(null,"pages?","pages?",-2065014049),j4c=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579);$APP.kda("tldraw");var y4c=$APP.tn(615);var z4c,A4c;$APP.wWc={};z4c=$APP.cS($APP.za(y4c,"App"));$APP.zWc=$APP.za(y4c,"generateJSXFromApp");
A4c=new $APP.m(null,4,[x4c,$APP.dt($APP.ht,function(a){return(0,$APP.MVc)(new $APP.m(null,2,[$APP.lK,$APP.za(a,"pageName"),$APP.Csb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),w4c,$APP.dt($APP.ht,function(a){a=$APP.Hi($APP.za(a,"blockId"));var b=$APP.YKa($APP.XXb);a=b.C?b.C(a):b.call(null,a);return $APP.Rs(a)},null,"frontend.extensions.tldraw/block-cp"),v4c,$APP.dt($APP.ht,function(a){return $APP.Rs($APP.cV(new $APP.m(null,1,[$APP.SY,!0],null),$APP.mz(),$APP.Hi($APP.za(a,"blockId")),new $APP.m(null,
1,[$APP.jOb,!0],null)))},null,"frontend.extensions.tldraw/breadcrumb"),s4c,$APP.dt($APP.ht,function(a){return(0,$APP.KU)(new $APP.m(null,1,[$APP.SY,!0],null),new $APP.m(null,1,[$APP.Ds,$APP.za(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link")],null);
$APP.xWc=$APP.dt($APP.ht,function(a,b){var c=$APP.ytb(a,b),d=$APP.rt(null),e=$APP.D.F(d,0,null),f=$APP.D.F(d,1,null);b4c(function(){if($APP.n($APP.n(e)?a:e)){var g=$APP.za(e,"api");$APP.n(g)&&$APP.n($APP.n(b)?$APP.mj(b):b)&&(g.selectShapes(b),g.zoomToSelection())}return null},new $APP.O(null,3,5,$APP.P,[a,b,e],null));return $APP.n(function(){var g=$APP.Of(a);return $APP.n(g)?$APP.Of($APP.za(c,"currentPageId")):g}())?$APP.W("div",{style:{overscrollBehavior:"none"},onBlur:function(g){g=$APP.za(g,"target").tagName;
var h=new $APP.Ch(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);g=h.C?h.C(g):h.call(null,g);return $APP.n(g)?$APP.nA():null},onWheel:$APP.Nt,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.Rs(function(){var g=new $APP.m(null,5,[q4c,A4c,$APP.Jy,p4c(a),t4c,function(h){return f.C?f.C(h):f.call(null,h)},u4c,function(h){return $APP.mtb(a,$APP.za(h,"serialized"))},r4c,c],null);return z4c.C?z4c.C(g):z4c.call(null,g)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.lb.Th();
}).call(this);